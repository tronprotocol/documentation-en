{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to the java-tron user manual!","text":"<p>java-tron is a TRON client implemented in Java, it provides completely open source code, you can download the java-tron source code on Github. This article will introduce the knowledge related to java-tron. Through this article, you will learn how to use java-tron and how to participate in the development and maintenance of java-tron, including the following parts:</p> <ul> <li>Getting Started With java-tron</li> <li>Using java-tron</li> <li>API</li> <li>Core Protocol</li> <li>For java-tron Developers</li> <li>For Dapp Developers</li> <li>Clients</li> <li>Releases</li> </ul> <p>For other TRON related information, please visit the official website tron.network or the following resource links:</p> <ul> <li>TRON Whitepaper</li> <li>TRON Improvement Proposals (TIPs)</li> <li>TRON Developer Hub</li> </ul>"},{"location":"glossary/","title":"Glossary","text":"<p>energyUsage</p> <p>The Energy conumption of the contract caller in one contract trigger.</p> <p>energyFee</p> <p>The number of TRX burned from the contract caller for Energy conumption in one contract trigger.</p> <p>originEnergyUsage</p> <p>The total Energy conumption of the contract developer in one contract trigger.</p> <p>energyUsageTotal</p> <p>The total Energy conumption of the contract developer and the contract caller combined.</p> <p>Feelimit</p> <p>When the user triggers or create the contract, this is used to set the usage limit of the Energy consumption got from burning TRX or staking TRX, Energy got from staking TRX will be used first.</p> <p>CallValue</p> <p>When the user triggers or create the contract, this can be used to send TRX to the contract.</p> <p>consume_user_resource_percent</p> <p>For a contract, Resource consumption is composed of two parts, one part is afforded by contract developer and the other part is afforded by contract caller. This is the percentage of the two parts in the Resource consumption.</p> <p>origin_energy_limit</p> <p>The usage limit of the Energy consumption of the developer in one  contract trigger, should be greater than 0.</p> <p>net_usage</p> <p>The Bandwidth consumption in one contract trigger.  (NetFee not included)</p> <p>net_fee</p> <p>The TRX burned for Bandwidth consumption in one contract trigger.</p> <p>Bandwidth</p> <p>The Bandwidth Points consumed by a transaction is the size of the byte array in this transaction. If the byte array length of a transaction is 100, then the transaction needs to consume 100 Bandwidth Points.</p> <p>Energy</p> <p>The creation and operation of a smart contract consume CPU resources. It takes time for smart contracts to operate in virtual machines (VMs), and the time consumed in the system is calculated in microseconds. CPU resources are consumed in energy, which means 1 Energy = 1 Microsecond (\u03bcs). If a contract takes 100 \u03bcs to execute in a VM, it needs to consume 100 Energy.</p> <p>TRON Power(TP)</p> <p>1 staked TRX = 1 TP, TP can be used to vote, 1 TP = 1 vote.</p> <p>Super Representative(SR)</p> <p>The current block producing Top 27 nodes.</p>"},{"location":"api/http/","title":"HTTP API","text":"<p>This article introduces FullNode's HTTP APIs and their usage. </p> <p>Note</p> <p>Although TRON has avoided XSS by setting the Content-Type of HTTP APIs to application/json, there are a few APIs that don't have input validation. To better protect user data security, we recommend that you correctly encode any data from APIs before they use it in any UI, especially when the parameter <code>visible</code> equals true.</p> <p>Here is a typical XSS protection method: Encode all data from the APIs in HTML. Use methods such as <code>encodeURIComponent()</code> or <code>escape()</code> to encode the data, which can convert special characters into their HTML entities and prevent them from being interpreted as HTML code by the browser. </p> <p>Please be sure to implement XSS protection for all data from the APIs to ensure the security of user data. We understand that you may need more information about XSS protection. It is recommended that you refer to the following resources: OWASP XSS Prevention Cheat Sheet.</p> <p>First, Let's explain the selection of the address format in the HTTP API: Account addresses of the TRON network have two formats: HexString format and Base58 format. The Fullnode HTTP API supports address format selection. Users can set the address format through the <code>visible</code> parameter. The default value is <code>false</code> and the address format in the parameter and return value is hex format. When <code>visible</code> is set to <code>true</code>, the address format in the parameter and return value are in Base58 format. If the parameter format does not match the <code>visible</code> setting, an error will be reported. Setting method:</p> <ul> <li>For HTTP GET API or the api needs no parameter: by adding <code>visible=true</code> parameter to the url  <pre><code>http://127.0.0.1:8090/wallet/listexchanges?visible=true\n</code></pre></li> <li>For POST API: By adding <code>\"visible\": true</code> parameter to the most out layer of the json <pre><code>curl -X POST http://127.0.0.1:8090/wallet/createtransaction -d\n'{\n    \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n    \"to_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\",\n    \"amount\": 1000000,\n    \"visible\": true\n}'\n</code></pre></li> </ul>"},{"location":"api/http/#fullnode-http-api","title":"Fullnode HTTP API","text":"<p>The FullNode HTTP API is categorized as follows:</p> <ul> <li>Accounts</li> <li>Transfer and Transactions</li> <li>Account Resources</li> <li>Query The Network</li> <li>Smart Contracts</li> <li>TRC-10 Token</li> <li>Voting &amp; SRs</li> <li>Proposals</li> <li>DEX Exchange</li> <li>TRONZ Shielded Smart Contract</li> <li>Pending Pool</li> </ul>"},{"location":"api/http/#accounts","title":"Accounts","text":"<p>The following are the APIs related to on-chain accounts:</p> <ul> <li>wallet/validateaddress</li> <li>wallet/createaccount</li> <li>wallet/getaccount</li> <li>wallet/updateaccount</li> <li>wallet/accountpermissionupdate</li> <li>wallet/getaccountbalance</li> <li>wallet/setaccountid</li> <li>wallet/getaccountbyid</li> </ul>"},{"location":"api/http/#walletvalidateaddress","title":"wallet/validateaddress","text":"<p>Description: Check the validity of the address <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/validateaddress -d '{\"address\": \"4189139CB1387AF85E3D24E212A008AC974967E561\"}'\n</code></pre> Parameters: address</p> <p>Return: the address is correct or not</p>"},{"location":"api/http/#walletcreateaccount","title":"wallet/createaccount","text":"<p>Description: Create an account. Uses an already activated account to create a new account. If the owner_address has enough bandwidth obtained by freezing TRX, then creating an account will only consume bandwidth , otherwise, 0.1 TRX will be burned to pay for bandwidth, and at the same time, 1 TRX will be required to be created. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/createaccount -d '{\"owner_address\":\"41d1e7a6bc354106cb410e65ff8b181c600ff14292\", \"account_address\": \"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\"}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code> Owner address, default hexString</li> <li><code>account_address</code> New address, default hexString</li> <li><code>Permission_id</code> Optional, for multi-signature use</li> </ul> <p>Return: Unsigned transaction object</p>"},{"location":"api/http/#walletgetaccount","title":"wallet/getaccount","text":"<p>Description: Query an account information <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getaccount -d '{\"address\": \"41E552F6487585C2B58BC2C9BB4492BC1F17132CD0\"}'\n</code></pre> Parameters: <code>address</code> - account address</p> <p>Return: Account object</p>"},{"location":"api/http/#walletupdateaccount","title":"wallet/updateaccount","text":"<p>Description: Update the name of an account <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/updateaccount -d '{\"account_name\": \"0x7570646174654e616d6531353330383933343635353139\" ,\"owner_address\":\"41d1e7a6bc354106cb410e65ff8b181c600ff14292\"}'\n</code></pre> Parameters: </p> <ul> <li><code>account_name</code> Account name, default hexString</li> <li><code>owner_address</code> Owner address, default hexString</li> <li><code>Permission_id</code> Optional, for multi-signature use</li> </ul> <p>Return:\u200b\u672a\u200b\u7b7e\u540d\u200b\u7684\u200b\u4fee\u6539\u200b\u540d\u79f0\u200bTransaction</p>"},{"location":"api/http/#walletaccountpermissionupdate","title":"wallet/accountpermissionupdate","text":"<p>Description: Update the account's permission. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/accountpermissionupdate -d\n'{\n    \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n    \"owner\": {\n        \"type\": 0,\n        \"permission_name\": \"owner\",\n        \"threshold\": 1,\n        \"keys\": [{\n            \"address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n            \"weight\": 1\n        }]\n    },\n    \"witness\": {\n        \"type\": 1,\n        \"permission_name\": \"witness\",\n        \"threshold\": 1,\n        \"keys\": [{\n            \"address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n            \"weight\": 1\n        }]\n    },\n    \"actives\": [{\n        \"type\": 2,\n        \"permission_name\": \"active12323\",\n        \"threshold\": 2,\n        \"operations\": \"7fff1fc0033e0000000000000000000000000000000000000000000000000000\",\n        \"keys\": [{\n            \"address\": \"TNhXo1GbRNCuorvYu5JFWN3m2NYr9QQpVR\",\n            \"weight\": 1\n        }, {\n            \"address\": \"TKwhcDup8L2PH5r6hxp5CQvQzZqJLmKvZP\",\n            \"weight\": 1\n        }]\n    }],\n    \"visible\": true}'\n</code></pre> Parameters: </p> <ul> <li>owner_address: Owner address of the account, default hexString</li> <li>owner: Account owner permission</li> <li>witness: Account witness permission, only for witness</li> <li>actives: List of active permissions for the account</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletgetaccountbalance","title":"wallet/getaccountbalance","text":"<p>Description\uff1a Get the account balance in a specific block. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getaccountbalance -d\n'{\n    \"account_identifier\": {\n        \"address\": \"TLLM21wteSPs4hKjbxgmH1L6poyMjeTbHm\"\n    },\n    \"block_identifier\": {\n        \"hash\": \"0000000000010c4a732d1e215e87466271e425c86945783c3d3f122bfa5affd9\",\n        \"number\": 68682\n    },\n    \"visible\": true\n}'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>account_identifier</code>: The account address. </li> <li><code>block_identifier</code>: The block number. </li> </ul> <p>Return: The balance object of the account in a specific block, the <code>block_identifier</code> is the block hash. <pre><code>{\n    \"balance\": 64086449348265042,\n    \"block_identifier\": {\n        \"hash\": \"0000000000010c4a732d1e215e87466271e425c86945783c3d3f122bfa5affd9\",\n        \"number\": 68682\n    }\n}\n</code></pre></p>"},{"location":"api/http/#walletsetaccountid","title":"wallet/setaccountid","text":"<p>Description: To set an account id for an account <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/setaccountid -d '{\n\"owner_address\":\"41a7d8a35b260395c14aa456297662092ba3b76fc0\",\"account_id\":\"6161616162626262\"}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>account_id</code> :Account id, default hexString</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletgetaccountbyid","title":"wallet/getaccountbyid","text":"<p>Description: Query an account information by account id <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getaccountbyid -d\n'{\"account_id\":\"6161616162626262\"}'\n</code></pre> Parameters: <code>account_id</code> Account id, default hexString</p> <p>Return:Account object</p>"},{"location":"api/http/#transfers-and-transactions","title":"Transfers and transactions","text":"<p>The following are transfer and transaction related APIs:</p> <ul> <li>wallet/createtransaction</li> <li>wallet/broadcasttransaction</li> <li>wallet/broadcasthex</li> <li>wallet/getsignweight</li> <li>wallet/getapprovedlist</li> </ul>"},{"location":"api/http/#walletcreatetransaction","title":"wallet/createtransaction","text":"<p>Description: Create a transfer transaction, if to address is not existed, then create the account on the blockchain <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/createtransaction -d '{\"to_address\": \"41e9d79cc47518930bc322d9bf7cddd260a0260a8d\", \"owner_address\": \"41D1E7A6BC354106CB410E65FF8B181C600FF14292\", \"amount\": 1000 }'\n</code></pre> Parameters: </p> <ul> <li><code>to_address</code> To address, default hexString</li> <li><code>owner_address</code> Owner address, default hexString</li> <li><code>amount</code> Transfer amount</li> <li><code>Permission_id</code> Optional, for multi-signature use</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletbroadcasttransaction","title":"wallet/broadcasttransaction","text":"<p>Description: Broadcast transaction after sign <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/broadcasttransaction -d '{\"signature\":[\"97c825b41c77de2a8bd65b3df55cd4c0df59c307c0187e42321dcc1cc455ddba583dd9502e17cfec5945b34cad0511985a6165999092a6dec84c2bdd97e649fc01\"],\"txID\":\"454f156bf1256587ff6ccdbc56e64ad0c51e4f8efea5490dcbc720ee606bc7b8\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"amount\":1000,\"owner_address\":\"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\",\"to_address\":\"41d1e7a6bc354106cb410e65ff8b181c600ff14292\"},\"type_url\":\"type.googleapis.com/protocol.TransferContract\"},\"type\":\"TransferContract\"}],\"ref_block_bytes\":\"267e\",\"ref_block_hash\":\"9a447d222e8de9f2\",\"expiration\":1530893064000,\"timestamp\":1530893006233}}'\n</code></pre> Parameters: Transaction after sign</p> <p>Return:The result of the broadcast</p>"},{"location":"api/http/#walletbroadcasthex","title":"wallet/broadcasthex","text":"<p>Description: Broadcast transaction hex string after sign <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/broadcasthex -d '{\"transaction\":\"0A8A010A0202DB2208C89D4811359A28004098A4E0A6B52D5A730802126F0A32747970652E676F6F676C65617069732E636F6D2F70726F746F636F6C2E5472616E736665724173736574436F6E747261637412390A07313030303030311215415A523B449890854C8FC460AB602DF9F31FE4293F1A15416B0580DA195542DDABE288FEC436C7D5AF769D24206412418BF3F2E492ED443607910EA9EF0A7EF79728DAAAAC0EE2BA6CB87DA38366DF9AC4ADE54B2912C1DEB0EE6666B86A07A6C7DF68F1F9DA171EEE6A370B3CA9CBBB00\"}'\n</code></pre> Parameters: Transaction hex after sign</p> <p>Return: The result of the broadcast</p>"},{"location":"api/http/#walletgetsignweight","title":"wallet/getsignweight","text":"<p>Description: Query the current signatures total weight of a transaction after sign <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getsignweight -d '{\n    \"signature\": [\n        \"e0bd4a60f1b3c89d4da3894d400e7e32385f6dd690aee17fdac4e016cdb294c5128b66f62f3947a7182c015547496eba95510c113bda2a361d811b829343c36501\",\n        \"596ead6439d0f381e67f30b1ed6b3687f2bd53ce5140cdb126cfe4183235804741eeaf79b4e91f251fd7042380a9485d4d29d67f112d5387bc7457b355cd3c4200\"\n    ],\n    \"txID\": \"0ae84a8439f5aa8fd2c458879a4031a7452aebed8e6e99ffbccd26842d4323c4\",\n    \"raw_data\": {\n        \"contract\": [{\n            \"parameter\": {\n                \"value\": {\n                    \"amount\": 1000000,\n                    \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n                    \"to_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\"\n                },\n                \"type_url\": \"type.googleapis.com/protocol.TransferContract\"\n            },\n            \"type\": \"TransferContract\"\n        }],\n        \"ref_block_bytes\": \"163d\",\n        \"ref_block_hash\": \"77ef4ace148b05ba\",\n        \"expiration\": 1555664823000,\n        \"timestamp\": 1555664763418\n    },\n    \"raw_data_hex\": \"0a02163d220877ef4ace148b05ba40d8c5e5a6a32d5a69080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541a7d8a35b260395c14aa456297662092ba3b76fc01215415a523b449890854c8fc460ab602df9f31fe4293f18c0843d2802709af4e1a6a32d\",\n    \"visible\": true}'\n</code></pre> Parameters: Transaction object after sign</p> <p>Return: The current signatures total weight</p>"},{"location":"api/http/#walletgetapprovedlist","title":"wallet/getapprovedlist","text":"<p>Description: Query the signatures list of a transaction after sign <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getapprovedlist -d '{\n    \"signature\": [\n        \"e0bd4a60f1b3c89d4da3894d400e7e32385f6dd690aee17fdac4e016cdb294c5128b66f62f3947a7182c015547496eba95510c113bda2a361d811b829343c36501\",\n        \"596ead6439d0f381e67f30b1ed6b3687f2bd53ce5140cdb126cfe4183235804741eeaf79b4e91f251fd7042380a9485d4d29d67f112d5387bc7457b355cd3c4200\"\n    ],\n    \"txID\": \"0ae84a8439f5aa8fd2c458879a4031a7452aebed8e6e99ffbccd26842d4323c4\",\n    \"raw_data\": {\n        \"contract\": [{\n            \"parameter\": {\n                \"value\": {\n                    \"amount\": 1000000,\n                    \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n                    \"to_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\"\n                },\n                \"type_url\": \"type.googleapis.com/protocol.TransferContract\"\n            },\n            \"type\": \"TransferContract\"\n        }],\n        \"ref_block_bytes\": \"163d\",\n        \"ref_block_hash\": \"77ef4ace148b05ba\",\n        \"expiration\": 1555664823000,\n        \"timestamp\": 1555664763418\n    },\n    \"raw_data_hex\": \"0a02163d220877ef4ace148b05ba40d8c5e5a6a32d5a69080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541a7d8a35b260395c14aa456297662092ba3b76fc01215415a523b449890854c8fc460ab602df9f31fe4293f18c0843d2802709af4e1a6a32d\",\n    \"visible\": true}'\n</code></pre> Parameter: Transaction object after sign</p> <p>Return: The list of the signatures</p>"},{"location":"api/http/#account-resources","title":"Account Resources","text":"<p>The following are account resource related APIs:</p> <ul> <li>wallet/getaccountresource</li> <li>wallet/getaccountnet</li> <li>wallet/unfreezebalance</li> <li>wallet/getdelegatedresource</li> <li>wallet/getdelegatedresourceaccountindex</li> <li>wallet/freezebalancev2</li> <li>wallet/unfreezebalancev2</li> <li>wallet/cancelallunfreezev2</li> <li>wallet/delegateresource</li> <li>wallet/undelegateresource</li> <li>wallet/withdrawexpireunfreeze</li> <li>wallet/getavailableunfreezecount</li> <li>wallet/getcanwithdrawunfreezeamount</li> <li>wallet/getcandelegatedmaxsize</li> <li>wallet/getdelegatedresourcev2</li> <li>wallet/getdelegatedresourceaccountindexv2</li> </ul>"},{"location":"api/http/#walletgetaccountresource","title":"wallet/getaccountresource","text":"<p>Description: Query the resource information of an account <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getaccountresource -d {\"address\" : \"419844f7600e018fd0d710e2145351d607b3316ce9\"}\n</code></pre> Parameters: </p> <ul> <li><code>address</code>: Address, default hexString</li> </ul> <p>Return: The resource information</p>"},{"location":"api/http/#walletgetaccountnet","title":"wallet/getaccountnet","text":"<p>Description: Query the bandwidth information of an account <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getaccountnet -d '{\"address\": \"4112E621D5577311998708F4D7B9F71F86DAE138B5\"}'\n</code></pre> Parameters: <code>address</code> - Address, default hexString</p> <p>Return: Bandwidth information</p>"},{"location":"api/http/#walletfreezebalance","title":"wallet/freezebalance","text":"<p>Description: Stake TRX. This interface has been deprecated, please use FreezeBalanceV2 to stake TRX to obtain resources.</p>"},{"location":"api/http/#walletunfreezebalance","title":"wallet/unfreezebalance","text":"<p>Description: Unstake the TRX that staked during stake1.0 phase. <pre><code>curl -X POST http://127.0.0.1:8090/wallet/unfreezebalance -d '{\n\"owner_address\":\"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n\"resource\": \"BANDWIDTH\",\n\"receiver_address\":\"414332f387585c2b58bc2c9bb4492bc1f17342cd1\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code> Owner address, default hexString</li> <li><code>resource</code> unstake type 'BANDWIDTH' or 'ENERGY'</li> <li><code>receiverAddress</code> The address that will lose the resource, default hexString</li> <li><code>Permission_id</code> Optional, for multi-signature use</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletgetdelegatedresource","title":"wallet/getdelegatedresource","text":"<p>Description: Query the resource delegation information <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getdelegatedresource -d '\n{\n\"fromAddress\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n\"toAddress\": \"41c6600433381c731f22fc2b9f864b14fe518b322f\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>fromAddress</code>: from address, default hexString</li> <li><code>toAddress</code>: to address, default hexString</li> </ul> <p>Return: Resource delegation information</p>"},{"location":"api/http/#walletgetdelegatedresourceaccountindex","title":"wallet/getdelegatedresourceaccountindex","text":"<p>Description: Query the resource delegation by an account during stake1.0 phase. i.e. list all addresses that have delegated resources to an account. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getdelegatedresourceaccountindex -d '\n{\n\"value\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n}'\n</code></pre> Parameters: </p> <ul> <li><code>value</code>: account address</li> </ul> <p>Return:resource delegation index</p>"},{"location":"api/http/#walletfreezebalancev2","title":"wallet/freezebalancev2","text":"<p>Description: Stake TRX</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/freezebalancev2 -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"frozen_balance\": 10000,\n    \"resource\": \"BANDWIDTH\"\n}'\n</code></pre> <p>Parameters:  </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>frozen_balance</code>: TRX stake amount, the unit is sun</li> <li><code>resource</code>: TRX stake type, 'BANDWIDTH' or 'ENERGY'</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletunfreezebalancev2","title":"wallet/unfreezebalancev2","text":"<p>Description: Unstake some TRX staked in Stake2.0, release the corresponding amount of bandwidth or energy, and voting rights (TP)</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/unfreezebalancev2 -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"unfreeze_balance\": 1000000,\n    \"resource\": \"BANDWIDTH\"\n}'\n</code></pre> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>resource</code>: Resource type: 'BANDWIDTH' or 'ENERGY'</li> <li><code>unfreeze_balance</code>: The amount of TRX to unstake, in sun</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#walletcancelallunfreezev2","title":"wallet/cancelallunfreezev2","text":"<p>Description: Cancel unstakings, all unstaked funds still in the waiting period will be re-staked, all unstaked funds that exceeded the 14-day waiting period will be automatically withdrawn to the owner\u2019s account</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/cancelallunfreezev2 -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\"\n}'\n</code></pre> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#walletdelegateresource","title":"wallet/delegateresource","text":"<p>Description: Delegate bandwidth or energy resources to other accounts in Stake2.0.</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/delegateresource -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"receiver_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"balance\": 1000000,\n    \"resource\": \"BANDWIDTH\",\n    \"lock\": false\n}'\n</code></pre> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>receiver_address</code>: Resource receiver address</li> <li><code>balance</code>: Amount of TRX staked for resources to be delegated, unit is sun</li> <li><code>resource</code>: Resource type: 'BANDWIDTH' or 'ENERGY'</li> <li><code>lock</code>: Whether it is locked, if it is set to true, the delegated resources cannot be undelegated within 3 days. When the lock time is not over, if the owner delegates the same type of resources using the lock to the same address, the lock time will be reset to 3 days</li> <li><code>lock_period</code>: lock time,The unit is block interval(3 seconds), indicates the time of how many blocks will be produced from the moment the transaction is executed. Only when lock is true, this field is valid. If the delegate lock period is 1 day, the lock_period is: 28800</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#walletundelegateresource","title":"wallet/undelegateresource","text":"<p>Description: Cancel the delegation of bandwidth or energy resources to other account</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/undelegateresource -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"receiver_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"balance\": 1000000,\n    \"resource\": \"BANDWIDTH\"\n}'\n</code></pre> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>receiver_address</code>: Resource receiver address</li> <li><code>balance</code>: Amount of TRX staked for resources to be delegated, unit is sun</li> <li><code>resource</code>: Resource type: 'BANDWIDTH' or 'ENERGY'</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#walletwithdrawexpireunfreeze","title":"wallet/withdrawexpireunfreeze","text":"<p>Description: Withdraw unfrozen balance in Stake2.0, the user can call this API to get back their funds after executing /wallet/unfreezebalancev2 transaction and waiting N days, N is a network parameter <pre><code>curl -X POST http://127.0.0.1:8090/wallet/withdrawexpireunfreeze -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n}'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Unsigned transaction</p>"},{"location":"api/http/#walletgetavailableunfreezecount","title":"wallet/getavailableunfreezecount","text":"<p>Description:Remaining times of executing unstake operation in Stake2.0 <pre><code>curl -X POST http://127.0.0.1:8090/wallet/getavailableunfreezecount -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> </ul> <p>Return:Remaining times of available unstaking.</p>"},{"location":"api/http/#walletgetcanwithdrawunfreezeamount","title":"wallet/getcanwithdrawunfreezeamount","text":"<p>Description:Query the withdrawable balance at the specified timestamp In Stake2.0 <pre><code>curl -X POST http://127.0.0.1:8090/wallet/getcanwithdrawunfreezeamount -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"timestamp\": 1667977444000,\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>timestamp</code>: query cutoff timestamp, in milliseconds.</li> </ul> <p>Return: withdrawable balance, unit is sun.</p>"},{"location":"api/http/#walletgetcandelegatedmaxsize","title":"wallet/getcandelegatedmaxsize","text":"<p>Description: In Stake2.0, query the amount of delegatable resources share of the specified resource type for an address, unit is sun. <pre><code>curl -X POST http://127.0.0.1:8090/wallet/getcandelegatedmaxsize -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"type\": 0,\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>type</code>: resource type, 0 is bandwidth, 1 is energy</li> </ul> <p>Return:the amount of delegatable resource share, unit is sun.</p>"},{"location":"api/http/#walletgetdelegatedresourcev2","title":"wallet/getdelegatedresourcev2","text":"<p>In Stake2.0, query the detail of resource share delegated from fromAddress to toAddress <pre><code>curl -X POST http://127.0.0.1:8090/wallet/getdelegatedresourcev2 -d\n'{\n  \"fromAddress\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"toAddress\": \"TPswDDCAWhJAZGdHPidFg5nEf8TkNToDX1\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>fromAddress</code>: resource from address, default hexString</li> <li><code>toAddress</code>: resource to address</li> </ul> <p>Return:Resource delegation list</p>"},{"location":"api/http/#walletgetdelegatedresourceaccountindexv2","title":"wallet/getdelegatedresourceaccountindexv2","text":"<p>In Stake2.0, query the resource delegation index by an account. Two lists will return, one is the list of addresses the account has delegated its resources(toAddress), and the other is the list of addresses that have delegated resources to the account(fromAddress). <pre><code>curl -X POST http://127.0.0.1:8090/wallet/getdelegatedresourceaccountindexv2 -d\n'{\n  \"value\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>value</code>: account address</li> </ul> <p>Return:Two lists will return, one is the list of addresses the account has delegated its resources(toAddress), and the other is the list of addresses that have delegated resources to the account(fromAddress).</p>"},{"location":"api/http/#query-the-network","title":"Query The Network","text":"<p>The following is the API for querying data on the chain:</p> <ul> <li>wallet/getnowblock</li> <li>wallet/getblock</li> <li>wallet/getblockbynum</li> <li>wallet/getblockbyid</li> <li>wallet/getblockbylatestnum</li> <li>wallet/getblockbylimitnext</li> <li>wallet/getblockbalance</li> <li>wallet/gettransactionbyid</li> <li>wallet/gettransactioninfobyid</li> <li>wallet/gettransactioncountbyblocknum</li> <li>wallet/gettransactioninfobyblocknum</li> <li>wallet/listnodes</li> <li>wallet/getnodeinfo</li> <li>wallet/getchainparameters</li> <li>wallet/getenergyprices</li> <li>wallet/getbandwidthprices</li> <li>wallet/getburntrx</li> </ul>"},{"location":"api/http/#walletgetnowblock","title":"wallet/getnowblock","text":"<p>Description: Query the latest block information <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getnowblock\n</code></pre> Parameters: N/A</p> <p>Return: The latest block</p>"},{"location":"api/http/#walletgetblock","title":"wallet/getblock","text":"<p>Query block header information or entire block information according to block height or block hash <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblock -d '{\"detail\":false}'\n</code></pre> Parameters: </p> <ul> <li><code>id_or_num</code>: id_or_num can be the block height or the block hash. No value entered means to query the latest block.</li> <li><code>detail</code>: true means query the entire block information include the header and body. false means only query the block header information.</li> </ul> <p>Return: block or block header</p>"},{"location":"api/http/#walletgetblockbynum","title":"wallet/getblockbynum","text":"<p>Description: Query a block information by block height <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblockbynum -d '{\"num\": 1}'\n</code></pre> Parameters: Block height</p> <p>Return: block</p>"},{"location":"api/http/#walletgetblockbyid","title":"wallet/getblockbyid","text":"<p>Description: Query a block information by block id <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblockbyid -d '{\"value\": \"0000000000038809c59ee8409a3b6c051e369ef1096603c7ee723c16e2376c73\"}'\n</code></pre> Parameters: Block id</p> <p>Return: block</p>"},{"location":"api/http/#walletgetblockbylatestnum","title":"wallet/getblockbylatestnum","text":"<p>Description: Query the several latest blocks <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblockbylatestnum -d '{\"num\": 5}'\n</code></pre> Parameters: The number of the blocks expected to return</p> <p>Return:The list of the blocks</p>"},{"location":"api/http/#walletgetblockbylimitnext","title":"wallet/getblockbylimitnext","text":"<p>Description: Query a list of blocks by range <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblockbylimitnext -d '{\"startNum\": 1, \"endNum\": 2}'\n</code></pre> Parameters: </p> <ul> <li><code>startNum</code>: The start block height, itself included</li> <li><code>endNum</code>: The end block height, itself not included</li> </ul> <p>Return: The list of the blocks</p>"},{"location":"api/http/#walletgetblockbalance","title":"wallet/getblockbalance","text":"<p>Description\uff1aGet all balance change operations in a block. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getblockbalance -d\n'{\n    \"hash\": \"000000000000dc2a3731e28a75b49ac1379bcc425afc95f6ab3916689fbb0189\",\n    \"number\": 56362,\n    \"visible\": true\n}'\n</code></pre> Parameters: The hash and block number must match.</p> <p>Return: <pre><code>{\n    \"block_identifier\": {\n        \"hash\": \"000000000000dc2a3731e28a75b49ac1379bcc425afc95f6ab3916689fbb0189\",\n        \"number\": 56362\n    },\n    \"timestamp\": 1530060672000,\n    \"transaction_balance_trace\": [\n        {\n            \"transaction_identifier\": \"e6cabb1833cd1f795eed39d8dd7689eaa70e5bb217611766c74c7aa9feea80df\",\n            \"operation\": [\n                {\n                    \"operation_identifier\": 0,\n                    \"address\": \"TPttBLmFuykRi83y9HxDoEWxTQw6CCcQ4p\",\n                    \"amount\": -100000\n                },\n                {\n                    \"operation_identifier\": 1,\n                    \"address\": \"TLsV52sRDL79HXGGm9yzwKibb6BeruhUzy\",\n                    \"amount\": 100000\n                },\n                {\n                    \"operation_identifier\": 2,\n                    \"address\": \"TPttBLmFuykRi83y9HxDoEWxTQw6CCcQ4p\",\n                    \"amount\": -10000000\n                },\n                {\n                    \"operation_identifier\": 3,\n                    \"address\": \"TMrysg7DbwR1M8xqhpaPdVCHCuWFhw7uk1\",\n                    \"amount\": 10000000\n                }\n            ],\n            \"type\": \"TransferContract\",\n            \"status\": \"SUCCESS\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"api/http/#walletgettransactionbyid","title":"wallet/gettransactionbyid","text":"<p>Description: Query a transaction information by transaction id <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/gettransactionbyid -d '{\"value\": \"d5ec749ecc2a615399d8a6c864ea4c74ff9f523c2be0e341ac9be5d47d7c2d62\"}'\n</code></pre> Parameters: Transaction id</p> <p>Return: Transaction information</p>"},{"location":"api/http/#walletgettransactioninfobyid","title":"wallet/gettransactioninfobyid","text":"<p>Description: Query the transaction fee, block height by transaction id <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/gettransactioninfobyid -d '{\"value\" : \"309b6fa3d01353e46f57dd8a8f27611f98e392b50d035cef213f2c55225a8bd2\"}'\n</code></pre> Parameters: value - Transaction id</p> <p>Return: Transaction fee &amp; block height</p>"},{"location":"api/http/#walletgettransactioncountbyblocknum","title":"wallet/gettransactioncountbyblocknum","text":"<p>Description: Query th the number of transactions in a specific block <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/gettransactioncountbyblocknum -d '{\"num\" : 100}'\n</code></pre> Parameters: num - Block height</p> <p>Return: The number of transactions</p>"},{"location":"api/http/#walletgettransactioninfobyblocknum","title":"wallet/gettransactioninfobyblocknum","text":"<p>Description: Query the list of transaction information in a specific block <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/gettransactioninfobyblocknum -d '{\"num\" : 100}'\n</code></pre> Parameters: num is the Block height</p> <p>Return:The list of transaction information</p>"},{"location":"api/http/#walletlistnodes","title":"wallet/listnodes","text":"<p>Description: Query the list of nodes connected to the ip of the api <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/listnodes\n</code></pre> Parameters: N/A</p> <p>Return: The list of nodes</p>"},{"location":"api/http/#walletgetnodeinfo","title":"wallet/getnodeinfo","text":"<p>Description: Query the current node information <pre><code>curl  http://127.0.0.1:8090/wallet/getnodeinfo\n</code></pre> Return: The node information</p>"},{"location":"api/http/#walletgetchainparameters","title":"wallet/getchainparameters","text":"<p>Description: Query the parameters of the blockchain used for SR(Super Representatives) to create a proposal <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getchainparameters\n</code></pre> Return: The list of parameters of the blockchain</p>"},{"location":"api/http/#walletgetenergyprices","title":"wallet/getenergyprices","text":"<p>Description: Query historical energy unit price <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getenergyprices\n</code></pre> Return: All historical energy unit price information. Each unit price change is separated by a comma. Before the colon is the millisecond timestamp, and after the colon is the energy unit price in sun.</p>"},{"location":"api/http/#walletgetbandwidthprices","title":"wallet/getbandwidthprices","text":"<p>Description: Query historical bandwidth unit price <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getbandwidthprices\n</code></pre> Return: All historical bandwidth unit price information. Each unit price change is separated by a comma. Before the colon is the millisecond timestamp, and after the colon is the bandwidth unit price in sun.</p>"},{"location":"api/http/#walletgetburntrx","title":"wallet/getburntrx","text":"<p>Description: Query the amount of TRX burned due to on-chain transaction fees since No. 54 Committee Proposal took effect <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getburntrx\n</code></pre> Return: Amount of TRX burned, in sun.</p>"},{"location":"api/http/#smart-contracts","title":"Smart Contracts","text":"<p>The following are smart contract related APIs:</p> <ul> <li>wallet/getcontract</li> <li>wallet/getcontractinfo</li> <li>wallet/deploycontract</li> <li>wallet/triggersmartcontract</li> <li>wallet/triggerconstantcontract</li> <li>wallet/updatesetting</li> <li>wallet/updateenergylimit</li> <li>wallet/clearabi</li> <li>wallet/estimateenergy</li> </ul>"},{"location":"api/http/#walletgetcontract","title":"wallet/getcontract","text":"<p>Queries a contract's information from the blockchain, including the bytecode of the contract, ABI, configuration parameters, etc. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getcontract -d '{\"value\":\"4189139CB1387AF85E3D24E212A008AC974967E561\"}'\n</code></pre> Parameters: value - Contract address</p> <p>Return:SmartContract</p>"},{"location":"api/http/#walletgetcontractinfo","title":"wallet/getcontractinfo","text":"<p>Queries a contract's information from the blockchain. The difference from the wallet/getcontract interface is that this interface returns not only the bytecode but also the runtime bytecode of the contract. Compared with bytecode, runtime bytecode does not contain constructor and constructor parameter information. <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getcontractinfo -d '{\"value\":\"4189139CB1387AF85E3D24E212A008AC974967E561\"}'\n</code></pre> Parameters: value - Contract address</p> <p>Return: contract's information</p>"},{"location":"api/http/#walletdeploycontract","title":"wallet/deploycontract","text":"<p>Description: Deploy a smart contract <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/deploycontract -d '{\"abi\":\"[{\\\"constant\\\":false,\\\"inputs\\\":[{\\\"name\\\":\\\"key\\\",\\\"type\\\":\\\"uint256\\\"},{\\\"name\\\":\\\"value\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"set\\\",\\\"outputs\\\":[],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"nonpayable\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":true,\\\"inputs\\\":[{\\\"name\\\":\\\"key\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"get\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"value\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":false,\\\"stateMutability\\\":\\\"view\\\",\\\"type\\\":\\\"function\\\"}]\",\"bytecode\":\"608060405234801561001057600080fd5b5060de8061001f6000396000f30060806040526004361060485763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631ab06ee58114604d5780639507d39a146067575b600080fd5b348015605857600080fd5b506065600435602435608e565b005b348015607257600080fd5b50607c60043560a0565b60408051918252519081900360200190f35b60009182526020829052604090912055565b600090815260208190526040902054905600a165627a7a72305820fdfe832221d60dd582b4526afa20518b98c2e1cb0054653053a844cf265b25040029\",\"parameter\":\"\",\"call_value\":100,\"name\":\"SomeContract\",\"consume_user_resource_percent\":30,\"fee_limit\":10,\"origin_energy_limit\": 10,\"owner_address\":\"41D1E7A6BC354106CB410E65FF8B181C600FF14292\"}'\n</code></pre> Parameters: </p> <ul> <li><code>abi</code>:abi</li> <li><code>bytecode</code>:bytecode\uff0chexString</li> <li><code>parameter</code>:The list of the parameters of the constructor, It should be converted hexString after encoded according to ABI encoder. If constructor has no parameter, this can be optional</li> <li><code>consume_user_resource_percent</code>: Consume user's resource percentage. It should be an integer between [0, 100]. if 0, means it does not consume user's resource until the developer's resource has been used up</li> <li><code>fee_limit</code>: The maximum TRX burns for resource consumption</li> <li><code>call_value</code>: The TRX transfer to the contract for each call</li> <li><code>owner_address</code>:Owner address of the contract, default hexString</li> <li><code>name</code>:Contract name</li> <li><code>origin_energy_limit</code>: The maximum resource consumption of the creator in one execution or creation</li> <li><code>call_token_value</code>: The amount of trc10 token transfer to the contract for each call (Optional)</li> <li><code>token_id</code>:The id of trc10 token transfer to the contract (Optional)</li> <li><code>Permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#wallettriggersmartcontract","title":"wallet/triggersmartcontract","text":"<p>Description: Trigger smart contract <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/triggersmartcontract -d\n'{\n    \"contract_address\": \"4189139CB1387AF85E3D24E212A008AC974967E561\",\n    \"function_selector\": \"set(uint256,uint256)\",\n    \"parameter\": \"00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002\",\n    \"fee_limit\": 10,\n    \"call_value\": 100,\n    \"owner_address\": \"41D1E7A6BC354106CB410E65FF8B181C600FF14292\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>contract_address</code>: Contract address, default hexString</li> <li><code>function_selector</code>: Function call, must not leave a blank space</li> <li><code>parameter</code>: The parameter passed to 'function_selector', the format must match with the VM's requirement. You can use a js tool provided by remix to convert a parameter like [1,2] to the format that VM requires</li> <li><code>data</code>: The data for interacting with smart contracts, including the contract function and parameters. You can choose to use this field, or you can choose to use <code>function_selector</code> and <code>parameter</code> for contract interaction. When both of <code>data</code> and <code>function_selector</code> exist, <code>function_selector</code> is preferred</li> <li><code>fee_limit</code>: The maximum TRX burns for resource consumption</li> <li><code>call_value</code>: The TRX transfer to the contract for each call</li> <li><code>call_token_value</code>: The amount of  trc10 token transfer to the contract for each call</li> <li><code>token_id</code>: The id of trc10 token transfer to the contract</li> <li><code>owner_address</code>: Owner address that triggers the contract, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return:Unsigned transaction</p>"},{"location":"api/http/#wallettriggerconstantcontract","title":"wallet/triggerconstantcontract","text":"<p>Description: Trigger the constant of the smart contract, the transaction is off the blockchain <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/triggerconstantcontract -d\n'{\n    \"contract_address\": \"4189139CB1387AF85E3D24E212A008AC974967E561\",\n    \"function_selector\": \"set(uint256,uint256)\",\n    \"parameter\": \"00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002\",\n    \"call_value\": 100,\n    \"owner_address\": \"41D1E7A6BC354106CB410E65FF8B181C600FF14292\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>contract_address</code>: Smart contract address, default hexString</li> <li><code>function_selector</code>:  Function call, must not leave a blank space</li> <li><code>parameter</code>: The parameter passed to 'function_selector', the format must match with the VM's requirement. You can use a hs tool provided by remix to convert a parameter like [1,2] to the format that VM requires</li> <li><code>data</code>: The data for interacting with smart contracts, including the contract function and parameters. You can choose to use this field, or you can choose to use <code>function_selector</code> and <code>parameter</code> for contract interaction. When both of <code>data</code> and <code>function_selector</code> exist, <code>function_selector</code> is preferred</li> <li><code>call_value</code>: The TRX transfer to the contract for each call</li> <li><code>owner_address</code>: Owner address that triggers the contract, default hexString</li> <li><code>call_token_value</code>: The amount of  trc10 token transfer to the contract for each call</li> <li><code>token_id</code>: The id of trc10 token transfer to the contract</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of TRX in the parameters is SUN</p>"},{"location":"api/http/#walletupdatesetting","title":"wallet/updatesetting","text":"<p>Description: Update the consume_user_resource_percent parameter of a smart contract <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/updatesetting -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"contract_address\": \"41c6600433381c731f22fc2b9f864b14fe518b322f\",\n    \"consume_user_resource_percent\": 7\n}'\n</code></pre></p> <ul> <li><code>owner_address</code>:Owner address of the smart contract, default hexString</li> <li><code>contract_address</code>:Smart contract address, default hexString</li> <li><code>consume_user_resource_percent</code>:Consume user's resource percentage</li> <li><code>Permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletupdateenergylimit","title":"wallet/updateenergylimit","text":"<p>Description: Update the origin_energy_limit parameter of a smart contract <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/updateenergylimit -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"contract_address\": \"41c6600433381c731f22fc2b9f864b14fe518b322f\",\n    \"origin_energy_limit\": 7\n}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code>: Owner address of the smart contract, default hexString</li> <li><code>contract_address</code>: Smart contract address, default hexString</li> <li><code>origin_energy_limit</code>: The maximum resource consumption of the creator in one execution or creation</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletclearabi","title":"wallet/clearabi","text":"<p>Description: To clear the abi of a smart contract <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/clearabi -d\n'{\n    \"owner_address\": \"41a7d8a35b260395c14aa456297662092ba3b76fc0\",\n    \"contract_address\": \"417bcb781f4743afaacf9f9528f3ea903b3782339f\"\n}'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>:Owner address of the smart contract</li> <li><code>contract_address</code>: Smart contract address, default hexString</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletestimateenergy","title":"wallet/estimateenergy","text":"<p>Estimate the energy required for the successful execution of smart contract transactions <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/estimateenergy -d '{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"contract_address\": \"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs\",\n  \"function_selector\": \"transfer(address,uint256)\",\n  \"parameter\": \"00000000000000000000004115208EF33A926919ED270E2FA61367B2DA3753DA0000000000000000000000000000000000000000000000000000000000000032\",\n  \"visible\": true\n}'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>contract_address</code> : Smart contract address. If visible=true, use base58check format, otherwise use hex format.</li> <li><code>function_selector</code>: Function call, must not be left blank.</li> <li><code>parameter</code>: Parameter encoding needs to be in accordance with the ABI rules, the rules are more complicated, users can use the ethers library to encode</li> <li><code>data</code>: The data for interacting with smart contracts, including the contract function and parameters. You can choose to use this field, or you can choose to use <code>function_selector</code> and <code>parameter</code> for contract interaction. When both of <code>data</code> and <code>function_selector</code> exist, <code>function_selector</code> is preferred</li> <li><code>call_value</code>: The TRX transfer to the contract for each call</li> <li><code>owner_address</code>:Owner address that triggers the contract. If visible=true, use base58check format, otherwise use hex </li> <li><code>call_token_value</code>: The amount of  trc10 token transfer to the contract for each call</li> <li><code>token_id</code>: The id of trc10 token transfer to the contract</li> </ul> <p>Return:Estimated the energy value</p>"},{"location":"api/http/#trc10-token","title":"TRC10 token","text":"<p>The following are TRC10 token-related APIs:</p> <ul> <li>wallet/getassetissuebyaccount</li> <li>wallet/getassetissuebyname</li> <li>wallet/getassetissuelistbyname</li> <li>wallet/getassetissuebyid</li> <li>wallet/getassetissuelist</li> <li>wallet/getpaginatedassetissuelist</li> <li>wallet/transferasset</li> <li>wallet/participateassetissue</li> <li>wallet/createassetissue</li> <li>wallet/unfreezeasset</li> <li>wallet/updateasset</li> </ul>"},{"location":"api/http/#walletgetassetissuebyaccount","title":"wallet/getassetissuebyaccount","text":"<p>Description: Query the token issue information of an account <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getassetissuebyaccount -d\n'{\n    \"address\": \"41F9395ED64A6E1D4ED37CD17C75A1D247223CAF2D\"\n}'\n</code></pre></p> <p>Parameter address: Token issuer's address, default hexString</p> <p>Return: Token object</p>"},{"location":"api/http/#walletgetassetissuebyname","title":"wallet/getassetissuebyname","text":"<p>Description: Query a token by token name <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getassetissuebyname -d\n'{\n    \"value\": \"44756354616E\"\n}'\n</code></pre></p> <p>Parameter value: Token name, default hexString</p> <p>Return: Token object</p>"},{"location":"api/http/#walletgetassetissuelistbyname","title":"wallet/getassetissuelistbyname","text":"<p>Description: Query the list of tokens by name <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getassetissuelistbyname -d\n'{\n    \"value\": \"44756354616E\"\n}'\n</code></pre></p> <p>Parameter value: Token name, default hexString</p> <p>Return: The list of tokens</p>"},{"location":"api/http/#walletgetassetissuebyid","title":"wallet/getassetissuebyid","text":"<p>Description: Query a token by token id <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getassetissuebyid -d\n'{\n    \"value\": \"1000001\"\n}'\n</code></pre></p> <p>Parameter value: Token id</p> <p>Return: Token object</p>"},{"location":"api/http/#walletgetassetissuelist","title":"wallet/getassetissuelist","text":"<p>Description: Query the list of all the tokens <pre><code>$ curl -X GET  http://127.0.0.1:8090/wallet/getassetissuelist\n</code></pre></p> <p>Parameter: No parameter</p> <p>Return: The list of all the tokens</p>"},{"location":"api/http/#walletgetpaginatedassetissuelist","title":"wallet/getpaginatedassetissuelist","text":"<p>Description: Query the list of all the tokens by pagination <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getpaginatedassetissuelist -d\n'{\n    \"offset\": 0,\n    \"limit\": 10\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>offset</code>: The index of the start token</li> <li><code>limit</code>: The amount of tokens per page</li> </ul> <p>Return: The list of tokens by pagination</p>"},{"location":"api/http/#wallettransferasset","title":"wallet/transferasset","text":"<p>Description: Transfer token <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/transferasset -d\n'{\n    \"owner_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"to_address\": \"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\",\n    \"asset_name\": \"31303030303031\",\n    \"amount\": 100\n}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>to_address</code>: To address, default hexString</li> <li><code>asset_name</code>: Token id, default hexString</li> <li><code>amount</code>: Token transfer amount</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'amount' is the smallest unit of the token</p>"},{"location":"api/http/#walletparticipateassetissue","title":"wallet/participateassetissue","text":"<p>Description: Participate a token <pre><code>$ curl -X POST http://127.0.0.1:8090/wallet/participateassetissue -d\n'{\n    \"to_address\": \"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\",\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"amount\": 100,\n    \"asset_name\": \"3230313271756265696a696e67\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>to_address</code>: The issuer address of the token, default hexString</li> <li><code>owner_address</code>: The participant address, default hexString</li> <li><code>amount</code>: Participate token amount</li> <li><code>asset_name</code>: Token id, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'amount' is the smallest unit of the token</p>"},{"location":"api/http/#walletcreateassetissue","title":"wallet/createassetissue","text":"<p>Description: Issue a token <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/createassetissue -d\n'{\n    \"owner_address\": \"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\",\n    \"name\": \"0x6173736574497373756531353330383934333132313538\",\n    \"abbr\": \"0x6162627231353330383934333132313538\",\n    \"total_supply\": 4321,\n    \"trx_num\": 1,\n    \"num\": 1,\n    \"start_time\": 1530894315158,\n    \"end_time\": 1533894312158,\n    \"description\": \"007570646174654e616d6531353330363038383733343633\",\n    \"url\": \"007570646174654e616d6531353330363038383733343633\",\n    \"free_asset_net_limit\": 10000,\n    \"public_free_asset_net_limit\": 10000,\n    \"frozen_supply\": {\n        \"frozen_amount\": 1,\n        \"frozen_days\": 2\n    }\n}'\n</code></pre> Parameters: </p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>name</code>: Token name, default hexString</li> <li><code>abbr</code>: Token name abbreviation, default hexString</li> <li><code>total_supply</code>: Token total supply</li> <li><code>trx_num</code>: Define the price by the ratio of trx_num/num</li> <li><code>num</code>: Define the price by the ratio of trx_num/num</li> <li><code>start_time</code>: ICO start time</li> <li><code>end_time</code>: ICO end time</li> <li><code>description</code>: Token description, default hexString</li> <li><code>url</code>: Token official website url, default hexString</li> <li><code>free_asset_net_limit</code>: Token free asset net limit</li> <li><code>public_free_asset_net_limit</code>: Token public free asset net limit</li> <li><code>frozen_supply</code>: Token staked supply</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'trx_num' is SUN</p>"},{"location":"api/http/#walletunfreezeasset","title":"wallet/unfreezeasset","text":"<p>Description: Unstake the staked token that is due <pre><code>$ curl -X POST http://127.0.0.1:8090/wallet/unfreezeasset -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\"\n}'\n</code></pre></p> <p>Parameters: - <code>owner_address</code>: Owner address, default hexString - <code>permission_id</code>: Optional, for multi-signature use</p> <p>Return: Transaction object</p>"},{"location":"api/http/#walletupdateasset","title":"wallet/updateasset","text":"<p>Description: Update token information <pre><code>$ curl -X POST http://127.0.0.1:8090/wallet/updateasset -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\",\n    \"description\": \"\",\n    \"url\": \"\",\n    \"new_limit\": 1000000,\n    \"new_public_limit\": 100\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: The issuers address of the token, default hexString</li> <li><code>description</code>: The description of token, default hexString</li> <li><code>url</code>: The token's website url, default hexString</li> <li><code>new_limit</code>: Each token holder's free bandwidth</li> <li><code>new_public_limit</code>: The total free bandwidth of the token</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#vote-and-sr","title":"Vote and SR","text":"<p>The following are voting and SR related APIs:</p> <ul> <li>wallet/createwitness</li> <li>wallet/updatewitness</li> <li>wallet/listwitnesses</li> <li>wallet/withdrawbalance</li> <li>wallet/votewitnessaccount</li> <li>wallet/getBrokerage</li> <li>wallet/updateBrokerage</li> <li>wallet/getReward</li> <li>wallet/getnextmaintenancetime</li> </ul>"},{"location":"api/http/#walletcreatewitness","title":"wallet/createwitness","text":"<p>Description: Apply to become a super representative <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/createwitness -d\n'{\n    \"owner_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"url\": \"007570646174654e616d6531353330363038383733343633\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>url</code>: Website url, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletupdatewitness","title":"wallet/updatewitness","text":"<p>Description: Update the super representative' website url <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/updatewitness -d\n'{\n    \"owner_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"update_url\": \"007570646174654e616d6531353330363038383733343633\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>update_url</code>: Website url, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletlistwitnesses","title":"wallet/listwitnesses","text":"<p>Description: Qyery the list of the super representatives <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/listwitnesses\n</code></pre> Parameters: N/A</p> <p>Return:SR(Super Representatives) list</p>"},{"location":"api/http/#walletwithdrawbalance","title":"wallet/withdrawbalance","text":"<p>Description: Withdraw reward to account balance for super representatives <pre><code>$ curl -X POST http://127.0.0.1:8090/wallet/withdrawbalance -d\n'{\n    \"owner_address\": \"41e472f387585c2b58bc2c9bb4492bc1f17342cd1\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: It can only withdraw once for every 24 hours</p>"},{"location":"api/http/#walletvotewitnessaccount","title":"wallet/votewitnessaccount","text":"<p>Description: Vote for super representatives <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/votewitnessaccount -d\n'{\n    \"owner_address\": \"41d1e7a6bc354106cb410e65ff8b181c600ff14292\",\n    \"votes\": [\n        {\n            \"vote_address\": \"41e552f6487585c2b58bc2c9bb4492bc1f17132cd0\",\n            \"vote_count\": 5\n        }\n    ]\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address, default hexString</li> <li><code>votes</code>: 'vote_address' stands for the address of the super representative you want to vote, default hexString, 'vote_count' stands for the number of votes you want to vote</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletgetbrokerage","title":"wallet/getBrokerage","text":"<p>Description: Query the ratio of brokerage of the super representative <pre><code>$ curl -X GET  http://127.0.0.1:8090/wallet/getBrokerage -d '{\n\"address\":\"41E552F6487585C2B58BC2C9BB4492BC1F17132CD0\"}'\n</code></pre></p> <p>Parameter <code>address</code>: The address of the SR's account, default hexString</p> <p>Return: The ratio of brokerage of the SR</p>"},{"location":"api/http/#walletupdatebrokerage","title":"wallet/updateBrokerage","text":"<p>Description: Update the ratio of brokerage <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/updateBrokerage  -d '{\n\"owner_address\":\"41E552F6487585C2B58BC2C9BB4492BC1F17132CD0\",\n\"brokerage\":30\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: The address of the SR's account, default hexString</li> <li><code>brokerage</code>: The ratio of brokerage you want to update to</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletgetreward","title":"wallet/getReward","text":"<p>Description: Query unclaimed reward <pre><code>$ curl -X GET\nhttp://127.0.0.1:8090/wallet/getReward -d '{\n\"address\":\"41E552F6487585C2B58BC2C9BB4492BC1F17132CD0\"}'\n</code></pre></p> <p>Parameter <code>address</code>: The address of the voter's account, default hexString</p> <p>Return: Unclaimed reward</p>"},{"location":"api/http/#walletgetnextmaintenancetime","title":"wallet/getnextmaintenancetime","text":"<p>Description: Query the time interval till the next vote round <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getnextmaintenancetime\n</code></pre> Parameters: N/A</p> <p>Return: The time interval till the next vote round(unit: ms)</p>"},{"location":"api/http/#proposals","title":"Proposals","text":"<p>The following are proposal-related APIs:</p> <ul> <li>wallet/proposalcreate</li> <li>wallet/getproposalbyid</li> <li>wallet/listproposals</li> <li>wallet/proposalapprove</li> <li>wallet/proposaldelete</li> <li>wallet/getpaginatedproposallist</li> </ul>"},{"location":"api/http/#walletproposalcreate","title":"wallet/proposalcreate","text":"<p>Description: Create a proposal <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/proposalcreate -d\n'{\n    \"owner_address\": \"419844F7600E018FD0D710E2145351D607B3316CE9\",\n    \"parameters\": [\n        {\n            \"key\": 0,\n            \"value\": 100000\n        },\n        {\n            \"key\": 1,\n            \"value\": 2\n        }\n    ]\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Creator address</li> <li><code>parameters</code>: Proposal parameters</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletgetproposalbyid","title":"wallet/getproposalbyid","text":"<p>Description: Query a proposal by proposal id <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getproposalbyid -d\n'{\n    \"id\": 1\n}'\n</code></pre></p> <p>Parameter <code>id</code>: Proposal id</p> <p>Return: The proposal information</p>"},{"location":"api/http/#walletlistproposals","title":"wallet/listproposals","text":"<p>Description: Query all the proposals <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/listproposals\n</code></pre></p> <p>Parameter: No parameter</p> <p>Return: The list of all the proposals</p>"},{"location":"api/http/#walletproposalapprove","title":"wallet/proposalapprove","text":"<p>Description: To approve a proposal <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/proposalapprove -d\n'{\n    \"owner_address\": \"419844F7600E018FD0D710E2145351D607B3316CE9\",\n    \"proposal_id\": 1,\n    \"is_add_approval\": true\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: The address that makes the approve action, default hexString</li> <li><code>proposal_id</code>: Proposal id</li> <li><code>is_add_approval</code>: Whether to approve</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletproposaldelete","title":"wallet/proposaldelete","text":"<p>Description: To delete a proposal <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/proposaldelete -d\n'{\n    \"owner_address\": \"419844F7600E018FD0D710E2145351D607B3316CE9\",\n    \"proposal_id\": 1\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address of the proposal, default hexString</li> <li><code>proposal_id</code>: Proposal id</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletgetpaginatedproposallist","title":"wallet/getpaginatedproposallist","text":"<p>Description: Query the list of all the proposals by pagination <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getpaginatedproposallist -d\n'{\n    \"offset\": 0,\n    \"limit\": 10\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>offset</code>: The index of the start proposal</li> <li><code>limit</code>: The amount of proposals per page</li> </ul> <p>Return: The list of proposals by pagination</p>"},{"location":"api/http/#dex-exchange","title":"DEX Exchange","text":"<p>The following are the APIs related to decentralized exchanges:</p> <ul> <li>wallet/exchangecreate</li> <li>wallet/exchangeinject</li> <li>wallet/exchangewithdraw</li> <li>wallet/exchangetransaction</li> <li>wallet/getexchangebyid</li> <li>wallet/listexchanges</li> <li>wallet/getpaginatedexchangelist</li> <li>wallet/marketsellasset</li> <li>wallet/marketcancelorder</li> <li>wallet/getmarketorderbyaccount</li> <li>wallet/getmarketpairlist</li> <li>wallet/getmarketorderlistbypair</li> <li>wallet/getmarketpricebypair</li> <li>wallet/getmarketorderbyid</li> </ul>"},{"location":"api/http/#walletexchangecreate","title":"wallet/exchangecreate","text":"<p>Description: Create an exchange pair <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/exchangecreate -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"first_token_id\": \"token_a\",\n    \"first_token_balance\": 100,\n    \"second_token_id\": \"token_b\",\n    \"second_token_balance\": 200\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: address</li> <li><code>first_token_id</code>: The first token's id, default hexString</li> <li><code>first_token_balance</code>: The first token's balance</li> <li><code>second_token_id</code>: The second token's id, default hexString</li> <li><code>second_token_balance</code>: The second token's balance</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'first_token_balance' and 'second_token_balance' is the smallest unit of the token</p>"},{"location":"api/http/#walletexchangeinject","title":"wallet/exchangeinject","text":"<p>Description: Inject funds for exchange pair <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/exchangeinject -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"exchange_id\": 1,\n    \"token_id\": \"74726f6e6e616d65\",\n    \"quant\": 100\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address of the exchange pair, default hexString</li> <li><code>exchange_id</code>: Exchange pair id</li> <li><code>token_id</code>: Token id, default hexString</li> <li><code>quant</code>: Token inject amount</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'quant' is the smallest unit of the token</p>"},{"location":"api/http/#walletexchangewithdraw","title":"wallet/exchangewithdraw","text":"<p>Description: Withdraw from exchange pair <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/exchangewithdraw -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"exchange_id\": 1,\n    \"token_id\": \"74726f6e6e616d65\",\n    \"quant\": 100\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address of the exchange pair, default hexString</li> <li><code>exchange_id</code>: Exchange pair id</li> <li><code>token_id</code>: Token id, default hexString</li> <li><code>quant</code>: Token withdraw amount</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'quant' is the smallest unit of the token</p>"},{"location":"api/http/#walletexchangetransaction","title":"wallet/exchangetransaction","text":"<p>Description: Participate the transaction of exchange pair <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/exchangetransaction -d\n'{\n    \"owner_address\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n    \"exchange_id\": 1,\n    \"token_id\": \"74726f6e6e616d65\",\n    \"quant\": 100,\n    \"expected\": 10\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>owner_address</code>: Owner address of the exchange pair, default hexString</li> <li><code>exchange_id</code>: Exchange pair id</li> <li><code>token_id</code>: Token id, default hexString</li> <li><code>quant</code>: Sell token amount</li> <li><code>expected</code>: Expected token amount to get</li> <li><code>permission_id</code>: Optional, for multi-signature use</li> </ul> <p>Return: Transaction object</p> <p>Note: The unit of 'quant' and 'expected' is the smallest unit of the token</p>"},{"location":"api/http/#walletgetexchangebyid","title":"wallet/getexchangebyid","text":"<p>Description: Query an exchange pair by exchange pair id <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getexchangebyid -d\n'{\n    \"id\": 1\n}'\n</code></pre></p> <p>Parameter id: Exchange pair id</p> <p>Return: Exchange pair information</p>"},{"location":"api/http/#walletlistexchanges","title":"wallet/listexchanges","text":"<p>Description: Query the list of all the exchange pairs <pre><code>$ curl -X GET  http://127.0.0.1:8090/wallet/listexchanges\n</code></pre></p> <p>Parameter: No parameter</p> <p>Return: The list of all the exchange pairs</p>"},{"location":"api/http/#walletgetpaginatedexchangelist","title":"wallet/getpaginatedexchangelist","text":"<p>Description: Query the list of all the exchange pairs by pagination <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getpaginatedexchangelist -d\n'{\n    \"offset\": 0,\n    \"limit\": 10\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>offset</code>:  The index of the start exchange pair</li> <li><code>limit</code>: The amount of exchange pairs per page</li> </ul> <p>Return: The list of exchange pairs by pagination</p>"},{"location":"api/http/#walletmarketsellasset","title":"wallet/marketsellasset","text":"<p>Description\uff1aCreate an market order </p> <p><pre><code>curl -X POST  http://127.0.0.1:8090/wallet/marketsellasset -d \n'{\n    \"owner_address\": \"4184894b42f66dce8cb84aec2ed11604c991351ac8\",\n    \"sell_token_id\": \"5f\",\n    \"sell_token_quantity\": 100,\n    \"buy_token_id\": \"31303030303031\",\n    \"buy_token_quantity\": 200 \n}'  \n</code></pre> Parameters\uff1a</p> <ul> <li><code>owner_address</code>\uff1aowner address, default hexString </li> <li><code>sell_token_id</code>\uff1asell token id, default hexString     </li> <li><code>sell_token_quantity</code>\uff1asell token quantity           </li> <li><code>buy_token_id</code>\uff1abuy token id, default hexString         </li> <li><code>buy_token_quantity</code>\uff1abuy token quantity (min to receive)     </li> </ul> <p>Return\uff1aTransaction object   </p>"},{"location":"api/http/#walletmarketcancelorder","title":"wallet/marketcancelorder","text":"<p>Description\uff1aCancel the order</p> <p><pre><code>curl -X POST  http://127.0.0.1:8090/wallet/marketcancelorder -d \n'{\n    \"owner_address\": \"4184894b42f66dce8cb84aec2ed11604c991351ac8\",\n    \"order_id\": \"0a7af584a53b612bcff1d0fc86feab05f69bc4528f26a4433bb344d453bd6eeb\"\n}' \n</code></pre> Parameters\uff1a</p> <ul> <li><code>owner_address</code>\uff1aowner address, default hexString </li> <li><code>order_id</code>\uff1aorder id        </li> </ul> <p>Return\uff1aTransaction object   </p>"},{"location":"api/http/#walletgetmarketorderbyaccount","title":"wallet/getmarketorderbyaccount","text":"<p>Description\uff1aGet all orders for the account</p> <p><pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getmarketorderbyaccount -d \n'{\n    \"value\": \"4184894b42f66dce8cb84aec2ed11604c991351ac8\" \n}' \n</code></pre> Parameters\uff1a<code>value</code> - owner address, default hexString     </p> <p>Return\uff1aorder list   </p>"},{"location":"api/http/#walletgetmarketpairlist","title":"wallet/getmarketpairlist","text":"<p>Description\uff1aGet all trading pairs <pre><code>curl -X get  http://127.0.0.1:8090/wallet/getmarketpairlist\n</code></pre> Parameters:  N/A</p> <p>Return: makket pair list</p>"},{"location":"api/http/#walletgetmarketorderlistbypair","title":"wallet/getmarketorderlistbypair","text":"<p>Description\uff1aGet all orders for the trading pair demo:  <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getmarketorderlistbypair -d \n'{\n    \"sell_token_id\": \"5f\" ,\n    \"buy_token_id\": \"31303030303031\"\n}' \n</code></pre> Parameters\uff1a</p> <ul> <li><code>sell_token_id</code>\uff1asell token id, default hexString          </li> <li><code>buy_token_id</code>\uff1abuy token id, default hexString         </li> </ul> <p>Return\uff1aorder list</p>"},{"location":"api/http/#walletgetmarketpricebypair","title":"wallet/getmarketpricebypair","text":"<p>Description\uff1aGet all prices for the trading pair</p> <p><pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getmarketpricebypair -d \n'{\n    \"sell_token_id\": \"5f\" \n    \"buy_token_id\": \"31303030303031\" \n}' \n</code></pre> Parameters\uff1a</p> <ul> <li><code>sell_token_id</code>\uff1asell token id, default hexString        </li> <li><code>buy_token_id</code>\uff1abuy token id, default hexString     Return\uff1aprice list</li> </ul>"},{"location":"api/http/#walletgetmarketorderbyid","title":"wallet/getmarketorderbyid","text":"<p>Description\uff1aGet all orders for the account</p> <p><pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getmarketorderbyid -d \n'{\n    \"value\": \"orderid\" \n}' \n</code></pre> Parameters\uff1a<code>value</code> - order id, default hexString     </p> <p>Return\uff1aorder  </p>"},{"location":"api/http/#tronz-shielded-smart-contract","title":"TRONZ Shielded Smart Contract","text":"<p>The following are TRONZ anonymous smart contract related APIs:</p> <ul> <li>wallet/getexpandedspendingkey</li> <li>wallet/getakfromask</li> <li>wallet/getnkfromnsk</li> <li>wallet/getspendingkey</li> <li>wallet/getdiversifier</li> <li>wallet/getincomingviewingkey</li> <li>wallet/getzenpaymentaddress</li> <li>wallet/createshieldedtransactionwithoutspendauthsig</li> <li>wallet/scannotebyivk</li> <li>wallet/scanandmarknotebyivk</li> <li>wallet/scannotebyovk</li> <li>wallet/createshieldnullifier</li> <li>wallet/getshieldtransactionhash</li> <li>wallet/createshieldedtransaction</li> <li>wallet/getnewshieldedaddress</li> <li>wallet/createshieldedcontractparameters</li> <li>wallet/createshieldedcontractparameterswithoutask</li> <li>wallet/scanshieldedtrc20notesbyivk</li> <li>wallet/scanshieldedtrc20notesbyovk</li> <li>wallet/isshieldedtrc20contractnotespent</li> <li>wallet/gettriggerinputforshieldedtrc20contract</li> <li>wallet/getrcm</li> <li>wallet/getmerkletreevoucherinfo</li> <li>wallet/isspend</li> <li>wallet/createspendauthsig</li> </ul>"},{"location":"api/http/#walletgetexpandedspendingkey","title":"wallet/getexpandedspendingkey","text":"<p>Description: To get expanded spending keys from spending key <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getexpandedspendingkey -d\n'{\n    \"value\": \"06b02aaa00f230b0887ff57a6609d76691369972ac3ba568fe7a8a0897fce7c4\"\n}'\n</code></pre> Parameters: value:Spending key</p> <p>Return: Expanded spending keys, it consists of three keys: ask, nsk and ovk.</p>"},{"location":"api/http/#walletgetakfromask","title":"wallet/getakfromask","text":"<p>Description: To get ak key from ask key <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getakfromask -d\n'{\n    \"value\": \"653b3a3fdd40b60d2f53ba121df8840f6590384993f8fa9a0ecb0dfb23496604\"\n}'\n</code></pre> Parameters: value:Ask</p> <p>Return:Ak</p>"},{"location":"api/http/#walletgetnkfromnsk","title":"wallet/getnkfromnsk","text":"<p>Description: To get nk key from nsk key <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getnkfromnsk -d\n'{\n    \"value\": \"428ff3c9e101dc1fca08f7b0e3387b23b68016746ae565aefc19d112b696db01\"\n}'\n</code></pre> Parameters: value:Nsk</p> <p>Return:Nk</p>"},{"location":"api/http/#walletgetspendingkey","title":"wallet/getspendingkey","text":"<p>Description: To get spending key <pre><code>curl -X GET  http://127.0.0.1:8090/wallet/getspendingkey\n</code></pre> Parameters: N/A</p> <p>Return:Spending key</p>"},{"location":"api/http/#walletgetdiversifier","title":"wallet/getdiversifier","text":"<p>Description: To get diversifier <pre><code>curl -X GET  http://127.0.0.1:8090/wallet/getdiversifier\n</code></pre> Parameters: N/A</p> <p>Return: Diversifier</p>"},{"location":"api/http/#walletgetincomingviewingkey","title":"wallet/getincomingviewingkey","text":"<p>Description: To get incoming viewing key <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getincomingviewingkey -d\n'{\n    \"ak\":\"b443f1a303ef5837ba95750b48b6fef15f9c77f63a8c28c161bcd6613f423b5c\",\n    \"nk\":\"632137e69179df3d10e252fcce85d13464c3163fe7a619edf8d43ebefa8162d9\"\n }'\n</code></pre> Parameters: </p> <ul> <li><code>ak</code>:Ak</li> <li><code>nk</code>:Nk</li> </ul> <p>Return:Incoming viewing key</p>"},{"location":"api/http/#walletgetzenpaymentaddress","title":"wallet/getzenpaymentaddress","text":"<p>Description: To get payment address <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getzenpaymentaddress -d\n'{\n    \"ivk\":\"8c7852e10862d8eec058635974f70f24c1f8d73819131bb5b54028d0a9408a03\",\n    \"d\":\"736ba8692ed88a5473e009\"\n }'\n</code></pre> Parameters: </p> <ul> <li><code>ivk</code>:Ivk</li> <li><code>d</code>:D</li> </ul> <p>Return: Payment address</p>"},{"location":"api/http/#walletcreateshieldedtransactionwithoutspendauthsig","title":"wallet/createshieldedtransactionwithoutspendauthsig","text":"<p>Description: To create shielded transaction without using ask <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/createshieldedtransactionwithoutspendauthsig -d\n'{\n  \"ivk\":\"8c7852e10862d8eec058635974f70f24c1f8d73819131bb5b54028d0a9408a03\",\n    \"d\":\"736ba8692ed88a5473e009\"\n }'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>transparent_from_address</code>: Transparent sender's address</li> <li><code>from_amount</code>: Send amount from transparent address</li> <li><code>ask</code>: Ask</li> <li><code>nsk</code>: Nsk</li> <li><code>ovk</code>: Ovk</li> <li><code>shielded_receives</code>: Shielded receive information</li> <li><code>shieldedSpends</code>: Shielded spend information</li> <li><code>transparent_to_address</code>: Transparent receiver's address</li> <li><code>to_amount</code>: Send amount to transparent address</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletcreateshieldedtransactionwithoutspendauthsig_1","title":"wallet/createshieldedtransactionwithoutspendauthsig","text":"<p>Description: To create shielded transaction with using ask <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/createshieldedtransactionwithoutspendauthsig -d\n'{\n    \"ak\": \"bf051629fd8122cd9dd8591d72947b026c214cf7cdac1f68eff97179727d38e9\",\n    \"nsk\": \"42963d26af8122204273fa3489d9efd6babf1f7179ff193c955a1f3d9c2df10c\",\n    \"ovk\": \"bc9848a83966709655b12efadc9e978785858316045e0115a0e72567a9a2a823\",\n    \"shielded_spends\": [\n        {\n            \"note\": {\n                \"value\": 500000000,\n                \"payment_address\": \"ztron1jld8fmvujrz2vgkc867zuwklmewy4ypw0wtwgweqs2paee0uhc8f3azy90el770arksa2kunl02\",\n                \"rcm\": \"723053bcbfecdf5da66c18ab0376476ef308c61b7abe891b2c01e903bcb87c0e\"\n            },\n            \"alpha\": \"2608999c3a97d005a879ecdaa16fd29ae434fb67b177c5e875b0c829e6a1db04\",\n            \"voucher\": {\n                \"tree\": {\n                    \"left\": {\n                        \"content\": \"a3d5c9b2db9699f32afec5febbd5586ce9ff33a0bef6fee5691028313b8e1f6a\"\n                    },\n                    \"parents\": [\n                        {\n                            \"content\": \"d9c38484296b3aa8f5e8b59d418a3775e2bb414e75498ad352e4614f05aae548\"\n                        },\n                        {\n                            \"content\": \"d0420777afdc4151c3f14fbe4c714d82dc15873edb1ca65ebb3887334a4bae15\"\n                        }\n                    ]\n                },\n                \"rt\": \"fb1115d5ddd16c5427c3a608d6b5add5967e70f51c890307c6142083a2c28565\"\n            },\n            \"path\": \"2020b2eed031d4d6a4f02a097f80b54cc1541d4163c6b6f5971f88b6e41d35c538142012935f14b676509b81eb49ef25f39269ed72309238b4c145803544b646dca62d20e1f34b034d4a3cd28557e2907ebf990c918f64ecb50a94f01d6fda5ca5c7ef722028e7b841dcbc47cceb69d7cb8d94245fb7cb2ba3a7a6bc18f13f945f7dbd6e2a20a5122c08ff9c161d9ca6fc462073396c7d7d38e8ee48cdb3bea7e2230134ed6a20d2e1642c9a462229289e5b0e3b7f9008e0301cbb93385ee0e21da2545073cb582016d6252968971a83da8521d65382e61f0176646d771c91528e3276ee45383e4a20fee0e52802cb0c46b1eb4d376c62697f4759f6c8917fa352571202fd778fd712204c6937d78f42685f84b43ad3b7b00f81285662f85c6a68ef11d62ad1a3ee0850200769557bc682b1bf308646fd0b22e648e8b9e98f57e29f5af40f6edb833e2c492008eeab0c13abd6069e6310197bf80f9c1ea6de78fd19cbae24d4a520e6cf3023208d5fa43e5a10d11605ac7430ba1f5d81fb1b68d29a640405767749e841527673206aca8448d8263e547d5ff2950e2ed3839e998d31cbc6ac9fd57bc6002b15921620cd1c8dbf6e3acc7a80439bc4962cf25b9dce7c896f3a5bd70803fc5a0e33cf00206edb16d01907b759977d7650dad7e3ec049af1a3d875380b697c862c9ec5d51c201ea6675f9551eeb9dfaaa9247bc9858270d3d3a4c5afa7177a984d5ed1be245120d6acdedf95f608e09fa53fb43dcd0990475726c5131210c9e5caeab97f0e642f20bd74b25aacb92378a871bf27d225cfc26baca344a1ea35fdd94510f3d157082c201b77dac4d24fb7258c3c528704c59430b630718bec486421837021cf75dab65120ec677114c27206f5debc1c1ed66f95e2b1885da5b7be3d736b1de98579473048204777c8776a3b1e69b73a62fa701fa4f7a6282d9aee2c7a6b82e7937d7081c23c20ba49b659fbd0b7334211ea6a9d9df185c757e70aa81da562fb912b84f49bce722043ff5457f13b926b61df552d4e402ee6dc1463f99a535f9a713439264d5b616b207b99abdc3730991cc9274727d7d82d28cb794edbc7034b4f0053ff7c4b68044420d6c639ac24b46bd19341c91b13fdcab31581ddaf7f1411336a271f3d0aa52813208ac9cf9c391e3fd42891d27238a81a8a5c1d3a72b1bcbea8cf44a58ce738961320912d82b2c2bca231f71efcf61737fbf0a08befa0416215aeef53e8bb6d23390a20e110de65c907b9dea4ae0bd83a4b0a51bea175646a64c12b4c9f931b2cb31b4920d8283386ef2ef07ebdbb4383c12a739a953a4d6e0d6fb1139a4036d693bfbb6c20d0420777afdc4151c3f14fbe4c714d82dc15873edb1ca65ebb3887334a4bae1520d9c38484296b3aa8f5e8b59d418a3775e2bb414e75498ad352e4614f05aae5482001000000000000000000000000000000000000000000000000000000000000000600000000000000\"\n        }\n    ],\n    \"shielded_receives\": [\n        {\n            \"note\": {\n                \"value\": 40000000,\n                \"payment_address\": \"ztron1wd46s6fwmz99gulqpxul6zffqtevzfpl93ng3s5834fhwf6e7w5l6zmjhmpvtwsc4wxa7dusmvr\",\n                \"rcm\": \"ccced07d36641fc93cba33cddda7064cb82f6962a0bdf15a4240a4a742770e03\"\n            }\n        }\n    ]\n}'\n</code></pre> Parameters: </p> <ul> <li><code>transparent_from_address</code>: Transparent sender's address</li> <li><code>from_amount</code>: Send amount from transparent address</li> <li><code>ak</code>: Ak</li> <li><code>nsk</code>: Nsk</li> <li><code>ovk</code>: Ovk</li> <li><code>shielded_receives</code>: Shielded receive information</li> <li><code>shieldedSpends</code>: Shielded spend information</li> <li><code>transparent_to_address</code>: Transparent receiver's address</li> <li><code>to_amount</code>: Send amount to transparent address</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletscannotebyivk","title":"wallet/scannotebyivk","text":"<p>Description: To get all the notes by ivk <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/scannotebyivk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ivk\": \"80a481c3c739e54b4e0608090b3a1a6e9f8dce42346e95bf5a2d8a487bf45c05\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>start_block_index</code>: The start block height, itself included</li> <li><code>end_block_index</code>: The end block height, itself not included</li> <li><code>ivk</code>: Incoming viewing key</li> </ul> <p>Return: Notes list</p> <p>Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletscanandmarknotebyivk","title":"wallet/scanandmarknotebyivk","text":"<p>Description: To get all the notes with spent status by ivk <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/scanandmarknotebyivk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ivk\": \"80a481c3c739e54b4e0608090b3a1a6e9f8dce42346e95bf5a2d8a487bf45c05\",\n    \"ak\": \"1d4f9b5551f4aa9443ceb263f0e208eb7e26080264571c5ef06de97a646fe418\",\n    \"nk\": \"748522c7571a9da787e43940c9a474aa0c5c39b46c338905deb6726fa3678bdb\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>start_block_index</code>: The start block height, itself included</li> <li><code>end_block_index</code>: The end block height, itself not included</li> <li><code>ivk</code>: Incoming viewing key</li> <li><code>ak</code>: Ak key</li> <li><code>nk</code>: Nk key</li> </ul> <p>Return: Notes list</p> <p>Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletscannotebyovk","title":"wallet/scannotebyovk","text":"<p>Description: To get all the notes by ovk <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/scannotebyovk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ovk\": \"705145aa18cbe6c11d5d0011419a98f3d5b1d341eb4727f1315597f4bdaf8539\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>start_block_index</code>: The start block height, itself included</li> <li><code>end_block_index</code>: The end block height, itself not included</li> <li><code>ovk</code>: Outgoing viewing key</li> </ul> <p>Return: Notes list</p> <p>Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletcreateshieldnullifier","title":"wallet/createshieldnullifier","text":"<p>Description: To create a shielded nullifier <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/createshieldnullifier -d\n'{\n    \"note\": {\n        \"payment_address\": \"ztron1aqgauawtkelxfu2w6s48cwh0mchjt6kwpj44l4wym3pullx0294j4r4v7kpm75wnclzycsw73mq\",\n        \"rcm\": \"74a16c1b27ec7fbf06881d9d35ddaab1554838b1bddcd54f6bd8a9fb4ba0b80a\",\n        \"value\": 500000000\n    },\n    \"voucher\": {\n        \"tree\": {\n            \"left\": {\n                \"content\": \"a4d763fae3fee78964ccdf7567ec3062c95a5b97825d731202d3dfa6cb01c143\"\n            }\n        },\n        \"rt\": \"7dc3652c2a16e8518a8be0e3e038f9d28c3eb96f13e8da8acc2a9b650702f33e\"\n    },\n    \"ak\": \"a3e65d509b675aaa2aeda977ceff11eebd76218079b6f543d78a615e396ca129\",\n    \"nk\": \"62cfda9bea09a53cf2a21022057913734a8458969e11e0bb9c59ead48fbce83e\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>note</code>: Note information</li> <li><code>voucher</code>: Voucher information</li> <li><code>ak</code>: Ak</li> <li><code>nk</code>: Nk</li> </ul> <p>Return: A shielded nullifier</p>"},{"location":"api/http/#walletgetshieldtransactionhash","title":"wallet/getshieldtransactionhash","text":"<p>Description: To get a shielded transaction hash <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/getshieldtransactionhash -d\n'{\n    \"txID\": \"de639a64497d86bb27e34a2953093a0cc488ec4c7bc9624ac5857d3799748595\",\n    \"raw_data\": {\n        \"contract\": [\n            {\n                \"parameter\": {\n                    \"value\": {\n                        \"binding_signature\": \"2b8ae5e11ecad3e6946f54b7ad513bd8692a3edae72d29e266b28e47c9b37ccdb38e3b6433575694b6681136b1734f85afcfe672061d2ee7368755ad0b96a80b\",\n                        \"spend_description\": [\n                            {\n                                \"value_commitment\": \"cbe1063adbe7e10919421fa6133f03150253913f5aff02d165e2c019cea4a869\",\n                                \"anchor\": \"fb1115d5ddd16c5427c3a608d6b5add5967e70f51c890307c6142083a2c28565\",\n                                \"nullifier\": \"93e329d464e1dbddc8bb4d2dcc939a796dfe11e985d4e9033a15edf0e3df4f35\",\n                                \"rk\": \"10c702d6dff1509502ee5acc0b01d4b4531b2ff53b0dd54488aea6031b5e6d16\",\n                                \"zkproof\": \"abf64b3beacfd873b1db764c3da9f739993518f3f740e761cb8af60682b7171892895c3ccfb550c3cf757e906dbf5313a3676b8226b0b84960f76a185c8d3fdfc3fa9c08479a704852d7b3dfeb913cf13e01c25657561e00a06c61e7c65b50b812902ddc4f17bfe2bcb2f247c2dc6132d0f0e0abcecc0332fdd99077af10d07bbdb88c4fd257948428e233c57f84eee8b2eeab2162c1aeccf2e1dfaa306d5803a8b2d281a549440fbd5a3657a830c1ca07a384cea446aa077b195b29b23023b1\"\n                            }\n                        ],\n                        \"receive_description\": [\n                            {\n                                \"value_commitment\": \"f6d45db8ec5a1c8dbbde040b4ea138efbe8db2d0597ed2306ff3fdd0620b3c5a\",\n                                \"note_commitment\": \"ec3f5472ac8114a9a07987d1c2a0e1254504e352d9574971e77084293900312e\",\n                                \"epk\": \"719eeb5ebaeeccc55c9f0d73767aadf0c0513603400ccb50bd789637d984b8e6\",\n                                \"c_enc\": \"3a6c4fe0e79f5b23fed34a419c4728d0b26bca23180a22871743b0a9444c27663cf07c55a0ea6db504d70421768bf17384e180b2ad8b8be88ff5cf662c53a4ba086effc3a4b1df39265f71dfac884bff5a69e1dcdcae8aecf6ae443168ffab692a5c1e4908b415dd830dcf6432fae1c32461132080da74d6b83d3d00887eb2ce9965a749f8d8410ea4182969371ac2fd5e0e74d27d883492a08e6209cd9959d74bb67c2a9fe7faac5a4777f1bff19cf0b6398a2faa9b194bbb93d60f132f382f7d693a722e8cbca1da084ee7e0c371397419a7259d1fa0943078cfe5ea352e4b53907bb6c04ca8ad409fb0ae0b110a6b312200e21ab79d543ae7aeb16802cf87afdac1e8954038caa42818f4ca2847fd642360c098accfeeade4abd1cc9ca3315a4336be224ba3516973c7dae3f41875457236675993df38d3a544470c4f9335d77b005e6a9aec40fd881b34852ec9bbbcc3d24ee92930eae770a5462ce04c4e37b0524ef07e00e8d58c810d6aefb19fa7bc2c3a2fdfab6dd4fe73dbecc0795a280f9b7ca35cc8bc1062aed8e26bd81ba33c6f4c318974636f6d796723e77772ced3dbc1f42afec6fc9bb61f8beac704affea9baf2e2de226250c1d427c7d78b1eb1d239e1f3eb6af0f017b80541333f4fce17340048d826b9b0be8477c996ad8bfc3440dc686fdff6d0d63986db4d95962d7977289cbfd14c745de7c79d4dc0bcd220e5b4ced5b409e79142e0f336e44ca29a9a87f6f43707d8c4936e895236dd2b393a478a8bc27b1f682496ba84a0ddc549da06cb7855c4d8680dc66ac40240733b7f\",\n                                \"c_out\": \"50be6e77854d4c427b2af4f16e5275f0b0c206b3ea2d2a24ffb287ea356f323523354cd83d15e7c48e6f1fa103dfca3d49ca2263dbb0cd8bfb35d72cdcad1351de6fba7a30aea27184a68bcda19cc6da\",\n                                \"zkproof\": \"a4e6c50d5753092d005689922c2bdeafc98775bce59db840974163ace23c13fec18112e32aae1c39842c645ed172ad8fa277e63c1e3d6d7fb12eb15d56b573237b776f562a81d0e6be362d147d8604fdfec421482270ca82950de1883fda06e719f5d256d7a039769bffc570a1778d70c17295d1c0336a6ae0903d2460dc139a9563c2d40f37bffefa73003a55af1ff0861b6f79ef40099b6a0cb25ab3f40727210e4629647d0711abff125712a5f0d64fcb6e6a6b0b34478d7da0552b493a80\"\n                            }\n                        ]\n                    },\n                    \"type_url\": \"type.googleapis.com/protocol.ShieldedTransferContract\"\n                },\n                \"type\": \"ShieldedTransferContract\"\n            }\n        ],\n        \"ref_block_bytes\": \"0d59\",\n        \"ref_block_hash\": \"7356ce5c35d8265e\",\n        \"expiration\": 1559237283000,\n        \"timestamp\": 1559201285590\n    },\n    \"raw_data_hex\": \"0a020d5922087356ce5c35d8265e40b899a3ceb02d5a940b0833128f0b0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e747261637412d50a1acb020a20cbe1063adbe7e10919421fa6133f03150253913f5aff02d165e2c019cea4a8691220fb1115d5ddd16c5427c3a608d6b5add5967e70f51c890307c6142083a2c285651a2093e329d464e1dbddc8bb4d2dcc939a796dfe11e985d4e9033a15edf0e3df4f35222010c702d6dff1509502ee5acc0b01d4b4531b2ff53b0dd54488aea6031b5e6d162ac001abf64b3beacfd873b1db764c3da9f739993518f3f740e761cb8af60682b7171892895c3ccfb550c3cf757e906dbf5313a3676b8226b0b84960f76a185c8d3fdfc3fa9c08479a704852d7b3dfeb913cf13e01c25657561e00a06c61e7c65b50b812902ddc4f17bfe2bcb2f247c2dc6132d0f0e0abcecc0332fdd99077af10d07bbdb88c4fd257948428e233c57f84eee8b2eeab2162c1aeccf2e1dfaa306d5803a8b2d281a549440fbd5a3657a830c1ca07a384cea446aa077b195b29b23023b122c2070a20f6d45db8ec5a1c8dbbde040b4ea138efbe8db2d0597ed2306ff3fdd0620b3c5a1220ec3f5472ac8114a9a07987d1c2a0e1254504e352d9574971e77084293900312e1a20719eeb5ebaeeccc55c9f0d73767aadf0c0513603400ccb50bd789637d984b8e622c4043a6c4fe0e79f5b23fed34a419c4728d0b26bca23180a22871743b0a9444c27663cf07c55a0ea6db504d70421768bf17384e180b2ad8b8be88ff5cf662c53a4ba086effc3a4b1df39265f71dfac884bff5a69e1dcdcae8aecf6ae443168ffab692a5c1e4908b415dd830dcf6432fae1c32461132080da74d6b83d3d00887eb2ce9965a749f8d8410ea4182969371ac2fd5e0e74d27d883492a08e6209cd9959d74bb67c2a9fe7faac5a4777f1bff19cf0b6398a2faa9b194bbb93d60f132f382f7d693a722e8cbca1da084ee7e0c371397419a7259d1fa0943078cfe5ea352e4b53907bb6c04ca8ad409fb0ae0b110a6b312200e21ab79d543ae7aeb16802cf87afdac1e8954038caa42818f4ca2847fd642360c098accfeeade4abd1cc9ca3315a4336be224ba3516973c7dae3f41875457236675993df38d3a544470c4f9335d77b005e6a9aec40fd881b34852ec9bbbcc3d24ee92930eae770a5462ce04c4e37b0524ef07e00e8d58c810d6aefb19fa7bc2c3a2fdfab6dd4fe73dbecc0795a280f9b7ca35cc8bc1062aed8e26bd81ba33c6f4c318974636f6d796723e77772ced3dbc1f42afec6fc9bb61f8beac704affea9baf2e2de226250c1d427c7d78b1eb1d239e1f3eb6af0f017b80541333f4fce17340048d826b9b0be8477c996ad8bfc3440dc686fdff6d0d63986db4d95962d7977289cbfd14c745de7c79d4dc0bcd220e5b4ced5b409e79142e0f336e44ca29a9a87f6f43707d8c4936e895236dd2b393a478a8bc27b1f682496ba84a0ddc549da06cb7855c4d8680dc66ac40240733b7f2a5050be6e77854d4c427b2af4f16e5275f0b0c206b3ea2d2a24ffb287ea356f323523354cd83d15e7c48e6f1fa103dfca3d49ca2263dbb0cd8bfb35d72cdcad1351de6fba7a30aea27184a68bcda19cc6da32c001a4e6c50d5753092d005689922c2bdeafc98775bce59db840974163ace23c13fec18112e32aae1c39842c645ed172ad8fa277e63c1e3d6d7fb12eb15d56b573237b776f562a81d0e6be362d147d8604fdfec421482270ca82950de1883fda06e719f5d256d7a039769bffc570a1778d70c17295d1c0336a6ae0903d2460dc139a9563c2d40f37bffefa73003a55af1ff0861b6f79ef40099b6a0cb25ab3f40727210e4629647d0711abff125712a5f0d64fcb6e6a6b0b34478d7da0552b493a802a402b8ae5e11ecad3e6946f54b7ad513bd8692a3edae72d29e266b28e47c9b37ccdb38e3b6433575694b6681136b1734f85afcfe672061d2ee7368755ad0b96a80b70d68b8ebdb02d\"\n}'\n</code></pre></p> <p>Parameter transaction: Transaction object</p> <p>Return: a shielded transaction hash</p>"},{"location":"api/http/#walletcreateshieldedtransaction","title":"wallet/createshieldedtransaction","text":"<p>Description: To create shielded transaction Please refer to The Demo</p> <p>Parameters:</p> <ul> <li><code>transparent_from_address</code>: Transparent sender's address</li> <li><code>from_amount</code>: Send amount from transparent address</li> <li><code>ask</code>: Ask</li> <li><code>nsk</code>: Nsk</li> <li><code>ovk</code>: Ovk</li> <li><code>shielded_receives</code>: Shielded receive information</li> <li><code>shieldedSpends</code>: Shielded spend information</li> <li><code>transparent_to_address</code>: Transparent receiver's address</li> <li><code>to_amount</code>: Send amount to transparent address</li> </ul> <p>Return: Transaction object</p>"},{"location":"api/http/#walletgetnewshieldedaddress","title":"wallet/getnewshieldedaddress","text":"<p>Description: To get new shieldedAddress <pre><code>curl -X GET  http://127.0.0.1:8090/wallet/getnewshieldedaddress\n</code></pre> Parameters:  N/A Return: Spending key Ask key Nsk key Outgoing viewing key Ak Key Nk key incoming viewing key Diversifier pkD payment address</p>"},{"location":"api/http/#walletcreateshieldedcontractparameters","title":"wallet/createshieldedcontractparameters","text":"<p>Description: create the shielded TRC-20 transaction parameters, which has three types: mint, transfer and burn <pre><code>demo: curl -X POST  http://127.0.0.1:8090/wallet/createshieldedcontractparameters -d\n'{  \n    \"ask\": \"0f63eabdfe2bbfe08012f6bb2db024e6809c16e8ed055aa41a6095424f192005\",\n    \"nsk\": \"cd43d722fd4b6b01f19449ea826c3e935609648520fcc2a95c0026f0fa9ee404\",\n    \"ovk\": \"1797de3b7f33cafffe3fe18c6b43ec6760add2ad81b10978d1fca5290497ede9\",\n    \"from_amount\": \"5000\",\n     \"shielded_receives\": {\n        \"note\": {\n           \"value\": 50,\n           \"payment_address\": \"ztron15js0jkuxczt8caq5hp59rnh6rgf34sek7vqn9u6ljelxv4nuzz2x9qe3ffm2wzz6ck53yxyhxs6\",\n           \"rcm\": \"74baec30dfac8ed59968955ff245ae002009005194e5b824c35ab88c52e5170e\"\n        }\n     },\n     \"shielded_TRC20_contract_address\": \"41f3392eaa7d38749176e0671dbc6912f8ef956943\"\n }'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>ask</code>: Ask</li> <li><code>nsk</code>: Nsk</li> <li><code>ovk</code>: Outgoing view key</li> <li><code>from_amount</code>: the amount for mint, which is scaled by <code>scalingfactor</code> with note <code>value</code>, namely <code>from_amount</code> = <code>value</code> * <code>scalingFactor</code>. In the above example, the value of <code>scalingFactor</code> is 100</li> <li><code>shielded_receives</code>: the shielded notes to be created</li> <li><code>shielded_TRC20_contract_address</code>: shielded TRC-20 contract address</li> </ul> <p>Return: the shielded TRC-20 transaction parameters</p> <p>Note: the input parameters will differ according to the variety of shielded TRC-20 transaction type</p>"},{"location":"api/http/#walletcreateshieldedcontractparameterswithoutask","title":"wallet/createshieldedcontractparameterswithoutask","text":"<p>Description: create the shielded TRC-20 transaction parameters without Ask, which has three types: mint, transfer and burn <pre><code>demo: curl -X POST  http://127.0.0.1:8090/wallet/createshieldedcontractparameterswithoutask -d\n'{\n    \"ovk\": \"cd361834b3adc06f130de24f7d0c18f92a093cc885d9ce492cc6c02071f7a4f0\",\n    \"from_amount\": \"5000\",\n     \"shielded_receives\": {\n        \"note\": {\n           \"value\": 50,\n           \"payment_address\": \"ztron13lvfnt4rau4ad9mmgztd3aftw49e3amz8gm2kvyzrsaw0ugz2grxwkvcfys5e2gkchj7cnnetjz\",\n           \"rcm\": \"499e73f2f8aaf05fac41a35b8343bde27f6629cbe66d35da5364a99b94a55a06\"\n        }\n     },\n     \"shielded_TRC20_contract_address\": \"41f3392eaa7d38749176e0671dbc6912f8ef956943\"\n }'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>ovk</code>: Outgoing view key</li> <li><code>from_amount</code>: the amount for mint, which is scaled by <code>scalingfactor</code> with note <code>value</code>, namely <code>from_amount</code> = <code>value</code> * <code>scalingFactor</code>. In the above example, the value of <code>scalingFactor</code> is 100</li> <li><code>shielded_receives</code>: the shielded notes to be created</li> <li><code>shielded_TRC20_contract_address</code>: shielded TRC-20 contract address</li> </ul> <p>Return: the shielded TRC-20 transaction parameters</p> <p>Note: the input parameters will differ according to the variety of shielded TRC-20 transaction type </p>"},{"location":"api/http/#walletscanshieldedtrc20notesbyivk","title":"wallet/scanshieldedtrc20notesbyivk","text":"<p>Description: scan the shielded TRC-20 notes by ivk and mark their status of whether spent <pre><code>demo: curl -X POST  http://127.0.0.1:8090/wallet/scanshieldedtrc20notesbyivk -d\n'{\n    \"start_block_index\": 9200,\n    \"end_block_index\": 9240,\n    \"shielded_TRC20_contract_address\": \"41274fc7464fadac5c00c893c58bce6c39bf59e4c7\",\n    \"ivk\": \"9f8e74bb3d7188a2781dc1db38810c6914eef4570a79e8ec8404480948e4e305\",\n    \"ak\":\"8072d9110c9de9d9ade33d5d0f5890a7aa65b0cde42af7816d187297caf2fd64\",\n    \"nk\":\"590bf33f93f792be659fd404df91e75c3b08d38d4e08ee226c3f5219cf598f14\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>start_block_index</code>: the start block index, inclusive</li> <li><code>end_block_index</code>: the end block index, exclusive</li> <li><code>shielded_TRC20_contract_address</code>: shielded TRC-20 contract address</li> <li><code>ivk</code>: Incoming viewing key</li> <li><code>ak</code>: Ak key</li> <li><code>nk</code>: Nk key</li> </ul> <p>Return: notes list</p> <p>Note: block limit\uff08end_block_index - start_block_index &lt;= 1000\uff09</p>"},{"location":"api/http/#walletscanshieldedtrc20notesbyovk","title":"wallet/scanshieldedtrc20notesbyovk","text":"<p>Description: scan the shielded TRC-20 notes by ovk <pre><code>demo: curl -X POST  http://127.0.0.1:8090/wallet/scanshieldedtrc20notesbyovk -d\n'{\n    \"start_block_index\": 9200,\n    \"end_block_index\": 9240,\n    \"shielded_TRC20_contract_address\": \"41274fc7464fadac5c00c893c58bce6c39bf59e4c7\",\n    \"ovk\": \"0ff58efd75e083fe4fd759c8701e1c8cb6961c4297a12b2c800bdb7b2bcab889\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>start_block_index</code>: start block index, inclusive</li> <li><code>end_block_index</code>: end block index, exclusive</li> <li><code>shielded_TRC20_contract_address</code>: shielded TRC-20 contract address</li> <li><code>ovk</code>: Outgoing viewing key</li> </ul> <p>Return: notes list</p> <p>Note: block limit\uff08end_block_index - start_block_index &lt;= 1000\uff09</p>"},{"location":"api/http/#walletisshieldedtrc20contractnotespent","title":"wallet/isshieldedtrc20contractnotespent","text":"<p>Description: check the status whether the specified shielded TRC-20 note is spent</p> <p>Parameters:</p> <ul> <li><code>note</code>: the specified note</li> <li><code>ak</code>: Ak</li> <li><code>nk</code>: Nk</li> <li><code>position</code>: the leaf position index of note commitment in the Merkle tree</li> <li><code>shielded_TRC20_contract_address</code>: the shielded TRC-20 contract address</li> </ul> <p>Return: note status</p> <p>Note: the <code>value</code> in note is the scaled value by <code>scalingFactor</code> set in the shielded TRC-20 contract, namely <code>real_amount</code> = <code>value</code> * <code>scalingFactor</code>. </p>"},{"location":"api/http/#walletgettriggerinputforshieldedtrc20contract","title":"wallet/gettriggerinputforshieldedtrc20contract","text":"<p>Description: get the trigger input data of shielded TRC-20 contract for the shielded TRC-20 parameters without spend authority signature. <pre><code>demo: curl -X POST  http://127.0.0.1:8090/wallet/gettriggerinputforshieldedtrc20contract -d\n'{  \n     \"shielded_TRC20_Parameters\": {\"spend_description\": [{\"value_commitment\": \"e3fcc8609ff6a4b00b77a00ef624f305cec5f55cc7312ff5526d0b3057f2ef9e\",\"anchor\": \"4c9cbebece033dc1d253b93e4a3682187daae4f905515761d10287b801e69816\",\"nullifier\": \"74edce8798a3976ee41e045bb666f3a121c27235b0f1b44b3456d2c84bc725dc\",\"rk\": \"9dcf4254aa7c4fb7c8bc6956d4b0c7c6c87c37a2552e7bf4e60c12cb5bc6c8cd\",\"zkproof\": \"9926045cd1442a7d20153e6abda9f77a6526895f0a29a57cb1bc76ef6b7cacef2d0f4c94aa97c3acacdb95cabb065057b7edb4cbea098149a8aa7114a6a6b340c58007ac64b64e592eb18fdd299de5962a2a32ab0caebb2ab198704c751a9d0e143d68a50257d7c9e2230a7420fa46450299fd167141367e201726532d8e815413d8571d6c8c12937674dec92caf1f4583ebe560ac4c7eba290deee0a1c0da5f72c0b9df89fb3b338c683b654b3dc2373a4c2a4fef7f4fa489b44405fb7d2bfb\"}],\"binding_signature\": \"11e949887d9ec92eb32c78f0bc48afdc9a16a2ecbd5a0eca1be070fb900eeda347918bd6e9521d4baf1f74963bee0c1956559623a9e7cbc886941b227341ea06\",\"message_hash\": \"7e6a00736c4f9e0036cb74c7fa3b1e3cd8f6bf0f038edeb03b668c4c5536a357\",\"parameter_type\": \"burn\"},\n     \"spend_authority_signature\": [\n       {\n         \"value\": \"eeaaecd725ac80ec398b95cf188b769c1be66cc8e76e6c90843b7f23818704595719ce8bf694ffb8cd7aaa8739d50fe8eea7ba39d5026c4b019c973185ca7201\"\n       }\n     ],\n     \"amount\": \"6000\",\n     \"transparent_to_address\": \"4140cd765f8e637a2bbe00f9bc458f6b21eb0e648f\"\n }'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>shielded_TRC20_Parameters</code>: the generated shielded TRC-20 parameters</li> <li><code>spend_authority_signature</code>: the spend authority signatures</li> <li><code>amount</code>: the amount </li> <li><code>transparent_to_address</code>: the receiver for the <code>burn</code> operation.</li> </ul> <p>Return: the input data for triggering shielded TRC-20 contract.</p>"},{"location":"api/http/#walletgetrcm","title":"wallet/getrcm","text":"<p>Description: To get a random commitment trapdoor <pre><code>curl -X GET  http://127.0.0.1:8090/wallet/getrcm\n</code></pre> Parameters: N/A</p> <p>Return:rcm</p>"},{"location":"api/http/#walletgetmerkletreevoucherinfo","title":"wallet/getmerkletreevoucherinfo","text":"<p>Description: To get a merkle tree information of a note <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/getmerkletreevoucherinfo -d\n'{\n  \"out_points\":[{\n    \"hash\":\"185b3e085723f5862b3a3c3cf54d52f5c1eaf2541e3a1e0ecd08bc12cd958d74\",\n    \"index\":0\n  }]\n}'\n</code></pre></p> <p>Parameter <code>out_points</code>: Note information</p> <p>Return: A merkle tree of a note</p>"},{"location":"api/http/#walletisspend","title":"wallet/isspend","text":"<p>Description: To check whether a note is spent or not <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/isspend -d\n'{\n    \"ak\": \"a3e65d509b675aaa2aeda977ceff11eebd76218079b6f543d78a615e396ca129\",\n    \"nk\": \"62cfda9bea09a53cf2a21022057913734a8458969e11e0bb9c59ead48fbce83e\",\n    \"note\": {\n        \"payment_address\": \"ztron1aqgauawtkelxfu2w6s48cwh0mchjt6kwpj44l4wym3pullx0294j4r4v7kpm75wnclzycsw73mq\",\n        \"rcm\": \"74a16c1b27ec7fbf06881d9d35ddaab1554838b1bddcd54f6bd8a9fb4ba0b80a\",\n        \"value\": 500000000\n    },\n    \"txid\": \"7d09e471bb047d3ac044d5d6691b3721a2dddbb683ac02c207fbe78af6302463\",\n    \"index\": 1\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>ak</code>: Ak key</li> <li><code>nk</code>: Nk key</li> <li><code>note</code>: Note information</li> <li><code>txid</code>: Transaction id</li> <li><code>index</code>: Note index</li> </ul> <p>Return: Note status</p>"},{"location":"api/http/#walletcreatespendauthsig","title":"wallet/createspendauthsig","text":"<p>Description: To create a signature for a transaction <pre><code>$ curl -X POST  http://127.0.0.1:8090/wallet/createspendauthsig -d\n'{\n    \"ask\": \"e3ebcba1531f6d9158d9c162660c5d7c04dadf77d85d7436a9c98b291ff69a09\",\n    \"tx_hash\": \"3b78fee6e956f915ffe082284c5f18640edca9c57a5f227e5f7d7eb65ad61502\",\n    \"alpha\": \"2608999c3a97d005a879ecdaa16fd29ae434fb67b177c5e875b0c829e6a1db04\"\n}'\n</code></pre></p> <p>Parameters:</p> <ul> <li><code>ask</code>: Ask key</li> <li><code>tx_hash</code>: Transaction hash</li> <li><code>alpha</code>: Alpha</li> </ul> <p>Return: A signature</p>"},{"location":"api/http/#pending-pool","title":"Pending Pool","text":"<p>The following are Pending Pool related APIs:</p> <ul> <li>wallet/gettransactionfrompending</li> <li>wallet/gettransactionlistfrompending</li> <li>wallet/getpendingsize</li> </ul>"},{"location":"api/http/#walletgettransactionfrompending","title":"wallet/gettransactionfrompending","text":"<p>Get transaction details from the pending pool <pre><code>curl -X POST  http://127.0.0.1:8090/wallet/gettransactionfrompending -d\n'{\n  \"value\": \"txId\"\n}'\n</code></pre> Parameters: value: transaction id</p> <p>Return: Transaction details</p>"},{"location":"api/http/#walletgettransactionlistfrompending","title":"wallet/gettransactionlistfrompending","text":"<p>Get transaction list information from pending pool <pre><code>curl -X get  http://127.0.0.1:8090/wallet/gettransactionlistfrompending\n</code></pre> Parameters: N/A</p> <p>Return: Pending transaction IDs in the pool</p>"},{"location":"api/http/#walletgetpendingsize","title":"wallet/getpendingsize","text":"<p>Get the size of the pending pool queue <pre><code>curl -X get  http://127.0.0.1:8090/wallet/getpendingsize\n</code></pre> Parameters: N/A</p> <p>Return:pending pool size</p>"},{"location":"api/http/#fullnode-solidity-http-api","title":"FullNode Solidity HTTP API","text":""},{"location":"api/http/#account-resources_1","title":"Account Resources","text":""},{"location":"api/http/#walletsoliditygetaccount","title":"walletsolidity/getaccount","text":"<p>Description: Query an account information <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getaccount -d '{\"address\": \"41E552F6487585C2B58BC2C9BB4492BC1F17132CD0\"}'\n</code></pre> Parameters: <code>address</code> - Account to query, default hexString</p> <p>Return: Account object</p>"},{"location":"api/http/#walletsoliditygetdelegatedresource","title":"walletsolidity/getdelegatedresource","text":"<p>Description: Query the energy delegation information <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getdelegatedresource -d '\n{\n\"fromAddress\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n\"toAddress\": \"41c6600433381c731f22fc2b9f864b14fe518b322f\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>fromAddress</code>:  Energy from address, default hexString</li> <li><code>toAddress</code>: Energy to address, default hexString</li> </ul> <p>Return: Energy delegation information list, the elements of the list is DelegatedResource</p>"},{"location":"api/http/#walletsoliditygetdelegatedresourceaccountindex","title":"walletsolidity/getdelegatedresourceaccountindex","text":"<p>Description: Query the energy delegation index by an account <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getdelegatedresourceaccountindex -d '\n{\n\"value\": \"419844f7600e018fd0d710e2145351d607b3316ce9\",\n}'\n</code></pre> Parameters: </p> <ul> <li><code>value</code>: Address, default hexString</li> </ul> <p>Return: DelegatedResourceAccountIndex of the address</p>"},{"location":"api/http/#walletsoliditygetaccountbyid","title":"walletsolidity/getaccountbyid","text":"<p>Description: Query an account information by account id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getaccountbyid -d '{\"account_id\":\"6161616162626262\"}'\n</code></pre> Parameters: <code>account_id</code> - Account id, default hexString</p> <p>Return: Account object</p>"},{"location":"api/http/#walletsoliditygetavailableunfreezecount","title":"walletsolidity/getavailableunfreezecount","text":"<p>Description:Remaining times of executing unstake operation in Stake2.0 <pre><code>curl -X POST http://127.0.0.1:8090/walletsolidity/getavailableunfreezecount -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> </ul> <p>Return:Remaining times of available unstaking.</p>"},{"location":"api/http/#walletsoliditygetcanwithdrawunfreezeamount","title":"walletsolidity/getcanwithdrawunfreezeamount","text":"<p>Description: Query the withdrawable balance at the specified timestamp In Stake2.0 <pre><code>curl -X POST http://127.0.0.1:8090/walletsolidity/getcanwithdrawunfreezeamount -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"timestamp\": 1667977444000,\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>timestamp</code>: query cutoff timestamp, in milliseconds.</li> </ul> <p>Return: Withdrawable balance, unit is sun.</p>"},{"location":"api/http/#walletsoliditygetcandelegatedmaxsize","title":"walletsolidity/getcandelegatedmaxsize","text":"<p>Description: In Stake2.0, query the amount of delegatable resources share of the specified resource type for an address, unit is sun. <pre><code>curl -X POST http://127.0.0.1:8090/walletsolidity/getcandelegatedmaxsize -d\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"type\": 0,\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>owner_address</code>: Account address</li> <li><code>type</code>: Resource type, 0 is bandwidth, 1 is energy</li> </ul> <p>Return: The amount of delegatable resource share, unit is sun.</p>"},{"location":"api/http/#walletsoliditygetdelegatedresourcev2","title":"walletsolidity/getdelegatedresourcev2","text":"<p>In Stake2.0, query the detail of resource share delegated from <code>fromAddress</code> to <code>toAddress</code> <pre><code>curl -X POST http://127.0.0.1:8090/walletsolidity/getdelegatedresourcev2 -d\n'{\n  \"fromAddress\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"toAddress\": \"TPswDDCAWhJAZGdHPidFg5nEf8TkNToDX1\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>fromAddress</code>: resource from address, default hexString</li> <li><code>toAddress</code>: resource to address</li> </ul> <p>Return: Resource delegation list</p>"},{"location":"api/http/#walletsoliditygetdelegatedresourceaccountindexv2","title":"walletsolidity/getdelegatedresourceaccountindexv2","text":"<p>In Stake2.0, query the resource delegation index by an account. Two lists will return, one is the list of addresses the account has delegated its resources(<code>toAddress</code>), and the other is the list of addresses that have delegated resources to the account(<code>fromAddress</code>). <pre><code>curl -X POST http://127.0.0.1:8090/walletsolidity/getdelegatedresourceaccountindexv2 -d\n'{\n  \"value\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"visible\": true\n}\n'\n</code></pre></p> <p>Parameters: </p> <ul> <li><code>value</code>: account address</li> </ul> <p>Return: Two lists will return, one is the list of addresses the account has delegated its resources(<code>toAddress</code>), and the other is the list of addresses that have delegated resources to the account(<code>fromAddress</code>).</p>"},{"location":"api/http/#voting-srs","title":"Voting &amp; SRs","text":""},{"location":"api/http/#walletsoliditylistwitnesses","title":"walletsolidity/listwitnesses","text":"<p>Description: Query the list of super representatives <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/listwitnesses\n</code></pre> Parameters: N/A</p> <p>Return: List of all super representatives</p>"},{"location":"api/http/#trc10-token_1","title":"TRC10 Token","text":""},{"location":"api/http/#walletsoliditygetassetissuelist","title":"walletsolidity/getassetissuelist","text":"<p>Description: Query the list of all tokens <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getassetissuelist\n</code></pre> Parameters: N/A</p> <p>Return: The list of all tokens</p>"},{"location":"api/http/#walletsoliditygetpaginatedassetissuelist","title":"walletsolidity/getpaginatedassetissuelist","text":"<p>Description: Query the list of all the tokens by pagination <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getpaginatedassetissuelist -d '{\"offset\": 0, \"limit\":10}'\n</code></pre> Parameters:  - <code>offset</code>: The index of the start token - <code>limit</code>: The amount of tokens per page</p> <p>Return: List of tokens</p>"},{"location":"api/http/#walletsoliditygetassetissuebyname","title":"walletsolidity/getassetissuebyname","text":"<p>Description: Query a token by token name <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getassetissuebyname -d '{\"value\": \"44756354616E\"}'\n</code></pre> Parameters: <code>value</code> - Token name, default hexString</p> <p>Return: Token object Note: Since Odyssey-v3.2, <code>getassetissuebyid</code> or <code>getassetissuelistbyname</code> is recommended, as since v3.2, token name can be repeatable. If the token name you query is not unique, this api will throw out an error.</p>"},{"location":"api/http/#walletsoliditygetassetissuelistbyname","title":"walletsolidity/getassetissuelistbyname","text":"<p>Description: Query the token list by name <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getassetissuelistbyname -d '{\"value\": \"44756354616E\"}'\n</code></pre> Parameters: <code>value</code> - Token name, default hexString</p> <p>Return: Token list</p>"},{"location":"api/http/#walletsoliditygetassetissuebyid","title":"walletsolidity/getassetissuebyid","text":"<p>Description: Query a token by token id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getassetissuebyid -d '{\"value\": \"1000001\"}'\n</code></pre> Parameters: <code>value</code> - Token id</p> <p>Return: Token object</p>"},{"location":"api/http/#blocks","title":"Blocks","text":""},{"location":"api/http/#walletsoliditygetnowblock","title":"walletsolidity/getnowblock","text":"<p>Description: Query the latest block information <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getnowblock\n</code></pre> Parameters: N/A</p> <p>Return: The latest block from solidityNode</p>"},{"location":"api/http/#walletsoliditygetblockbynum","title":"walletsolidity/getblockbynum","text":"<p>Description: Query a block information by block height <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getblockbynum -d '{\"num\" : 100}'\n</code></pre> Parameters: <code>num</code> - Block height</p> <p>Return: Block information</p>"},{"location":"api/http/#walletsoliditygetblockbyid","title":"walletsolidity/getblockbyid","text":"<p>Description: Query a block information by block id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getblockbyid-d '{\"value\":\n\"0000000000038809c59ee8409a3b6c051e369ef1096603c7ee723c16e2376c73\"}'\n</code></pre> Parameters: <code>value</code> -  Block id</p> <p>Return: The block object</p>"},{"location":"api/http/#walletsoliditygetblockbylimitnext","title":"walletsolidity/getblockbylimitnext","text":"<p>Description: Query a list of blocks by range <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getblockbylimitnext -d '{\"startNum\": 1, \"endNum\": 2}'\n</code></pre> Parameters: </p> <ul> <li><code>startNum</code>: The start block height, inclusive</li> <li><code>endNum</code>: The end block height, exclusive</li> </ul> <p>Return: List of blocks</p>"},{"location":"api/http/#walletsoliditygetblockbylatestnum","title":"walletsolidity/getblockbylatestnum","text":"<p>Description: Query the latest few blocks <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getblockbylatestnum -d '{\"num\": 5}'\n</code></pre> Parameters: <code>num</code> - The number of blocks expected to return</p> <p>Return: List of blocks</p>"},{"location":"api/http/#walletgetnodeinfo_1","title":"wallet/getnodeinfo","text":"<p>Description: Query the current node information <pre><code>curl -X GET http://127.0.0.1:8091/wallet/getnodeinfo\n</code></pre> Parameters: N/A</p> <p>Return: NodeInfo of the current node</p>"},{"location":"api/http/#transactions","title":"Transactions","text":""},{"location":"api/http/#walletsoliditygettransactionbyid","title":"walletsolidity/gettransactionbyid","text":"<p>Description: Query an transaction information by transaction id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/gettransactionbyid -d '{\"value\" : \"309b6fa3d01353e46f57dd8a8f27611f98e392b50d035cef213f2c55225a8bd2\"}'\n</code></pre> Parameters: <code>value</code> - Transaction id</p> <p>Return: Transaction information</p>"},{"location":"api/http/#walletsoliditygettransactioncountbyblocknum","title":"walletsolidity/gettransactioncountbyblocknum","text":"<p>Description: Query th the number of transactions in a specific block <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/gettransactioncountbyblocknum -d '{\"num\" : 100}'\n</code></pre> Parameters: <code>num</code> - Block height</p> <p>Return: The number of transactions</p>"},{"location":"api/http/#walletsoliditygettransactioninfobyid","title":"walletsolidity/gettransactioninfobyid","text":"<p>Description: Query the transaction fee, block height by transaction id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/gettransactioninfobyid -d '{\"value\" : \"309b6fa3d01353e46f57dd8a8f27611f98e392b50d035cef213f2c55225a8bd2\"}'\n</code></pre> Parameters: <code>value</code> - Transaction id</p> <p>Return: Transaction fee, block height and the time of creation</p>"},{"location":"api/http/#walletsoliditygettransactioninfobyblocknum","title":"walletsolidity/gettransactioninfobyblocknum","text":"<p>Description: Query the list of transaction information in a specific block <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/gettransactioninfobyblocknum -d '{\"num\" : 100}'\n</code></pre> Parameters: <code>num</code> - Block height</p> <p>Return: The list of transaction information inside the queried block</p>"},{"location":"api/http/#dex-exchanges","title":"DEX Exchanges","text":""},{"location":"api/http/#walletsoliditygetexchangebyid","title":"walletsolidity/getexchangebyid","text":"<p>Description: Query an exchange pair by exchange pair id <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/getexchangebyid -d {\"id\":1}\n</code></pre> Parameters: </p> <ul> <li>id: Exchange pair id</li> </ul> <p>Return: Exchange pair information</p>"},{"location":"api/http/#walletsoliditylistexchanges","title":"walletsolidity/listexchanges","text":"<p>Description: Query the list of all the exchange pairs <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/listexchanges\n</code></pre> Parameters: N/A</p> <p>Return: The list of all the exchange pairs</p>"},{"location":"api/http/#tronz-shielded-smart-contract_1","title":"TRONZ Shielded Smart Contract","text":""},{"location":"api/http/#walletsoliditygetmerkletreevoucherinfo","title":"walletsolidity/getmerkletreevoucherinfo","text":"<p>Description: Get the Merkle tree information of a note <pre><code>curl -X POST  http://127.0.0.1:8090/walletsolidity/getmerkletreevoucherinfo -d\n'{\n    \"out_points\":[{\n        \"hash\":\"185b3e085723f5862b3a3c3cf54d52f5c1eaf2541e3a1e0ecd08bc12cd958d74\",\n        \"index\":0\n    }]\n}'\n</code></pre> Parameters: </p> <ul> <li><code>out_points</code>: Note information</li> </ul> <p>Return: Merkle tree information of a note</p>"},{"location":"api/http/#walletsolidityscannotebyivk","title":"walletsolidity/scannotebyivk","text":"<p>Description: Get all notes related to ivk <pre><code>curl -X POST  http://127.0.0.1:8090/walletsolidity/scannotebyivk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ivk\": \"80a481c3c739e54b4e0608090b3a1a6e9f8dce42346e95bf5a2d8a487bf45c05\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>start_block_index</code>: The start block height, inclusive</li> <li><code>end_block_index</code>: The end block height, exclusive</li> <li><code>ivk</code>: Incoming viewing key</li> </ul> <p>Return: Notes list Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletsolidityscanandmarknotebyivk","title":"walletsolidity/scanandmarknotebyivk","text":"<p>Description: Get all notes with spent status related to ivk <pre><code>curl -X POST  http://127.0.0.1:8090/walletsolidity/scanandmarknotebyivk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ivk\": \"80a481c3c739e54b4e0608090b3a1a6e9f8dce42346e95bf5a2d8a487bf45c05\",\n    \"ak\": \"1d4f9b5551f4aa9443ceb263f0e208eb7e26080264571c5ef06de97a646fe418\",\n    \"nk\": \"748522c7571a9da787e43940c9a474aa0c5c39b46c338905deb6726fa3678bdb\"\n}'\n</code></pre> Parameters: </p> <ul> <li><code>start_block_index</code>: The start block height, inclusive</li> <li><code>end_block_index</code>: The end block height, exclusive</li> <li><code>ivk</code>: Incoming viewing key</li> <li><code>ak</code>: Ak key</li> <li><code>nk</code>: Nk key</li> </ul> <p>Return: Notes list Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletsolidityscannotebyovk","title":"walletsolidity/scannotebyovk","text":"<p>Description: Query all notes related to ovk <pre><code>curl -X POST  http://127.0.0.1:8090/walletsolidity/scannotebyovk -d\n'{\n    \"start_block_index\": 0,\n    \"end_block_index\": 100,\n    \"ovk\": \"705145aa18cbe6c11d5d0011419a98f3d5b1d341eb4727f1315597f4bdaf8539\"\n}'\n</code></pre> Parameters:</p> <ul> <li><code>start_block_index</code>: The start block height, inclusive</li> <li><code>end_block_index</code>: The end block height, exclusive</li> <li><code>ovk</code>: Outgoing viewing key</li> </ul> <p>Return: Notes list Note: Range limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletsolidityisspend","title":"walletsolidity/isspend","text":"<p>Description: Check whether a note has been spent <pre><code>curl -X POST  http://127.0.0.1:8090/walletsolidity/isspend -d\n'{\n    \"ak\": \"a3e65d509b675aaa2aeda977ceff11eebd76218079b6f543d78a615e396ca129\",\n    \"nk\": \"62cfda9bea09a53cf2a21022057913734a8458969e11e0bb9c59ead48fbce83e\",\n    \"note\": {\n        \"payment_address\": \"ztron1aqgauawtkelxfu2w6s48cwh0mchjt6kwpj44l4wym3pullx0294j4r4v7kpm75wnclzycsw73mq\",\n        \"rcm\": \"74a16c1b27ec7fbf06881d9d35ddaab1554838b1bddcd54f6bd8a9fb4ba0b80a\",\n        \"value\": 500000000\n    },\n    \"txid\": \"7d09e471bb047d3ac044d5d6691b3721a2dddbb683ac02c207fbe78af6302463\",\n    \"index\": 1\n}'\n</code></pre> Parameters:</p> <ul> <li><code>ak</code>: Ak</li> <li><code>nk</code>: Nk</li> <li><code>note</code>: Note information</li> <li><code>txid</code>: Transaction id</li> <li><code>index</code>: Note index</li> </ul> <p>Return: Whether a note has been spent</p>"},{"location":"api/http/#walletsolidityscanshieldedtrc20notesbyivk","title":"walletsolidity/scanshieldedtrc20notesbyivk","text":"<p>Description: Scan the shielded TRC-20 notes by ivk, and mark whether it has been spent <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/scanshieldedtrc20notesbyivk -d\n'{\n    \"start_block_index\": 9200,\n    \"end_block_index\": 9240,\n    \"shielded_TRC20_contract_address\": \"41274fc7464fadac5c00c893c58bce6c39bf59e4c7\",\n    \"ivk\": \"9f8e74bb3d7188a2781dc1db38810c6914eef4570a79e8ec8404480948e4e305\",\n    \"ak\":\"8072d9110c9de9d9ade33d5d0f5890a7aa65b0cde42af7816d187297caf2fd64\",\n    \"nk\":\"590bf33f93f792be659fd404df91e75c3b08d38d4e08ee226c3f5219cf598f14\"\n}'\n</code></pre> Parameters:</p> <ul> <li><code>start_block_index</code>: The start block index, inclusive</li> <li><code>end_block_index</code>: The end block index, exclusive</li> <li><code>shielded_TRC20_contract_address</code>: Shielded TRC-20 contract address</li> <li><code>ivk</code>: Incoming viewing key</li> <li><code>ak</code>: Ak key</li> <li><code>nk</code>: Nk key</li> </ul> <p>Return: Notes list Note: Block limit\uff08end_block_index - start_block_index &lt;= 1000\uff09</p>"},{"location":"api/http/#walletsolidityscanshieldedtrc20notesbyovk","title":"walletsolidity/scanshieldedtrc20notesbyovk","text":"<p>Description: Scan the shielded TRC-20 notes by ovk <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/scanshieldedtrc20notesbyovk -d\n'{\n    \"start_block_index\": 9200,\n    \"end_block_index\": 9240,\n    \"shielded_TRC20_contract_address\": \"41274fc7464fadac5c00c893c58bce6c39bf59e4c7\",\n    \"ovk\": \"0ff58efd75e083fe4fd759c8701e1c8cb6961c4297a12b2c800bdb7b2bcab889\"\n}'\n</code></pre> Parameters:</p> <ul> <li><code>start_block_index</code>: Start block index, inclusive</li> <li><code>end_block_index</code>: Start block index, inclusive</li> <li><code>shielded_TRC20_contract_address</code>: Shielded TRC-20 contract address</li> <li><code>ovk</code>: Outgoing viewing key</li> </ul> <p>Return: Notes list</p> <p>Note: Block limit (end_block_index - start_block_index &lt;= 1000)</p>"},{"location":"api/http/#walletsolidityisshieldedtrc20contractnotespent","title":"walletsolidity/isshieldedtrc20contractnotespent","text":"<p>Description: Check the status whether the specified shielded TRC-20 note is spent <pre><code>curl -X POST  http://127.0.0.1:8091/walletsolidity/scanshieldedtrc20notesbyovk -d\n'{\n   \"note\": {\n       \"value\": 40,\n       \"payment_address\":\"ztron1768kf7dy4qquefp46szk978d65eeua66yhr4zv260c0uzj68t3tfjl3en9lhyyfxalv4jus30xs\",\n       \"rcm\": \"296070782a94c6936b0b4f6daf8d7c7605a4374fe595b96148dc0f4b59015d0d\"\n    },\n    \"ak\": \"8072d9110c9de9d9ade33d5d0f5890a7aa65b0cde42af7816d187297caf2fd64\",\n    \"nk\": \"590bf33f93f792be659fd404df91e75c3b08d38d4e08ee226c3f5219cf598f14\",\n    \"position\": 272,\n    \"shielded_TRC20_contract_address\": \"41274fc7464fadac5c00c893c58bce6c39bf59e4c7\"\n}'\n</code></pre> Parameters:</p> <ul> <li><code>note</code>: The specified note</li> <li><code>ak</code>: Ak</li> <li><code>nk</code>: Nk</li> <li><code>position</code>: The leaf position index of note commitment in the Merkle tree</li> <li><code>shielded_TRC20_contract_address</code>: The shielded TRC-20 contract address</li> </ul> <p>Return: Note status</p> <p>Note: The <code>value</code> in note is the scaled value by <code>scalingFactor</code> set in the shielded TRC-20 contract, namely <code>real_amount = value * scalingFactor</code>.</p>"},{"location":"api/json-rpc/","title":"jsonRPC API","text":""},{"location":"api/json-rpc/#overview","title":"Overview","text":"<p>JSON-RPC is a stateless, lightweight remote procedure call (RPC) protocol. The JSON-RPC interface supported by the TRON network is compatible with Ethereum's. However, due to the difference in chain mechanism and design, TRON cannot support some interfaces on Ethereum. At the same time, TRON also provides dedicated APIs to create different types of transactions.</p> <p>Please pay attention</p> <ul> <li>The JSON-RPC service needs to be enabled and set the port in the node configuration file. If not configured, the service is disable by default. </li> </ul>"},{"location":"api/json-rpc/#how-to-enable-or-disable-json-rpc-service-of-a-node","title":"How to enable or disable JSON-RPC service of a node","text":"<p>Add below items in node's configuration file, then enable or disable it: <pre><code>node.jsonrpc {  \n    httpFullNodeEnable = true  \n    httpFullNodePort = 50545  \n    httpSolidityEnable = true  \n    httpSolidityPort = 50555  \n}\n</code></pre></p>"},{"location":"api/json-rpc/#hex-value-encoding","title":"HEX value encoding","text":"<p>At present there are two key data types that are passed over JSON: unformatted byte arrays and quantities. Both are passed with a hex encoding, however with different requirements to formatting:</p> <p>When encoding QUANTITIES (integers, numbers): encode as hex, prefix with \u201c0x\u201d, the most compact representation (slight exception: zero should be represented as \u201c0x0\u201d). Examples:</p> <ul> <li>0x41 (65 in decimal)</li> <li>0x400 (1024 in decimal)</li> <li>WRONG: 0x (should always have at least one digit - zero is \u201c0x0\u201d)</li> <li>WRONG: 0x0400 (no leading zeros allowed)</li> <li>WRONG: ff (must be prefixed 0x)</li> </ul> <p>When encoding UNFORMATTED DATA (byte arrays, account addresses, hashes, bytecode arrays): encode as hex, prefix with \u201c0x\u201d, two hex digits per byte. Examples:</p> <ul> <li>0x41 (size 1, \u201cA\u201d)</li> <li>0x004200 (size 3, \u201c\\0B\\0\u201d)</li> <li>0x (size 0, \u201c\u201d)</li> <li>WRONG: 0xf0f0f (must be even number of digits)</li> <li>WRONG: 004200 (must be prefixed 0x)</li> </ul>"},{"location":"api/json-rpc/#eth","title":"eth","text":""},{"location":"api/json-rpc/#eth_accounts","title":"eth_accounts","text":"<p>Returns a list of addresses owned by the client.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>Empty List</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '\n\n{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"eth_accounts\", \"params\": []}'\n</code></pre> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":[]}\n</code></pre>"},{"location":"api/json-rpc/#eth_blocknumber","title":"eth_blockNumber","text":"<p>Returns the number of the most recent block.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>The latest block number.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[],\"id\":64}'\n</code></pre> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x20e0cf0\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_call","title":"eth_call","text":"<p>Executes a message call immediately without creating a transaction on the block chain.</p> <p>Parameters</p> <p>1. Object - The transaction call object, the items in it as below.</p> Item Name Data Type Description from DATA, 20 Bytes Caller address. Hex format address, remove the prefix \"41\" to DATA, 20 Bytes Contract address.  Hex format address, remove the prefix \"41\" gas QUANTITY Not supported. The value is 0x0 gasPrice QUANTITY Not supported. The value is 0x0 value QUANTITY Not supported. The value is 0x0 data DATA Hash of the method signature and encoded parameters. <p>2. QUANTITY|TAG - currently, only \"latest\" is available. </p> <p>Returns</p> <p>DATA - the return value of executed contract function.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_call\",\n\n    \"params\": [{\n\n        \"from\": \"0xF0CC5A2A84CD0F68ED1667070934542D673ACBD8\",\n\n        \"to\": \"0x70082243784DCDF3042034E7B044D6D342A91360\",\n\n        \"gas\": \"0x0\",\n\n        \"gasPrice\": \"0x0\",\n\n        \"value\": \"0x0\",\n\n        \"data\": \"0x70a08231000000000000000000000041f0cc5a2a84cd0f68ed1667070934542d673acbd8\"\n\n    }, \"latest\"],\n\n    \"id\": 1\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x\"}\n</code></pre> <pre><code>### eth_chainId\n\n*Returns the chainId of the TRON network which is the last four bytes of the genesis block hash*\n\n**Parameters**  \n\nNone\n\n**Returns**  \n\nDATA - The chainId of the TRON network\n\n**Example**\n\n```curl\n\ncurl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_chainId\",\"params\":[],\"id\":79}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":79,\"result\":\"0x2b6653dc\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_coinbase","title":"eth_coinbase","text":"<p>Returns the super representative address of the current node.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>DATA - The super representative address of the node.   (Note: Return the first address If more than one super representative address is configured, return error if there is no valid address or the address did not generate any block, the error will be \u201cetherbase must be explicitly specified\u201d . )</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"eth_coinbase\", \"params\": []}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"error\":{\"code\":-32000,\"message\":\"etherbase must be explicitly specified\",\"data\":\"{}\"}}\n</code></pre>"},{"location":"api/json-rpc/#eth_estimategas","title":"eth_estimateGas","text":"<p>Get the required energy through triggerConstantContract.</p> <p>Parameters </p> <p>object - The transaction call object, the items in it as below</p> Item Name Data Type Description from DATA, 20 Bytes address of the sender to DATA, 20 Bytes address of the receiver gas QUANTITY unused. gasPrice QUANTITY unused. value QUANTITY Integer of the value sent with this transaction data DATA Hash of the method signature and encoded parameters. <p>Returns </p> <p>The amount of energy used.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 1,\n\n    \"method\": \"eth_estimateGas\",\n\n    \"params\": [{\n\n        \"from\": \"0x41F0CC5A2A84CD0F68ED1667070934542D673ACBD8\",\n\n        \"to\": \"0x4170082243784DCDF3042034E7B044D6D342A91360\",\n\n        \"gas\": \"0x01\",\n\n        \"gasPrice\": \"0x8c\",\n\n        \"value\": \"0x01\",\n\n        \"data\": \"0x70a08231000000000000000000000041f0cc5a2a84cd0f68ed1667070934542d673acbd8\"\n\n    }]\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x0\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_gasprice","title":"eth_gasPrice","text":"<p>Returns the current energy price in sun.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>Integer of the current energy price in sun.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"eth_gasPrice\", \"params\": []}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x8c\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getbalance","title":"eth_getBalance","text":"<p>Returns the balance of the account of the given address.</p> <p>Parameters</p> Index Data Type Description 1 DATA, 20 Bytes address to check for balance. 2 QUANTITY only \"latest\" is available now <p>Returns</p> <p>QUANTITY - integer of the current balance in sun.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getBalance\",\n\n    \"params\": [\"0x41f0cc5a2a84cd0f68ed1667070934542d673acbd8\", \"latest\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x492780\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getblockbyhash","title":"eth_getBlockByHash","text":"<p>Returns information about a block by hash.</p> <p>Parameters</p> Index Data Type Description 1 DATA, 32 Bytes hash of a block 2 Boolean If true it returns the full transaction objects, if false only the hashes of the transactions. <p>Returns</p> <p>object - a block object  or null when no block was found. The block includes items as below.</p> Item Name Data Type Description number QUANTITY block number hash DATA, 32 Bytes hash of the block parentHash DATA, 32 Bytes hash of the parent block nonce QUANTITY unused sha3Uncles DATA, 32 Bytes SHA3 of the uncles data in the block logsBloom DATA, 256 Bytes the bloom filter for the logs of the block. transactionsRoot DATA, 32 Bytes the root of the transaction trie of the block stateRoot DATA, 32 Bytes the root of the final state trie of the block receiptsRoot DATA, 32 Bytes the root of the receipts trie of the block miner DATA, 20 Bytes the address of the beneficiary to whom the mining rewards were given difficulty QUANTITY integer of the difficulty for this block totalDifficulty QUANTITY integer of the total difficulty of the chain until this block extraData DATA the \u201cextra data\u201d field of this block size QUANTITY integer the size of this block in bytes gasLimit QUANTITY the maximum gas allowed in this block gasUsed QUANTITY the total used gas by all transactions in this block timestamp QUANTITY the unix timestamp for when the block was created, the unit is second. transactions Array Array of transaction objects, or 32 Bytes transaction hashes depending on the last given parameter. uncles Array Array of uncle hashes <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getBlockByHash\",\n\n    \"params\": [\"0x0000000000f9cc56243898cbe88685678855e07f51c5af91322c225ce3693868\", false],\n\n    \"id\": 1\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}\n</code></pre>"},{"location":"api/json-rpc/#eth_getblockbynumber","title":"eth_getBlockByNumber","text":"<p>Returns information about a block by hash.</p> <p>Parameters</p> Index Data Type Description 1 QUANTITY|TAG Integer of a block number, or the string \"earliest\", \"latest\" 2 Boolean If true it returns the full transaction objects, if false only the hashes of the transactions. <p>Returns</p> <p>object - a block object  or null when no block was found. See eth_getBlockByHash</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getBlockByNumber\",\n\n    \"params\": [\"0xF9CC56\", true],\n\n    \"id\": 1\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":null}\n</code></pre>"},{"location":"api/json-rpc/#eth_getblocktransactioncountbyhash","title":"eth_getBlockTransactionCountByHash","text":"<p>Returns the number of transactions in a block from a block matching the given block hash.</p> <p>Parameters</p> <p>DATA, 32 Bytes - hash of a block</p> <p>Returns</p> <p>QUANTITY - integer of the number of transactions in this block.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 1,\n\n    \"method\": \"eth_getBlockTransactionCountByHash\",\n\n    \"params\": [\"0x00000000020ef11c87517739090601aa0a7be1de6faebf35ddb14e7ab7d1cc5b\"]\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x39\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getblocktransactioncountbynumber","title":"eth_getBlockTransactionCountByNumber","text":"<p>Returns the number of transactions in a block matching the given block number.</p> <p>Parameters</p> <p>QUANTITY|TAG - integer of a block number, or the string \"earliest\" or \"latest\".  </p> <p>Returns</p> <p>QUANTITY - integer of the number of transactions in this block.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getBlockTransactionCountByNumber\",\n\n    \"params\": [\"0xF96B0F\"],\n\n    \"id\": 1\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x23\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getcode","title":"eth_getCode","text":"<p>Returns runtime code of a given smart contract address.</p> <p>Parameters</p> Index Data Type Description 1 DATA, 20 Bytes contract address 2 QUANTITY|TAG currently, only \"latest\" is available <p>Returns</p> <p>DATA - the runtime code from the given address.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getCode\",\n\n    \"params\": [\"0x4170082243784DCDF3042034E7B044D6D342A91360\", \"latest\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getstorageat","title":"eth_getStorageAt","text":"<p>Returns the value from a storage position at a given address. It can be used to get the value of a variable in a contract.</p> <p>Parameters</p> Index Data Type Description 1 DATA, 20 Bytes address 2 QUANTITY integer of the position in the storage 3 QUANTITY|TAG currently only support \"latest\" <p>Returns</p> <p>DATA - the value at this storage position.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getStorageAt\",\n\n    \"params\": [\"0xE94EAD5F4CA072A25B2E5500934709F1AEE3C64B\", \"0x29313b34b1b4beab0d3bad2b8824e9e6317c8625dd4d9e9e0f8f61d7b69d1f26\", \"latest\"],\n\n    \"id\": 1\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x0000000000000000000000000000000000000000000000000000000000000000\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_gettransactionbyblockhashandindex","title":"eth_getTransactionByBlockHashAndIndex","text":"<p>Returns information about a transaction by block hash and transaction index position.</p> <p>Parameters</p> Index Data Type Description 1 DATA, 32 Bytes hash of a block 2 QUANTITY the transaction index position <p>Returns</p> <p>object - a transaction object  or null when no transaction was found. The transaction includes items as below.</p> Item Name Data Type Description blockHash DATA, 32 Bytes hash of the block where this transaction was in. blockNumber QUANTITY block number where this transaction was in. from DATA, 20 Bytes address of the sender gas QUANTITY unused. gasPrice QUANTITY energy price hash DATA, 32 Bytes hash of the transaction input DATA the data sent along with the transaction nonce QUANTITY unused to DATA, 20 Bytes address of the receiver transactionIndex QUANTITY integer of the transactions index position in the block value QUANTITY value transferred in sun v QUANTITY ECDSA recovery id r DATA, 32 Bytes ECDSA signature r s DATA, 32 Bytes ECDSA signature s <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getTransactionByBlockHashAndIndex\",\n\n    \"params\": [\"00000000020ef11c87517739090601aa0a7be1de6faebf35ddb14e7ab7d1cc5b\", \"0x0\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 64,\n\n    \"result\": {\n\n        \"blockHash\": \"0x00000000020ef11c87517739090601aa0a7be1de6faebf35ddb14e7ab7d1cc5b\",\n\n        \"blockNumber\": \"0x20ef11c\",\n\n        \"from\": \"0xb4f1b6e3a1461266b01c2c4ff9237191d5c3d5ce\",\n\n        \"gas\": \"0x0\",\n\n        \"gasPrice\": \"0x8c\",\n\n        \"hash\": \"0x8dd26d1772231569f022adb42f7d7161dee88b97b4b35eeef6ce73fcd6613bc2\",\n\n        \"input\": \"0x\",\n\n        \"nonce\": null,\n\n        \"r\": \"0x6212a53b962345fb8ab02215879a2de05f32e822c54e257498f0b70d33825cc5\",\n\n        \"s\": \"0x6e04221f5311cf2b70d3aacfc444e43a5cf14d0bf31d9227218efaabd9b5a812\",\n\n        \"to\": \"0x047d4a0a1b7a9d495d6503536e2a49bb5cc72cfe\",\n\n        \"transactionIndex\": \"0x0\",\n\n        \"type\": \"0x0\",\n\n        \"v\": \"0x1b\",\n\n        \"value\": \"0x203226\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_gettransactionbyblocknumberandindex","title":"eth_getTransactionByBlockNumberAndIndex","text":"<p>Returns information about a transaction by block number and transaction index position.</p> <p>Parameters</p> Index Data Type Description 1 QUANTITY|TAG a block number, or the string \"earliest\", \"latest\", 2 QUANTITY the transaction index position <p>Returns</p> <p>object - a transaction object  or null when no transaction was found. See eth_getTransactionByBlockHashAndIndex</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getTransactionByBlockNumberAndIndex\",\n\n    \"params\": [\"0xfb82f0\", \"0x0\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":null}\n</code></pre>"},{"location":"api/json-rpc/#eth_gettransactionbyhash","title":"eth_getTransactionByHash","text":"<p>Returns the information about a transaction requested by transaction hash.</p> <p>Parameters</p> <p>DATA, 32 Bytes - hash of a transaction</p> <p>Returns</p> <p>object - a transaction object  or null when no transaction was found. See eth_getTransactionByBlockHashAndIndex</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getTransactionByHash\",\n\n    \"params\": [\"c9af231ad59bcd7e8dcf827afd45020a02112704dce74ec5f72cb090aa07eef0\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 64,\n\n    \"result\": {\n\n        \"blockHash\": \"0x00000000020ef11c87517739090601aa0a7be1de6faebf35ddb14e7ab7d1cc5b\",\n\n        \"blockNumber\": \"0x20ef11c\",\n\n        \"from\": \"0x6eced5214d62c3bc9eaa742e2f86d5c516785e14\",\n\n        \"gas\": \"0x0\",\n\n        \"gasPrice\": \"0x8c\",\n\n        \"hash\": \"0xc9af231ad59bcd7e8dcf827afd45020a02112704dce74ec5f72cb090aa07eef0\",\n\n        \"input\": \"0x\",\n\n        \"nonce\": null,\n\n        \"r\": \"0x433eaf0a7df3a08c8828a2180987146d39d44de4ac327c4447d0eeda42230ea8\",\n\n        \"s\": \"0x6f91f63b37f4d1cd9342f570205beefaa5b5ba18d616fec643107f8c1ae1339d\",\n\n        \"to\": \"0x0697250b9d73b460a9d2bbfd8c4cacebb05dd1f1\",\n\n        \"transactionIndex\": \"0x6\",\n\n        \"type\": \"0x0\",\n\n        \"v\": \"0x1b\",\n\n        \"value\": \"0x1cb2310\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_gettransactionreceipt","title":"eth_getTransactionReceipt","text":"<p>Returns the  transaction info: receipt, transaction fee, block height ... by transaction hash. Please refer to http api: wallet/gettransactioninfobyid</p> <p>Parameters</p> <p>DATA, 32 Bytes - hash of a transaction</p> <p>Returns</p> <p>object - A transaction receipt object, or null when no receipt was found. The items in transaction receipt as below.</p> Item Name Data Type Description transactionHash DATA, 32 Bytes hash of the transaction transactionIndex QUANTITY integer of the transactions index position in the block blockHash DATA, 32 Bytes hash of the block where this transaction was in. blockNumber QUANTITY block number where this transaction was in. from DATA, 20 Bytes address of the sender to DATA, 20 Bytes address of the receiver cumulativeGasUsed QUANTITY The total amount of gas used when this transaction was executed in the block. gasUsed QUANTITY The amount of gas used by this specific transaction alone. contractAddress DATA, 20 Bytes The contract address created, if the transaction was a contract creation, otherwise null. logs Array Array of log objects, which this transaction generated. logsBloom DATA, 256 Bytes Bloom filter for light clients to quickly retrieve related logs. root DATA 32 bytes of post-transaction stateroot (pre Byzantium) status QUANTITY either 1 (success) or 0 (failure) <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getTransactionReceipt\",\n\n    \"params\": [\"c9af231ad59bcd7e8dcf827afd45020a02112704dce74ec5f72cb090aa07eef0\"],\n\n    \"id\": 64\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 64,\n\n    \"result\": {\n\n        \"blockHash\": \"0x00000000020ef11c87517739090601aa0a7be1de6faebf35ddb14e7ab7d1cc5b\",\n\n        \"blockNumber\": \"0x20ef11c\",\n\n        \"contractAddress\": null,\n\n        \"cumulativeGasUsed\": \"0x646e2\",\n\n        \"effectiveGasPrice\": \"0x8c\",\n\n        \"from\": \"0x6eced5214d62c3bc9eaa742e2f86d5c516785e14\",\n\n        \"gasUsed\": \"0x0\",\n\n        \"logs\": [],\n\n        \"logsBloom\": \"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\",\n\n        \"status\": \"0x1\",\n\n        \"to\": \"0x0697250b9d73b460a9d2bbfd8c4cacebb05dd1f1\",\n\n        \"transactionHash\": \"0xc9af231ad59bcd7e8dcf827afd45020a02112704dce74ec5f72cb090aa07eef0\",\n\n        \"transactionIndex\": \"0x6\",\n\n        \"type\": \"0x0\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_getwork","title":"eth_getWork","text":"<p>Returns the hash of the current block</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>Array - Array with the following properties:</p> Index Data Type Description 1 DATA, 32 Bytes hash of the block 2 DATA unused 3 DATA unused <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getWork\",\n\n    \"params\": [],\n\n    \"id\": 73\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 73,\n\n    \"result\": [\"0x00000000020e73915413df0c816e327dc4b9d17069887aef1fff0e854f8d9ad0\", null, null]\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_protocolversion","title":"eth_protocolVersion","text":"<p>Returns the java-tron block version</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>String - The current java-tron block version</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_protocolVersion\",\"params\":[],\"id\":64}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x16\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_syncing","title":"eth_syncing","text":"<p>Returns an object with data about the sync status of the node</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>Object|Boolean, An object with sync status data or FALSE, when not syncing, the items in object includes:</p> startingBlock QUANTITY The block at which the import started (will only be reset, after the sync reached his head) currentBlock QUANTITY The current block highestBlock QUANTITY The estimated highest block <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_syncing\",\"params\":[],\"id\":64}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 64,\n\n    \"result\": {\n\n        \"startingBlock\": \"0x20e76cc\",\n\n        \"currentBlock\": \"0x20e76df\",\n\n        \"highestBlock\": \"0x20e76e0\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_newfilter","title":"eth_newFilter","text":"<p>Creates a filter object, based on filter options, to notify when the state changes (logs).</p> <p>Parameters </p> <p>Object - The filter options:</p> Field Type Description fromBlock QUANTITY|TAG Integer block number, or \"latest\" toBlock QUANTITY|TAG Integer block number, or \"latest\" address DATA|Array, 20 Bytes Contract address or a list of addresses from which logs should originate. topics Array of DATA Topics <p>Returns </p> <p>QUANTITY - A filter id.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_newFilter\",\"params\":[{\"address\":[\"cc2e32f2388f0096fae9b055acffd76d4b3e5532\",\"E518C608A37E2A262050E10BE0C9D03C7A0877F3\"],\"fromBlock\":\"0x989680\",\"toBlock\":\"0x9959d0\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",null,[\"0x0000000000000000000000001806c11be0f9b9af9e626a58904f3e5827b67be7\",\"0x0000000000000000000000003c8fb6d064ceffc0f045f7b4aee6b3a4cefb4758\"]]}],\"id\":1}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x2bab51aee6345d2748e0a4a3f4569d80\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_newblockfilter","title":"eth_newBlockFilter","text":"<p>Creates a filter in the node, to notify when a new block arrives.</p> <p>Parameters </p> <p>None.</p> <p>Returns </p> <p>QUANTITY - A filter id.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_newBlockFilter\",\"params\":[],\"id\":1}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x2bab51aee6345d2748e0a4a3f4569d80\"}\n</code></pre>"},{"location":"api/json-rpc/#eth_getfilterchanges","title":"eth_getFilterChanges","text":"<p>Polling method for a filter, which returns an array of logs which occurred since last poll.</p> <p>Parameters </p> <p>QUANTITY - the filter id.</p> <p>Returns</p> <ul> <li>For filters created with eth_newFilte, return logs object list, each log object with following params:</li> </ul> Field Type Description removed TAG true when the log was removed, due to a chain reorganization. false if its a valid log. logIndex QUANTITY Integer of the log index position in the block. null when its pending log. transactionIndex QUANTITY Integer of the transactions index position log was created from. null when its pending log. transactionHash DATA, 32Bytes Hash of the transactions this log was created from. blockHash DATA, 32 Bytes Hash of the block where this log was in. null when its pending. blockNumber QUANTITY The block number where this log was in. address DATA, 32 Bytes Address from which this log originated. data DATA Contains one or more 32 Bytes non-indexed arguments of the log. topics DATA[] Event topic and indexed arguments. <ul> <li>For filters created with eth_newBlockFilter the return are block hashes (DATA, 32 Bytes).</li> </ul> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getFilterChanges\",\n\n    \"params\": [\n\n        \"0xc11a84d5e906ecb9f5c1eb65ee940b154ad37dce8f5ac29c80764508b901d996\"\n\n    ],\n\n    \"id\": 71\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 71,\n\n    \"error\": {\n\n        \"code\": -32000,\n\n        \"message\": \"filter not found\",\n\n        \"data\": \"{}\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_getfilterlogs","title":"eth_getFilterLogs","text":"<p>Returns an array of all logs matching filter with given id.</p> <p>Parameters </p> <p>QUANTITY - the filter id.</p> <p>Returns</p> <p>See eth_getFilterChanges\u3002</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_getFilterLogs\",\n\n    \"params\": [\n\n        \"0xc11a84d5e906ecb9f5c1eb65ee940b154ad37dce8f5ac29c80764508b901d996\"\n\n    ],\n\n    \"id\": 71\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 71,\n\n    \"error\": {\n\n        \"code\": -32000,\n\n        \"message\": \"filter not found\",\n\n        \"data\": \"{}\"\n\n    }\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_uninstallfilter","title":"eth_uninstallFilter","text":"<p>Uninstalls a filter with given id. Should always be called when watch is no longer needed. Additionally Filters timeout when they aren't requested with eth_getFilterChanges for a period of time.</p> <p>Parameters </p> <p>QUANTITY - the filter id.</p> <p>Returns</p> <p>Boolean - true if the filter was successfully uninstalled, otherwise false.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"eth_uninstallFilter\",\n\n    \"params\": [\n\n        \"0xc11a84d5e906ecb9f5c1eb65ee940b154ad37dce8f5ac29c80764508b901d996\"\n\n    ],\n\n    \"id\": 71\n\n}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 71,\n\n    \"result\": true\n\n}\n</code></pre>"},{"location":"api/json-rpc/#eth_getlogs","title":"eth_getLogs","text":"<p>Returns an array of all logs matching a given filter object.</p> <p>Parameters </p> <p>Object - The filter options which include below fields:</p> Field Type Description fromBlock QUANTITY|TAG (optional, default: \"latest\") Integer block number, or \"latest\" for the last mined block toBlock QUANTITY|TAG (optional, default: \"latest\") Integer block number, or \"latest\" for the last mined block address DATA|Array, 20 Bytes (optional) Contract address or a list of addresses from which logs should originate. topics Array of DATA (optional) Array of 32 Bytes DATA topics. Topics are order-dependent. Each topic can also be an array of DATA with \"or\" options. blockhash DATA, 32 Bytes (optional) Block hash <p>Returns</p> <p>See eth_getFilterChanges.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"eth_getLogs\",\"params\":[{\"address\":[\"cc2e32f2388f0096fae9b055acffd76d4b3e5532\",\"E518C608A37E2A262050E10BE0C9D03C7A0877F3\"],\"fromBlock\":\"0x989680\",\"toBlock\":\"0x9959d0\",\"topics\":[\"0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",null,[\"0x0000000000000000000000001806c11be0f9b9af9e626a58904f3e5827b67be7\",\"0x0000000000000000000000003c8fb6d064ceffc0f045f7b4aee6b3a4cefb4758\"]]}],\"id\":1}'\n</code></pre> <p>Result</p> <pre><code>{\n\n    \"jsonrpc\": \"2.0\",\n\n    \"id\": 71,\n\n    \"result\": []\n\n}\n</code></pre>"},{"location":"api/json-rpc/#net","title":"net","text":""},{"location":"api/json-rpc/#net_listening","title":"net_listening","text":"<p>Returns true if the client is actively listening for network connections.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>Boolean - true when listening, otherwise false.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"net_listening\",\"params\":[],\"id\":64}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":true}\n</code></pre>"},{"location":"api/json-rpc/#net_peercount","title":"net_peerCount","text":"<p>Returns number of peers currently connected to the client.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>QUANTITY - integer of the number of connected peers.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"net_peerCount\",\"params\":[],\"id\":64}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x9\"}\n</code></pre>"},{"location":"api/json-rpc/#net_version","title":"net_version","text":"<p>Returns the hash of the genesis block.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>String - The hash of genesis block</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\":\"2.0\",\"method\":\"net_version\",\"params\":[],\"id\":64}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":64,\"result\":\"0x2b6653dc\"}\n</code></pre>"},{"location":"api/json-rpc/#web3","title":"web3","text":""},{"location":"api/json-rpc/#web3_clientversion","title":"web3_clientVersion","text":"<p>Returns the current client version.</p> <p>Parameters </p> <p>None</p> <p>Returns </p> <p>String - The current client version</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"web3_clientVersion\", \"params\": []}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"TRON/v4.3.0/Linux/Java1.8/GreatVoyage-v4.2.2.1-281-gc1d9dfd6c\"}\n</code></pre>"},{"location":"api/json-rpc/#web3_sha3","title":"web3_sha3","text":"<p>Returns Keccak-256 (not the standardized SHA3-256) of the given data.</p> <p>Parameters </p> <p>DATA - the data to convert into a SHA3 hash</p> <p>Returns </p> <p>DATA - The SHA3 result of the given string.</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"jsonrpc\": \"2.0\", \"id\": 1, \"method\": \"web3_sha3\", \"params\": [\"0x68656c6c6f20776f726c64\"]}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1,\"result\":\"0x47173285a8d7341e5e972fc677286384f802f8ef42a5ec5f03bbfa254cb01fad\"}\n</code></pre>"},{"location":"api/json-rpc/#buildtransaction","title":"buildTransaction","text":"<p>Create a transaction, different transaction types have different parameters</p>"},{"location":"api/json-rpc/#transfercontract","title":"TransferContract","text":"<p>Parameters </p> <p>Object - the items in object as below: </p> Param Name Data Type Description from DATA, 20 Bytes The address the transaction is sent from. to DATA, 20 Bytes The address the transaction is directed to. value DATA the transfer amount <p>Returns</p> <p>Object - transaction of TransferContract or an error</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"id\": 1337,\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"buildTransaction\",\n\n    \"params\": [\n\n        {\n\n            \"from\": \"0xC4DB2C9DFBCB6AA344793F1DDA7BD656598A06D8\",\n\n            \"to\": \"0x95FD23D3D2221CFEF64167938DE5E62074719E54\",\n\n            \"value\": \"0x1f4\"\n\n        }]}'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1337,\"result\":{\"transaction\":{\"visible\":false,\"txID\":\"ae02a80abd985a6f05478b9bbf04706f00cdbf71e38c77d21ed77e44c634cef9\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"amount\":500,\"owner_address\":\"41c4db2c9dfbcb6aa344793f1dda7bd656598a06d8\",\"to_address\":\"4195fd23d3d2221cfef64167938de5e62074719e54\"},\"type_url\":\"type.googleapis.com/protocol.TransferContract\"},\"type\":\"TransferContract\"}],\"ref_block_bytes\":\"957e\",\"ref_block_hash\":\"3922d8c0d28b5283\",\"expiration\":1684469286000,\"timestamp\":1684469226841},\"raw_data_hex\":\"0a02957e22083922d8c0d28b528340f088c69183315a66080112620a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412310a1541c4db2c9dfbcb6aa344793f1dda7bd656598a06d812154195fd23d3d2221cfef64167938de5e62074719e5418f40370d9bac2918331\"}}}\n</code></pre>"},{"location":"api/json-rpc/#transferassetcontract","title":"TransferAssetContract","text":"<p>Parameters </p> <p>Object - the items in object as below: </p> from DATA, 20 Bytes The address the transaction is sent from to DATA, 20 Bytes The address the transaction is directed to tokenId QUANTITY Token ID tokenValue QUANTITY The transfer amount of TRC10 <p>Returns</p> <p>Object - transaction of TransferAssetContract or an error</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"method\": \"buildTransaction\",\n\n    \"params\": [\n\n        {\n\n            \"from\": \"0xC4DB2C9DFBCB6AA344793F1DDA7BD656598A06D8\",\n\n            \"to\": \"0x95FD23D3D2221CFEF64167938DE5E62074719E54\",\n\n            \"tokenId\": 1000016,\n\n            \"tokenValue\": 20\n\n        }\n\n    ],\n\n    \"id\": 44,\n\n    \"jsonrpc\": \"2.0\"\n\n}\n\n'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":44,\"error\":{\"code\":-32600,\"message\":\"assetBalance must be greater than 0.\",\"data\":\"{}\"}}\n</code></pre>"},{"location":"api/json-rpc/#createsmartcontract","title":"CreateSmartContract","text":"<p>Parameters </p> <p>Object - the items in object as below: </p> from DATA, 20 Bytes The address the transaction is sent from name DATA The name of the smart contract. gas DATA Fee limit abi DATA The ABI of the smart contract. data DATA The byte code of the smart contract. consumeUserResourcePercent QUANTITY The consume user resource percent. originEnergyLimit QUANTITY The origin energy limit. value DATA The data passed through call_value. tokenId QUANTITY Token ID tokenValue QUANTITY The transfer amount of TRC10 <p>Returns</p> <p>Object - transaction of CreateSmartContract or an error</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\n\n    \"id\": 1337,\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"buildTransaction\",\n\n    \"params\": [\n\n        {\n\n            \"from\": \"0xC4DB2C9DFBCB6AA344793F1DDA7BD656598A06D8\",\n\n            \"name\": \"transferTokenContract\",\n\n            \"gas\": \"0x245498\",\n\n            \"abi\": \"[{\\\"constant\\\":false,\\\"inputs\\\":[],\\\"name\\\":\\\"getResultInCon\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"trcToken\\\"},{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"},{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":true,\\\"stateMutability\\\":\\\"payable\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":false,\\\"inputs\\\":[{\\\"name\\\":\\\"toAddress\\\",\\\"type\\\":\\\"address\\\"},{\\\"name\\\":\\\"id\\\",\\\"type\\\":\\\"trcToken\\\"},{\\\"name\\\":\\\"amount\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"name\\\":\\\"TransferTokenTo\\\",\\\"outputs\\\":[],\\\"payable\\\":true,\\\"stateMutability\\\":\\\"payable\\\",\\\"type\\\":\\\"function\\\"},{\\\"constant\\\":false,\\\"inputs\\\":[],\\\"name\\\":\\\"msgTokenValueAndTokenIdTest\\\",\\\"outputs\\\":[{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"trcToken\\\"},{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"},{\\\"name\\\":\\\"\\\",\\\"type\\\":\\\"uint256\\\"}],\\\"payable\\\":true,\\\"stateMutability\\\":\\\"payable\\\",\\\"type\\\":\\\"function\\\"},{\\\"inputs\\\":[],\\\"payable\\\":true,\\\"stateMutability\\\":\\\"payable\\\",\\\"type\\\":\\\"constructor\\\"}]\\n\",\n\n            \"data\": \"6080604052d3600055d2600155346002556101418061001f6000396000f3006080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166305c24200811461005b5780633be9ece71461008157806371dc08ce146100aa575b600080fd5b6100636100b2565b60408051938452602084019290925282820152519081900360600190f35b6100a873ffffffffffffffffffffffffffffffffffffffff600435166024356044356100c0565b005b61006361010d565b600054600154600254909192565b60405173ffffffffffffffffffffffffffffffffffffffff84169082156108fc029083908590600081818185878a8ad0945050505050158015610107573d6000803e3d6000fd5b50505050565bd3d2349091925600a165627a7a72305820a2fb39541e90eda9a2f5f9e7905ef98e66e60dd4b38e00b05de418da3154e7570029\",\n\n            \"consumeUserResourcePercent\": 100,\n\n            \"originEnergyLimit\": 11111111111111,\n\n            \"value\": \"0x1f4\",\n\n            \"tokenId\": 1000033,\n\n            \"tokenValue\": 100000\n\n        }\n\n    ]\n\n}\n\n'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1337,\"result\":{\"transaction\":{\"visible\":false,\"txID\":\"598d8aafbf9340e92c8f72a38389ce9661b643ff37dd2a609f393336a76025b9\",\"contract_address\":\"41dfd93697c0a978db343fe7a92333e11eeb2f967d\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"token_id\":1000033,\"owner_address\":\"41c4db2c9dfbcb6aa344793f1dda7bd656598a06d8\",\"call_token_value\":100000,\"new_contract\":{\"bytecode\":\"6080604052d3600055d2600155346002556101418061001f6000396000f3006080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166305c24200811461005b5780633be9ece71461008157806371dc08ce146100aa575b600080fd5b6100636100b2565b60408051938452602084019290925282820152519081900360600190f35b6100a873ffffffffffffffffffffffffffffffffffffffff600435166024356044356100c0565b005b61006361010d565b600054600154600254909192565b60405173ffffffffffffffffffffffffffffffffffffffff84169082156108fc029083908590600081818185878a8ad0945050505050158015610107573d6000803e3d6000fd5b50505050565bd3d2349091925600a165627a7a72305820a2fb39541e90eda9a2f5f9e7905ef98e66e60dd4b38e00b05de418da3154e7570029\",\"consume_user_resource_percent\":100,\"name\":\"transferTokenContract\",\"origin_address\":\"41c4db2c9dfbcb6aa344793f1dda7bd656598a06d8\",\"abi\":{\"entrys\":[{\"outputs\":[{\"type\":\"trcToken\"},{\"type\":\"uint256\"},{\"type\":\"uint256\"}],\"payable\":true,\"name\":\"getResultInCon\",\"stateMutability\":\"Payable\",\"type\":\"Function\"},{\"payable\":true,\"inputs\":[{\"name\":\"toAddress\",\"type\":\"address\"},{\"name\":\"id\",\"type\":\"trcToken\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"TransferTokenTo\",\"stateMutability\":\"Payable\",\"type\":\"Function\"},{\"outputs\":[{\"type\":\"trcToken\"},{\"type\":\"uint256\"},{\"type\":\"uint256\"}],\"payable\":true,\"name\":\"msgTokenValueAndTokenIdTest\",\"stateMutability\":\"Payable\",\"type\":\"Function\"},{\"payable\":true,\"stateMutability\":\"Payable\",\"type\":\"Constructor\"}]},\"origin_energy_limit\":11111111111111,\"call_value\":500}},\"type_url\":\"type.googleapis.com/protocol.CreateSmartContract\"},\"type\":\"CreateSmartContract\"}],\"ref_block_bytes\":\"80be\",\"ref_block_hash\":\"ac7c3d59c55ac92c\",\"expiration\":1634030190000,\"fee_limit\":333333280,\"timestamp\":1634030131693},\"raw_data_hex\":\"0a0280be2208ac7c3d59c55ac92c40b0fba79ec72f5ad805081e12d3050a30747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e437265617465536d617274436f6e7472616374129e050a1541c4db2c9dfbcb6aa344793f1dda7bd656598a06d812fc040a1541c4db2c9dfbcb6aa344793f1dda7bd656598a06d81adb010a381a0e676574526573756c74496e436f6e2a0a1a08747263546f6b656e2a091a0775696e743235362a091a0775696e743235363002380140040a501a0f5472616e73666572546f6b656e546f22141209746f416464726573731a0761646472657373220e120269641a08747263546f6b656e22111206616d6f756e741a0775696e743235363002380140040a451a1b6d7367546f6b656e56616c7565416e64546f6b656e4964546573742a0a1a08747263546f6b656e2a091a0775696e743235362a091a0775696e743235363002380140040a0630013801400422e0026080604052d3600055d2600155346002556101418061001f6000396000f3006080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166305c24200811461005b5780633be9ece71461008157806371dc08ce146100aa575b600080fd5b6100636100b2565b60408051938452602084019290925282820152519081900360600190f35b6100a873ffffffffffffffffffffffffffffffffffffffff600435166024356044356100c0565b005b61006361010d565b600054600154600254909192565b60405173ffffffffffffffffffffffffffffffffffffffff84169082156108fc029083908590600081818185878a8ad0945050505050158015610107573d6000803e3d6000fd5b50505050565bd3d2349091925600a165627a7a72305820a2fb39541e90eda9a2f5f9e7905ef98e66e60dd4b38e00b05de418da3154e757002928f40330643a157472616e73666572546f6b656e436f6e747261637440c7e3d28eb0c30218a08d0620e1843d70edb3a49ec72f9001a086f99e01\"}}}\n</code></pre>"},{"location":"api/json-rpc/#triggersmartcontract","title":"TriggerSmartContract","text":"<p>Parameters </p> <p>Object - the items in object as below: </p> from DATA, 20 Bytes The address the transaction is sent from to DATA, 20 Bytes The address of the smart contract data DATA The invoked contract function and parameters gas DATA Fee limit value DATA The data passed through call_value tokenId QUANTITY Token ID tokenValue QUANTITY The transfer amount of TRC10 <p>Returns</p> <p>Object - transaction of TriggerSmartContract or an error</p> <p>Example</p> <pre><code>curl -X POST 'https://api.shasta.trongrid.io/jsonrpc' --data '{\"id\": 1337,\n\n    \"jsonrpc\": \"2.0\",\n\n    \"method\": \"buildTransaction\",\n\n    \"params\": [\n\n        {\n\n            \"from\": \"0xC4DB2C9DFBCB6AA344793F1DDA7BD656598A06D8\",\n\n            \"to\": \"0xf859b5c93f789f4bcffbe7cc95a71e28e5e6a5bd\",\n\n            \"data\": \"0x3be9ece7000000000000000000000000ba8e28bdb6e49fbb3f5cd82a9f5ce8363587f1f600000000000000000000000000000000000000000000000000000000000f42630000000000000000000000000000000000000000000000000000000000000001\",\n\n            \"gas\": \"0x245498\",\n\n            \"value\": \"0xA\",\n\n            \"tokenId\": 1000035,\n\n            \"tokenValue\": 20\n\n        }\n\n    ]\n\n    }\n\n'\n</code></pre> <p>Result</p> <pre><code>{\"jsonrpc\":\"2.0\",\"id\":1337,\"result\":{\"transaction\":{\"visible\":false,\"txID\":\"c3c746beb86ffc366ec0ff8bf6c9504c88f8714e47bc0009e4f7e2b1d49eb967\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"amount\":10,\"owner_address\":\"41c4db2c9dfbcb6aa344793f1dda7bd656598a06d8\",\"to_address\":\"41f859b5c93f789f4bcffbe7cc95a71e28e5e6a5bd\"},\"type_url\":\"type.googleapis.com/protocol.TransferContract\"},\"type\":\"TransferContract\"}],\"ref_block_bytes\":\"958c\",\"ref_block_hash\":\"9d8c6bae734a2281\",\"expiration\":1684469328000,\"timestamp\":1684469270364},\"raw_data_hex\":\"0a02958c22089d8c6bae734a22814080d1c89183315a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541c4db2c9dfbcb6aa344793f1dda7bd656598a06d8121541f859b5c93f789f4bcffbe7cc95a71e28e5e6a5bd180a70dc8ec5918331\"}}}\n</code></pre>"},{"location":"api/rpc/","title":"RPC List","text":"<p>For the specific definition of API, please refer to the following link: api/api.proto</p> <p>Note</p> <p>SolidityNode is deprecated. Now a FullNode supports all RPCs of a SolidityNode. New developers should deploy FullNode only.</p>"},{"location":"api/rpc/#get-account-information","title":"Get account information","text":"<p><pre><code>rpc GetAccount (Account) returns (Account) {}\n</code></pre> Nodes: Fullnode and SolidityNode</p>"},{"location":"api/rpc/#trx-transfer","title":"TRX transfer","text":"<p><pre><code>rpc CreateTransaction (TransferContract) returns (Transaction) {}\n</code></pre> Nodes: Fullnode</p>"},{"location":"api/rpc/#broadcast-transaction","title":"Broadcast transaction","text":"<p><pre><code>rpc BroadcastTransaction (Transaction) returns (Return) {}\n</code></pre> Nodes: Fullnode</p> <p>Description: Transfer, vote, issuance of token, or participation in token offering. Sending signed transaction information to node, and broadcasting it to the entire network after super representatives verification.</p>"},{"location":"api/rpc/#create-an-account","title":"Create an account","text":"<p><pre><code>rpc CreateAccount (AccountCreateContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#account-name-update","title":"Account name update","text":"<p><pre><code>rpc UpdateAccount (AccountUpdateContract) returns (Transaction) {}\n</code></pre> Nodes: Fullnode</p>"},{"location":"api/rpc/#vote-for-super-representative-candidates","title":"Vote for super representative candidates","text":"<p><pre><code>rpc VoteWitnessAccount (VoteWitnessContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-ratio-of-brokerage-of-the-super-representative","title":"Query the ratio of brokerage of the super representative","text":"<p><pre><code>rpc GetBrokerageInfo (BytesMessage) returns (NumberMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-unclaimed-reward","title":"Query unclaimed reward","text":"<p><pre><code>rpc GetRewardInfo (BytesMessage) returns (NumberMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#update-the-ratio-of-brokerage","title":"Update the ratio of brokerage","text":"<p><pre><code>rpc UpdateBrokerage (UpdateBrokerageContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#issue-a-token","title":"Issue a token","text":"<p><pre><code>rpc CreateAssetIssue (AssetIssueContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-of-list-of-super-representative-candidates","title":"Query of list of super representative candidates","text":"<p><pre><code>rpc ListWitnesses (EmptyMessage) returns (WitnessList) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#application-for-super-representative","title":"Application for super representative","text":"<p><pre><code>rpc CreateWitness (WitnessCreateContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p> <p>Description: To apply to become TRON\u2019s Super Representative candidate.</p>"},{"location":"api/rpc/#information-update-of-super-representative-candidates","title":"Information update of Super Representative candidates","text":"<p><pre><code>rpc UpdateWitness (WitnessUpdateContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p> <p>Description: Update the website url of the SR.</p>"},{"location":"api/rpc/#token-transfer","title":"Token transfer","text":"<p><pre><code>rpc TransferAsset (TransferAssetContract) returns (Transaction){}\n</code></pre> Node: FullNode</p>"},{"location":"api/rpc/#participate-a-token","title":"Participate a token","text":"<p><pre><code>rpc ParticipateAssetIssue (ParticipateAssetIssueContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-list-of-nodes-connected-to-the-ip-of-the-api","title":"Query the list of nodes connected to the ip of the api","text":"<p><pre><code>rpc ListNodes (EmptyMessage) returns (NodeList) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#query-the-list-of-all-issued-tokens","title":"Query the list of all issued tokens","text":"<p><pre><code>rpc GetAssetIssueList (EmptyMessage) returns (AssetIssueList) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#query-the-token-issued-by-a-given-account","title":"Query the token issued by a given account","text":"<p><pre><code>rpc GetAssetIssueByAccount (Account) returns (AssetIssueList) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#query-the-token-information-by-token-name","title":"Query the token information by token name","text":"<p><pre><code>rpc GetAssetIssueByName (BytesMessage) returns (AssetIssueContract) {}\n</code></pre> Nodes: FullNode and Soliditynode</p>"},{"location":"api/rpc/#query-the-list-of-tokens-by-timestamp","title":"Query the list of tokens by timestamp","text":"<p><pre><code>rpc GetAssetIssueListByTimestamp (NumberMessage) returns (AssetIssueList){}\n</code></pre> Nodes: SolidityNode</p>"},{"location":"api/rpc/#get-current-block-information","title":"Get current block information","text":"<p><pre><code>rpc GetNowBlock (EmptyMessage) returns (Block) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#get-a-block-by-block-height","title":"Get a block by block height","text":"<p><pre><code>rpc GetBlockByNum (NumberMessage) returns (Block) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#get-the-total-number-of-transactions","title":"Get the total number of transactions","text":"<p><pre><code>rpc TotalTransaction (EmptyMessage) returns (NumberMessage) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#query-the-transaction-by-transaction-id","title":"Query the transaction by transaction id","text":"<p><pre><code>rpc getTransactionById (BytesMessage) returns (Transaction) {}\n</code></pre> Nodes: SolidityNode</p>"},{"location":"api/rpc/#query-the-transaction-by-timestamp","title":"Query the transaction by timestamp","text":"<p><pre><code>rpc getTransactionsByTimestamp (TimeMessage) returns (TransactionList) {}\n</code></pre> Nodes: SolidityNode</p>"},{"location":"api/rpc/#stake-trx","title":"Stake TRX","text":"<p>This interface has been deprecated, please use FreezeBalanceV2 to stake TRX to obtain resources. <pre><code>rpc FreezeBalance (FreezeBalanceContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#unstake-trx","title":"Unstake TRX","text":"<p>Unstake the TRX staked during Stake1.0. <pre><code>rpc UnfreezeBalance (UnfreezeBalanceContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#block-producing-reward-redemption","title":"Block producing reward redemption","text":"<p><pre><code>rpc WithdrawBalance (WithdrawBalanceContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#unstake-token-balance","title":"Unstake token balance","text":"<p><pre><code>rpc UnfreezeAsset (UnfreezeAssetContract) returns (Transaction) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-next-maintenance-time","title":"Query the next maintenance time","text":"<p><pre><code>rpc GetNextMaintenanceTime (EmptyMessage) returns (NumberMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-transaction-fee-block-information","title":"Query the transaction fee &amp; block information","text":"<p><pre><code>rpc GetTransactionInfoById (BytesMessage) returns (TransactionInfo) {}\n</code></pre> Nodes: SolidityNode</p>"},{"location":"api/rpc/#query-block-information-by-block-id","title":"Query block information by block id","text":"<p><pre><code>rpc GetBlockById (BytesMessage) returns (Block) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#update-token-information","title":"Update token information","text":"<p><pre><code>rpc UpdateAsset (UpdateAssetContract) returns (Transaction) {}\n</code></pre> Nodes: Fullnode</p> <p>Description: Token update can only be initiated by the token issuer to update token description, url, maximum bandwidth consumption by each account and total bandwidth consumption.</p>"},{"location":"api/rpc/#query-the-list-of-all-the-tokens-by-pagination","title":"Query the list of all the tokens by pagination","text":"<p><pre><code>rpc GetPaginatedAssetIssueList (PaginatedMessage) returns (AssetIssueList) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#deploy-a-smart-contract","title":"Deploy a smart contract","text":"<p><pre><code>rpc DeployContract (CreateSmartContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#trigger-a-smart-contract","title":"Trigger a smart contract","text":"<p><pre><code>rpc TriggerContract (TriggerSmartContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-a-shielded-transaction","title":"Create a shielded transaction","text":"<p><pre><code>rpc CreateShieldedTransaction (PrivateParameters) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-a-merkle-tree-information-of-a-note","title":"Get a Merkle tree information of a note","text":"<p><pre><code>rpc GetMerkleTreeVoucherInfo (OutputPointInfo) returns (IncrementalMerkleVoucherInfo) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#scan-note-by-ivk","title":"Scan note by ivk","text":"<p><pre><code>rpc ScanNoteByIvk (IvkDecryptParameters) returns (DecryptNotes) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#scan-note-by-ovk","title":"Scan note by ovk","text":"<p><pre><code>rpc ScanNoteByOvk (OvkDecryptParameters) returns (DecryptNotes) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-spending-key","title":"Get spending key","text":"<p><pre><code>rpc GetSpendingKey (EmptyMessage) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-expanded-spending-key","title":"Get expanded spending key","text":"<p><pre><code>rpc GetExpandedSpendingKey (BytesMessage) returns (ExpandedSpendingKeyMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-ak-from-ask","title":"Get ak from ask","text":"<p><pre><code>rpc GetAkFromAsk (BytesMessage) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-nk-from-nsk","title":"Get nk from nsk","text":"<p><pre><code>rpc GetNkFromNsk (BytesMessage) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-incoming-viewing-key","title":"Get incoming viewing key","text":"<p><pre><code>rpc GetIncomingViewingKey (ViewingKeyMessage) returns (IncomingViewingKeyMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-diversifier","title":"Get diversifier","text":"<p><pre><code>rpc GetDiversifier (EmptyMessage) returns (DiversifierMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-zen-payment-address","title":"Get zen payment address","text":"<p><pre><code>rpc GetZenPaymentAddress (IncomingViewingKeyDiversifierMessage) returns (PaymentAddressMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-rcm","title":"Get rcm","text":"<p><pre><code>rpc GetRcm (EmptyMessage) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-a-note-status-of-is-spent-or-not","title":"Get a note status of is spent or not","text":"<p><pre><code>rpc IsSpend (NoteParameters) returns (SpendResult) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-a-shielded-transaction-without-using-ask","title":"Create a shielded transaction without using ask","text":"<p><pre><code>rpc CreateShieldedTransactionWithoutSpendAuthSig (PrivateParametersWithoutAsk) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-a-shielded-transaction-hash","title":"Create a shielded transaction hash","text":"<p><pre><code>rpc GetShieldTransactionHash (Transaction) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-a-signature-for-a-shielded-transaction","title":"Create a signature for a shielded transaction","text":"<p><pre><code>rpc CreateSpendAuthSig (SpendAuthSigParameters) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-a-shield-nullifier","title":"Create a shield nullifier","text":"<p><pre><code>rpc CreateShieldNullifier (NfParameters) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-new-shielded-address","title":"Get new shielded address","text":"<p><pre><code>rpc GetNewShieldedAddress (EmptyMessage) returns (ShieldedAddressInfo){}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-shielded-contract-parameters","title":"Create shielded contract parameters","text":"<p><pre><code>rpc CreateShieldedContractParameters (PrivateShieldedTRC20Parameters) returns (ShieldedTRC20Parameters) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-shielded-contract-parameters-without-ask","title":"Create shielded contract parameters without ask","text":"<p><pre><code>rpc CreateShieldedContractParametersWithoutAsk (PrivateShieldedTRC20ParametersWithoutAsk) returns (ShieldedTRC20Parameters) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#scan-shielded-trc20-notes-by-ivk","title":"Scan shielded TRC20 notes by ivk","text":"<p><pre><code>rpc ScanShieldedTRC20NotesbyIvk (IvkDecryptTRC20Parameters) returns (DecryptNotesTRC20) {}\n</code></pre> Nodes: FullNode, SolidityNode</p>"},{"location":"api/rpc/#scan-shielded-trc20-notes-by-ovk","title":"Scan shielded TRC20 notes by ovk","text":"<p><pre><code>rpc ScanShieldedTRC20NotesbyOvk (OvkDecryptTRC20Parameters) returns (DecryptNotesTRC20) {}\n</code></pre> Nodes: FullNode, SolidityNode</p>"},{"location":"api/rpc/#get-the-status-of-shielded-trc20-note-of-spent-or-not","title":"Get the status of shielded TRC20 note of spent or not","text":"<p><pre><code>rpc IsShieldedTRC20ContractNoteSpent (NfTRC20Parameters) returns (NullifierResult) {}\n</code></pre> Nodes: FullNode, SolidityNode</p>"},{"location":"api/rpc/#get-the-trigger-input-for-the-shielded-trc20","title":"Get the trigger input for the shielded TRC20","text":"<p><pre><code>  rpc GetTriggerInputForShieldedTRC20Contract (ShieldedTRC20TriggerContractParameters) returns (BytesMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#create-an-market-order","title":"Create an market order","text":"<p><pre><code>rpc MarketSellAsset (MarketSellAssetContract) returns (TransactionExtention) {};\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#cancel-the-order","title":"Cancel the order","text":"<p><pre><code>rpc MarketCancelOrder (MarketCancelOrderContract) returns (TransactionExtention) {};\n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-all-orders-for-the-account","title":"Get all orders for the account","text":"<p><pre><code>rpc GetMarketOrderByAccount (BytesMessage) returns (MarketOrderList) {};\n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-all-trading-pairs","title":"Get all trading pairs","text":"<p><pre><code>rpc GetMarketPairList (EmptyMessage) returns (MarketOrderPairList) {};\n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-all-orders-for-the-trading-pair","title":"Get all orders for the trading pair","text":"<p><pre><code>rpc GetMarketOrderListByPair (MarketOrderPair) returns (MarketOrderList) {};\n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-all-prices-for-the-trading-pair","title":"Get all prices for the trading pair","text":"<p><pre><code>rpc GetMarketPriceByPair (MarketOrderPair) returns (MarketPriceList) {};\n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-order-by-id","title":"Get order by id","text":"<p><pre><code>rpc GetMarketOrderById (BytesMessage) returns (MarketOrder) {}; \n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#perform-a-historical-balance-lookup","title":"perform a historical balance lookup","text":"<p><pre><code>rpc GetAccountBalance (AccountBalanceRequest) returns (AccountBalanceResponse){}; \n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#fetch-all-balance-changing-transactions-in-a-block","title":"fetch all balance-changing transactions in a block","text":"<p><pre><code>rpc GetBlockBalanceTrace (BlockBalanceTrace.BlockIdentifier) returns (BlockBalanceTrace) {}; \n</code></pre> Nodes: FullNode </p>"},{"location":"api/rpc/#get-the-burn-trx-amount","title":"get the burn trx amount","text":"<p><pre><code>rpc GetBurnTrx (EmptyMessage) returns (NumberMessage) {}; \n</code></pre> Nodes: FullNode and SolidityNode</p>"},{"location":"api/rpc/#freeze-trx","title":"Freeze TRX","text":"<p><pre><code>rpc FreezeBalanceV2 (FreezeBalanceV2Contract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#unfreeze-trx","title":"UnFreeze TRX","text":"<p><pre><code>rpc UnfreezeBalanceV2 (UnfreezeBalanceV2Contract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#withdraw-staked-trx","title":"Withdraw Staked TRX","text":"<p><pre><code>rpc WithdrawExpireUnfreeze (WithdrawExpireUnfreezeContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#delegate-resource","title":"Delegate Resource","text":"<p><pre><code>rpc DelegateResource (DelegateResourceContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#undelegate-resource","title":"UnDelegate Resource","text":"<p><pre><code>rpc UnDelegateResource (UnDelegateResourceContract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-transaction-information-in-the-pending-pool","title":"Query transaction information in the pending pool","text":"<p><pre><code>rpc GetTransactionFromPending (BytesMessage) returns (Transaction) {};\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-pending-pool-transaction-id-list","title":"Query the pending pool transaction id list","text":"<p><pre><code>rpc GetTransactionListFromPending (EmptyMessage) returns (TransactionIdList) {};\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#query-the-size-of-the-pending-pool","title":"Query the size of the pending pool","text":"<pre><code>rpc GetPendingSize (EmptyMessage) returns (NumberMessage) {};\nNodes: FullNode\n</code></pre>"},{"location":"api/rpc/#cancel-unfreeze","title":"Cancel UnFreeze","text":"<p><pre><code>rpc CancelAllUnfreezeV2 (CancelAllUnfreezeV2Contract) returns (TransactionExtention) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-bandwidth-unit-price","title":"Get bandwidth unit price","text":"<p><pre><code>rpc GetBandwidthPrices (EmptyMessage) returns (PricesResponseMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-energy-unit-price","title":"Get energy unit price","text":"<p><pre><code>rpc GetEnergyPrices (EmptyMessage) returns (PricesResponseMessage) {}\n</code></pre> Nodes: FullNode</p>"},{"location":"api/rpc/#get-transaction-memo-fee","title":"Get transaction memo fee","text":"<p><pre><code>rpc GetMemoFee (EmptyMessage) returns (PricesResponseMessage) {}\n</code></pre> Nodes: FullNodes</p>"},{"location":"architecture/database/","title":"Database configuration","text":"<p>java-tron data storage supports LevelDB or RocksDB, and LevelDB is used by default. You can also choose RocksDB, which provides lots of configuration parameters, allowing nodes to be tuned according to their own machine configuration. The node database occupies less disk space than LevelDB. At the same time, RocksDB supports data backup during runtime, and the backup time only takes a few seconds.</p> <p>The following describes how to set the storage engine of the java-tron node to RocksDB, and how to perform data conversion between leveldb and rocksdb.</p>"},{"location":"architecture/database/#rocksdb","title":"RocksDB","text":""},{"location":"architecture/database/#configuration","title":"Configuration","text":"<p>Use RocksDB as the data storage engine, need to set <code>db.engine</code> to \"ROCKSDB\".</p> <p></p> <p>Note: RocksDB only supports <code>db.version=2</code>, yet does not supports <code>db.version=1</code></p> <p>The optimization parameters RocksDB support:</p> <p></p>"},{"location":"architecture/database/#use-rocksdbs-data-backup-function","title":"Use RocksDB's data backup function","text":"<p>Choose RocksDB to be the data storage engine, you can use its data backup function while running</p> <p></p> <p>Note: FullNode can use data backup function. In order not to affect SuperNode's block producing performance, SuperNode does not support backup service, but SuperNode's backup service node can use this function.</p>"},{"location":"architecture/database/#convert-leveldb-to-rocksdb","title":"Convert LevelDB to RocksDB","text":"<p>The data storage structure of LevelDB and RocksDB is not compatible, please make sure the node use the same type of data engine all the time. We provide data conversion script which can convert LevelDB data to RocksDB data.</p> <p>Usage:</p> <pre><code>&gt; cd /path/to/java-tron/source-code\n&gt; ./gradlew build  # build the source code\n&gt; java -jar build/libs/DBConvert.jar  # run data conversion command\n</code></pre> <p>Note: If the node's data storage directory is self-defined, before run DBConvert.jar, you need to add the following parameters:</p> <ul> <li>src_db_path: specify LevelDB source directory, default output-directory/database</li> <li>dst_db_path: specify RocksDb source directory, default output-directory-dst/database</li> </ul> <p>Example, if you run the script like this:</p> <pre><code>&gt; nohup java -jar FullNode.jar -d your_database_dir &lt;/dev/null &amp;&gt;/dev/null &amp;\n</code></pre> <p>then, you should run DBConvert.jar this way:</p> <pre><code>&gt; java -jar build/libs/DBConvert.jar your_database_dir/database output-directory-dst/database\n</code></pre> <p>Note: You have to stop the running of the node, and then to run the data conversion script.</p> <p>If you do not want to stop the running of the node for too long, after node is shut down, you can copy leveldb's output-directory to the new directory, and then restart the node. Run DBConvert.jar in the previous directory of the new directory, and specify the parameters: <code>src_db_path</code> and <code>dst_db_path</code>.</p> <p>Example:</p> <pre><code>&gt; cp -rf output-directory /tmp/output-directory\n&gt; cd /tmp\n&gt; java -jar DBConvert.jar output-directory/database output-directory-dst/database\n</code></pre> <p>All the whole data conversion process may take 10 hours.</p>"},{"location":"architecture/database/#leveldb","title":"LevelDB","text":"<p>You can refer to the following documents for detailed information about RocksDB vs LevelDB</p>"},{"location":"architecture/event/","title":"Event Subscription","text":""},{"location":"architecture/event/#using-event-plugin-for-event-subscription","title":"Using Event Plugin for Event Subscription","text":""},{"location":"architecture/event/#tip","title":"TIP","text":"<p>The TIP: TIP-12:TRON event subscribes model .</p>"},{"location":"architecture/event/#event-type","title":"Event Type","text":"<p>TRON Event Subscription supports 4 types of event:</p>"},{"location":"architecture/event/#transaction-event","title":"Transaction Event","text":"<p>The parameters passed to Subscriber:</p> <pre><code>transactionId: transaction hash\nblockHash: block hash\nblockNumber: block number\nenergyUsage: energy usage\nenergyFee: energy fee\noriginEnergyUsage: origin energy usage\nenergyUsageTotal: total energy usage total\n</code></pre>"},{"location":"architecture/event/#block-event","title":"Block Event","text":"<p>The parameters passed to Subscriber:</p> <pre><code>blockHash: block hash\nblockNumber: block number\ntransactionSize: the number of transactions in a block\nlatestSolidifiedBlockNumber: the latest solidified block number\ntransactionList: the transactions hash list\n</code></pre>"},{"location":"architecture/event/#contract-event","title":"Contract Event","text":"<p>The parameters passed to Subscriber:</p> <pre><code>transactionId: transaction id\ncontractAddress: contract address\ncallerAddress: contract caller address\nblockNumber: the number of the block contract related events recorded\nblockTimestamp: the block time stamp\neventSignature: event signature\ntopicMap: the map of topic in solidity language\ndata: the data information in solidity language\nremoved: 'true' means the log is removed\n</code></pre>"},{"location":"architecture/event/#contract-log-event","title":"Contract Log Event","text":"<p>The parameters passed to Subscriber:</p> <pre><code>transactionId: transaction hash\ncontractAddress: contract address\ncallerAddress: contract caller address\nblockNumber: the number of the block contract related events recorded\nblockTimestamp: the block time stamp\ncontractTopics: the list of topic in solidity language\ndata: the data information in solidity language\nremoved: 'true' means the log is removed\n</code></pre> <p>Contract Event and Contract Log Even support event filter function which includes:</p> <pre><code>fromBlock: the start block number\ntoBlock: the end block number\ncontractAddress: contract addresses list\ncontractTopics: contract topics list\n</code></pre> <p>Note</p> <ol> <li>Historical data query is not supported.</li> <li>When subscribing to non-solidified events, be sure to use the two parameters <code>blockNumber</code> and <code>blockHash</code> as the criteria to verify that the received events are valid. In special cases such as unstable network connections causing chain reorg, event reorg may occur as well, resulting in stale events.</li> </ol>"},{"location":"architecture/event/#new-features","title":"New Features","text":"<ol> <li>Supporting event plug-ins, kafka &amp; mongodb plug-ins have been released, developers can also customize their own plug-ins according to their own needs.</li> <li>Supporting subscription of chain data, such as block, transaction, contract log, contract event and so on. For transaction events, developers can get information such as internal transactions, contract info and so on; for contract events, developers could configure the contract addresses list or contract topic list to receive the specified events, and event subscription has a very low latency. The deployed fullnode can receive event information immediately after the contract is executed.</li> <li>Event query service tron-eventquery, online Event query service provided. Developers can query trigger information in the last seven days through https, and the query address is https://api.tronex.io.</li> </ol>"},{"location":"architecture/event/#github-projects","title":"Github projects","text":"<ul> <li>tronprotocol/event-plugin</li> <li>tronprotocol/tron-eventquery</li> </ul>"},{"location":"architecture/event/#event-plugin","title":"Event plugin","text":"<ul> <li>Kafka deployment</li> <li>MongoDB deployment</li> </ul>"},{"location":"architecture/event/#event-query","title":"Event query","text":"<p>TRON Event Query Service</p> <p>TronEventQuery is implemented with Tron's new event subscribe model. It uses same query interface with Tron-Grid. Users can also subscribe block trigger, transaction trigger, contract log trigger, and contract event trigger. TronEvent is independent of a particular branch of java-tron, the new event subscribes model will be released on version 3.5 of java-tron.</p> <p>For more information of TRON event subscribe model, please refer to TIP-12.</p> <ul> <li>Event query deployment</li> <li>Event query HTTP API</li> </ul>"},{"location":"architecture/event/#using-java-trons-built-in-message-queue-for-event-subscription","title":"Using java-tron's Built-in Message Queue for Event Subscription","text":"<p>TRON provides event subscription service. Developers can not only obtain on-chain events through event plugin, but also through java-tron\u2019s built-in ZeroMQ message queue. The difference is that event plugin needs to be additionally deployed, which is used to implement event storage: developers can choose appropriate storage tools according to their needs, such as MongoDB, Kafka, etc., and the plugin help complete the storage of subscribed events. java-tron's built-in ZeroMQ does not require additional deployment operations. Event subscribers can directly connect to the publisher's ip and port, set subscription topics, and receive subscribed events. However, this method does not provide event storage. Therefore, when developers want to subscribe to events directly from nodes for a short period of time, then using the built-in message queue will be a more appropriate choice.</p> <p>This article will introduce how to subscribe to events through java-tron's built-in message queue in detail.</p>"},{"location":"architecture/event/#configure-node","title":"Configure node","text":"<p>To use the built-in ZeroMQ of the node for event subscription, you need to set the configuration item <code>useNativeQueue</code> to <code>true</code> in the node configuration file.</p> <pre><code>event.subscribe = {\n  native = {\n    useNativeQueue = true // if true, use native message queue, else use event plugin.\n    bindport = 5555 // bind port\n    sendqueuelength = 1000 //max length of send queue\n  }\n\n  ......\n\n  topics = [\n    {\n      triggerName = \"block\" // block trigger, the value can't be modified\n      enable = true\n      topic = \"block\" // plugin topic, the value could be modified\n    },\n    ......\n  ]\n}\n</code></pre> <ul> <li><code>native.useNativeQueue</code>: <code>true</code> is to use the built-in message queue, <code>false</code> is to use the event plugin</li> <li><code>native.bindport</code>: ZeroMQ publisher binding port. In this example, it is <code>5555</code>, so the publisher address that the subscriber should connect to is <code>\"tcp://127.0.0.1:5555\"</code> </li> <li><code>native.sendqueuelength</code>: The length of the send queue, that is, when the subscriber receives messages slowly, the maximum number of messages published by the publisher that the TCP buffer can hold. if it exceeds, The message will be discarded if exceeds the capacity</li> <li><code>topics</code>: Subscribed event type , including block type, transaction type, etc.</li> </ul>"},{"location":"architecture/event/#start-node","title":"Start node","text":"<p>The event subscription service is disabled by default and needs to be enabled by adding the command line parameter <code>--es</code>. The start command of the node that enables the event subscription service is as follows: <pre><code>$ java -jar FullNode.jar --es\n</code></pre></p>"},{"location":"architecture/event/#prepare-event-subscription-script","title":"Prepare event subscription script","text":"<p>This article takes Nodejs as an example to illustrate how to subscribe to events.</p> <p>First, install the zeromq library: <pre><code>$ npm install zeromq@5\n</code></pre> Then, write the subscriber code: <pre><code>// subscriber.js\nvar zmq = require(\"zeromq\"),\nvar sock = zmq.socket(\"sub\");\n\nsock.connect(\"tcp://127.0.0.1:5555\");\nsock.subscribe(\"block\");\nconsole.log(\"Subscriber connected to port 5555\");\n\nsock.on(\"message\", function(topic, message) {\n  console.log(\n    \"received a message related to:\",\n    Buffer.from(topic).toString(),\n    \", containing message:\",\n    Buffer.from(message).toString()\n  );\n});\n</code></pre> This example connects the subscriber to the node event publisher and subscribes to <code>block</code> events.</p>"},{"location":"architecture/event/#start-subscriber","title":"Start subscriber","text":"<p>Start command of Nodejs is as below:</p> <p><pre><code>$ node subscriber.js\n\n&gt; Subscriber connected to port 5555\n</code></pre> When the node has a new block, the subscriber will receive block event, the output information is as follows: <pre><code>received a message related to: blockTrigger, containing message: {\"timeStamp\":1678343709000,\"triggerName\":\"blockTrigger\",\"blockNumber\":1361,\"blockHash\":\"00000000000005519b3995cd638753a862c812d1bda11de14bbfaa5ad3383280\",\"transactionSize\":0,\"latestSolidifiedBlockNumber\":1361,\"transactionList\":[]}\nreceived a message related to: blockTrigger, containing message: {\"timeStamp\":1678343712000,\"triggerName\":\"blockTrigger\",\"blockNumber\":1362,\"blockHash\":\"0000000000000552d53d1bdd9929e4533a983f14df8931ee9b3bf6d6c74a47b0\",\"transactionSize\":0,\"latestSolidifiedBlockNumber\":1362,\"transactionList\":[]}\n</code></pre></p>"},{"location":"clients/wallet-cli/","title":"wallet-cli","text":""},{"location":"clients/wallet-cli/#introduction","title":"Introduction","text":"<p>wallet-cli is an interactive command-line wallet that supports the TRON network for signing and broadcasting transactions in a secure local environment, as well as access to on-chain data. wallet-cli supports key management, you can import the private key into the wallet, wallet-cli will encrypt your private key with a symmetric encryption algorithm and store it in a keystore file. wallet-cli does not store on-chain data locally. It uses gRPC to communicate with a java-tron node. You need to configure the java-tron node to be linked in the configuration file. The following figure shows the process of the use of wallet-cli to sign and broadcast when transferring TRX: </p> <p>The user first runs the <code>Login</code> command to unlock the wallet, and then runs the <code>SendCoin</code> command to send TRX, wallet-cli will build and sign the transaction locally, and then call the BroadcastTransaction gRPC API of the java-tron node to broadcast the transaction to the network. After the broadcast is successful, the java-tron node will return the transaction hash to wallet-cli, and wallet-cli will display the transaction hash to the user.</p> <p>Install and run: wallet-cli</p>"},{"location":"clients/wallet-cli/#commands","title":"Commands","text":"<p>Below, please find all types of wallet-cli commands\uff1a</p> <ul> <li>Wallet</li> <li>Account</li> <li>AccountResource</li> <li>Transaction</li> <li>On-ChainInquire</li> <li>SmartContract</li> <li>TRC-10</li> <li>Governance</li> <li>DEX</li> </ul>"},{"location":"clients/wallet-cli/#wallet","title":"Wallet","text":"<p>Here are all the wallet related commands \uff1a</p> <ul> <li>RegisterWallet</li> <li>Login</li> <li>BackupWallet</li> <li>BackupWallet2Base64</li> <li>ChangePassword</li> <li>ImportWallet</li> <li>ImportWalletByBase64</li> </ul> <p>This section introduces commands related to wallet management. Let's start with<code>registerwallet</code>to get a new account.</p>"},{"location":"clients/wallet-cli/#registerwallet","title":"RegisterWallet","text":"<p>To register your wallet, you need to set the wallet password and generate the address and private key. A .json keystore file will be generated under the path of <code>wallet-cli/wallet</code>. The file will be used for <code>login</code> and <code>backupwallet</code> later. <pre><code>wallet&gt; RegisterWallet \nPlease input password.\npassword: \nPlease input password again.\npassword: \nRegister a wallet successful, keystore file name is UTC--2022-06-27T07-37-47.601000000Z--TWyDBTHsWJFhgywWkTNW7vh7jSUxeBaiAw.json\n</code></pre></p>"},{"location":"clients/wallet-cli/#login","title":"Login","text":"<p>When we have a keystore file, we can start to login. After enter the command, choose the keystore file and enter the password. <pre><code>wallet&gt; login\nuse user defined config file in current dir\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-06-22T08-31-57.735000000Z--TBnPDbw99BLzPUZuW8Rrcc3RGGQT3cnSfF.json\nThe 4th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 5th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 5\n4\nPlease input your password.\npassword: \nLogin successful !!!\n</code></pre></p>"},{"location":"clients/wallet-cli/#backupwallet","title":"BackupWallet","text":"<p>This will Back up your wallet. You need to enter your wallet password to export the privat key in hex string format, such as: <pre><code>721d63b074f18d41c147e04c952ec93467777a30b6f16745bc47a8eae5076545\n</code></pre></p> <pre><code>wallet&gt; backupwallet\nPlease input your password.\npassword: \nBackupWallet successful !!\n721d63b074f18d41c147e04c952ec93467777a30b6f16745bc47a8eae5076545\n</code></pre>"},{"location":"clients/wallet-cli/#backupwallet2base64","title":"BackupWallet2Base64","text":"<p>This will Back up your wallet, you need to enter your wallet password to export the private key in base64 format, as below: <pre><code>ch1jsHTxjUHBR+BMlS7JNGd3ejC28WdFvEeo6uUHZUU=\n</code></pre></p> <pre><code>wallet&gt; backupwallet\nPlease input your password.\npassword: \nBackupWallet successful !!\nch1jsHTxjUHBR+BMlS7JNGd3ejC28WdFvEeo6uUHZUU=\n</code></pre>"},{"location":"clients/wallet-cli/#changepassword","title":"ChangePassword","text":"<p>Modify the password of an account <pre><code>wallet&gt; changepassword\nPlease input old password.\npassword: \nPlease input new password.\nPlease input password.\npassword: \nPlease input password again.\npassword: \nThe 1th keystore file name is .DS_Store\nThe 2th keystore file name is UTC--2022-06-27T10-58-59.306000000Z--TBnPDbw99BLzPUZuW8Rrcc3RGGQT3cnSfF.json\nPlease choose between 1 and 2\n2\nChangePassword successful !!\n</code></pre></p>"},{"location":"clients/wallet-cli/#importwallet","title":"ImportWallet","text":"<p>Import a wallet, you need to set a password first and then enter your hex string private key. <pre><code>wallet&gt; importwallet\nPlease input password.\npassword: \nPlease input password again.\npassword: \nPlease input private key. Max retry time:3\nbd1ff0f4f852db45316bf08755bf6eee45d0678bfbf852a00020a13d42a1fb5b\nImport a wallet successful, keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\n</code></pre></p>"},{"location":"clients/wallet-cli/#importwalletbybase64","title":"ImportWalletByBase64","text":"<p>To import a wallet, you need to set a password first and then enter your private key in base64 format. <pre><code>wallet&gt; importwalletbybase64\nPlease input password.\npassword: \nPlease input password again.\npassword: \nPlease input private key by base64. Max retry time:3\nvR/w9PhS20Uxa/CHVb9u7kXQZ4v7+FKgACChPUKh+1s=   \nImport a wallet successful, keystore file name is UTC--2022-06-28T06-51-56.154000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\n</code></pre></p>"},{"location":"clients/wallet-cli/#account","title":"Account","text":"<p>Here are all the account related commands \uff1a</p> <ul> <li>GenerateAddress</li> <li>GetAccount</li> <li>GetAddress</li> <li>GetBalance</li> <li>UpdateAccountPermission</li> </ul>"},{"location":"clients/wallet-cli/#generateaddress","title":"GenerateAddress","text":"<p>Generate an address and print out the public (address) and private key <pre><code>wallet&gt; generateaddress\n{\n    \"address\": \"TQAvi6bemLa1t1irdV1KuaSC5vKc2EswTj\",\n    \"privateKey\": \"610a8a809114a96140e1cb040a7813afc74603e58c3d7824c3f68ccc642c297e\"\n}\n</code></pre> Note: address and private key generated by this command would not be saved in wallet-cli. Keep properly if you would like to use them.</p>"},{"location":"clients/wallet-cli/#getaccount","title":"GetAccount","text":"<p>Get account information by an address <pre><code>wallet&gt; getaccount [address]\n</code></pre> <pre><code>wallet&gt; getaccount TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\n{\n    \"address\": \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n    \"balance\": 2665198240,\n    \"create_time\": 1650363711000,\n    \"latest_opration_time\": 1653578769000,\n    \"latest_consume_free_time\": 1651228080000,\n    \"account_resource\": {\n        \"latest_consume_time_for_energy\": 1653578769000\n    },\n    \"owner_permission\": {\n        \"permission_name\": \"owner\",\n        \"threshold\": 1,\n        \"keys\": [\n            {\n                \"address\": \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                \"weight\": 1\n            }\n        ]\n    },\n    \"active_permission\": [\n        {\n            \"type\": \"Active\",\n            \"id\": 2,\n            \"permission_name\": \"active\",\n            \"threshold\": 1,\n            \"operations\": \"7fff1fc0033e3b00000000000000000000000000000000000000000000000000\",\n            \"keys\": [\n                {\n                    \"address\": \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                    \"weight\": 1\n                }\n            ]\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getaddress","title":"GetAddress","text":"<p>Get the address of the current account <pre><code>wallet&gt; getaddress\nGetAddress successful !!\naddress = TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\n</code></pre></p>"},{"location":"clients/wallet-cli/#getbalance","title":"GetBalance","text":"<p>Get the TRX balance of the current account <pre><code>wallet&gt; getbalance\nBalance = 2665198240\n</code></pre></p>"},{"location":"clients/wallet-cli/#updateaccountpermission","title":"UpdateAccountPermission","text":"<p><pre><code>wallet&gt;UpdateAccountPermission [ownerAddress] [permissions]\n</code></pre> This command is used to manage account permissions, assign permissions to other accounts, is utilized for multi-signature transactions, which allows other users to access the account with paritcular permission in order to better manage it. There are three types of permissions:</p> <ul> <li>owner: access to the owner of account</li> <li>active: access to other features of accounts, and access that authorizes a certain feature. Block production authorization is not included if it's for SR purposes.</li> <li>witness: only for super representatives, block production authorization will be granted to one of the other users.</li> </ul> <p>NOTE the parameter<code>Permission</code> must written in JSON format and entered in line. If the owner account is not SR, then do not assign super representative permission.  <pre><code>wallet&gt; updateaccountpermission TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8 {\"owner_permission\":{\"keys\":[{\"address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\"weight\":1}],\"threshold\":1,\"type\":0,\"permission_name\":\"owner\"},\"active_permissions\":[{\"operations\":\"7fff1fc0033e0000000000000000000000000000000000000000000000000000\",\"keys\":[{\"address\":\"TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej\",\"weight\":1},{\"address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\",\"weight\":1}],\"threshold\":2,\"type\":2,\"permission_name\":\"active12323\"}]}\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"owner\":{\n                            \"keys\":[\n                                {\n                                    \"address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                                    \"weight\":1\n                                }\n                            ],\n                            \"threshold\":1,\n                            \"permission_name\":\"owner\"\n                        },\n                        \"owner_address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                        \"actives\":[\n                            {\n                                \"operations\":\"7fff1fc0033e0000000000000000000000000000000000000000000000000000\",\n                                \"keys\":[\n                                    {\n                                        \"address\":\"TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej\",\n                                        \"weight\":1\n                                    },\n                                    {\n                                        \"address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\",\n                                        \"weight\":1\n                                    }\n                                ],\n                                \"threshold\":2,\n                                \"type\":\"Active\",\n                                \"permission_name\":\"active12323\"\n                            }\n                        ]\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.AccountPermissionUpdateContract\"\n                },\n                \"type\":\"AccountPermissionUpdateContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"4e88\",\n        \"ref_block_hash\":\"11a47859be13f689\",\n        \"expiration\":1656423231000,\n        \"timestamp\":1656423171818\n    },\n    \"raw_data_hex\":\"0a024e88220811a47859be13f6894098dc92d49a305aee01082e12e9010a3c747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e4163636f756e745065726d697373696f6e557064617465436f6e747261637412a8010a1541babecec4d9f58f0df77f0728b9c53abb1f21d68412241a056f776e657220013a190a1541babecec4d9f58f0df77f0728b9c53abb1f21d6841001226908021a0b6163746976653132333233200232207fff1fc0033e00000000000000000000000000000000000000000000000000003a190a15410cfaec7164cbfe78dbb8d8fba7e23b4d745ed81310013a190a1541e8bd653015895947cec33d1670a88cf67ab277b9100170ea8d8fd49a30\"\n}\nbefore sign transaction hex string is 0a8d020a024e88220811a47859be13f6894098dc92d49a305aee01082e12e9010a3c747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e4163636f756e745065726d697373696f6e557064617465436f6e747261637412a8010a1541babecec4d9f58f0df77f0728b9c53abb1f21d68412241a056f776e657220013a190a1541babecec4d9f58f0df77f0728b9c53abb1f21d6841001226908021a0b6163746976653132333233200232207fff1fc0033e00000000000000000000000000000000000000000000000000003a190a15410cfaec7164cbfe78dbb8d8fba7e23b4d745ed81310013a190a1541e8bd653015895947cec33d1670a88cf67ab277b9100170ea8d8fd49a30\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 4th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 4\n3\nPlease input your password.\npassword: \nafter sign transaction hex string is 0a8d020a024e88220811a47859be13f6894096bcb5de9a305aee01082e12e9010a3c747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e4163636f756e745065726d697373696f6e557064617465436f6e747261637412a8010a1541babecec4d9f58f0df77f0728b9c53abb1f21d68412241a056f776e657220013a190a1541babecec4d9f58f0df77f0728b9c53abb1f21d6841001226908021a0b6163746976653132333233200232207fff1fc0033e00000000000000000000000000000000000000000000000000003a190a15410cfaec7164cbfe78dbb8d8fba7e23b4d745ed81310013a190a1541e8bd653015895947cec33d1670a88cf67ab277b9100170ea8d8fd49a301241881b00f8e8828d9347469fcbcec730093841c2363561243b7162a9669439266049ab82f20f97a136adc88feff0a4d5aa57b11f762eaa7e05105d27ec5d55a33900\ntxid is 3dce7f18f6cf6962c38904678947b3b32f9e94ba6460874679d8ed063bb1c0eb\nUpdateAccountPermission successful !!!\n</code></pre></p>"},{"location":"clients/wallet-cli/#accountresource","title":"AccountResource","text":"<p>Here are all the account resource related commands \uff1a</p> <ul> <li>FreezeBalance</li> <li>UnfreezeBalance</li> <li>GetDelegatedResource</li> <li>FreezeBalanceV2</li> <li>UnfreezeBalanceV2</li> <li>DelegateResource</li> <li>UndelegateResource</li> <li>WithdrawExpireUnfreeze</li> <li>GetAvailableUnfreezeCount</li> <li>GetCanWithdrawUnfreezeAmount</li> <li>GetCanDelegatedMaxsize</li> <li>GetDelegatedResourceV2</li> <li>GetDelegatedResourceAccountIndexV2</li> <li>GetAccountNet</li> <li>GetAccountResource</li> </ul>"},{"location":"clients/wallet-cli/#freezebalance","title":"FreezeBalance","text":"<p>This interface has been deprecated, please use freezeBalanceV2 to stake TRX to obtain resources. <pre><code>wallet&gt; freezeBalance [OwnerAddress] [frozen_balance] [frozen_duration] [ResourceCode:0 BANDWIDTH, 1 ENERGY] [receiverAddress]\n</code></pre></p> <p><code>OwnerAddress</code>is the address of the account that initiated the transaction, optional, default is the address of the login account.<code>frozen_balance</code>is the amount of frozen TRX, the unit is the smallest unit (Sun), the minimum is 1000000sun.<code>frozen_duration</code> is frozen duration, only be specified as 3 days, indicates that you can unfreeze after 3 days.<code>ResourceCode</code> indicates the type of the acquired resource\uff0c0 BANDWIDTH and 1 ENERGY. <code>receiverAddress</code>is the address that will receive the resource.</p> <p><code>ResourceCode</code> and <code>receiverAddress</code>  are optional parameters. If <code>ResourceCode</code> is not set\uff0cdefault is 0. If <code>receiverAddress</code> is not set, the TRX is frozen to obtain resources for its <code>OwnerAddress</code> use; if it is not empty, the acquired resources are used by receiverAddress.</p> <p>Example: <pre><code>wallet&gt; freezeBalance TWyDBTHsWJFhgywWkTNW7vh7jSUxeBaiAw 1000000 3 1 TCrkRWJuHP4VgQF3xwLNBAjVVXvxRRGpbA\n{\n    \"raw_data\":{\n        ...\n    },\n    \"raw_data_hex\":\"0a02a9b822081db2070d39d2316640c095dda19a305a70080b126c0a32747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e6365436f6e747261637412360a1541e65aca838a9e15dd81bd9532d2ad61300e58cf7110c0843d180350017a15411fafb1e96dfe4f609e2259bfaf8c77b60c535b9370c6c8d9a19a30\"\n}\nbefore sign transaction hex string is 0a8e010a02a9b822081db2070d39d2316640c095dda19a305a70080b126c0a32747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e6365436f6e747261637412360a1541e65aca838a9e15dd81bd9532d2ad61300e58cf7110c0843d180350017a15411fafb1e96dfe4f609e2259bfaf8c77b60c535b9370c6c8d9a19a30\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-22T08-21-05.158000000Z--TDQgNvjrE6RH749f8aFGyJqEEGyhV4BDEU.json\nThe 2th keystore file name is UTC--2022-06-27T07-37-47.601000000Z--TWyDBTHsWJFhgywWkTNW7vh7jSUxeBaiAw.json\nPlease choose between 1 and 2\n2\nPlease input your password.\npassword: \nafter sign transaction hex string is 0a8e010a02a9b822081db2070d39d2316640e0f7ffab9a305a70080b126c0a32747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e6365436f6e747261637412360a1541e65aca838a9e15dd81bd9532d2ad61300e58cf7110c0843d180350017a15411fafb1e96dfe4f609e2259bfaf8c77b60c535b9370c6c8d9a19a301241c45742648e6970e01b242c9b6eca2549c8721b860ced71abd331b9fe925f3c0f184768e0d2e3b580ce787cc6f67d186a0d583226fdb69c2cc8cfc6ec42e389f600\ntxid is f45cb5ae425796a492d4a9ecac8d60fd48bf78dbcdbe1d92725047c5dfbffba2\nFreezeBalance successful !!!\n</code></pre></p>"},{"location":"clients/wallet-cli/#unfreezebalance","title":"UnfreezeBalance","text":"<p>unstake TRX which staked during stake1.0. <pre><code>wallet&gt;unfreezeBalance [OwnerAddress] ResourceCode(0 BANDWIDTH,1 ENERGY,2 TRON_POWER) [receiverAddress]\n</code></pre> <code>OwnerAddress</code>is the address of the account that initiated the transaction, optional, default is the address of the login account. <code>ResourceCode</code>indicates the type of the acquired resource\uff0c0 stands for BANDWIDTH and 1 stands for ENERGY. <code>receiverAddress</code>is the address that will receive the resource.</p> <pre><code>wallet&gt; unfreezebalance TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8 1 TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"resource\":\"ENERGY\",\n                        \"receiver_address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\",\n                        \"owner_address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.UnfreezeBalanceContract\"\n                },\n                \"type\":\"UnfreezeBalanceContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"c8b7\",\n        \"ref_block_hash\":\"8842722f2845274d\",\n        \"expiration\":1656915213000,\n        \"timestamp\":1656915154748\n    },\n    \"raw_data_hex\":\"0a02c8b722088842722f2845274d40c8f5debe9c305a6c080c12680a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e6365436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d68450017a1541e8bd653015895947cec33d1670a88cf67ab277b970bcaedbbe9c30\"\n}\nbefore sign transaction hex string is 0a8a010a02c8b722088842722f2845274d40c8f5debe9c305a6c080c12680a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e6365436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d68450017a1541e8bd653015895947cec33d1670a88cf67ab277b970bcaedbbe9c30\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny               \nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 4th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 4\n3\nPlease input your password.\npassword: \nafter sign transaction hex string is 0a8a010a02c8b722088842722f2845274d40e8dd81c99c305a6c080c12680a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e6365436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d68450017a1541e8bd653015895947cec33d1670a88cf67ab277b970bcaedbbe9c301241593a94650274df29619a6a6946258ea32a22f24a33445f943e3d72cd7d9b8ce7234d188f4bf3a6f0c90cb60af36fc77dc8d376afac9ed840f36dfd68c429fb7e00\ntxid is 3ea58b3ac2cb05868e70d40f58916312d927c40fd1e4c549554dc3e520c1efde\nUnfreezeBalance successful !!!\n</code></pre>"},{"location":"clients/wallet-cli/#getdelegatedresource","title":"GetDelegatedResource","text":"<p><pre><code>wallet&gt;getdelegatedresource [fromAddress] [toAddress]\n</code></pre> Get the information from the <code>fromAddress</code>, which is the resource owner's address, to the <code>toAddress</code>, which is the delegated address who is on behalf of the resource owner. <pre><code>wallet&gt; getdelegatedresource TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8 TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\n{\n    \"delegatedResource\": [\n        {\n            \"from\": \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n            \"to\": \"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\",\n            \"frozen_balance_for_energy\": 1000000,\n            \"expire_time_for_energy\": 1656660447000\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#freezebalancev2","title":"FreezeBalanceV2","text":"<p>Stake 2.0 API: Stake TRX to obtain TRON Power (voting rights) and bandwidth or energy.</p> <pre><code>wallet&gt; freezeBalanceV2 [OwnerAddress] frozen_balance ResourceCode(0 BANDWIDTH,1 ENERGY,2 TRON_POWER)\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> <li><code>frozen_balance</code> is the amount of frozen TRX, the unit is the smallest unit (Sun), the minimum is 1000000sun.</li> <li><code>ResourceCode</code> indicates the type of the acquired resource\uff0c0 BANDWIDTH and 1 ENERGY.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; freezeBalanceV2 1000000 1\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"resource\":\"ENERGY\",\n                        \"frozen_balance\":1000000,\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.FreezeBalanceV2Contract\"\n                },\n                \"type\":\"FreezeBalanceV2Contract\"\n            }\n        ],\n        \"ref_block_bytes\":\"00bb\",\n        \"ref_block_hash\":\"0c237850e9e3c216\",\n        \"expiration\":1676620524000,\n        \"timestamp\":1676620465372\n    },\n    \"raw_data_hex\":\"0a0200bb22080c237850e9e3c21640e0d3fbf2e5305a59083612550a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d180170dc89f8f2e530\"\n}\nbefore sign transaction hex string is 0a770a0200bb22080c237850e9e3c21640e0d3fbf2e5305a59083612550a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d180170dc89f8f2e530\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2023-02-17T02-53-57.163000000Z--THLJLytz6UHwpmDFi5RC43D44dmnh4ZTeL.json\nThe 2th keystore file name is UTC--2023-02-17T07-40-47.121000000Z--TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM.json\nPlease choose between 1 and 2\n2\nPlease input your password.\npassword:\nafter sign transaction hex string is 0a770a0200bb22080c237850e9e3c21640dbb89efde5305a59083612550a34747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e467265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d180170dc89f8f2e53012419e46cc7b6706ee6a14a541df5f9c518fae9a71ac7a7cc484c48386eb0997a8ab10c41e09feb905c5cc370fe1d15968d22cec2fd2cdc5916adfd3a78c52f8d47000\ntxid is 1743aa098f5e10ac8b68ccbf0ca6b5f1364a63485e442e6cb03fd33e3331e3fb\nfreezeBalanceV2 successful !!!\n</code></pre>"},{"location":"clients/wallet-cli/#unfreezebalancev2","title":"UnfreezeBalanceV2","text":"<p>Stake 2.0 API: Unstake TRX to release bandwidth and energy and at the same time TRON Power will be reclaimed and corresponding votes will be revoked. </p> <pre><code>wallet&gt; unfreezeBalanceV2 [OwnerAddress] unfreezeBalance ResourceCode(0 BANDWIDTH,1 ENERGY,2 TRON_POWER)\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account. </li> <li><code>unfreezeBalance</code> Amount of TRX to be unstaked. the unit is sun.</li> <li><code>ResourceCode</code> indicates the type of the acquired resource\uff0c0 stands for BANDWIDTH and 1 stands for ENERGY. </li> </ul> <p>Example:</p> <pre><code>wallet&gt; unfreezeBalanceV2 1000000  1\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"resource\":\"ENERGY\",\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n                        \"unfreeze_balance\":1000000\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.UnfreezeBalanceV2Contract\"\n                },\n                \"type\":\"UnfreezeBalanceV2Contract\"\n            }\n        ],\n        \"ref_block_bytes\":\"0132\",\n        \"ref_block_hash\":\"0772c1a1727e2ef0\",\n        \"expiration\":1676620887000,\n        \"timestamp\":1676620829314\n    },\n    \"raw_data_hex\":\"0a02013222080772c1a1727e2ef040d8e791f3e5305a5b083712570a36747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d18017082a58ef3e530\"\n}\nbefore sign transaction hex string is 0a790a02013222080772c1a1727e2ef040d8e791f3e5305a5b083712570a36747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d18017082a58ef3e530\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2023-02-17T02-53-57.163000000Z--THLJLytz6UHwpmDFi5RC43D44dmnh4ZTeL.json\nThe 2th keystore file name is UTC--2023-02-17T07-40-47.121000000Z--TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM.json\nPlease choose between 1 and 2\n2\nPlease input your password.\npassword:\nafter sign transaction hex string is 0a790a02013222080772c1a1727e2ef040ecd2b4fde5305a5b083712570a36747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e667265657a6542616c616e63655632436f6e7472616374121d0a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca10c0843d18017082a58ef3e530124111bac22e9bc35e1a78c13796893e9f2b81dc99eb26d9ce7a95d0c6a0a9b5588739c52b999acd370b255d178f57bf2abef8881891f23e042ddf83c3551b8bd98e01\ntxid is f9e114347ea89c5d722d20226817bc41c8a39ea36be756ba216cf450ab3f1fb3\nunfreezeBalanceV2 successful !!!\n</code></pre>"},{"location":"clients/wallet-cli/#delegateresource","title":"DelegateResource","text":"<p>Stake 2.0 API: delegate bandwidth or energy resource to other address. <pre><code>wallet&gt; delegateResource [OwnerAddress] balance ResourceCode(0 BANDWIDTH,1 ENERGY), ReceiverAddress [lock]\n</code></pre></p> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> <li><code>balance</code> Amount of TRX staked for resources to be delegated, unit is sun.</li> <li><code>ResourceCode</code> Resource type, \"BANDWIDTH\" is 0, \"ENERGY\" is 1.</li> <li><code>ReceiverAddress</code> Receiver address of resource to be delegated to.</li> <li><code>lock</code> Whether it is locked, if it is set to true, the delegated resources cannot be undelegated within 3 days. When the lock time is not over, if the owner delegates the same type of resources using the lock to the same address, the lock time will be reset to 3 days. optional, default is 0, 0-lock, 1-unlock.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; delegateResource 1000000  1 TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g 0\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"balance\":1000000,\n                        \"resource\":\"ENERGY\",\n                        \"receiver_address\":\"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.DelegateResourceContract\"\n                },\n                \"type\":\"DelegateResourceContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"020c\",\n        \"ref_block_hash\":\"54e32e95d11894f8\",\n        \"expiration\":1676621547000,\n        \"timestamp\":1676621487525\n    },\n    \"raw_data_hex\":\"0a02020c220854e32e95d11894f840f88bbaf3e5305a710839126d0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e70a5bbb6f3e530\"\n}\nbefore sign transaction hex string is 0a8f010a02020c220854e32e95d11894f840f88bbaf3e5305a710839126d0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e70a5bbb6f3e530\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2023-02-17T02-53-57.163000000Z--THLJLytz6UHwpmDFi5RC43D44dmnh4ZTeL.json\nThe 2th keystore file name is UTC--2023-02-17T07-40-47.121000000Z--TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM.json\nPlease choose between 1 and 2\n2\nPlease input your password.\npassword:\nafter sign transaction hex string is 0a8f010a02020c220854e32e95d11894f84093e9dcfde5305a710839126d0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e70a5bbb6f3e5301241414de060e9c104bb45d745e22b7b7a30b4a89a2635c62aab152fff5d2f10b7443023a9aa487be86652b74974ff6a7d82d3dbf94cea9ac1e0a7e48e682175e3f601\ntxid is 0917002d0068dde7ad4ffe46e75303d11192e17bfa78934a5f867c5ae20720ec\ndelegateResource successful !!!\n</code></pre>"},{"location":"clients/wallet-cli/#undelegateresource","title":"UndelegateResource","text":"<p>Stake 2.0 API: undelegate resource. <pre><code>wallet&gt; unDelegateResource [OwnerAddress] balance ResourceCode(0 BANDWIDTH,1 ENERGY), ReceiverAddress\n</code></pre></p> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> <li><code>balance</code> Amount of TRX staked for resource to be undelegated, unit is sun.</li> <li><code>ResourceCode</code> Resource type, \"BANDWIDTH\" is 0, \"ENERGY\" is 1.</li> <li><code>ReceiverAddress</code> Receiver address of resource to be delegated to.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; unDelegateResource 1000000  1 TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"balance\":1000000,\n                        \"resource\":\"ENERGY\",\n                        \"receiver_address\":\"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.UnDelegateResourceContract\"\n                },\n                \"type\":\"UnDelegateResourceContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"0251\",\n        \"ref_block_hash\":\"68ac15256c213e71\",\n        \"expiration\":1676621754000,\n        \"timestamp\":1676621695001\n    },\n    \"raw_data_hex\":\"0a020251220868ac15256c213e714090ddc6f3e5305a73083a126f0a37747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e709990c3f3e530\"\n}\nbefore sign transaction hex string is 0a91010a020251220868ac15256c213e714090ddc6f3e5305a73083a126f0a37747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e709990c3f3e530\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2023-02-17T02-53-57.163000000Z--THLJLytz6UHwpmDFi5RC43D44dmnh4ZTeL.json\nThe 2th keystore file name is UTC--2023-02-17T07-40-47.121000000Z--TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM.json\nPlease choose between 1 and 2\n2\nPlease input your password.\npassword:\nafter sign transaction hex string is 0a91010a020251220868ac15256c213e7140febde9fde5305a73083a126f0a37747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e556e44656c65676174655265736f75726365436f6e747261637412340a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca100118c0843d221541fd49eda0f23ff7ec1d03b52c3a45991c24cd440e709990c3f3e530124102ebde16d1abaccd976f8ead4b5acf92b05f7d9796c28ca6a26b4e51442e638e5e33e598bb03732da24dc761a39b9d307c045b55323128dc9b07510ffc48933a01\ntxid is 537a3f4461ab55c705b77503bc42f469bfc22c0cb8588b8f3641ab40117ebfd8\nunDelegateResource successful !!!\n</code></pre>"},{"location":"clients/wallet-cli/#withdrawexpireunfreeze","title":"WithdrawExpireUnfreeze","text":"<p>Stake 2.0 API: withdraw unfrozen balance.</p> <pre><code>wallet&gt; withdrawExpireUnfreeze [OwnerAddress]\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; withdrawExpireUnfreeze \n</code></pre>"},{"location":"clients/wallet-cli/#getavailableunfreezecount","title":"GetAvailableUnfreezeCount","text":"<p>Stake 2.0 API: remaining times of executing unstake operation.</p> <pre><code>wallet&gt; getavailableunfreezecount [OwnerAddress]\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; GetAvailableUnfreezeCount\n{\n    \"count\": 30\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getcanwithdrawunfreezeamount","title":"GetCanWithdrawUnfreezeAmount","text":"<p>Stake 2.0 API: query the withdrawable balance at the specified timestamp.</p> <pre><code>wallet&gt; getcanwithdrawunfreezeamount ownerAddress timestamp\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> <li><code>timestamp</code> query cutoff timestamp, in milliseconds.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; getcanwithdrawunfreezeamount 1776621695001\n{\n    \"amount\": 4000000\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getcandelegatedmaxsize","title":"GetCanDelegatedMaxsize","text":"<p>Stake 2.0 API: query the amount of delegatable resources share of the specified resource type for an address, unit is sun.</p> <pre><code>wallet&gt; getcandelegatedmaxsize ownerAddress type\n</code></pre> <ul> <li><code>OwnerAddress</code> is the address of the account that initiated the transaction, optional, default is the address of the login account.</li> <li><code>type</code> resource type, 0 is bandwidth, 1 is energy</li> </ul> <p>Example:</p> <pre><code>wallet&gt; getcandelegatedmaxsize 1\n{\n    \"max_size\": 11000000\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getdelegatedresourcev2","title":"GetDelegatedResourceV2","text":"<p>Stake 2.0 API\uff1aquery the detail of resource share delegated from fromAddress to toAddress.</p> <pre><code>wallet&gt; getdelegatedresourcev2 fromAddress toAddress\n</code></pre> <ul> <li><code>fromAddress</code> resource from address.</li> <li><code>toAddress</code>  resource to address.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; getdelegatedresourcev2  TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\n{\n    \"delegatedResource\": [\n        {\n            \"from\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n            \"to\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n            \"frozen_balance_for_bandwidth\": 7000000,\n            \"frozen_balance_for_energy\": 3000000\n        }\n    ]\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getdelegatedresourceaccountindexv2","title":"GetDelegatedResourceAccountIndexV2","text":"<p>Stake 2.0 API\uff1aquery the resource delegation index by an account. Two lists will return, one is the list of addresses the account has delegated its resources(toAddress), and the other is the list of addresses that have delegated resources to the account(fromAddress).</p> <pre><code>wallet&gt; getdelegatedresourceaccountindexv2 ownerAddress\n</code></pre> <ul> <li><code>OwnerAddress</code> account address.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; getdelegatedresourceaccountindexv2 TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\n{\n    \"account\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n    \"fromAccounts\": [\n        \"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\"\n    ],\n    \"toAccounts\": [\n        \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\"\n    ]\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getaccountnet","title":"GetAccountNet","text":"<p>This command shows the usage of bandwidth for a certain account. <pre><code>wallet&gt; getaccountnet TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\n{\n    \"freeNetUsed\": 262,\n    \"freeNetLimit\": 1500,\n    \"TotalNetLimit\": 43200000000,\n    \"TotalNetWeight\": 8725123062\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getaccountresource","title":"GetAccountResource","text":"<p>This command shows the usage of bandwidth and energy for a certain account. <pre><code>wallet&gt; getaccountresource TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\n{\n    \"freeNetUsed\": 262,\n    \"freeNetLimit\": 1500,\n    \"TotalNetLimit\": 43200000000,\n    \"TotalNetWeight\": 8725123062,\n    \"tronPowerLimit\": 1,\n    \"TotalEnergyLimit\": 90000000000,\n    \"TotalEnergyWeight\": 328098231\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#transaction","title":"Transaction","text":"<p>Here are all the transaction related commands \uff1a</p> <ul> <li>SendCoin</li> <li>AddTransactionSign</li> <li>BroadcastTransaction</li> <li>BackupWallet2Base64</li> <li>GetTransactionApprovedList</li> </ul>"},{"location":"clients/wallet-cli/#sendcoin","title":"SendCoin","text":"<p><pre><code>&gt; SendCoin [toAddress] [amount]\n</code></pre> Here is an example of multi-signed transaction. The accounts permission have assigned as in UpdateAccountPermission section, please check for reference. <pre><code>wallet&gt; SendCoin TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE 10\n{\n    \"raw_data\":{\n        \"contract\":[\n    \u00b7\u00b7\u00b7\n    \"raw_data_hex\":\"0a029ca12208432ed1fe1357ff7f40c0c484f19a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a708a8481f19a30\"\n}\nbefore sign transaction hex string is 0a83010a029ca12208432ed1fe1357ff7f40c0c484f19a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a708a8481f19a30\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\n2\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 4th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 4\n1\nPlease input your password.\npassword: \nCurrent signWeight is:\n{\n    \"result\":{\n        \"code\":\"NOT_ENOUGH_PERMISSION\"\n    },\n    \"approved_list\":[\n        \"TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej\"\n    ],\n    \"permission\":{\n        \"operations\":\"7fff1fc0033e0000000000000000000000000000000000000000000000000000\",\n        \"keys\":[\n            {\n                \"address\":\"TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej\",\n                \"weight\":1\n            },\n            {\n                \"address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\",\n                \"weight\":1\n            }\n        ],\n        \"threshold\":2,\n        \"id\":2,\n        \"type\":\"Active\",\n        \"permission_name\":\"active12323\"\n    },\n    \"current_weight\":1,\n    \"transaction\":{\n        \"result\":{\n            \"result\":true\n        },\n        \"txid\":\"ece603ec8ad11578450dc8adf29dd9d9833e733c313fe16a947c8c768f1e4483\",\n        \"transaction\":{\n            \"signature\":[\n                \"990001e909e638bbaa5de9b392121971d25cabde1391f5e164cd8a14608812df01a273e867c2329b8adb233599c5d353c435e789c777fd3e0b9fe83f0737a91101\"\n            ],\n            \"txID\":\"ece603ec8ad11578450dc8adf29dd9d9833e733c313fe16a947c8c768f1e4483\",\n            \"raw_data\":\u00b7\u00b7\u00b7,\n            \"raw_data_hex\":\"0a029ca12208432ed1fe1357ff7f40a2b3a7fb9a305a67080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a2802708a8481f19a30\"\n        }\n    }\n}\nPlease confirm if continue add signature enter y or Y, else any other\ny\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 4th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 4\n4\nPlease input your password.\npassword: \nafter sign transaction hex string is 0a85010a029ca12208432ed1fe1357ff7f40a2b3a7fb9a305a67080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a2802708a8481f19a301241990001e909e638bbaa5de9b392121971d25cabde1391f5e164cd8a14608812df01a273e867c2329b8adb233599c5d353c435e789c777fd3e0b9fe83f0737a91101124141ba3ffe9c7bb1ed184df8bf635d8c987982b2f4b22c447666ac82726f4a97cb2ef4d3fabd64137b8d59239bd7173c74264733ed140ccd04934a88c438de1cab00\ntxid is ece603ec8ad11578450dc8adf29dd9d9833e733c313fe16a947c8c768f1e4483\nSend 10 Sun to TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE successful !!\n</code></pre> A<code>permission_id</code> is always required, it is \"0\" by default, which means this transaction only needed to be sign by owner. In the example above, we enter \"2\" to make a multi-signed transaction this time, needs the two accounts assigned <code>actives</code> permission in UpdateAccountPermission section above to sign this transaction.</p> <p>In the example, we picked the account <code>TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej</code> to sign first, after that, it asks you if want to add another sign  ,enter y and pick the account <code>TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE</code> to finish multi-signing.</p> <p>The weight of each account is 1 and the granting threshold is 2. When the requirements are met, the transaction is done successfully! This example shows how to complete a multi-signed transaction using the same client. When using multiple clients, please refer to the following command.</p>"},{"location":"clients/wallet-cli/#addtransactionsign","title":"AddTransactionSign","text":"<p>Use the instruction addTransactionSign according to the obtained transaction hex string if signing at multiple cli. <pre><code>wallet&gt; addtransactionsign 0a83010a0241aa2208b2d2c13c86e8bd884098acb1cf9a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a30\nPlease input permission id.\n0\nPlease choose your key for sign.\nThe 1th keystore file name is UTC--2022-06-28T06-52-56.928000000Z--TB9qhqbev6DpX8mxdf3zDdtSQ6GC6Vb6Ej.json\nThe 2th keystore file name is .DS_Store\nThe 3th keystore file name is UTC--2022-04-06T09-43-20.710000000Z--TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8.json\nThe 4th keystore file name is UTC--2022-04-07T09-03-38.307000000Z--TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE.json\nPlease choose between 1 and 4\n3\nPlease input your password.\npassword: \n{\n    \"signature\":[\n        \"dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\"\n    ],\n    \"txID\":\"6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\",\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"amount\":10,\n                        \"owner_address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                        \"to_address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\":\"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"41aa\",\n        \"ref_block_hash\":\"b2d2c13c86e8bd88\",\n        \"expiration\":1656434882649,\n        \"timestamp\":1656413188328\n    },\n    \"raw_data_hex\":\"0a0241aa2208b2d2c13c86e8bd8840d9f0d9d99a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a30\"\n}\nTransaction hex string is 0a83010a0241aa2208b2d2c13c86e8bd8840d9f0d9d99a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a301241dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\n</code></pre></p> <p>After signing, the users will need to broadcast final transactions manually.</p>"},{"location":"clients/wallet-cli/#broadcasttransaction","title":"BroadcastTransaction","text":"<p>Broadcast the transaction, where the transaction is in hex string format. <pre><code>wallet&gt; broadcasttransaction 0a83010a0241aa2208b2d2c13c86e8bd8840d9f0d9d99a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a301241dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\nBroadcastTransaction successful !!!\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactionapprovedlist","title":"GetTransactionApprovedList","text":"<p>Get signature information according to transactions. <pre><code>wallet&gt; getTransactionApprovedList\n0a8c010a020318220860e195d3609c86614096eadec79d2d5a6e080112680a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412370a1541a7d8a35b260395c14aa456297662092ba3b76fc01215415a523b449890854c8fc460ab602df9f31fe4293f18808084fea6dee11128027094bcb8bd9d2d1241c18ca91f1533ecdd83041eb0005683c4a39a2310ec60456b1f0075b4517443cf4f601a69788f001d4bc03872e892a5e25c618e38e7b81b8b1e69d07823625c2b0112413d61eb0f8868990cfa138b19878e607af957c37b51961d8be16168d7796675384e24043d121d01569895fcc7deb37648c59f538a8909115e64da167ff659c26101\n{\n    \"result\":{\n\n    },\n    \"approved_list\":[\n        \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\"\n    ],\n    \"transaction\":{\n        \"result\":{\n            \"result\":true\n        },\n        \"txid\":\"6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\",\n        \"transaction\":{\n            \"signature\":[\n                \"dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\"\n            ],\n            \"txID\":\"6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\",\n            \"raw_data\":{\n                \"contract\":[\n                    {\n                        \"parameter\":{\n                            \"value\":{\n                                \"amount\":10,\n                                \"owner_address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                                \"to_address\":\"TXBpeye7UQ4dDZEnmGDv4vX37mBYDo1tUE\"\n                            },\n                            \"type_url\":\"type.googleapis.com/protocol.TransferContract\"\n                        },\n                        \"type\":\"TransferContract\"\n                    }\n                ],\n                \"ref_block_bytes\":\"41aa\",\n                \"ref_block_hash\":\"b2d2c13c86e8bd88\",\n                \"expiration\":1656434882649,\n                \"timestamp\":1656413188328\n            },\n            \"raw_data_hex\":\"0a0241aa2208b2d2c13c86e8bd8840d9f0d9d99a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a30\"\n        }\n    }\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#on-chaininquire","title":"On-ChainInquire","text":"<p>Here are all the on-chain inquire commands \uff1a</p> <ul> <li>GetNextMaintenanceTime</li> <li>ListNodes</li> <li>GetBlock</li> <li>GetBlockbyID</li> <li>GetBlockbyLatestNum</li> <li>GetBlockbyLimitNext</li> <li>GetTransactionbyID</li> <li>GetTransactionCountbyBlockNum</li> <li>GetTransactionInfobyID</li> <li>GetTransactionInfobyBlockNum</li> <li>GetTransactionSignWeight</li> </ul>"},{"location":"clients/wallet-cli/#getnextmaintenancetime","title":"GetNextMaintenanceTime","text":"<p>Get the start time of the next maintain period <pre><code>wallet&gt; GetNextMaintenanceTime\nNext maintenance time is : 2022-06-29 16:40:00\n</code></pre></p>"},{"location":"clients/wallet-cli/#listnodes","title":"ListNodes","text":"<p>Get other peers' information <pre><code>wallet&gt; listnodes\nIP::1.23.456.789\nPort::12345\nIP::2.345.67.89\nPort::12345\nIP::345.678.901.234\nPort::12345\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#getblock","title":"GetBlock","text":"<p>Get the block by block height; if you do not pass the parameter, get the latest block <pre><code>wallet&gt; getblock\nGet current block !!!\n{\n    \"block_header\":{\n        \"raw_data\":{\n            \"number\":27774469,\n            \"txTrieRoot\":\"0000000000000000000000000000000000000000000000000000000000000000\",\n            \"witness_address\":\"TQuzjxWcqHSh1xDUw4wmMFmCcLjz4wSCBp\",\n            \"parentHash\":\"0000000001a7ce048eb88d7c3c5e9c5f8e93a6cc568f47140e243d00d0f9280a\",\n            \"version\":24,\n            \"timestamp\":1656919215000\n        },\n        \"witness_signature\":\"3af25276891b1cf7f9f72e63ad956b50e5819fb3fa6f0b6393ed092e53a90a5438620b92b5d499e0068c6775b723e3c90677157b3e9f7b8933d1e863716145f500\"\n    }\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getblockbyid","title":"GetBlockbyID","text":"<p>Get block based on blockID\uff08block hash\uff09 <pre><code>wallet&gt; getblockbyid [blockID]\n</code></pre> <pre><code>wallet&gt; getblockbyid 0000000001a7cd54ee2b302cfd443cccec78e55a31902d2e7ea47e737c1a5ede\n{\n    \"block_header\":{\n        \"raw_data\":{\n            \"number\":27774292,\n            \"txTrieRoot\":\"a60f8cb160d06d5279cb463925274e18fec37f0414c4d8fdc4fb2299ccb0a8bf\",\n            \"witness_address\":\"TGsdxpHNJaxsVNFFdb4R6Rib1TsKGon2Wp\",\n            \"parentHash\":\"0000000001a7cd53685867286b17fa0f2389e1d3026bea0a0019c5fc37f873cb\",\n            \"version\":24,\n            \"timestamp\":1656918678000\n        },\n        \"witness_signature\":\"a93db1a8d989c6637d587369de2872a008f14d1df8f0aaeda8a54c324a44c269367ea31daf623834fd6a4ef3f6150ab8d370adff1df6c0e8c96af9cf34408d5600\"\n    },\n    \u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#getblockbylatestnum","title":"GetBlockByLatestNum","text":"<p>Get the latest n blocks, where 0 &lt; n &lt; 100 <pre><code>wallet&gt; getblockbylatestnum [n]\n</code></pre></p>"},{"location":"clients/wallet-cli/#getblockbylimitnext","title":"GetBlockByLimitNext","text":"<p>Get the block in a set range by block height. <code>startBlock</code>is the starting block height, <code>endBlock</code>is the ending block height. <pre><code>wallet&gt; GetBlockByLimitNext [startBlock, endBlock]\n</code></pre> <pre><code>wallet&gt; getblockbylimitnext 27774670 27774674\n[\n    {\n        \"block_header\":{\n            \"raw_data\":{\n                \"number\":27774670,\n                \"txTrieRoot\":\"0eb9ba48deda22fafa613c0aefa6d3e0b21261ad82a126ce99a6b80e8b68045c\",\n                \"witness_address\":\"TVKfvNUMcZdZbxhPLb2CkQ4nyUUhvwhv1b\",\n                \"parentHash\":\"0000000001a7cecd7a2cdc58fdfd2edbfeaeb530958879bf1a299cc30043cd0b\",\n                \"version\":24,\n                \"timestamp\":1656919824000\n            },\n            \"witness_signature\":\"ee6653289e24edd24d70f4975e12934573d6e798a2a5c5e26e0b13bc6d25138c49a0f55fb0e9a5c503622b5877811403577a5e278528293d05c5f0b9d5d5542401\"\n        },\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactionbyid","title":"GetTransactionbyID","text":"<p>Get transaction information based on transaction id (hash) <pre><code>wallet&gt; GetTransactionById [transactionID]\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactioncountbyblocknum","title":"GetTransactionCountbyBlockNum","text":"<p>Get how many transactions contains in a block based on block height, see below <pre><code>wallet&gt; gettransactioncountbyblocknum 27633562\nThe block contains 4 transactions\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactioninfobyid","title":"GetTransactionInfobyID","text":"<p>Get transaction-info based on transaction id, generally used to check the result of a smart contract trigger <pre><code>wallet&gt; gettransactioninfobyid 6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\n{\n    \"id\": \"6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\",\n    \"blockNumber\": 27609041,\n    \"blockTimeStamp\": 1656417906000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"receipt\": {\n        \"net_usage\": 265\n    }\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactioninfobyblocknum","title":"GetTransactionInfobyBlockNum","text":"<p>Get the list of transaction information in the block based on the block height <pre><code>wallet&gt; gettransactioninfobyblocknum [blockNum]\n</code></pre></p>"},{"location":"clients/wallet-cli/#gettransactionsignweight","title":"GetTransactionSignWeight","text":"<p>Get the sign weight by transaction hex string. <pre><code>&gt;getTransactionSignWeight \n0a83010a0241aa2208b2d2c13c86e8bd8840d9f0d9d99a305a65080112610a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412300a1541babecec4d9f58f0df77f0728b9c53abb1f21d684121541e8bd653015895947cec33d1670a88cf67ab277b9180a70e8e1adcf9a301241dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\n</code></pre> The information displays as follows:</p> <pre><code>{\n    \"result\":{\n\n    },\n    \"approved_list\":[\n        \"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\"\n    ],\n    \"permission\":{\n        \"keys\":[\n            {\n                \"address\":\"TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\",\n                \"weight\":1\n            }\n        ],\n        \"threshold\":1,\n        \"permission_name\":\"owner\"\n    },\n    \"current_weight\":1,\n    \"transaction\":{\n        \"result\":{\n            \"result\":true\n        },\n        \"txid\":\"6e1d2460796f717b701e355734ac0e4e8b32e14c24ce569a60ad3f63afe46c87\",\n        \"transaction\":{\n            \"signature\":[\n                \"dbfe007bb44e8db164f4c0cf9b586a8d6a65f0612c4d9ec5350adeae6cd97c7874e7254bbf4156b545a90c34e48c8f28bdb5c8f9258514233b9201b2844d7f9201\"\n            ],\n            \u00b7\u00b7\u00b7\n        }\n    }\n}\n</code></pre>"},{"location":"clients/wallet-cli/#smartcontract","title":"SmartContract","text":"<p>Below, please find all the commands for smart contract interactions:</p> <ul> <li>DeployContract</li> <li>TriggerContract</li> <li>TriggerConstantContract</li> <li>EstimateEnergy</li> <li>GetContract</li> <li>UpdateEnergyLimit</li> <li>UpdateSetting</li> </ul>"},{"location":"clients/wallet-cli/#deploycontract","title":"DeployContract","text":"<pre><code>wallet&gt; DeployContract [ownerAddress] [contractName] [ABI] [byteCode] [constructor] [params] [isHex] [fee_limit] [consume_user_resource_percent] [origin_energy_limit] [value] [token_value] [token_id](e.g: TRXTOKEN, use # if don't provided) &lt;library:address,library:address,...&gt; &lt;lib_compiler_version(e.g:v5)&gt; library:address,...&gt;\n</code></pre> <ul> <li><code>OwnerAddress</code>is the address of the account that initiated the transaction, optional, considered as the address of the login account by default.</li> <li><code>contractName</code> is the name of smart contract.</li> <li><code>ABI</code> is ABI code generated when compiling.</li> <li><code>byteCode</code> is byte code generated when compiling.</li> <li><code>constructor</code>, <code>params</code>, <code>isHex</code> These three parameters define the format of the bytecode, which determines the way to parse byteCode from parameters.</li> <li><code>fee_limit</code> determines the limit of consumed TRX for each transaction.</li> <li><code>consume_user_resource_percent</code> is the percentage of user consumed resource, in the range between [0, 100%].</li> <li><code>origin_energy_limit</code> is the most amount of developer energy consumed by triggering the contract once.</li> <li><code>value</code> is the amount of trx transferred to the contract account.</li> <li><code>token_value</code> is the number of TRC-10 token.</li> <li><code>token_id</code> is TRC-10 Id.</li> </ul> <p>Example: <pre><code>wallet&gt; deployContract normalcontract544 [{\"constant\":false,\"inputs\":[{\"name\":\"i\",\"type\":\"uint256\"}],\"name\": \"findArgsByIndexTest\",\"outputs\":[{\"name\":\"z\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]\n608060405234801561001057600080fd5b50610134806100206000396000f3006080604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663329000b58114610045575b600080fd5b34801561005157600080fd5b5061005d60043561006f565b60408051918252519081900360200190f35b604080516003808252608082019092526000916060919060208201838038833901905050905060018160008151811015156100a657fe5b602090810290910101528051600290829060019081106100c257fe5b602090810290910101528051600390829060029081106100de57fe5b6020908102909101015280518190849081106100f657fe5b906020019060200201519150509190505600a165627a7a72305820b24fc247fdaf3644b3c4c94fcee380aa610ed83415061ff9e65d7fa94a5a50a00029 # # false 1000000000 75 50000 0 0 #\n</code></pre> Get the result of the contract execution with the getTransactionInfoById command: <pre><code>wallet&gt; getTransactionInfoById 4978dc64ff746ca208e51780cce93237ee444f598b24d5e9ce0da885fb3a3eb9\n{\n    \"id\": \"8c1f57a5e53b15bb0a0a0a0d4740eda9c31fbdb6a63bc429ec2113a92e8ff361\",\n    \"fee\": 6170500,\n    \"blockNumber\": 1867,\n    \"blockTimeStamp\": 1567499757000,\n    \"contractResult\": [\n        \"6080604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663329000b58114610045575b600080fd5b34801561005157600080fd5b5061005d60043561006f565b60408051918252519081900360200190f35b604080516003808252608082019092526000916060919060208201838038833901905050905060018160008151811015156100a657fe5b602090810290910101528051600290829060019081106100c257fe5b602090810290910101528051600390829060029081106100de57fe5b6020908102909101015280518190849081106100f657fe5b906020019060200201519150509190505600a165627a7a72305820b24fc247fdaf3644b3c4c94fcee380aa610ed83415061ff9e65d7fa94a5a50a00029\"\n    ],\n    \"contract_address\": \"TJMKWmC6mwF1QVax8Sy2AcgT6MqaXmHEds\",\n    \"receipt\": {\n        \"energy_fee\": 6170500,\n        \"energy_usage_total\": 61705,\n        \"net_usage\": 704,\n        \"result\": \"SUCCESS\"\n    }\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#triggercontract","title":"TriggerContract","text":"<p>The command is used to trigger smart contract that deployed. <pre><code>wallet&gt; TriggerContract [ownerAddress] [contractAddress] [method] [args] [isHex] [fee_limit] [value] [token_value] [token_id]\n</code></pre></p> <ul> <li><code>OwnerAddress</code>The address of the account that initiated the transaction, optional, default value is the address of the login account.</li> <li><code>ContractAddress</code> is the smart contract address.</li> <li><code>method</code> is the name of the function and parameters, please refer to the example below.</li> <li><code>args</code> is a parameter for placeholding, pass '#' instead when <code>method</code> does not need extra parameters.</li> <li><code>isHex</code> controls the format of the parameters method and args, whether they are in hex string or not.</li> <li><code>fee_limit</code> is the most amount of trx allows for consumption.</li> <li><code>token_value</code> indicate the number of TRC-10 token.</li> <li><code>token_id</code> the TRC-10 token id, If not, use \u2018#\u2019 instead.</li> </ul> <p>Here is an example: <pre><code>wallet&gt; triggerContract TGdtALTPZ1FWQcc5MW7aK3o1ASaookkJxG findArgsByIndexTest(uint256) 0 false\n1000000000 0 0 #\n</code></pre> Get the result of the contract execution with the getTransactionInfoById command, <pre><code>wallet&gt; getTransactionInfoById 7d9c4e765ea53cf6749d8a89ac07d577141b93f83adc4015f0b266d8f5c2dec4\n{\n    \"id\": \"de289f255aa2cdda95fbd430caf8fde3f9c989c544c4917cf1285a088115d0e8\",\n    \"fee\": 8500,\n    \"blockNumber\": 2076,\n    \"blockTimeStamp\": 1567500396000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"contract_address\": \"TJMKWmC6mwF1QVax8Sy2AcgT6MqaXmHEds\",\n    \"receipt\": {\n        \"energy_fee\": 8500,\n        \"energy_usage_total\": 85,\n        \"net_usage\": 314,\n        \"result\": \"REVERT\"\n    },\n    \"result\": \"FAILED\",\n    \"resMessage\": \"REVERT opcode executed\"\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#triggerconstantcontract","title":"TriggerConstantContract","text":"<p>Invoke the readonly function (modified by the view or pure modifier) of a contract for contract data query; or Invoke the non-readonly function of a contract for predicting whether the transaction can be successfully executed or estimating the energy consumption.</p> <pre><code>wallet&gt; TriggerConstantContract ownerAddress(use # if you own) contractAddress method args isHex [value token_value token_id(e.g: TRXTOKEN, use # if don't provided)]\n</code></pre> <ul> <li><code>ownerAddress</code> Owner address that triggers the contract. If it is the login account, please input #.</li> <li><code>contractAddress</code> Smart contract address.</li> <li><code>method</code> Function call.</li> <li><code>args</code> Parameters, if there is no parameter of <code>method</code>, please input #. </li> <li><code>isHex</code> <code>args</code>is hex string or not\u3002</li> <li><code>value</code> TRX amount to be transferred. Optional, if no value, # can be inplaced.</li> <li><code>token_value</code> TRC-10 token amount to be transferred. Optional, if no value, # can be inplaced.</li> <li><code>token_id</code> TRC-10 token id to be transferred. Optional, if no value, # can be inplaced.</li> </ul> <p>Example: <pre><code>wallet&gt; TriggerConstantContract TTGhREx2pDSxFX555NWz1YwGpiBVPvQA7e  TVSvjZdyDSNocHm7dP3jvCmMNsCnMTPa5W transfer(address,uint256) 0000000000000000000000002ce5de57373427f799cc0a3dd03b841322514a8c00000000000000000000000000000000000000000000000000038d7ea4c68000 true\n\ntransfer(address,uint256):a9059cbb\nExecution result = {\n    \"constant_result\": [\n        \"0000000000000000000000000000000000000000000000000000000000000001\"\n    ],\n    \"result\": {\n        \"result\": true\n    },\n    \"energy_used\": 13253,\n    \"logs\": [\n        {\n            \"address\": \"LUijWGF4iFrT7hV37Q2Q45DU5TUBvVZb7\",\n            \"topics\": [\n                \"ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef\",\n                \"000000000000000000000000bdc8ee51fdd1b1e01d71f836481828f88463c838\",\n                \"0000000000000000000000002ce5de57373427f799cc0a3dd03b841322514a8c\"\n            ],\n            \"data\": \"00000000000000000000000000000000000000000000000000038d7ea4c68000\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#estimateenergy","title":"EstimateEnergy","text":"<p>Estimate the energy required for the successful execution of smart contract transactions. But for FullNode, enabling the wallet/estimateEnergy API is optional. So please pay attention that when developers call wallet/estimateEnergy, if the error message shows that the node does not support this function when calling the new API (this node does not support estimate energy), it is recommended to continue using the wallet/triggerconstantcontract API to estimate energy consumption.</p> <pre><code>wallet&gt; EstimateEnergy ownerAddress contractAddress method args isHex [value token_value token_id]\n</code></pre> <ul> <li><code>ownerAddress</code> Owner address that triggers the contract. If it is the login account, please input #.</li> <li><code>contractAddress</code> Smart contract address.</li> <li><code>method</code> Function call.</li> <li><code>args</code> Parameters, if there is no parameter of <code>method</code>, please input #. </li> <li><code>isHex</code> <code>args</code>is hex string or not\u3002</li> <li><code>value</code> TRX amount to be transferred. Optional, if no value, # can be inplaced.</li> <li><code>token_value</code> TRC-10 token amount to be transferred. Optional, if no value, # can be inplaced.</li> <li><code>token_id</code> TRC-10 token id to be transferred. Optional, if no value, # can be inplaced.</li> </ul> <p>Example:</p> <pre><code>wallet&gt; EstimateEnergy TTGhREx2pDSxFX555NWz1YwGpiBVPvQA7e  TVSvjZdyDSNocHm7dP3jvCmMNsCnMTPa5W transfer(address,uint256) 0000000000000000000000002ce5de57373427f799cc0a3dd03b841322514a8c00000000000000000000000000000000000000000000000000038d7ea4c68000 true\n\ntransfer(address,uint256):a9059cbb\nEstimate energy result = {\n    \"result\": {\n        \"result\": true\n    },\n    \"energy_required\": 14910\n}\n</code></pre>"},{"location":"clients/wallet-cli/#getcontract","title":"GetContract","text":"<p>Get the smart contract info by its address. <pre><code>wallet&gt; GetContract [contractAddress]\n</code></pre></p> <p>Example: <pre><code>wallet&gt; GetContract TGdtALTPZ1FWQcc5MW7aK3o1ASaookkJxG\n{\n    \"origin_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n    \"contract_address\": \"TJMKWmC6mwF1QVax8Sy2AcgT6MqaXmHEds\",\n    \"abi\": {\n        \"entrys\": [\n            {\n                \"name\": \"findArgsByIndexTest\",\n                \"inputs\": [\n                    {\n                        \"name\": \"i\",\n                        \"type\": \"uint256\"\n                    }\n                ],\n                \"outputs\": [\n                    {\n                        \"name\": \"z\",\n                        \"type\": \"uint256\"\n                    }\n                ],\n                \"type\": \"Function\",\n                \"stateMutability\": \"Nonpayable\"\n            }\n        ]\n    },\n    \"bytecode\": \"608060405234801561001057600080fd5b50610134806100206000396000f3006080604052600436106100405763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663329000b58114610045575b600080fd5b34801561005157600080fd5b5061005d60043561006f565b60408051918252519081900360200190f35b604080516003808252608082019092526000916060919060208201838038833901905050905060018160008151811015156100a657fe5b602090810290910101528051600290829060019081106100c257fe5b602090810290910101528051600390829060029081106100de57fe5b6020908102909101015280518190849081106100f657fe5b906020019060200201519150509190505600a165627a7a72305820b24fc247fdaf3644b3c4c94fcee380aa610ed83415061ff9e65d7fa94a5a50a00029\",\n    \"consume_user_resource_percent\": 75,\n    \"name\": \"normalcontract544\",\n    \"origin_energy_limit\": 50000,\n    \"code_hash\": \"23423cece3b4866263c15357b358e5ac261c218693b862bcdb90fa792d5714e6\"\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#updateenergylimit","title":"UpdateEnergyLimit","text":"<p>Update parameter energy limit\uff0cparameter are the same as above. <pre><code>wallet&gt; UpdateEnergyLimit [ownerAddress] [contract_address] [energy_limit]\n</code></pre></p>"},{"location":"clients/wallet-cli/#updatesetting","title":"UpdateSetting","text":"<p>Update parameter of energy consume percentage per user <pre><code>wallet&gt; UpdateSetting [ownerAddress] contract_address consume_user_resource_percent\n</code></pre></p>"},{"location":"clients/wallet-cli/#trc-10","title":"TRC-10","text":"<p>Below, please find all the commands for TRC-10:</p> <ul> <li>AssetIssue</li> <li>UpdateAsset</li> <li>TransferAsset</li> <li>ParticipateAssetissue</li> <li>UnfreezeAsset</li> <li>ListAssetIssue</li> <li>GetAssetIssuebyAccount</li> <li>GetAssetIssuebyID</li> <li>GetAssetIssuebyName</li> <li>GetAssetIssueListbyName</li> </ul>"},{"location":"clients/wallet-cli/#assetissue","title":"AssetIssue","text":"<p>Each account is allowed to issue only ONE TRC-10 token.</p> <p><pre><code>wallet&gt; AssetIssue [OwnerAddress] [AssetName] [AbbrName] [TotalSupply] [TrxNum] [AssetNum] [Precision] [StartDate] [EndDate] [Description Url] [FreeNetLimitPerAccount] [PublicFreeNetLimit] [FrozenAmount0] [FrozenDays0] [...] [FrozenAmountN] [FrozenDaysN]\n</code></pre> <code>OwnerAddress</code> (optional) is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>AssetName</code> is the name of the issued TRC-10 token.</p> <p><code>AbbrName</code> is the abbreviation of TRC-10 token you want to issue.</p> <p><code>TotalSupply</code> is total issuing amount of TRC-10 token.</p> <ul> <li>TotalSupply = Account Balance of Issuer + All Frozen Token Amount </li> <li>Account Balance Of Issuer: balance at the time of issuance</li> <li>All Frozen Token Amount: Before asset transfer and the issuance</li> </ul> <p><code>TrxNum</code>, <code>AssetNum</code> are two parameters determine the exchange rate when the token is issued. </p> <ul> <li>Exchange Rate = TrxNum / AssetNum </li> <li><code>AssetNum</code>: Unit in the base unit of the issued token </li> <li><code>TrxNum</code>: Unit in SUN (0.000001 TRX)</li> </ul> <p><code>Precision</code> indicates how many decimal places there is.</p> <p><code>FreeNetLimitPerAccount</code> determines the maximum amount of bandwidth each account is allowed to use. Token issuers can freeze TRX to obtain bandwidth (TransferAssetContract only)</p> <p><code>PublicFreeNetLimit</code> is the maximum total amount of bandwidth which is allowed to use for all accounts. Token issuers can freeze TRX to obtain bandwidth (TransferAssetContract only)</p> <p><code>StartDate</code>, <code>EndDate</code> is the start and end date of token issuance. Within this period time, other users can participate in token issuance.</p> <p><code>FrozenAmount0</code>, <code>FrozenDays0</code> determines the amount and days of token freeze. <code>FrozenAmount0</code>: Must be bigger than 0. <code>FrozenDays0</code>: Must between 1 and 3652.</p> <p>Example: <pre><code>wallet&gt; AssetIssue TestTRX TRX 75000000000000000 1 1 2 \"2019-10-02 15:10:00\" \"2020-07-11\" \"just for test121212\" www.test.com 100 100000 10000 10 10000 1\nwallet&gt; GetAssetIssueByAccount TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ  # View published information\n{\n    \"assetIssue\": [\n        {\n            \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n            \"name\": \"TestTRX\",\n            \"abbr\": \"TRX\",\n            \"total_supply\": 75000000000000000,\n            \"frozen_supply\": [\n                {\n                    \"frozen_amount\": 10000,\n                    \"frozen_days\": 1\n                },\n                {\n                    \"frozen_amount\": 10000,\n                    \"frozen_days\": 10\n                }\n            ],\n            \"trx_num\": 1,\n            \"precision\": 2,\n            \"num\": 1,\n            \"start_time\": 1570000200000,\n            \"end_time\": 1594396800000,\n            \"description\": \"just for test121212\",\n            \"url\": \"www.test.com\",\n            \"free_asset_net_limit\": 100,\n            \"public_free_asset_net_limit\": 100000,\n            \"id\": \"1000001\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#updateasset","title":"UpdateAsset","text":"<p><pre><code>wallet&gt; UpdateAsset [OwnerAddress] [newLimit] [newPublicLimit] [description url]\n</code></pre> Specific meaning of the parameters are the same as they are in AssetIssue.</p> <p>Example: <pre><code>wallet&gt; UpdateAsset 1000 1000000 \"change description\" www.changetest.com\nwallet&gt; GetAssetIssueByAccount TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ  # to check the modified information\n{\n    \"assetIssue\": [\n        {\n            \"owner_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n            \"name\": \"TestTRX\",\n            \"abbr\": \"TRX\",\n            \"total_supply\": 75000000000000000,\n            \"frozen_supply\": [\n                {\n                    \"frozen_amount\": 10000,\n                    \"frozen_days\": 1\n                },\n                {\n                    \"frozen_amount\": 10000,\n                    \"frozen_days\": 10\n                }\n            ],\n            \"trx_num\": 1,\n            \"precision\": 2,\n            \"num\": 1,\n            \"start_time\": 1570000200000,\n            \"end_time\": 1594396800000,\n            \"description\": \"change description\",\n            \"url\": \"www.changetest.com\",\n            \"free_asset_net_limit\": 1000,\n            \"public_free_asset_net_limit\": 1000000,\n            \"id\": \"1000001\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#transferasset","title":"TransferAsset","text":"<p><pre><code>&gt; TransferAsset [OwnerAddress] [ToAddress] [AssertID] [Amount]\n</code></pre> <code>OwnerAddress</code> (optional) is the address of the account which initiated the transaction. By default, the address of the login account.</p> <p><code>ToAddress</code> is the address of the target account.</p> <p><code>AssertName</code> is the TRC-10 token ID. Example: 1000001</p> <p><code>Amount</code> is the number of TRC10 token to transfer with.</p> <p>Example: <pre><code>wallet&gt; TransferAsset TN3zfjYUmMFK3ZsHSsrdJoNRtGkQmZLBLz 1000001 1000\nwallet&gt; getaccount TN3zfjYUmMFK3ZsHSsrdJoNRtGkQmZLBLz  # to check target account information after the transfer\naddress: TN3zfjYUmMFK3ZsHSsrdJoNRtGkQmZLBLz\n    assetV2\n    {\n    id: 1000001\n    balance: 1000\n    latest_asset_operation_timeV2: null\n    free_asset_net_usageV2: 0\n    }\n</code></pre></p>"},{"location":"clients/wallet-cli/#participateassetissue","title":"ParticipateAssetissue","text":"<p><pre><code>&gt; ParticipateAssetIssue [OwnerAddress] [ToAddress] [AssetID] [Amount]\n</code></pre> <code>OwnerAddress</code> (optional) is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>ToAddress</code> is the account address of TRC10 issuers.</p> <p><code>AssertName</code> is the TRC-10 token ID. Example: 1000001</p> <p><code>Amount</code> is the number of TRC10 token to transfers with.</p> <p>The participation process must happen during the release of TRC10, otherwise an error may occur.</p> <p>Example: <pre><code>wallet&gt; ParticipateAssetIssue TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ 1000001 1000\nwallet&gt; getaccount TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW  # View remaining balance\naddress: TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\nassetV2\n    {\n    id: 1000001\n    balance: 1000\n    latest_asset_operation_timeV2: null\n    free_asset_net_usageV2: 0\n    }\n</code></pre></p>"},{"location":"clients/wallet-cli/#unfreezeasset","title":"UnfreezeAsset","text":"<p>To unfreeze all TRC10 token which are supposed to be unfrozen after the freezing period. <pre><code>wallet&gt; unfreezeasset [OwnerAddress]\n</code></pre></p>"},{"location":"clients/wallet-cli/#listassetissue","title":"ListAssetIssue","text":"<p>Obtain all of the published TRC10 token information. <pre><code>wallet&gt; listassetissue\n{\n    \"assetIssue\": [\n        {\n            \"owner_address\": \"TMWXhuxiT1KczhBxCseCDDsrhmpYGUcoA9\",\n            \"name\": \"tronlink_token\",\n            \"abbr\": \"tronlink_token\",\n            \"total_supply\": 1000000000000000,\n            \"frozen_supply\": [\n                {\n                    \"frozen_amount\": 1,\n                    \"frozen_days\": 1\n                }\n            ],\n            \"trx_num\": 1,\n            \"precision\": 6,\n            \"num\": 1,\n            \"start_time\": 1574757000000,\n            \"end_time\": 1757595000000,\n            \"description\": \"Description\",\n            \"url\": \"https://blog.csdn.net/u010270891/article/details/82978260\",\n            \"free_asset_net_limit\": 1000,\n            \"public_free_asset_net_limit\": 2000,\n            \"id\": \"1000001\"\n        },\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#getassetissuebyaccount","title":"GetAssetIssuebyAccount","text":"<p>Obtain TRC10 token information based on owner address. <pre><code>wallet&gt; getassetissuebyaccount [owneraddress]\n</code></pre> <pre><code>wallet&gt; getassetissuebyaccount TUwjpfqW7NG6BF3GCTrKy1aDvfchwSG4tN\n{\n    \"assetIssue\": [\n        {\n            \"owner_address\": \"TUwjpfqW7NG6BF3GCTrKy1aDvfchwSG4tN\",\n            \"name\": \"h00966\",\n            \"abbr\": \"h00966\",\n            \"total_supply\": 100000000000,\n            \"trx_num\": 1000000,\n            \"precision\": 6,\n            \"num\": 1000000,\n            \"start_time\": 1656374400000,\n            \"end_time\": 1656460800000,\n            \"description\": \"Automated gaming platform. \nTRC10 token h0966.\nMore info on website.  TRC10 token h0966.\nMore info on website.  More info on website.\",\n            \"url\": \"https://h00966.com\",\n            \"id\": \"1004901\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getassetissuebyid","title":"GetAssetIssuebyID","text":"<p>Obtain TRC10 token Information based on token ID. <pre><code>wallet&gt; GetAssetIssueById 1004901\n{\n    \"owner_address\": \"TUwjpfqW7NG6BF3GCTrKy1aDvfchwSG4tN\",\n    \"name\": \"h00966\",\n    \"abbr\": \"h00966\",\n    \"total_supply\": 100000000000,\n    \"trx_num\": 1000000,\n    \"precision\": 6,\n    \"num\": 1000000,\n    \"start_time\": 1656374400000,\n    \"end_time\": 1656460800000,\n    \"description\": \"Automated gaming platform. \nTRC10 token h0966.\nMore info on website.TRC10 token h0966.\nMore info on website.More info on website.\",\n    \"url\": \"https://h00966.com\",\n    \"id\": \"1004901\"\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getassetissuebyname","title":"GetAssetIssuebyName","text":"<p>Obtain TRC10 token Information based on token names. <pre><code>wallet&gt; GetAssetIssueByname h00966\n{\n    \"owner_address\": \"TUwjpfqW7NG6BF3GCTrKy1aDvfchwSG4tN\",\n    \"name\": \"h00966\",\n    \"abbr\": \"h00966\",\n    \"total_supply\": 100000000000,\n    \"trx_num\": 1000000,\n    \"precision\": 6,\n    \"num\": 1000000,\n    \"start_time\": 1656374400000,\n    \"end_time\": 1656460800000,\n    \"description\": \"Automated gaming platform. \nTRC10 token h0966.\nMore info on website.TRC10 token h0966.\nMore info on website.More info on website.\",\n    \"url\": \"https://h00966.com\",\n    \"id\": \"1004901\"\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getassetissuelistbyname","title":"GetAssetIssueListbyName","text":"<p>Obtain a list of TRC10 token information based on names. <pre><code>wallet&gt; GetAssetIssueListByName ROFLOTOKEN\n{\n    \"assetIssue\": [\n        {\n            \"owner_address\": \"TLvQSVH9Hm7kxLFtTP228fN6pCrHmtVjpb\",\n            \"name\": \"ROFLOTOKEN\",\n            \"abbr\": \"roflotoken\",\n            \"total_supply\": 10000000000000000,\n            \"trx_num\": 1000000,\n            \"precision\": 6,\n            \"num\": 100000000,\n            \"start_time\": 1656349200000,\n            \"end_time\": 1656435600000,\n            \"description\": \"roflotoken.com\",\n            \"url\": \"https://haxibaibo.com/\",\n            \"id\": \"1004898\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#governance","title":"Governance","text":"<p>Any proposal-related operations, except for viewing operations, must be performed by committee members. Please find all the commands for Governance:</p> <ul> <li>CreateProposal</li> <li>ApproveProposal</li> <li>DeleteProposal</li> <li>ListProposals</li> <li>ListProposalsPaginated</li> <li>GetProposal</li> <li>VoteWitness</li> <li>ListWitnesses</li> <li>GetBrokerage</li> <li>GetReward</li> <li>UpdateBrokerage</li> </ul>"},{"location":"clients/wallet-cli/#creatproposal","title":"CreatProposal","text":"<p>Initiate a proposal with createProposal. <pre><code>wallet&gt; createProposal [OwnerAddress] [id0] [value0] ... [idN] [valueN]\n</code></pre> <code>OwnerAddress</code> (optional) is the address of the account which initiated the transaction. By default, it is the address of the login account.</p> <p><code>id0</code> is the serial number of TRON Network Parameter. Of which, each one has a serial number corresponded. Please refer to http://tronscan.org/#/sr/committee.</p> <p><code>Value0</code> is the modified value.</p> <p>In the example, modification No.4 (modifying token issuance fee) costs 1000TRX as follows: <pre><code>wallet&gt; createProposal 4 1000\nwallet&gt; listproposals  # to check initiated proposal\n{\n    \"proposals\": [\n        {\n            \"proposal_id\": 1,\n            \"proposer_address\": \"TRGhNNfnmgLegT4zHNjEqDSADjgmnHvubJ\",\n            \"parameters\": [\n                {\n                    \"key\": 4,\n                    \"value\": 1000\n                }\n            ],\n            \"expiration_time\": 1567498800000,\n            \"create_time\": 1567498308000\n        }\n    ]\n}\n</code></pre> The corresponding id is 1.</p>"},{"location":"clients/wallet-cli/#approveproposal","title":"ApproveProposal","text":"<p>Approve or disapprove a proposal using approveProposal. <pre><code>wallet&gt; approveProposal [OwnerAddress] [id] [is_or_not_add_approval]\n</code></pre> <code>OwnerAddress</code> (optional) is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>id</code> is the ID of the initiated proposal. Example: 1.</p> <p><code>is_or_not_add_approval</code> is true for approve; is false for disapprove.</p> <p>Example: <pre><code>wallet&gt; ApproveProposal 1 true  # in favor of the offer\nwallet&gt; ApproveProposal 1 false  # Cancel the approved proposal\n</code></pre></p>"},{"location":"clients/wallet-cli/#deleteproposal","title":"DeleteProposal","text":"<p><pre><code>wallet&gt; deleteProposal [OwnerAddress] [proposalId]\n</code></pre> <code>proposalId</code> is the ID of the initiated proposal. Example: 1.</p> <p>The proposal must be canceled by the supernode that initiated the proposal.</p> <p>Example\uff1a <pre><code>wallet&gt; DeleteProposal 1\n</code></pre></p>"},{"location":"clients/wallet-cli/#listproposals","title":"ListProposals","text":"<p>Obtain a list of initiated proposals <pre><code>wallet&gt; listproposals\n{\n    \"proposals\": [\n        {\n            \"proposal_id\": 12732,\n            \"proposer_address\": \"TQ4eBJna51sew13DBLd7YjEHHHW7fkNzc2\",\n            \"parameters\": [\n                {\n                    \"key\": 65,\n                    \"value\": 1\n                },\n                {\n                    \"key\": 66,\n                    \"value\": 1\n                },\n                {\n                    \"key\": 62,\n                    \"value\": 432000000\n                }\n            ],\n            \"expiration_time\": 1656491400000,\n            \"create_time\": 1656490794000,\n            \"approvals\": [\n                \"TQ4eBJna51sew13DBLd7YjEHHHW7fkNzc2\"\n            ],\n            \"state\": \"DISAPPROVED\"\n        },\n        {\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#listproposalspaginated","title":"ListProposalsPaginated","text":"<p>Use the paging mode to obtain the initiated proposal.  <pre><code>wallet&gt; ListProposalsPaginated [offset] [limit] \n</code></pre> <code>offset</code> is the number of proposals you want to skip. <code>limit</code> is the number of proposals you want to be listed. By default, all proposals would be listed from <code>proposal_id</code> 1 to date. The parameter in the example below means you want to skip the first 33 proposals and list the 2 proposals right after that. <pre><code>wallet&gt; listproposalspaginated 33 2\n{\n    \"proposals\": [\n        {\n            \"proposal_id\": 34,\n            \"proposer_address\": \"TEDguVMSsFw3HSizQXFK1BsrGWeuRMNN7t\",\n            \"parameters\": [\n                {\n                    \"key\": 1,\n                    \"value\": 9997000000\n                }\n            ],\n            \"expiration_time\": 1582381200000,\n            \"create_time\": 1582380477000,\n            \"state\": \"DISAPPROVED\"\n        },\n        {\n            \"proposal_id\": 35,\n            \"proposer_address\": \"TDkSQtBhZx7Ua8qvenM4zuH52u2BsYTwzc\",\n            \"parameters\": [\n                {\n                    \"key\": 1,\n                    \"value\": 9997000000\n                }\n            ],\n            \"expiration_time\": 1582381200000,\n            \"create_time\": 1582380498000,\n            \"state\": \"DISAPPROVED\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getproposal","title":"GetProposal","text":"<p>Obtain proposal information based on the proposal ID. <pre><code>wallet&gt; getproposal 34\n{\n    \"proposal_id\": 34,\n    \"proposer_address\": \"TEDguVMSsFw3HSizQXFK1BsrGWeuRMNN7t\",\n    \"parameters\": [\n        {\n            \"key\": 1,\n            \"value\": 9997000000\n        }\n    ],\n    \"expiration_time\": 1582381200000,\n    \"create_time\": 1582380477000,\n    \"state\": \"DISAPPROVED\"\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#votewitness","title":"VoteWitness","text":"<p>Voting requires TRON Power, which can be obtained by freezing funds. <pre><code>wallet&gt; votewitness [SR(Super Representatives) address] [TRON Power Amount]\n</code></pre></p> <ul> <li>The share calculation method is: 1 unit of share can be obtained for every 1TRX frozen.</li> <li>After unfreezing, previous vote will expire. You can avoid the invalidation of the vote by re-freezing and voting.</li> </ul> <p>NOTE The TRON Network only records the status of your last vote, which means that each of your votes will overwrite all previous voting results.</p> <p>For example: <pre><code>wallet&gt; freezeBalance 100000000 3 1 address  # Freeze 10TRX and acquire 10 units of TRON Power\n\nwallet&gt; votewitness [SR1] 4 [SR2] 6  # Cast 4 votes for SR1 and 6 votes for SR2 at the same time\n\nwallet&gt; votewitness [SR1] 10  # Voted 10 votes for SR1\n</code></pre> The final result of the above command was 10 votes for SR1 and 0 vote for SR2.</p>"},{"location":"clients/wallet-cli/#listwitnesses","title":"ListWitnesses","text":"<p>Get all miner node information <pre><code>wallet&gt; listwitnesses\n{\n    \"witnesses\": [\n        {\n            \"address\": \"TPffmvjxEcvZefQqS7QYvL1Der3uiguikE\",\n            \"voteCount\": 324999518,\n            \"url\": \"http://sr-26.com\",\n            \"totalProduced\": 414028,\n            \"totalMissed\": 20,\n            \"latestBlockNum\": 27638663,\n            \"latestSlotNum\": 552169224,\n            \"isJobs\": true\n        },\n        {\n            \"address\": \"TFFLWM7tmKiwGtbh2mcz2rBssoFjHjSShG\",\n            \"voteCount\": 324759460,\n            \"url\": \"http://sr-27.com\",\n            \"totalProduced\": 414144,\n            \"totalMissed\": 16,\n            \"latestBlockNum\": 27638664,\n            \"latestSlotNum\": 552169225,\n            \"isJobs\": true\n        },\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#getbrokerage","title":"GetBrokerage","text":"<p>View the ratio of brokerage of the SR(Super Representatives).</p> <p>After voting for the super representative, you will receive the rewards. The super representative has the right to decide the ratio of brokerage. The default ratio is 20%, and the super representative can adjust it.</p> <p>By default, if a super representative is rewarded, he will receive 20% of the whole rewards, and 80% of the rewards will be distributed to his voters.</p> <p><code>OwnerAddress</code> is the address of the SR's account, it is a base58check type address. <pre><code>wallet&gt; getbrokerage TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\nThe brokerage is : 20\n</code></pre></p>"},{"location":"clients/wallet-cli/#getreward","title":"GetReward","text":"<p>Query unclaimed reward.</p> <p><code>OwnerAddress</code> is the address of the voter's account, it is a base58check type address. <pre><code>wallet&gt; getreward TSzdGHnhYnQKFF4LKrRLztkjYAvbNoxnQ8\nThe reward is : 0\n</code></pre></p>"},{"location":"clients/wallet-cli/#updatebrokerage","title":"UpdateBrokerage","text":"<p>Update the ratio of brokerage, this command is usually used by a super representative account. <pre><code>wallet&gt; updateBrokerage [OwnerAddress] [brokerage]\n</code></pre> <code>OwnerAddress</code> is the address of the super representative's account, it is a base58check type address.</p> <p><code>brokerage</code> is the ratio of brokerage you want to update to, the limit of it: 0-100.</p> <p>For example: <pre><code>wallet&gt; updateBrokerage TZ7U1WVBRLZ2umjizxqz3XfearEHhXKX7h 30\n</code></pre></p>"},{"location":"clients/wallet-cli/#dex","title":"DEX","text":"<p>The trading and price fluctuations of trading pairs are in accordance with the Bancor Agreement.</p> <p>Here are all the commands for DEX:</p> <ul> <li>ExchangeCreate</li> <li>ExchangeInject</li> <li>ExchangeTransaction</li> <li>ExchangeWithdraw</li> <li>ListExchanges</li> <li>ListExchangesPaginated</li> <li>MarketSellAsset</li> <li>MarketCancelOrder</li> <li>GetMarketOrderbyAccount</li> <li>GetMarketOrderbyID</li> <li>GetMarketPairList</li> <li>GetMarketOrderListbyPair</li> <li>GetMarketPricebyPair</li> </ul>"},{"location":"clients/wallet-cli/#exchangecreate","title":"ExchangeCreate","text":"<p>Create a trading pair <pre><code>wallet&gt; exchangeCreate [OwnerAddress][first_token_id] [first_token_balance] [second_token_id] [second_token_balance]\n</code></pre> <code>OwnerAddress</code> is the address of the account which initiated the transaction. Considered as the login account by default.</p> <p><code>First_token_id</code>, <code>first_token_balance</code> is the ID and amount of the first token.</p> <p><code>second_token_id</code>, <code>second_token_balance</code> is the ID and amount of the second token.</p> <p>The ID is the ID of the issued TRC10 token. If it is TRX, the ID is \"\". The amount must be greater than 0, and less than 1,000,000,000,000,000.</p> <p>Example: <pre><code>wallet&gt; exchangeCreate 1000001 10000 _ 10000\n# Create trading pairs with the IDs of 1000001 and TRX, with amount 10000 for both.\n</code></pre></p>"},{"location":"clients/wallet-cli/#exchangeinject","title":"ExchangeInject","text":"<p>Capital injection <pre><code>wallet&gt; exchangeInject [OwnerAddress] [exchange_id] [token_id] [quant]\n</code></pre> <code>OwnerAddress</code> is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>exchange_id</code> is the ID of the trading pair to be funded.</p> <p><code>token_id, quant</code> is the token Id and quantity (unit in base unit) of capital injection.</p> <p>When conducting a capital injection, depending on its quantity (quant), a proportion of each token in the trading pair will be withdrawn from the account, and injected into the trading pair. Depending on the difference in the balance of the transaction, the same amount of money for the same token would vary.</p>"},{"location":"clients/wallet-cli/#exchangetransaction","title":"ExchangeTransaction","text":"<p>Making transaction <pre><code>wallet&gt; exchangeTransaction [OwnerAddress] [exchange_id] [token_id] [quant] [expected]\n</code></pre> <code>OwnerAddress</code> is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>exchange_id</code> is the ID of the trading pair.</p> <p><code>token_id</code>, <code>quant</code> is the ID and quantity of tokens being exchanged, equivalent to selling.</p> <p><code>expected</code> is the expected quantity of another token. IT must be less than quant, or an error will be reported.</p> <p>Example\uff1a <pre><code>wallet&gt; ExchangeTransaction 1 1000001 100 80\n</code></pre> It is expected to acquire the 80 TRX by exchanging 1000001 from the trading pair ID of 1, and the amount is 100.(Equivalent to selling an amount of 100 tokenID - 1000001, at a price of 80 TRX, in trading pair ID - 1).</p>"},{"location":"clients/wallet-cli/#exchangewithdraw","title":"ExchangeWithdraw","text":"<p><pre><code>wallet&gt; exchangeWithdraw [OwnerAddress] [exchange_id] [token_id] [quant]\n</code></pre> <code>OwnerAddress</code> is the address of the account which initiated the transaction. Default: the address of the login account.</p> <p><code>Exchange_id</code> is the ID of the trading pair to be withdrawn.</p> <p><code>Token_id</code>, <code>quant</code> is token Id and quantity (unit in base unit) of capital withdrawal.</p> <p>When conducting a capital withdrawal, depending on its quantity (quant), a proportion of each token in the transaction pair is withdrawn from the trading pair, and injected into the account. Depending on the difference in the balance of the transaction, the same amount of money for the same token would vary.</p> <p>You may obtain information on trading pairs by the following commands,</p>"},{"location":"clients/wallet-cli/#listexchanges","title":"ListExchanges","text":"<p>List trading pairs <pre><code>wallet&gt; listexchanges\n{\n    \"exchanges\": [\n        {\n            \"exchange_id\": 14,\n            \"creator_address\": \"TCjuQbm5yab7ENTYb7tbdAKaiNa9Lrj4mo\",\n            \"create_time\": 1654154880000,\n            \"first_token_id\": \"1004852\",\n            \"first_token_balance\": 91,\n            \"second_token_id\": \"_\",\n            \"second_token_balance\": 110000000\n        },\n        {\n            \"exchange_id\": 13,\n            \"creator_address\": \"TBpbKyKVUB1YLULrbhawUws69Gv33cmKDL\",\n            \"create_time\": 1648004214000,\n            \"first_token_id\": \"1000575\",\n            \"first_token_balance\": 991,\n            \"second_token_id\": \"1000184\",\n            \"second_token_balance\": 1010\n        },\n\u00b7\u00b7\u00b7\n</code></pre></p>"},{"location":"clients/wallet-cli/#listexchangespaginated","title":"ListExchangesPaginated","text":"<p>List trading pairs by page <pre><code>wallet&gt; ListExchangesPaginated [offset] [limit]\n</code></pre> <code>offset</code> is the number of exchange pair you want to skip. <code>limit</code> is the number of exchange pair you want to be listed.</p> <p>The parameters in the example below means to skip the first 3 exchange pairs and show the next 2 exchange pairs. <pre><code>wallet&gt; listexchangespaginated 3 2\n{\n    \"exchanges\": [\n        {\n            \"exchange_id\": 4,\n            \"creator_address\": \"TXmHTj3t5LXGvqGkr4jRNw7nf9GjquQ5yf\",\n            \"create_time\": 1601458377000,\n            \"first_token_id\": \"1000088\",\n            \"first_token_balance\": 1,\n            \"second_token_id\": \"_\",\n            \"second_token_balance\": 1\n        },\n        {\n            \"exchange_id\": 5,\n            \"creator_address\": \"TTJJvoPKGVKnbUBPVTn1Zi8o6k3EfFDXVS\",\n            \"create_time\": 1602578613000,\n            \"first_token_id\": \"1000091\",\n            \"first_token_balance\": 456125,\n            \"second_token_id\": \"_\",\n            \"second_token_balance\": 106968111\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#marketsellasset","title":"MarketSellAsset","text":"<p>Create an order to sell asset <pre><code>wallet&gt; MarketSellAsset [owner_address] [sell_token_id] [sell_token_quantity] [buy_token_id] [buy_token_quantity]\n</code></pre> <code>OwnerAddress</code> is the address of the account that initiated the transaction.</p> <p><code>sell_token_id</code> and <code>sell_token_quantity</code> are the ID and amount of the token want to sell.</p> <p><code>buy_token_id</code>, <code>buy_token_quantity</code> determines the ID and amount of the token want to buy.</p> <p>Example: <pre><code>wallet&gt; MarketSellAsset TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW  1000001 200 _ 100    \n</code></pre> Then we use the command getTransactionInfoById to check the result of the contract execution as below, <pre><code>wallet&gt; getTransactionInfoById 10040f993cd9452b25bf367f38edadf11176355802baf61f3c49b96b4480d374   \n\n{\n    \"id\": \"10040f993cd9452b25bf367f38edadf11176355802baf61f3c49b96b4480d374\",\n    \"blockNumber\": 669,\n    \"blockTimeStamp\": 1578983493000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"receipt\": {\n        \"net_usage\": 264\n    }\n} \n</code></pre></p>"},{"location":"clients/wallet-cli/#marketcancelorder","title":"MarketCancelOrder","text":"<p>This command cancels the order. <pre><code>wallet&gt; MarketCancelOrder [owner_address] [order_id]\n</code></pre> <code>owner_address</code> is the account address who have created the order.</p> <p><code>order_id</code> is the order id which want to cancel.</p> <p>Example: <pre><code>wallet&gt; MarketCancelOrder TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW fc9c64dfd48ae58952e85f05ecb8ec87f55e19402493bb2df501ae9d2da75db0  \n</code></pre> Get the result of the contract execution with the getTransactionInfoById command: <pre><code>wallet&gt; getTransactionInfoById b375787a098498623403c755b1399e82910385251b643811936d914c9f37bd27   \n{\n    \"id\": \"b375787a098498623403c755b1399e82910385251b643811936d914c9f37bd27\",\n    \"blockNumber\": 1582,\n    \"blockTimeStamp\": 1578986232000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"receipt\": {\n        \"net_usage\": 283\n    }\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getmarketorderbyaccount","title":"GetMarketOrderbyAccount","text":"<p>Use this command to get the order created by account(just include active status). <pre><code>wallet&gt; GetMarketOrderByAccount [ownerAddress]\n</code></pre> <code>ownerAddress</code> is the address of the account that created market order.</p> <p>Example: <pre><code>wallet&gt; GetMarketOrderByAccount TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW   \n{\n    \"orders\": [\n        {\n            \"order_id\": \"fc9c64dfd48ae58952e85f05ecb8ec87f55e19402493bb2df501ae9d2da75db0\",\n            \"owner_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\",\n            \"create_time\": 1578983490000,\n            \"sell_token_id\": \"_\",\n            \"sell_token_quantity\": 100,\n            \"buy_token_id\": \"1000001\",\n            \"buy_token_quantity\": 200,\n            \"sell_token_quantity_remain\": 100\n        }\n    ]\n}  \n</code></pre></p>"},{"location":"clients/wallet-cli/#getmarketorderbyid","title":"GetMarketOrderbyID","text":"<p>Get the specific order by order_id <pre><code>wallet&gt; GetMarketOrderById [orderId]\n</code></pre> Example: <pre><code>wallet&gt; GetMarketOrderById fc9c64dfd48ae58952e85f05ecb8ec87f55e19402493bb2df501ae9d2da75db0   \n{\n    \"order_id\": \"fc9c64dfd48ae58952e85f05ecb8ec87f55e19402493bb2df501ae9d2da75db0\",\n    \"owner_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\",\n    \"create_time\": 1578983490000,\n    \"sell_token_id\": \"_\",\n    \"sell_token_quantity\": 100,\n    \"buy_token_id\": \"1000001\",\n    \"buy_token_quantity\": 200,\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getmarketpairlist","title":"GetMarketPairList","text":"<p>This command is to get market pair listed</p> <pre><code>wallet&gt; getmarketpairlist\n{\n    \"orderPair\": [\n        {\n            \"sell_token_id\": \"1000012\",\n            \"buy_token_id\": \"_\"\n        },\n        {\n            \"sell_token_id\": \"1000094\",\n            \"buy_token_id\": \"1000095\"\n        },\n        {\n            \"sell_token_id\": \"1000099\",\n            \"buy_token_id\": \"1000100\"\n        },\n\u00b7\u00b7\u00b7\n</code></pre>"},{"location":"clients/wallet-cli/#getmarketorderlistbypair","title":"GetMarketOrderListbyPair","text":"<p>This command is to get market order list by c pair, <pre><code>wallet&gt; GetMarketOrderListByPair [sell_token_id] [buy_token_id]\n</code></pre> <code>sell_token_id</code> is the ID of the token want to sell.</p> <p><code>buy_token_id</code> is the ID of the token want to buy.</p> <p>Example: <pre><code>wallet&gt; GetMarketOrderListByPair _ 1000001   \n{\n    \"orders\": [\n        {\n            \"order_id\": \"fc9c64dfd48ae58952e85f05ecb8ec87f55e19402493bb2df501ae9d2da75db0\",\n            \"owner_address\": \"TJCnKsPa7y5okkXvQAidZBzqx3QyQ6sxMW\",\n            \"create_time\": 1578983490000,\n            \"sell_token_id\": \"_\",\n            \"sell_token_quantity\": 100,\n            \"buy_token_id\": \"1000001\",\n            \"buy_token_quantity\": 200,\n            \"sell_token_quantity_remain\": 100\n        }\n    ]\n}\n</code></pre></p>"},{"location":"clients/wallet-cli/#getmarketpricebypair","title":"GetMarketPricebyPair","text":"<p>Use this command to get market price by exchange pair. <pre><code>wallet&gt; GetMarketPriceByPair [sell_token_id] [buy_token_id]\n</code></pre> <code>sell_token_id</code> is the ID of the token want to sell.</p> <p><code>buy_token_id</code> is the ID of the token want to buy.</p> <p>Example: <pre><code>wallet&gt; GetMarketPriceByPair _ 1000001   \n{\n    \"sell_token_id\": \"_\",\n    \"buy_token_id\": \"1000001\",\n    \"prices\": [\n        {\n            \"sell_token_quantity\": 100,\n            \"buy_token_quantity\": 200\n        }\n    ]\n}\n</code></pre></p>"},{"location":"contracts/contract/","title":"Contract","text":""},{"location":"contracts/contract/#introduction","title":"Introduction","text":"<p>Smart contract is a computerized transaction protocol that automatically implements its terms. Smart contract is the same as common contract, they all define the terms and rules related to the participants. Once the contract is started, it can runs in the way it is designed.</p> <p>TRON smart contract support Solidity language in (Ethereum). You can find the latest solidity version in the TRON solidity repository. Write a smart contract, then build the smart contract and deploy it to TRON network. When the smart contract is triggered, the corresponding function will be executed automatically.</p>"},{"location":"contracts/contract/#features","title":"Features","text":"<p>TRON virtual machine is based on Ethereum solidity language, it also has TRON's own features.</p>"},{"location":"contracts/contract/#defination-of-smart-contract","title":"Defination of Smart Contract","text":"<p>TRON VM is compatible with Ethereum's smart contract, using protobuf to define the content of the contract: <pre><code>message SmartContract {\n  message ABI {\n    message Entry {\n      enum EntryType {\n        UnknownEntryType = 0;\n        Constructor = 1;\n        Function = 2;\n        Event = 3;\n        Fallback = 4;\n        Receive = 5;\n        Error = 6;\n      }\n      message Param {\n        bool indexed = 1;\n        string name = 2;\n        string type = 3;\n      }\n      enum StateMutabilityType {\n        UnknownMutabilityType = 0;\n        Pure = 1;\n        View = 2;\n        Nonpayable = 3;\n        Payable = 4;\n      }\n\n      bool anonymous = 1;\n      bool constant = 2;\n      string name = 3;\n      repeated Param inputs = 4;\n      repeated Param outputs = 5;\n      EntryType type = 6;\n      bool payable = 7;\n      StateMutabilityType stateMutability = 8;\n    }\n    repeated Entry entrys = 1;\n  }\n  bytes origin_address = 1;\n  bytes contract_address = 2;\n  ABI abi = 3;\n  bytes bytecode = 4;\n  int64 call_value = 5;\n  int64 consume_user_resource_percent = 6;\n  string name = 7;\n  int64 origin_energy_limit = 8;\n  bytes code_hash = 9;\n  bytes trx_hash = 10;\n}\n</code></pre> origin_address: smart contract creator address contract_address: smart contract address abi: the api information of all the function of the smart contract bytecode: smart contract byte code call_value: TRX transferred into smart contract while call the contract consume_user_resource_percent: resource consumption percentage set by the developer name: smart contract name origin_energy_limit: energy consumption of the developer limit in one call, must be greater than 0. For the old contracts, if this parameter is not set, it will be set 0, developer can use updateEnergyLimit api to update this parameter (must greater than 0)</p> <p>Through other two grpc message types CreateSmartContract and TriggerSmartContract to create and use smart contract.</p>"},{"location":"contracts/contract/#usage-of-the-function-of-smart-contract","title":"Usage of the Function of Smart Contract","text":"<ul> <li>constant function and inconstant function</li> </ul> <p>There are two types of function according to whether any change will be made to the properties on the chain: constant function and inconstant function Constant function uses view/pure/constant to decorate, will return the result on the node it is called and not be broadcasted in the form of a transaction Inconstant function will be broadcasted in the form of a transaction while being called, the function will change the data on the chain, such as transfer, changing the value of the internal variables of contracts, etc.</p> <p>Note: If you use create command inside a contract (CREATE instruction), even use view/pure/constant to decorate the dynamically created contract function, this function will still be treated as inconstant function, be dealt in the form of transaction.</p> <ul> <li>message calls</li> </ul> <p>Message calls can call the functions of other contracts, also can transfer TRX to the accounts of contract and none-contract. Like the common TRON triggercontract, Message calls have initiator, recipient, data, transfer amount, fees and return attributes. Every message call can generate a new one recursively. Contract can define the distribution of the remaining energy in the internal message call. If it comes with OutOfEnergyException in the internal message call, it will return false, but not error. In the meantime, only the gas sent with the internal message call will be consumed, if energy is not specified in call.value(energy), all the remaining energy will be used.</p> <ul> <li>delegate call/call code/library</li> </ul> <p>There is a special type of message call, delegate call. The difference with common message call is the code of the target address will be run in the context of the contract that initiates the call, msg.sender and msg.value remain unchanged. This means a contract can dynamically loadcode from another address while running. Storage, current address and balance all point to the contract that initiates the call, only the code is get from the address being called. This gives Solidity the ability to achieve the 'lib' function: the reusable code lib can be put in the storage of a contract to implement complex data structure library.</p> <ul> <li>CREATE command</li> </ul> <p>This command will create a new contract with a new address. The only difference with Ethereum is the newly generated TRON address used the smart contract creation transaction id and the hash of nonce called combined. Different from Ethereum, the definition of nonce is the contract sequence number of the creation of the root call. Even there are many CREATE commands calls, contract number in sequence from 1. Refer to the source code for more detail. Note: Different from creating a contract by grpc's deploycontract, contract created by CREATE command does not store contract abi.</p> <ul> <li>built-in function and built-in function attribute (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)</li> </ul> <p><pre><code>1)TVM is compatible with solidity language's transfer format, including:\n- accompany with constructor to call transfer\n- accompany with internal function to call transfer\n- use transfer/send/call/callcode/delegatecall to call transfer\n\nNote: TRON's smart contract is different from TRON's system contract, if the transfer to address does not exist it can not create an account by smart contract transfer.\n\n2)Different accounts vote for SuperNode (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n3)SuperNode gets all the reward (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n4)SuperNode approves or disapproves the proposal (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n5)SuperNode proposes a proposal (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n6)SuperNode deletes  a proposal (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n7)TRON byte address converts to solidity address (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n8)TRON string address converts to solidity address (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n9)Send token to target address (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n10)Query token amount of target address (Since Odyssey-v3.1.1, TVM built-in function is not supported temporarily)\n\n11)Compatible with all the built-in functions of Ethereum\n</code></pre> Note: Ethereum's RIPEMD160 function is not recommended, because the return of TRON is a hash result based on TRON's sha256, not an accurate Ethereum RIPEMD160.</p>"},{"location":"contracts/contract/#contract-address-used-in-solidity-language","title":"Contract Address Used in Solidity Language","text":"<p>Ethereum VM address is 20 bytes, but TRON's VM address is 21 bytes.</p> <ul> <li>address conversion</li> </ul> <p>Need to convert TRON's address while using in solidity (recommended): <pre><code>/**\n     *  @dev    convert uint256 (HexString add 0x at beginning) TRON address to solidity address type\n     *  @param  tronAddress uint256 tronAddress, begin with 0x, followed by HexString\n     *  @return Solidity address type\n*/\n\nfunction convertFromTronInt(uint256 tronAddress) public view returns(address){\n        return address(tronAddress);\n}\n</code></pre> This is similar with the grammar of the conversion from other types converted to address type in Ethereum.</p> <ul> <li>address judgement</li> </ul> <p>Solidity has address constant judgement, if using 21 bytes address the compiler will throw out an error, so you should use 20 bytes address, like: <pre><code>function compareAddress(address tronAddress) public view returns (uint256){\n        // if (tronAddress == 0x41ca35b7d915458ef540ade6068dfe2f44e8fa733c) { // compile error\n        if (tronAddress == 0xca35b7d915458ef540ade6068dfe2f44e8fa733c) { // right\n            return 1;\n        } else {\n            return 0;\n        }\n}\n</code></pre> But if you are using wallet-cli, you can use 21 bytes address, like 0000000000000000000041ca35b7d915458ef540ade6068dfe2f44e8fa733c</p> <ul> <li>variable assignment</li> </ul> <p>Solidity has address constant assignment, if using 21 bytes address the compiler will throw out an error, so you should use 20 bytes address, like: <pre><code>function assignAddress() public view {\n        // address newAddress = 0x41ca35b7d915458ef540ade6068dfe2f44e8fa733c; // compile error\n        address newAddress = 0xca35b7d915458ef540ade6068dfe2f44e8fa733c;\n        // do something\n}\n</code></pre> If you want to use TRON address of string type (TLLM21wteSPs4hKjbxgmH1L6poyMjeTbHm) please refer to (2-4-7,2-4-8).</p>"},{"location":"contracts/contract/#special-constants-differ-from-ethereum","title":"Special Constants Differ from Ethereum","text":""},{"location":"contracts/contract/#currency","title":"Currency","text":"<p>Like solidity supports ETH, TRON VM supports trx and sun, 1 trx = 1000000 sun, case sensitive, only support lower case. tron-studio supports trx and sun, remix does not support trx and sun. We recommend to use tron-studio instead of remix to build TRON smart contract.</p>"},{"location":"contracts/contract/#block-related","title":"Block Related","text":"<ul> <li>block.blockhash (uint blockNumber) returns (bytes32): specified block hash, can only apply to the latest 256 blocks and current block excluded</li> <li>block.coinbase (address): SuperNode address that produced the current block</li> <li>block.difficulty (uint): current block difficulty, not recommended, set 0</li> <li>block.gaslimit (uint): current block gas limit, not supported, set 0</li> <li>block.number (uint): current block number</li> <li>block.timestamp (uint): current block timestamp</li> <li>gasleft() returns (uint256): remaining gas</li> <li>msg.data (bytes): complete call data</li> <li>msg.gas (uint): remaining gas - since 0.4.21, not recommended, replaced by gesleft()</li> <li>msg.sender (address): message sender (current call)</li> <li>msg.sig (bytes4): first 4 bytes of call data (function identifier)</li> <li>msg.value (uint): the amount of SUN send with message</li> <li>now (uint): current block timestamp (block.timestamp)</li> <li>tx.gasprice (uint): the gas price of transaction, not recommended, set 0</li> <li>tx.origin (address): transaction initiator</li> </ul> <p>Each command of smart contract consume system resource while running, we use 'Energy' as the unit of the consumption of the resource.</p>"},{"location":"contracts/tools/","title":"Tools","text":""},{"location":"contracts/tools/#tronide","title":"TronIDE","text":"<p>Support the build, debug, run, etc. for solidity language written smart contract. http://www.tronide.io</p>"},{"location":"contracts/tools/#tronbox","title":"TronBox","text":"<p>Support the build, deploy, transplant, etc. for solidity language written smart contract. https://developers.tron.network/reference/what-is-tronbox</p>"},{"location":"contracts/tools/#tronweb","title":"TronWeb","text":"<p>Provide javascript api for the usage of smart contract. https://tronweb.network/docu/docs/intro/</p>"},{"location":"contracts/tools/#trongrid","title":"TronGrid","text":"<p>Provide smart contract event query service. https://developers.tron.network/docs/trongrid</p>"},{"location":"contracts/tools/#trident-java","title":"Trident-java","text":"<p>Trident-java is a lightweight SDK that includes libraries for working with TRON system contracts and smart contracts.  https://tronprotocol.github.io/trident/</p>"},{"location":"developers/advanced-configuration/","title":"Advanced Configurations","text":"<p>we provide some configuration items for LevelDB and gRPC in <code>config.conf</code> file, for fine-grained performance tuning.  You may custom these items only if you have deep understanding on them, otherwise keep them as default.</p>"},{"location":"developers/advanced-configuration/#leveldb","title":"LevelDB","text":"<p>You can custom LevelDB options in the <code>storage</code> part of <code>config.conf</code>, which looks like:</p> <pre><code>storage {\n  # Directory for storing persistent data\n\n  db.directory = \"database\",\n  index.directory = \"index\",\n\n  # You can custom these 14 databases' configs:\n\n  # account, account-index, asset-issue, block, block-index,\n  # block_KDB, peers, properties, recent-block, trans,\n  # utxo, votes, witness, witness_schedule.\n\n  # Otherwise, db configs will remain default and data will be stored in\n  # the path of \"output-directory\" or which is set by \"-d\" (\"--output-directory\").\n\n  # Attention: name is a required field that must be set !!!\n  properties = [\n    {\n      name = \"account\",\n      path = \"/path/to/account\",   // relative or absolute path\n      createIfMissing = true,\n      paranoidChecks = true,\n      verifyChecksums = true,\n      compressionType = 1,        // 0 - no compression,  1 - compressed with snappy\n      blockSize = 4096,           // 4  KB =         4 * 1024 B\n      writeBufferSize = 10485760, // 10 MB = 10 * 1024 * 1024 B\n      cacheSize = 10485760,       // 10 MB = 10 * 1024 * 1024 B\n      maxOpenFiles = 100\n    }\n  ]\n\n}\n</code></pre> <p>As shown in the example above, the data of database <code>account</code> will be stored in the path of <code>/path/to/account/database</code> while the index be stored in <code>/path/to/account/index</code>. And, the example also shows our default value of LevelDB options from <code>createIfMissing</code> to <code>maxOpenFiles</code>. You can just refer to the docs of LevelDB to figure out details of these options.</p>"},{"location":"developers/advanced-configuration/#grpc","title":"gRPC","text":"<p>You can custom gPRC options in the <code>node.rpc</code> part of <code>config.conf</code>, which looks like:</p> <pre><code>node {\n  rpc {\n    port = 50051\n\n    # Number of gRPC thread, default availableProcessors / 2\n    # thread = 16\n\n    # The maximum number of concurrent calls permitted for each incoming connection\n    # maxConcurrentCallsPerConnection =\n\n    # The HTTP/2 flow control window, default 1MB\n    # flowControlWindow =\n\n    # Connection being idle for longer than which will be gracefully terminated\n    maxConnectionIdleInMillis = 60000\n\n    # Connection lasting longer than which will be gracefully terminated\n    # maxConnectionAgeInMillis =\n\n    # The maximum message size allowed to be received on the server, default 4MB\n    # maxMessageSize =\n\n    # The maximum size of header list allowed to be received, default 8192\n    # maxHeaderListSize =\n  }\n}\n</code></pre>"},{"location":"developers/advanced-configuration/#backup","title":"backup","text":"<p>You can custom backup options in the <code>node.backup</code> part of <code>config.conf</code>, which looks like: <pre><code>node.backup {\n    # my priority, each member should use different priority\n    priority = \n    # members should use same port\n    port = \n    # peer's ip list, can't contain mine\n    members = []\n}\n</code></pre> policy:  1. the one which synchronized first will become master. 2. if synchronization is completed at the same time, the one with big priority will become master.</p> <p>E.g. create backups for node A(192.168.0.100) and node B(192.168.0.100 ): node A's configuration: <pre><code>node.backup {\n    priority = 8 \n    port = 10001\n    members = [\n        \"192.168.0.101\"\n    ]\n}\n</code></pre> node B's configuration: <pre><code>node.backup {\n    priority = 5\n    port = 10001\n    members = [\n        \"192.168.0.100\"\n    ]\n}\n</code></pre></p> <p>You may refer to the source code of <code>io.grpc.netty.NettyServerBuilder</code> class to see details or just make a decision according to the brief comments above.  </p>"},{"location":"developers/archive-manifest/","title":"Leveldb Startup Optimization Plugins","text":""},{"location":"developers/archive-manifest/#introduction","title":"Introduction","text":"<p>With the operation of levelDB, manifest file will continue to grow, huge manifest file not only affects the node startup speed, but also may cause the problem of system exit with continuous memory growth. For this reason, leveldb startup optimization plugin is introduced since <code>GreatVoyage-v4.3.0(Bacon)</code>, which optimizes the file size of manifest and the startup process of LevelDB, reduces the memory occupation and improves the node startup speed.</p> <p>Remember stop the FullNode process before any operation. This tool provides the ability to reformat the manifest according to the current <code>database</code>.</p> <p>For more design details, please refer to: TIP298.</p>"},{"location":"developers/archive-manifest/#usage","title":"Usage","text":""},{"location":"developers/archive-manifest/#options-for-plug-in","title":"Options For Plug-in","text":"<ul> <li><code>-b | --batch-size</code>: [ int ]  specify the batch manifest size,default\uff1a80000.</li> <li><code>-d | --database-directory</code>: [ string ]  Specify the database directory to be processed,default\uff1aoutput-directory/database.</li> <li><code>-m | --manifest-size</code>: [ int ] Specify the minimum required manifest file size \uff0cunit:M\uff0cdefault\uff1a0.</li> <li><code>-h | --help</code>: [ bool ]  for usage help\uff0cdefault\uff1afalse.</li> </ul>"},{"location":"developers/archive-manifest/#how-to-get","title":"How to get","text":"<ul> <li>build by yourself.   Under java-tron, execute <code>. /gradlew build</code>, you can get Toolkit.jar under <code>build/libs/</code>.</li> <li>Download directly.   Links</li> </ul>"},{"location":"developers/archive-manifest/#use-steps","title":"Use Steps","text":"<ul> <li> <ol> <li>Stop the FullNode service.</li> </ol> </li> <li> <ol> <li>Execute the Toolkit command.</li> </ol> </li> <li> <ol> <li>Start the FullNode service.</li> </ol> </li> </ul> <p>Note: <code>Step ii</code> is not required every time, but it is recommended to run it every time to optimize the experience.</p>"},{"location":"developers/archive-manifest/#how-to-use","title":"How to use","text":"<p>After FullNode runs, the default database directory: <code>output-directory</code>, the optimization plugin will work with the <code>output-directory/database</code> directory. Developers can choose one of the following two ways  according to actual situation.</p>"},{"location":"developers/archive-manifest/#use-it-independently","title":"Use it Independently","text":""},{"location":"developers/archive-manifest/#1stop-the-fullnode-service","title":"1.Stop the FullNode service","text":"<p>Use <code>kill -15</code> to shutdown the FullNode.jar .</p> <p>Query the pid: <code>ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'</code></p>"},{"location":"developers/archive-manifest/#2execute-the-toolkit-command","title":"2.Execute the Toolkit command","text":"<pre><code># Full command\njava -jar Toolkit.jar [-b batchSize] [-d databaseDirectory] [-m manifestSize] [-h]\n# examples\n   java -jar Toolkit.jar #1. use default settings\n   java -jar Toolkit.jar -d /tmp/db/database #2. Specify the database directory as /tmp/db/database\n   java -jar Toolkit.jar -b 64000 #3. Specify the batch size to 64000 when optimizing Manifest\n   java -jar Toolkit.jar -m 128 #4. Specify optimization only when Manifest exceeds 128M\n</code></pre> <p>After the command is executed, <code>archive.log</code> will be generated in the <code>./logs</code> directory, you can see the result.</p> <p>Note: After the command is executed\uff0cIf successful, the log will display something similar to the following, and will run generally within 120s, depending on how long the FullNode service keeps running, and if it fails there will be a corresponding error message</p> <p><code>[main] [archive](ArchiveManifest.java:144) DatabaseDirectory:output-directory/database, maxManifestSize:0, maxBatchSize:80000,database reopen use 80 seconds total.</code></p>"},{"location":"developers/archive-manifest/#3start-the-fullnode-service","title":"3.Start the FullNode service","text":"<pre><code> #FullNode\nnohup java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar -c main_net_config.conf &lt;/dev/null &amp;&gt;/dev/null &amp;\n #SR Node\nnohup java -Xmx24g -XX:+UseConcMarkSweepGC  -jar FullNode.jar  -p  private key --witness -c main_net_config.conf &lt;/dev/null &amp;&gt;/dev/null &amp;\n</code></pre>"},{"location":"developers/archive-manifest/#integrated-startup-script","title":"Integrated startup script","text":"<p><pre><code>#!/bin/bash\n\nAPP=$1\n\nMANIFEST_OPT=$2\n\nALL_OPT=$*\n\nNEED_REBUILD=0\n\nif [[ $1 == '--rewrite--manifest' ]]  ; then\n   APP=''\n   NEED_REBUILD=1\n\n elif [[ $2 == '--rewrite--manifest' ]]  ; then\n   NEED_REBUILD=1\n fi\n\n\nrebuildManifest() {\n\n if [[ $NEED_REBUILD == 1 ]] ; then\n   buildManifest\n fi\n\n}\n\n\nbuildManifest() {\n\n ARCHIVE_JAR='Toolkit.jar'\n\n java -jar $ARCHIVE_JAR $ALL_OPT\n\n if [ $? == 0 ] ; then\n\n     echo 'rebuild manifest success'\n\n else\n\n     echo 'rebuild manifest fail, log in logs/archive.log'\n\n fi\n\n}\n\n\n\nAPP=${APP:-\"FullNode\"}\n\nSTART_OPT=`echo ${@:2}`\n\nJAR_NAME=\"$APP.jar\"\n\nMAX_STOP_TIME=60\n\nMEM_OPT=''\n\n\n\n\n\ncheckpid() {\n\n pid=`ps -ef | grep $JAR_NAME |grep -v grep | awk '{print $2}'`\n\n return $pid\n\n}\n\ncheckPath(){\n  path='output-directory/database'\n  flag=1\n  for p in ${ALL_OPT}\n  do\n     if [[ $flag == 0 ]] ; then\n        path=`echo $p`\n        break\n     fi\n     if [[ $p == '-d' || $p == '--database-directory' ]] ; then\n        path=''\n        flag=0\n     fi\n  done\n\n  if [[ -z \"${path}\" ]]; then\n     echo '-d /path or --database-directory /path'\n     return 1\n  fi\n\n  if [[ -d ${path} ]]; then\n    return 0\n  else\n    echo $path 'not exist'\n    return 1\n  fi\n}\n\n\n\nstopService() {\n\n  count=1\n\n  while [ $count -le $MAX_STOP_TIME ]; do\n\n    checkpid\n\n    if [ $pid ]; then\n\n       kill -15 $pid\n\n       sleep 1\n\n    else\n\n       echo \"java-tron stop\"\n\n       return\n\n    fi\n\n    count=$[$count+1]\n\n    if [ $count -eq $MAX_STOP_TIME ]; then\n\n      kill -9 $pid\n\n      sleep 1\n\n    fi\n\n  done\n\n}\n\nstartService() {\n echo `date` &gt;&gt; start.log\n\n total=16*1024*1024\n\n xmx=`echo \"$total/1024/1024*0.6\" | bc |awk -F. '{print $1\"g\"}'`\n\n directmem=`echo \"$total/1024/1024*0.1\" | bc |awk -F. '{print $1\"g\"}'`\n\n logtime=`date +%Y-%m-%d_%H-%M-%S`\n\n export LD_PRELOAD=\"/usr/lib64/libtcmalloc.so\"\n\n  nohup java -Xms$xmx -Xmx$xmx -XX:+UseConcMarkSweepGC -XX:+PrintGCDetails -Xloggc:./gc.log\\\n  -XX:+PrintGCDateStamps -XX:+CMSParallelRemarkEnabled -XX:ReservedCodeCacheSize=256m -XX:+UseCodeCacheFlushing\\\n  $MEM_OPT -XX:MaxDirectMemorySize=$directmem -XX:+HeapDumpOnOutOfMemoryError -jar $JAR_NAME $START_OPT -c config.conf  &gt;&gt; start.log 2&gt;&amp;1 &amp;\n\n pid=`ps -ef |grep $JAR_NAME |grep -v grep |awk '{print $2}'`\n\n echo \"start java-tron with pid $pid on $HOSTNAME\"\n\n}\n\n#1.Stop the FullNode service\nstopService\n\ncheckPath\n\n#2.Execute the Toolkit plugin\nif [[ 0 ==  $? ]] ; then\n rebuildManifest\nelse\n exit -1\nfi\n\nsleep 5\n# Start the FullNode service\nstartService\n</code></pre>  example</p> <p>Note: Save above script as start.sh,  In the above script the <code>--rewrite--manifest</code> argument is fixed in the first or second argument.</p> <p>OPTIONS</p> <pre><code>       --rewrite--manifest       enable leveldb startup optimization plugins\uff0cThe above plug-in option `-d -m -b -h` will take effect iff this option(--rewrite--manifest) is turned on\n</code></pre> <pre><code># Full command\n./start.sh [FullNode|SolidityNode] [--rewrite--manifest] [-b batchSize] [-d databaseDirectory] [-m manifestSize]\n# examples\n  ./start.sh #1. Start the FullNode.jar service without the plugin\n   ./start.sh SolidityNode #2. Start the SolidityNode.jar service without the plugin\n   ./start.sh FullNode --rewrite--manifest #3. Execute the optimization plugin with default settings and start the FullNode.jar service\n   ./start.sh --rewrite--manifest -d /tmp/db/database #4. Specify the database directory as /tmp/db/database, execute the optimization plugin, and start the FullNode.jar service\n   ./start.sh --rewrite--manifest -b 64000 #5. Specify the batch size to 64000 when optimizing Manifest, and start the FullNode.jar service\n   ./start.sh --rewrite--manifest -m 128 #6. Specify that optimization is performed only when the Manifest exceeds 128M, and start the FullNode.jar service\n</code></pre>"},{"location":"developers/code-structure/","title":"java-tron Core Modules","text":""},{"location":"developers/code-structure/#code-structure","title":"Code Structure","text":"<p>java-tron is a TRON network client developed based on the Java language. It implements all the functions mentioned in the TRON white paper, including consensus mechanism, cryptography, database, TVM virtual machine, network management, etc. We can run a TRON node by starting java-tron. In this article, we will describe the code structure of java-tron in detail, and introduce the functions of its various modules, to facilitate the subsequent code analysis and development of developers.</p> <p>java-tron adopts a modular code structure; the code structure is clear and easy to maintain and expand. Currently java-tron is divided into 7 modules: protocol, common, chainbase, consensus, actuator, crypto, framework, the following introduces the functions of each module and its code organization.</p>"},{"location":"developers/code-structure/#protocol","title":"protocol","text":"<p>For a distributed network such as blockchain, a concise and efficient data interaction protocol is very important. The protocol module defines:</p> <ul> <li>Inter-node communication protocol</li> <li>Communication protocol between modules within the node</li> <li>Agreement for Services Provided Externally</li> </ul> <p>The above protocols adopt the <code>Google Protobuf</code> data exchange format. Compared with JSON and XML, the <code>Google Protobuf</code> format is more efficient and flexible and can be compiled by the ProtoBuf compiler to generate language-specific serialization and deserialization source code for the defined protocol files. Protobuf is the basis for java-tron to achieve cross-language and cross-platform.</p> <p>protocol module's source code is located at:  <code>https://github.com/tronprotocol/java-tron/tree/develop/protocol</code> , its directory structure is as follows:</p> <pre><code>|-- protos\n    |-- api\n    |   |-- api.proto\n    |   |-- zksnark.proto\n    |-- core\n        |-- Discover.proto\n        |-- Tron.proto\n        |-- TronInventoryItems.proto\n        |-- contract\n</code></pre> <ul> <li><code>protos/api/</code> - The gRPC interface and data structure provided by the java-tron node externally</li> <li><code>protos/core/</code> - Data structure for communication between nodes and between modules within nodes<ul> <li><code>Discover.proto</code> - Node discovers related data structures</li> <li><code>TronInventoryItems.proto</code> - Data structure related to block transferring between nodes</li> <li><code>contract/</code> - Contract related data structures</li> <li><code>Tron.proto</code> - Other important data structures, including accounts, blocks, transactions, resources, super representatives, voting, and proposals...</li> </ul> </li> </ul>"},{"location":"developers/code-structure/#common","title":"common","text":"<p>The common module encapsulates common components and tools, such as exception handling, metrics monitoring tools, etc which make it easy to use by other modules.</p> <p>common module's source code is located at:  <code>https://github.com/tronprotocol/java-tron/tree/develop/common</code>, its directory structure is as follows:</p> <pre><code>|-- /common/src/main/java/org/tron\n    |-- common\n    |   |-- args\n    |   |-- config\n    |   |-- entity\n    |   |-- logsfilter\n    |   |-- overlay\n    |   |-- parameter\n    |   |-- prometheus\n    |   |-- runtime\n    |   |-- setting\n    |   |-- utils\n    |-- core\n        |-- config\n        |-- db\n        |-- db2\n        |-- exception\n</code></pre> <ul> <li><code>common/prometheus</code> - Prometheus metrics monitoring</li> <li><code>common/utils</code> - The wrapper class of basic data type</li> <li><code>core/config</code> - Node configuration related classes</li> <li><code>core/exception</code> - All exception handling related classes</li> </ul>"},{"location":"developers/code-structure/#chainbase","title":"chainbase","text":"<p>Chainbase is a database module. For probabilistic consensus algorithms such as PoW, PoS and DPoS, situations of switching to a new chain, however unlikely, are inevitable. Because of this, chainbase defines an interface standard supporting databases that can roll back. This interface requires databases to have a state rollback mechanism, a checkpoint-based disaster tolerant mechanism and so on. </p> <p>In addition, the chainbase module features a well-designed abstract interface. Any database that implements the interface can be used for underlying storage on the blockchain, granting more flexibility to developers. LevelDB and RocksDB are two default implementations.</p> <p>chainbase module's source code is located at: <code>https://github.com/tronprotocol/java-tron/tree/develop/chainbase</code>, its directory structure is as follows: <pre><code>|-- chainbase.src.main.java.org.tron\n    |-- common\n    |   |-- bloom\n    |   |-- error\n    |   |-- overlay\n    |   |-- runtime\n    |   |-- storage\n    |   |   |-- leveldb\n    |   |   |-- rocksdb\n    |   |-- utils\n    |   |-- zksnark\n    |-- core\n        |-- actuator\n        |-- capsule\n        |-- db\n        |   |-- RevokingDatabase.java\n        |   |-- TronStoreWithRevoking.java\n        |   |-- ......\n        |-- db2\n        |   |-- common\n        |   |-- core\n        |       |-- SnapshotManager.java\n        |       |-- ......\n        |-- net\n        |-- service\n        |-- store\n</code></pre></p> <ul> <li><code>common/</code> - Common components, such as exception handling, tools, etc<ul> <li><code>storage/leveldb/</code> Implemented the use of LevelDB as the underlying storage database</li> <li><code>storage/rocksdb/</code> Implemented the use of RocksDB as the underlying storage database</li> </ul> </li> <li> <p><code>core/</code> - The core code of the chainbase module</p> <ul> <li> <p><code>capsule/</code> </p> <p>The encapsulation class of each data structure, such as AccountCapsule, BlockCapsule, etc. AccountCapsule is the encapsulation class of Account data structure, which provides modification and query of account data; BlockCapsule is the encapsulation class of Block data structure, which provides modification and query of block data.</p> </li> <li> <p><code>store/</code> </p> <p>Various databases, such as <code>AccountStore</code>, <code>ProposalStore</code>, etc. <code>AccountStore</code> is the account database, the database name is <code>account</code>, which stores all account information in the TRON network; <code>ProposalStore</code> is the proposal database, and the database name is <code>proposal</code>, which stores all the proposal information in the TRON network.</p> </li> <li> <p><code>db/</code> and <code>db2/</code> </p> <p>Implemented rollbackable databases, including two rollbackable databases: <code>AbstractRevokingStore</code> located in the <code>db/</code> directory and <code>SnapshotManager</code> located in the <code>db2/</code> directory. Compared with <code>AbstractRevokingStore</code>, <code>SnapshotManager</code> has a more stable data rollback function and supports the extension of the underlying database. Therefore, java-tron uses <code>SnapshotManager</code> to roll back the database. Several important interfaces and implementation classes are as follows:</p> <ul> <li><code>RevokingDatabase.java</code> - It is the interface of the database container, used to manage all rollbackable databases, <code>SnapshotManager</code> is an implementation of this interface</li> <li><code>TronStoreWithRevoking.java</code> - It is the base class that supports rollbackable databases. All rollbackable databases are their implementations, such as <code>BlockStore</code>, <code>TransactionStore</code>, etc</li> </ul> </li> </ul> </li> </ul>"},{"location":"developers/code-structure/#consensus","title":"consensus","text":"<p>The consensus mechanism is a crucial module in blockchains. Common ones are PoW, PoS, DPoS and PBFT, etc. While Paxos, Raft, etc, are applied to consortium blockchains and other trusted networks. The consensus mechanism should match the business scenario. For instance, PoW is not suitable for real-time games that are sensitive to consensus efficiency, while PBFT can make an optimized choice for exchanges demanding high real-time capability. In this sense, a replaceable consensus is a creative innovation and an essential link in building application-specific blockchains. Even star blockchain programs like Cosmos SDK are still at a stage where the application layer provides developers with limited autonomy and the consensus at the base level is subject to Tendermint. Therefore, the ultimate goal of the consensus module is to make consensus switch as easy as configuring parameters for application developers.</p> <p>consensus module's source code is located at:  <code>https://github.com/tronprotocol/java-tron/tree/develop/consensus</code>, its directory structure is as follows: <pre><code>|-- consensus/src/main/java/org/tron/consensus\n    |-- Consensus.java\n    |-- ConsensusDelegate.java\n    |-- base\n    |   |-- ConsensusInterface.java\n    |   |-- ......\n    |-- dpos\n    |-- pbft\n</code></pre> consensus module divides the consensus process into several important parts that are defined in <code>ConsensusInterface</code>:</p> <ol> <li><code>start</code> - start the consensus service with customizable startup parameters</li> <li><code>stop</code> - stop the consensus service</li> <li><code>receiveBlock</code> - define the consensus logic of receiving blocks</li> <li><code>validBlock</code> - define the consensus logic of validating blocks</li> <li><code>applyBlock</code> - define the consensus logic of processing blocks</li> </ol> <p>Currently, java-tron implements DPOS consensus and PBFT consensus based on the <code>ConsensusInterface</code> interface, which is located in the <code>dpos/</code> and <code>pbft/</code> directories respectively. Developers can also implement the <code>ConsensusInterface</code> interface according to their own business needs to customize the consensus mechanism.</p>"},{"location":"developers/code-structure/#actuator","title":"actuator","text":"<p>Ethereum was the first to introduce the virtual machine and define the smart contract. However, smart contracts are constrained in terms of their functions and not flexible enough to accommodate the needs of complex applications. This is one of the reasons why java-tron supports the creation of a chain of applications. For the reasons mentioned, java-tron includes a separate module, Actuator, offering application developers a brand new way of development. They can choose to implant their application codes into a chain instead of running them on virtual machines. </p> <p>Actuator is the executor of transactions, while applications can be viewed as a cluster of different types of transactions, each of which is executed by a corresponding actuator.</p> <p>actuator module's source code is located at: <code>https://github.com/tronprotocol/java-tron/tree/develop/actuator</code>, its directory structure is as follows: <pre><code>|-- actuator/src/main/java/org/tron/core\n    |-- actuator\n    |   |-- AbstractActuator.java\n    |   |-- ActuatorCreator.java\n    |   |-- ActuatorFactory.java\n    |   |-- TransferActuator.java\n    |   |-- VMActuator.java\n    |   |-- ......\n    |-- utils\n    |-- vm\n</code></pre></p> <ul> <li><code>actuator/</code> - The executors of various types of transactions in the TRON network which define the processing logic of different types of transactions. For example, <code>TransferActuator</code> is the processing class for transferring TRX, and <code>FreezeBalanceV2Actuator</code> is the processing class for staking TRX to obtain resource</li> <li><code>utils/</code> - tools needed to execute transaction</li> <li><code>vm/</code> - TRON virtual machine related code</li> </ul> <p>Actuator module defines the <code>Actuator</code> interface, which includes 4 different methods:</p> <ul> <li><code>execute</code> - execute specific actions of transactions, such as state modification, communication between modules, logic execution, etc.</li> <li><code>validate</code> - validate authenticity of transactions</li> <li><code>getOwnerAddress</code> - acquire the address of transaction initiators</li> <li><code>calcFee</code> - define the logic of calculating transaction fees</li> </ul> <p>Depending on their businesses, developers may set up Actuator accordingly and customize the processing of different types of transactions.</p>"},{"location":"developers/code-structure/#crypto","title":"crypto","text":"<p>Crypto is a relatively independent module, but it is also a very important module. Data security in java-tron is almost entirely guaranteed by this module. Currently, SM2 and ECKey encryption algorithms are supported.</p> <p>crypto module's source code is located at: <code>https://github.com/tronprotocol/java-tron/tree/develop/crypto</code>, its directory structure is as follows: <pre><code>|-- crypto/src/main/java/org/tron/common/crypto\n    |-- Blake2bfMessageDigest.java\n    |-- ECKey.java\n    |-- Hash.java\n    |-- SignInterface.java\n    |-- SignUtils.java\n    |-- SignatureInterface.java\n    |-- cryptohash\n    |-- jce\n    |-- sm2\n    |-- zksnark\n</code></pre></p> <ul> <li><code>sm2</code> and <code>jce</code> - Provide SM2 and ECKey encryption algorithm and signature algorithm</li> <li><code>zksnark</code> - Provide a zero-knowledge proof algorithm</li> </ul>"},{"location":"developers/code-structure/#framework","title":"framework","text":"<p>The framework is the core module of java-tron and the entrance of the node. The framework module is responsible for the initialization of each module and business logic. The framework module includes the services provided externally, the node discovery and node management process related to the P2P network, and the block broadcasting and processing procedures.</p> <p>framework module's source code is located at:  <code>https://github.com/tronprotocol/java-tron/tree/develop/framework</code>, its directory structure is as follows:</p> <pre><code>|-- framework/src/main/java/org/tron\n    |-- common\n    |   |-- application\n    |   |-- backup\n    |   |-- logsfilter\n    |   |-- net\n    |   |-- overlay\n    |   |   |-- client\n    |   |   |-- discover\n    |   |   |-- message\n    |   |   |-- server\n    |   |-- runtime\n    |   |-- zksnark\n    |-- core\n    |   |-- Wallet.java\n    |   |-- capsule\n    |   |-- config\n    |   |-- consensus\n    |   |-- db\n    |   |-- metrics\n    |   |-- net\n    |   |-- services\n    |   |-- trie\n    |   |-- zen\n    |-- keystore\n    |-- program\n    |   |-- FullNode.java\n    |-- tool\n</code></pre> <ul> <li><code>program/FullNode.java</code> - It is the entry point of the program and initializes external HTTP, gRPC and json-rpc interface services</li> <li><code>core/services</code> - Defines the externally provided services, its subdirectory <code>http/</code> contains all http interface processing classes, <code>json-rpc/</code> contains all json-rpc interface processing classes</li> <li><code>common/overlay/discover</code> - Node discovery logic</li> <li><code>common/overlay/server</code> - Node management and block synchronization logic among nodes</li> <li><code>core/net</code> - Message processing, its subdirectory <code>/service</code> is  transaction and block broadcasting, block fetching and synchronization logic</li> <li><code>core/db/Manager.java</code> - Transaction and block verification and processing logic</li> </ul>"},{"location":"developers/code-structure/#summary","title":"Summary","text":"<p>This article mainly introduces the code structure of java-tron, as well as the function, location and directory structure of each functional module. Through this article, you will have a general understanding of the overall structure and key interfaces of java-tron, which is helpful for subsequent code analysis and development.</p>"},{"location":"developers/code-structure/#chainbase_1","title":"ChainBase","text":""},{"location":"developers/code-structure/#introduction","title":"Introduction","text":"<p>As we all know, the blockchain is essentially a non-tamperable distributed ledger, which is very suitable for solving the problem of trust. In reality, blockchain is often used for bookkeeping and transactions. For example, many applications use BTC, ETH, TRX, and other cryptos to carry out economic activities to ensure the openness and transparency of funds.</p> <p>The realization of such an immutable distributed ledger is a very complex system engineering, involving many technical fields: such as p2p networks, smart contracts, databases, cryptography, consensus mechanisms, etc. Among them, the database is the basis of the underlying storage, and various blockchain teams are exploring the design and optimization of the database level.</p> <p>The database module of java-tron is also called the ChainBase module. This article mainly introduces some background knowledge and shows developers the implementation details of the ChainBase module by introducing logic such as transaction processing, state rollback, and data persistence.</p>"},{"location":"developers/code-structure/#prerequisites","title":"Prerequisites","text":"<p>The database is an important part of the blockchain system. It stores all the data on the blockchain and is the basis for the normal operation of the blockchain system. Each fullnode stores a full amount of data, including block data, state data, etc. java-tron uses the Account model to save the user's account state.</p>"},{"location":"developers/code-structure/#account-models","title":"Account Models","text":"<p>There are currently two mainstream account models,</p> <ul> <li>UTXO</li> <li>Account Model</li> </ul> <p>The UTXO model is stateless, makes it easier to process transactions concurrently, and has better privacy, but it is not programming-friendly.</p> <p>In the Account Model, user data is stored in the corresponding account, and smart contracts are also stored in the account in the form of code. This model is more intuitive and easier for developers to understand. For programmability, flexibility, and other considerations, java-tron adopts the Account Model.</p>"},{"location":"developers/code-structure/#consensus_1","title":"Consensus","text":"<p>The current mainstream consensus is PoW, PoS, DPoS, etc. PoW is proof of work, all nodes participate in the calculation of an expected hash result, and the node that first calculates the result has the right to produce a block, but as the computing power continues to increase, the energy consumption required to calculate the hash is also increasing. Moreover, large mining farms monopolize most of the computing power, which also goes against the original intention of decentralization.</p> <p>To solve the problems faced by PoW, some people proposed PoS (Proof of Stake), which is simply understood as the more coins that the node holds, the greater the probability of obtaining the right to produce blocks, but this will lead to monopoly problems as well. In order to improve, DPoS (Delegated Proof of Stake) is proposed: the decentralization feature is guaranteed by the elected super representative, and the super representative is responsible for the block production in turn to improve the efficiency. java-tron currently adopts the DPoS consensus mechanism.</p> <p>To learn more, please refer to Delegated Proof of Stake.</p>"},{"location":"developers/code-structure/#persistent-storage","title":"Persistent Storage","text":"<p>There are certain differences between blockchain and traditional Internet business. The blockchain does not have particularly complex processing logic at the database level, but there are a large number of key-value read and write operations in the blockchain so there are higher requirements for data read and write performance.</p> <p>Based on this consideration, java-tron uses LevelDB as the underlying data storage by default, and java-tron has a good architecture design. The interface-oriented programming mode makes the chainbase module have better scalability. All databases implemented the chainbase interface can be used as the underlying storage engine of java-tron. For example, in the chainbase v2 version, a database implementation based on RocksDB is provided.</p>"},{"location":"developers/code-structure/#transaction-validation","title":"Transaction Validation","text":"<p>As we all know, the blockchain mainly stores transaction data. Before introducing the chainbase module, you need to understand the transaction processing logic in java-tron.</p> <p></p> <p>The transaction will be distributed to each node through network broadcast. After receiving the transaction, the node will first validate the signature of the transaction. If successful, the transaction needs to be pre-executed to determine whether the transaction is legal.</p> <p>Note: The specific implementation of java-tron deviates from the above figure, and for the sake of convenience, this article collectively refers to the FullNode and SR as the nodes.</p> <p>For example, to process a transfer transaction: user A transfers 100 TRX to user B, and it needs to validate whether user A has enough balance to make the transfer.</p> <p>The account library in the database stores the account information of all users, including the user's balance information. How to judge whether this transfer transaction is legal? The logic of java-tron is: when a transaction is received from the network, the transaction operation will be executed immediately, that is, the account information will be modified in the local database: (accountA - 100TRX, accountB + 100TRX). If this operation can be executed successfully, it means that the transaction is legal at least in the current state, and can be packed into the block.</p>"},{"location":"developers/code-structure/#glossary","title":"Glossary","text":"<p>SR\uff1a Super Representative, is responsible for block production.</p> <p>FullNode\uff1a stores all block data, is responsible for transactions, block broadcasting and validation, and provides query services.</p> <p>TRX\uff1a TRON native token.</p>"},{"location":"developers/code-structure/#state-rollback","title":"State Rollback","text":"<p>Above we mentioned that java-tron validates whether the transaction is legal through pre-execution, but what we need to know is that the transaction is successfully validated on a certain node does not mean that the transaction has been successfully chained because the transaction has not been packed into the consensus blocks, there is a risk of being rolled back.</p> <p>The consensus of java-tron follows a principle: that is, the transactions in the blocks that are approved by more than 2/3 of the SRs are the ones that are really successful on the chain. can also be understood as below,</p> <ul> <li>transactions are packed into a block</li> <li>the block is approved by more than 2/3 of the SRs</li> </ul> <p>A transaction that satisfies the above two points is a successful transaction on the chain. A transaction in java-tron is finally confirmed through three stages,</p> <ul> <li>transaction validating</li> <li>transaction packing into the block</li> <li>block being accepted and applied</li> </ul> <p>This also leads to a problem: in the implementation of java-tron, if a node validates the transaction, its database state changes accordingly. If the transaction is not packed into the block yet or the block it is packed into has not been approved by more than 2/3 of SR, the state of this node will be inconsistent with the state of the entire network.</p> <p>Therefore, except for the processing transaction data in blocks approved by more than 2/3 SRs, all other data state changes resulting from transaction processing may need to be rolled back. There are three kinds of scenarios in total:</p> <ul> <li>after receiving a new block, roll back the state changes generated by transaction validation</li> <li>after producing a block, roll back the state changes generated by transaction validation</li> <li>if a forked takes place, roll back the state changes generated by the transactions of the blocks in the forked chain</li> </ul> <p>The data state changes caused by these three scenarios may need to be rolled back and the following section explains why.</p>"},{"location":"developers/code-structure/#rollback-after-receiving-a-new-block","title":"Rollback after Receiving a New Block","text":"<p>When receiving a new block, the node needs to roll back to the state at the end of the previous block and roll back all transactions validated afterward. As shown below,</p> <p></p> <p>If the account balance of accountA is 100 at the block height is 1000, the node receives and validates a transaction 't1', in which accountA transfers 100TRX to accountB. After receiving the new block1001, the block contains a transaction 't2', in which accountA transfers 50TRX to accountC. In theory, t2 has been packed into the block, and the priority is higher than t1. However, if no operation is done, the validation of t2 will fail because accountA does not have enough balance. Therefore, after receiving the new block 1001, the state change generated by transaction t1 needs to be rolled back.</p>"},{"location":"developers/code-structure/#rollback-after-producing-a-new-block","title":"Rollback after Producing a New Block","text":"<p>First of all, readers may have a question: the validated transaction can be directly packed into the block, and it will not change the database state. Why is there a change in the database state?</p> <p>Because java-tron does a secondary validation of the transaction when it is packed into the block. The secondary validation is due to the timeliness of the transaction. Still taking the above figure as an example, it can be seen from the figure, that after 1001 is received, the transaction t1 was rolled back, and the balance of accountA was deducted by 50. And then, it was the node's turn to produce a block, but t1 had become an illegal transaction at this time because the balance in accountA was not enough to transfer 100 TRX, it is not advisable to directly pack t1 into the block. So the transaction needs to be validated again, which is why the transaction needs to be validated twice when producing a block.</p> <p>After the block is packed successfully, the node will broadcast the block to the network and apply the block locally. And the logic of applying will re-check the transactions in the block. So after the block is packed, a rollback operation still needs to be performed.</p>"},{"location":"developers/code-structure/#rollback-when-forking","title":"Rollback when Forking","text":"<p>This is the last rollback situation, and the blockchain will inevitably fork, especially the blockchain system based on DPoS with a faster block production speed that is more prone to fork.</p> <p>java-tron maintains a data structure in memory as below,</p> <p></p> <p>java-tron holds all blocks that have not reached consensus recently. When a forked chain occurs, according to the longest chain principle: if the block height of the forked chain is greater than the current main chain block height, the forked chain needs to be switched to the main chain. Part of the blocks on the previous main chain needs to roll back up to their common parent blocks when switching, and then apply new main chain blocks sequentially from the parent block.</p> <p>As shown in the figure, fork A in the dark part was originally the main chain. Because the height of fork B continues to grow and eventually exceeds the height of A, it is necessary to roll back the data in those three blocks with heights 1003, 1002, and 1001 in fork A. Then apply fork blocks 1001', 1002', 1003', and 1004' in B in sequence.</p>"},{"location":"developers/code-structure/#state-rollback-implementation","title":"State Rollback Implementation","text":"<p>This chapter explains receiving and validating transactions, block production, validating and saving blocks from the perspective of code, to further analyze the chainbase module of java-tron. If there is no further declaration, the default description is dedicated to all the Fullnode (including SR).</p>"},{"location":"developers/code-structure/#receiving-transactions","title":"Receiving Transactions","text":"<p>After the node receives a transaction, it puts the transaction into the local pushTransactionQueue cache queue by calling the <code>pushTransaction(final TransactionCapsule trx)</code> function of the manager class and validates the transaction at the same time. And the return of this method is sort of elegant:</p> <ol> <li>if validation is successful, \u2018true' is returned</li> <li>for the transaction sent by the user to the node through the API, if the transaction validation fails, an exception will be returned to the user; for transactions received from other nodes through the network, exceptions will only be recorded locally</li> </ol> <p>After the transaction validation is successful, the transactions without problems will be put into the pendingTransactionQueue, and the pendingTransactionQueue is responsible for providing the transaction set when producing blocks. If the node is an SR node, when producing a block, it will take out all or part of it from the pendingTransactionQueue (depending on how many transactions are in the pendingTransactionQueue) to generate a block.</p>"},{"location":"developers/code-structure/#rollback-when-receiving-blocks","title":"Rollback when Receiving Blocks","text":"<p>A node would receive transactions broadcasted from other nodes before receiving a new block, the transactions need to be validated to determine whether they can be executed correctly. Validation means that the state needs to be changed, and a successful validation does not mean that the transaction will be finally executed, and it will be considered successful after packing into a block and the block become solidified. This step can be considered to filter out those obviously wrong transactions in advance. This is just validation. When a new block arrives, the state changed by transaction validations should be rolled back. Only the state changed when applying new blocks will not be rolled back.</p> <p></p> <p>When rolling back, java-tron move the transactions in the pendingTransactionQueue to rePushTransactions, and clear the pendingTransactionQueue, see the figure for a detailed explanation.</p> <p>Why does the pendingTransactionQueue need to be emptied after a new block arrives? First of all, it is clear that the pendingTransactionQueue queue is responsible for providing transaction data when generating blocks, that is to say, it stores validated transactions that can be directly packed into blocks. Since the new block will also change the account state, those validated transactions in pendingTransactionQueue may not pass the validation after applying the new block (the simplest example: a transaction in the new block is that accountA spends a part of the token, resulting in a transaction amount of accountA in the queue that is not enough to pay ). After the transaction is moved to rePushTransactions, a background thread will be responsible for re-validating the transaction in the queue. If nothing is wrong, it will be put into the pendingTransactionQueue again to provide data for block production.</p> <p>There is a session object in java-tron. A session represents the change in the state of a block. The session object is mainly used for rollback. For example,rolling back the state to the state of the previous block needs to be operated throughout the session, as shown in the following figure,</p> <p></p> <p>In the above figure, you can see that there are many different types of databases in persistent storage. These data are jointly organized into a complete blockchain. For example, blocks are stored in khasodb and blockStore, and account information is stored in accountStore... </p> <p>The node maintains a session chain table, which stores the change information corresponding to the block/transaction, and the node can roll back through the change information. In the above figure, session1 is the status change of the current highest block. When a transaction is received, a new session2 will be generated. Each transaction that comes later will generate a temporary tmpSession, and after the transaction is validated, the tmpSession corresponded will be merged to session2. Before a new block is received again, all status changes generated by transaction validation will be saved in session2. When a new block arrives, directly execute the reset method of the session2 to roll back the state to the previous block.</p>"},{"location":"developers/code-structure/#rollback-when-producing-blocks","title":"Rollback when Producing Blocks","text":"<p>SR needs to roll back before producing blocks. The reasons are more complicated. Let's consider a scenario first:</p> <ul> <li>The pendingTransactionQueue stores the currently validated transactions, so when an SR node produces a block, it only needs to directly pack the transactions in the pendingTransactionQueue into the block, and then roll back the state to the state of the previous block after packing.</li> </ul> <p>However, there is a problem with this scheme: if the SR node has just received and applied a new block, the pendingTransactionQueue will be cleared. At this time, it is the turn of the SR to pack the block, but there is no transaction in pendingTransactionQueue. Therefore, the real implementation is that not only reads transactions from pendingTransactionQueue when generating blocks but also reads transactions from rePushTransactions and puts them into blocks if there are few transactions in pendingTransactionQueue. The above analysis shows that transactions in rePushTransactions may not be possible to pass the validation, so the transactions need to be validated again. Due to this validation logic, the state needs to be rolled back before the block is produced.</p> <p></p> <p>In the process of producing the block, the transaction will be validated again, so there will be a state change, but this is just block production, and the block needs to be broadcast as well, and those blocks who received the broadcast will actually change the state, so the state changes incurred by block production also need to be rolled back. As shown in the figure above, when the block production is completed, session2\" needs to be rolled back.</p>"},{"location":"developers/code-structure/#block-solidity","title":"Block Solidity","text":"<p>java-tron adopts the DPoS consensus mechanism. The DPoS of java-tron is to vote for 27 nodes as block producers (also known as SR), SR has the right and obligation to produce blocks, and blocks approved by more than 2/3 of SR are considered to reach a consensus. These blocks, which are no longer rolled back are called solidified blocks. Only solidified blocks can be written to the database.</p> <p>SnapshotManager in java-tron is the key entry to the storage module, holds references to all current business databases, and stores database references in a list. Each database instance supports adding a new layer of state set on its own called SnapshotImpl. It is an in-memory hashmap, multiple SnapshotImpl are associated in the form of a linked list, and one SnapshotImpl retains the data modification (in-merging or merging) involved in one state change, and SnapshotImpl is independent of each other. They are separated through this data structure, as shown in the following figure,</p> <p></p> <p>The SnapshotRoot in the above figure is the encapsulation class for the persistent database, which is responsible for storing the solidified data.</p> <p>In the previous chapters, we talked about sessions. A session represents the changes of state in a block. In fact, a session contains the SnapshotImpl corresponding to each database. For example, all SnapshotImpl in the layer of block 5 in the above figure together constitutes the changes of block 5 to the entire database.</p> <p>The changes generated after the node receives a new block will not be directly stored in the persistent storage (SnapshotRoot), but will first be stored in snapshotImpl. Each block received corresponds to a snapshotImpl. Continuously receiving blocks will lead to more and more snapshotImpl. When will they be written to persistent storage?</p> <p>There are two variables in SnapshotManager: 'size' and 'maxSize'. Here we simply understand 'size' as how many layers of snapshotImpl are there currently in memory, and 'maxSize' represents the difference between the height of the current solidified block and the latest block.</p> <p>This is obvious. If 'size' &gt; 'maxSize', it means that the blocks corresponding to the first (size-maxSize) snapshotImpl are already solidified blocks, they can be placed on the disk, and then the snapshotImpl will be merged into the persistent storage. This ensures that snapshotImpl does not occupy too much memory, and also ensures that the solidified block can be persisted in time.</p>"},{"location":"developers/code-structure/#atomicity","title":"Atomicity","text":"<p>The database storage of java-tron is slightly different from other public chains. For example, the Ethereum persistence layer uses only one database instance, and different types of data in Ethereum are distinguished by prefixes and stored in one database instance. However, java-tron currently stores data of different business types in its own database instances.</p> <p>The two implementations have their own advantages. A single instance is easy to maintain and can be written uniformly, but the disadvantages are also obvious. For example, the amount of data in a single database continues to grow over time, and frequent access to some business databases may drag down the read-and-write performance of other businesses. </p> <p>Multi-instance does not have the problem of the mutual influence of each business data read and write, and can configure different parameters according to their respective data volume and performance requirements to maximize performance, and can also independently split the database with a large amount of data. Alleviate data bloat problems. But there is a serious problem with multiple database instances: there is no native tool to support atomic writes among multiple database instances.</p> <p>In order to ensure the atomic writing of multiple database instances, java-tron has added a checkpoint mechanism, which writes the changed data to the checkpoint uniformly before the multiple instances are placed on the disk. If an accident occurs in writing to multiple database instances, the changed data will be recovered from the checkpoint when the service is restarted to ensure the atomicity of writing.</p> <p>The process of writing the snapshotImpl of the solidified block to the database in the previous section mainly includes two steps,</p> <ol> <li>create a checkpoint</li> <li>place snapshotImpl on disk</li> </ol> <p>The operation of creating a checkpoint is more critical. A checkpoint is to persistently store the snapshotImpl in memory that needs to be written to the database in a tmp database (currently, the underlying implementation is leveldb and rocksdb). After the checkpoint is successfully created, the snapshotImpl will place on the disk. If the machine is down while placing, it will first search for the existence of tmp checkpoint data when the node restart. And if so, the data in the checkpoint will be played back to snapshotRoot.</p> <p>A checkpoint data structure,</p> <p></p> <p>Checkpoint stores all data of a state change in one database. Different types of data are distinguished by prefixes. In order to ensure that all changed data can be placed on disk this time, the bottom layer of the database calls writeBatch() when writing. </p> <p>This solution can be summarized as,</p> <ul> <li>the atomicity of writes cannot be guaranteed among multiple database instances, but a single database (most mainstream databases) supports atomic writes</li> <li>the data set that needs to be guaranteed to be written atomically is first written to a temporary database by atomic writing, and then the data is written to different database instances; if an accident occurs, it can be recovered through the data of the temporary database</li> </ul>"},{"location":"developers/code-structure/#summary_1","title":"Summary","text":"<p>This article analyzes the implementation details of rollback and database writing in the chainbase module through the processing flow of transactions and blocks and also analyzes the principle of atomic writing among multiple instances of the database to prevent database damage caused by accidental downtime. We hope that reading this article can help developers to further understand and develop the java-tron database.</p>"},{"location":"developers/code-structure/#network","title":"Network","text":""},{"location":"developers/code-structure/#overview","title":"Overview","text":"<p>P2P is a distributed network in which participants in the network share a part of the hardware resources they own, such as processing power, storage capacity, network connection capacity, printers, etc. These shared resources need to be provided services and content by the network, which can be accessed by other peers directly without going through an intermediate entity. Participants in this network are both providers and acquirers of service and content.</p> <p>Different from the traditional Client/Server central server structure, the status of each node in the P2P network is equal. While serving as a client, each node can also serve as a server to provide services to other nodes, which greatly improves the utilization of resources.</p>"},{"location":"developers/code-structure/#blockchain-network","title":"Blockchain Network","text":"<p>P2P is the network layer in the blockchain structure. The main purpose of the network layer is to realize information broadcast, verification and communication between nodes. The blockchain network is essentially a P2P network, and each node can both receive and generate information. Nodes keep communication by maintaining common blockchain data.</p> <p>As the foundation of the blockchain, the P2P network brings the following advantages to the blockchain:</p> <ul> <li>Prevent single-point attack</li> <li>High fault tolerance</li> <li>Better compatibility and scalability</li> </ul>"},{"location":"developers/code-structure/#tron-network","title":"TRON Network","text":"<p>The architecture diagram of TRON is as follows: </p> <p>As the most fundamental module of TRON, the P2P network directly determines the stability of the entire blockchain network. The network module can be divided into the following four parts according to the function:</p> <ul> <li>Node Discovery</li> <li>Node Connection</li> <li>Block Synchronization</li> <li>Block and Transaction Broadcast</li> </ul> <p>Below will separately introduce these four functional parts.</p>"},{"location":"developers/code-structure/#node-discovery","title":"Node Discovery","text":"<p>Node discovery is the first step for nodes to access the blockchain network. The blockchain network is a structured P2P network which organizes all nodes in an orderly manner, such as forming a ring network or a tree-like network. Structured networks are generally implemented based on the DHT (Distributed Hash Table) algorithm. Specific implementation algorithms include Chord, Pastry, CAN, Kademlia and so on. The TRON network uses the Kademlia algorithm.</p>"},{"location":"developers/code-structure/#kademlia-algorithm","title":"Kademlia Algorithm","text":"<p>Kademlia is an implementation of Distributed Hash Table (DHT), it is the core routing technology in the decentralized P2P network and can quickly find target nodes in the network without a central server.</p> <p>For a detailed introduction to the algorithm, please refer to Kademlia.</p>"},{"location":"developers/code-structure/#kademlia-implementation-by-tron","title":"Kademlia Implementation by TRON","text":"<p>The main points of the Kademlia algorithm implemented by TRON are as follows:</p> <ul> <li>Node ID: Randomly generated 512bit ID</li> <li>Node Distance: The node distance is obtained through the XOR operation of two nodes' ID. The formula is: <code>Node distance = 256 - the number of leading 0s in the node ID XOR result</code>, if the calculation result is negative, the distance is equal to 0.</li> <li>K-Bucket: The node routing table. According to the distance between the nodes, the remote nodes are divided into different buckets. The remote nodes with the same distance as the current node are recorded in the same bucket, and each bucket can accommodate up to 16 nodes. According to the calculation formula of node distance, it can be seen that the Kademlia algorithm implemented by TRON maintains a total of 256 buckets.</li> </ul> <p>The node discovery protocol of TRON includes the following four UDP messages:</p> <ul> <li><code>DISCOVER_PING</code> - used to detect if a node is online</li> <li><code>DISCOVER_PONG</code> - used in response to <code>DISCOVER_PING</code> message</li> <li><code>DISCOVER_FIND_NODE</code> - used to find other nodes closest to the target node</li> <li><code>DISCOVER_NEIGHBORS</code> - used in response to <code>DISCOVER_FIND_NODE</code> message, will return one or more nodes, up to 16</li> </ul>"},{"location":"developers/code-structure/#initialize-k-buckets","title":"Initialize K-Buckets","text":"<p>After the node is started, it will read the seed nodes configured in the node configuration file and the peer nodes recorded in the database, and then send <code>DISCOVER_PING</code> message to them respectively. If the reply message <code>DISCOVER_PONG</code> from a peer is received, and at the condition that the K bucket is not full, it will then write the peer node into the K bucket; But if the corresponding bucket has already been full (that is the bucket has reached 16 nodes), it will challenge to the earliest node in the bucket. If the challenge is successful, the old node will be deleted, and the new node will be added to the K bucket. That is the K bucket initialization process, then the node discovery process is performed.</p> <p></p>"},{"location":"developers/code-structure/#send-discover_find_node-to-find-more-nodes","title":"Send DISCOVER_FIND_NODE to Find More Nodes","text":"<p>The node discovery service will start two scheduled tasks (<code>DiscoverTask</code> and <code>RefreshTask</code>) to periodically perform the node discovery process to update k buckets.</p> <ul> <li><code>DiscoverTask</code> is to discover more nodes that are closer to myself. It is executed every 30s. The execution flow is as follows:     </li> <li><code>RefreshTask</code> is to expand the local k-bucket by random node ID, that is, to find nodes that are closer to the random node ID. It is executed every 7.2s. The execution process is as follows:     </li> </ul> <p>The node discovery algorithm used in <code>DiscoverTask</code> and <code>RefreshTask</code> will be executed 8 rounds in one call, and each round sends <code>DISCOVER_FIND_NODE</code> message to the 3 nodes closest to the target node ID in the K bucket, and waits for a reply.</p>"},{"location":"developers/code-structure/#receive-neighbors-messages-and-update-k-bucket","title":"Receive Neighbors' Messages and Update K Bucket","text":"<p>When the local node receives the <code>DISCOVER_NEIGHBORS</code> message replied by the remote node, it will send the <code>DISCOVER_PING</code> message to the received neighbor node in turn, and then if it receives the reply message <code>DISCOVER_PONG</code>, it will judge whether the corresponding K-bucket is full, if the K-bucket is not full, it will add the new node to the K bucket, if the K bucket is full, it will challenge one of the nodes, if the challenge is successful (send a <code>DISCOVER_PING</code> message to the old node, if it fails to receive the reply message <code>DISCOVER_PONG</code>, the challenge is successful, otherwise the challenge fails), the old node will be deleted from the K bucket, and the new node will be added to the K bucket.</p> <p></p> <p>Nodes periodically perform node discovery tasks, continuously update K-buckets, and build their own node routing tables. The next step is to establish a connection with nodes.</p>"},{"location":"developers/code-structure/#node-connection","title":"Node Connection","text":"<p>Before understanding how to establish a TCP connection between nodes, we need to first understand the peer node type.</p>"},{"location":"developers/code-structure/#peer-node-management","title":"Peer Node Management","text":"<p>The local node needs to manage and classify peer nodes for efficient and stable node connection. Remote nodes can be divided into the following categories:</p> <ul> <li>Active nodes: specified in the configuration file. After the system starts, it will actively establish connections with the nodes. If the connection fails to be established, it will retry in each scheduled TCP connection task.</li> <li>Passive nodes: specified in the configuration file. The local node will passively accept connections from them.</li> <li>Trust nodes: specified in the configuration file, both Active nodes and Passive nodes are trusted nodes. When receiving a connection request from a trusted node, some other condition checks are skipped and the request is accepted directly.</li> <li>BadNodes: When an abnormal protocol packet is received, the sending node will be added to the badNodes list, valid for 1 hour. When a connection request from badNodes is received, the request will be rejected directly</li> <li>RecentlyDisconnectedNodes: When a connection is disconnected, the peer node will be added to the recentlyDisconnectedNodes list, valid for 30s, when a connection request from recentlyDisconnectedNodes is received, the request will be rejected directly</li> </ul>"},{"location":"developers/code-structure/#establish-tcp-connection-with-peers","title":"Establish TCP Connection with Peers","text":"<p>After the node is started, a scheduled task <code>poolLoopExecutor</code> will be created to establish a TCP connection with nodes. It will select nodes and establish connections with them. The working process is as follows:</p> <p></p> <p>The TCP connection can be mainly divided into two steps: first, determine the node list which the node will establish a connection with. The list needs to contain the active nodes that have not successfully established a connection, and then calculate the number of connections that also need to be established, and filter out the nodes from discovered neighbors according to the node filtering strategy, then score and sort them according to the node scoring strategy, and the corresponding number of nodes with the highest score is added to the request list. Finally, TCP connections are established with the nodes in the request list.</p>"},{"location":"developers/code-structure/#node-filtering-strategy","title":"Node Filtering Strategy","text":"<p>When establishing a node connection, it is necessary to filter out the following types of nodes and determine whether the node's own connection number has reached the maximum value.</p> <ul> <li>Myself</li> <li>Nodes in the recentlyDisconnectedNodes list</li> <li>Nodes in badNodes list</li> <li>Nodes that have already established a connection</li> <li>The number of connections established with the node IP has already reached the upper limit (maxConnectionsWithSameIp)</li> </ul> <p>But for trusted nodes, some filtering policies are ignored and connections are always established.</p> <p></p>"},{"location":"developers/code-structure/#node-scoring-strategy","title":"Node Scoring Strategy","text":"<p>The node score is used to determine the priority of nodes to establish a connection. The higher the score, the higher the priority. Scoring dimensions include:</p> <ul> <li>Packet loss rate: The lower the packet loss rate, the better the communication quality. The score is inversely proportional to the packet loss rate. The highest score is 100 and the lowest is 0.</li> <li>Network delay: The smaller the network delay, the better the network quality. The score is inversely proportional to the average network latency. The highest score is 20 and the lowest is 0.</li> <li>TCP traffic: The larger the TCP traffic, the more active the communication. The score is proportional to the TCP traffic, with a maximum score of 20 and a minimum of 0</li> <li>Disconnection times: The fewer disconnection times, the more stable the node is. The score is inversely proportional to the number of disconnections. The score is 10 times the number of disconnections.</li> <li>Handshake: Nodes that have been handshake successfully before indicate that they have the same blockchain information, so it is preferred to establish a connection with them. When the number of successful Handshakes is greater than 0, the Handshake score is 20, otherwise, the score is 0.</li> <li>Penalty state: A node in the Penalty state has a score of 0 and does not participate in scoring in other dimensions. The following situations will be regarded as in the Penalty state:<ul> <li>Node disconnection time is less than 60s</li> <li>The node is in the badNodes list</li> <li>Inconsistent blockchain information</li> </ul> </li> </ul> <p>When calculating the node score, first determine whether the node is in the Penalty state, if so, the score is counted as 0, otherwise, the node score is the sum of the scores of each dimension.</p>"},{"location":"developers/code-structure/#handshake","title":"Handshake","text":"<p>After the TCP connection is successfully established, the node that actively initiates the TCP connection request will send a handshake message <code>P2P_HELLO</code> to the neighbor node, in order to confirm whether the blockchain information between the nodes is consistent and whether it is necessary to initiate the block synchronization process.</p> <p>When the neighbor node receives <code>P2P_HELLO</code>, it will compare with the local information, such as checking whether the p2p version and the genesis block information are consistent. If all the check conditions are passed, it will reply to the <code>P2P_HELLO</code> message, and then perform the block synchronization or broadcast; otherwise, it will disconnect the connection.</p>"},{"location":"developers/code-structure/#channel-keep-alive","title":"Channel Keep-Alive","text":"<p>Channel keep-alive is accomplished through <code>P2P_PING</code>, <code>P2P_PONG</code> TCP messages. When a node establishes a TCP connection with a neighbor node and handshakes successfully, the node will open a thread <code>pingTask</code> for the connection and periodically send <code>P2P_PING</code> messages to maintain the TCP connection, which is scheduled every 10s. If the <code>P2P_PONG</code> message replied is not received within the timeout period, the connection will be terminated.</p>"},{"location":"developers/code-structure/#block-synchronization","title":"Block Synchronization","text":"<p>After completing the handshake with the peer node, if the peer node's blockchain is longer than the local blockchain, the block synchronization process <code>syncService.startSync</code> will be triggered according to the longest chain principle. The message interaction during the synchronization process is as follows:</p> <p></p> <p>Node A sends an <code>SYNC_BLOCK_CHAIN</code> message to peer node B to announce the blockchain summary information of the local chain. After the peer node B receives it, it calculates the list of missing blocks of node A, and sends the lost block ID list to node A through the <code>BLOCK_CHAIN_INVENTORY</code> message, carrying a maximum of 2000 block ids at a time.</p> <p>After node A receives the <code>BLOCK_CHAIN_INVENTORY</code> message, it gets the missing block id, and sends a <code>FETCH_INV_DATA</code> message to node B asynchronously to request the missing block, up to 100 blocks at a time. If there are still blocks that need to be synchronized (that is, the remain_num in the <code>BLOCK_CHAIN_INVENTORY</code> message is greater than 0), a new round of block synchronization process will be triggered.</p> <p>After node B receives the <code>FETCH_INV_DATA</code> message from node A, it sends the block to node A through the <code>BLOCK</code> message. After node A receives the <code>BLOCK</code> message, it asynchronously processes the block.</p>"},{"location":"developers/code-structure/#blockchain-summary-and-list-of-missing-blocks","title":"Blockchain Summary and List of Missing Blocks","text":"<p>Below will take several different block synchronization scenarios as examples to illustrate the generation of the blockchain summary and the lost block ID list. </p> <ul> <li>Blockchain summary: an ordered list of block IDs, including the highest solidified block, the highest non-solidified block, and the blocks corresponding to the dichotomy.</li> <li>List of missing blocks: The neighbor node compares its own chain with the received blockchain summary, determines the missing blocks list of peers, and returns a set of consecutive block IDs and the number of remaining blocks.</li> </ul>"},{"location":"developers/code-structure/#normal-synchronization-scene","title":"Normal Synchronization Scene","text":"<p>The height of the local header block is 1018, and the height of the solidified block is 1000. The two nodes have just established a connection, so the height of the common block is 0. The local blockchain summary of node A obtained by the dichotomy is 1000, 1010, 1015, 1017, and 1018.</p> <p>After node B receives the blockchain summary of node A, combined with the local chain, it can produce the list of blocks that node A lacks: 1018, 1019, 1020, and 1021. Then, node A requests to synchronize blocks 1019, 1020, and 1021 according to the list of missing blocks.</p> <p></p>"},{"location":"developers/code-structure/#chain-switching-scene","title":"Chain-Switching Scene","text":"<p>The head block height of the local main chain is 1018, and the height of the solidified block is 1000. The two nodes have just established a connection, so the height of the common block is 0. The local blockchain summary of node A obtained by the dichotomy is 1000, 1010, 1015, 1017, and 1018.</p> <p>After node B receives the chain summary of node A, it finds that the local main chain is not the same as the main chain of node A, compares the chain summary of node A and finds that the common block height is 1015, then it computes the list of blocks that node A lacks are 1015, 1016', 1017', 1018', and 1019'. Then, node A requests to synchronize blocks 1018' and 1019' according to the list of missing blocks.</p> <p></p> <p>In another switching chain scenario, the height of the local main chain header block is 1018, the height of the solidified block is 1000, and the common block is 1017', which is located on the fork chain. The local blockchain summary of node A obtained by the dichotomy is 1000, 1009, 1014, 1016', and 1017'.</p> <p>After node B receives the chain summary of node A, combined with the local chain, it can produce the list of blocks that node A lacks 1017', 1018', and 1019'. Then, node A requests to synchronize blocks 1018', and 1019' according to the list of missing blocks.</p> <p></p>"},{"location":"developers/code-structure/#block-and-transaction-broadcast","title":"Block and Transaction Broadcast","text":"<p>When the super representative node produces a new block, or the fullnode receives a new transaction initiated by the user, the transaction &amp; block broadcasting process will be initiated. When a node receives a new block or new transaction, it will forward the corresponding block or transaction, and the forwarding process is the same as that of broadcasting. The message interaction is shown in the following figure:</p> <p></p> <p>The types of messages involved include:</p> <ul> <li><code>INVENTORY</code> - broadcast list: list of block or transaction ids</li> <li><code>FETCH_INV_DATA</code> - the list data that the node needs to get: block or transaction id list</li> <li><code>BLOCK</code> - block data</li> <li><code>TRXS</code> - transaction data</li> </ul> <p>Node A sends the transaction or block to be broadcast to Node B via the <code>INVENTORY</code> list message. After node B receives the <code>INVENTORY</code> list message, it needs to check the status of the peer node, and if it can receive the message, it puts the blocks/transactions in the list into the \"to be fetched queue\" <code>invToFetch</code>. If it is a block list, it will also trigger the \"get block &amp; transaction task\" immediately to send a <code>FETCH_INV_DATA</code> message to node A to get the block &amp; transaction.</p> <p>After node A receives the <code>FETCH_INV_DATA</code> message, it will check whether an \"INVENTORY\" message has been sent to the peer. If it has been sent, it will send a transaction or block message to node B according to the list data. After node B receives the transaction or block message, it processes the message and triggers the forwarding process.</p>"},{"location":"developers/code-structure/#summary_2","title":"Summary","text":"<p>This article introduces the implementation details related to the P2P network, the lowest level module of TRON, including node discovery, node connection, block synchronization, and the process of block and transaction broadcasting. I hope that reading this article can help developers to further understand and develop java-tron network-related modules.</p>"},{"location":"developers/demo/","title":"Development Example","text":"<p>This article will take adding a new <code>setPeer</code> HTTP interface as an example to illustrate how to participate in the development of java-tron. Before developing, please configure the InteliJ IDE development environment.</p> <p>Sometimes java-tron nodes may not be able to connect to peers due to network reasons, if you can add trusted nodes while the node is running, this will allow the node to connect to the peer even if the node discovery function is not working.</p>"},{"location":"developers/demo/#fork-java-tron-repository","title":"Fork java-tron Repository","text":"<p>Fork a new repository from the https://github.com/tronprotocol/java-tron project to your personal repository, and then use the following command Clone the code locally:</p> <pre><code>$ git clone https://github.com/yourname/java-tron.git\n$ git remote add upstream https://github.com/tronprotocol/java-tron.git\n</code></pre>"},{"location":"developers/demo/#sync-repository","title":"Sync Repository","text":"<p>Before developing new features, please synchronize your fork repository with the upstream repository.</p> <pre><code>$ git fetch upstream \n$ git checkout develop \n$ git merge upstream/develop --no-ff\n</code></pre>"},{"location":"developers/demo/#create-new-branch","title":"Create New Branch","text":"<p>Pull a new branch from the <code>develop</code> branch of your own repository for local development, please refer to branch naming convention. In this example, the name of the new branch is: <code>feature/ add-new-http-demo</code>.</p> <pre><code>$ git checkout -b feature/add-new-http-demo develop\n</code></pre>"},{"location":"developers/demo/#code-development","title":"Code Development","text":"<p>Open the java-tron project in IDEA. Create a new servlet file in the <code>java-tron/framework/src/main/java/org/tron/core/services/http</code> directory to process HTTP requests: SetPeerServlet.java, the file should contain two functions <code>doGet</code> and <code>doPost</code>. <code>doGet</code> is used to handle http get requests and <code>doPost</code> is used to handle http post requests. If one of these types of requests is not supported, the method content can be empty.</p> <p><pre><code>@Component\n@Slf4j(topic = \"API\")\npublic class SetPeerServlet extends HttpServlet {\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) \n    {}\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) \n    {}\n}\n</code></pre> In this example, the setPeer request should be sent by post, so you need to add processing logic in the <code>doPost</code> method, and the content of the <code>doGet</code> method keeps empty.</p> <p>The processing logic of the <code>doPost</code> method is:</p> <ol> <li>Get the incoming parameters</li> <li>Add peer information to the list of trusted nodes through the addPeer method</li> <li>Return the processing result of addPeer to the front-end user</li> </ol> <pre><code>@Component\n@Slf4j(topic = \"API\")\npublic class SetPeerServlet extends HttpServlet {\n  @Autowired\n  private ChannelManager channelManager;\n\n  protected void doPost(HttpServletRequest request, HttpServletResponse response) {\n    try {\n      PostParams params = PostParams.getPostParams(request);\n\n      JSONObject jsonObject = JSONObject.parseObject(params.getParams());\n      String peerIpPort = String.valueOf(jsonObject.get(\"peer\"));\n\n      boolean res = addPeer(peerIpPort);\n      if (res) {\n        response.getWriter().println(\"Success to set trusted peer:\" + peerIpPort);\n      } else {\n        response.getWriter().println(\"Fail to set the trusted peer:\" + peerIpPort);\n      }\n\n    } catch (Exception e) {\n      logger.error(\"Exception occurs when setting peer: {}\", e.getMessage());\n      try {\n        response.getWriter().println(Util.printErrorMsg(e));\n      } catch (IOException ioe) {\n        logger.error(\"IOException occurs when setting peer: {}\", ioe.getMessage());\n      }\n    }\n  }\n  ......\n}\n</code></pre> <p>Put the processing logic of adding trust nodes in the <code>addPeer</code> method, which not only makes the code logic clearer, but also easier to test.</p> <p>The logic of the <code>addPeer</code> method is:</p> <ol> <li>Check the parameters the user entered to ensure that the node ip and port are not empty</li> <li>Construct node information through <code>Node.instanceOf(peerIP)</code></li> <li>Make sure that the added trust node is not self</li> <li>Add the node to the trusted node list</li> </ol> <p><pre><code>  boolean addPeer(String peerIP) {\n    try {\n      if (peerIP != \"\") {\n        Node node = Node.instanceOf(peerIP);\n        if (!(CommonParameter.PARAMETER.nodeDiscoveryBindIp.equals(node.getHost())\n                || CommonParameter.PARAMETER.nodeExternalIp.equals(node.getHost())\n                || Constant.LOCAL_HOST.equals(node.getHost()))\n                || CommonParameter.PARAMETER.nodeListenPort != node.getPort()) {\n\n          InetAddress address = new InetSocketAddress(node.getHost(), node.getPort()).getAddress();\n          channelManager.getTrustNodes().put(address, node);\n          return true;\n        }\n      }\n    } catch (Exception e) {\n      logger.error(\"addPeer error - {}\", e.getMessage());\n    }\n    return false;\n  }\n}\n</code></pre> After completing the implementation of SetPeerServlet, you also need to register it in the node HTTP API service, FullNodeHttpApiService is the registration entry for the node HTTP API.</p> <p>Call the <code>context.addServlet</code> method in the <code>start</code> function of the <code>FullNodeHttpApiService</code> class to register the SetPeerServlet to the service. The name of the HTTP interface is defined as <code>/wallet/setpeer</code>.</p> <p><pre><code>public class FullNodeHttpApiService implements Service {\n    ......\n    @Autowired\n    private SetPeerServlet setPeerServlet;\n    .......\n\n    @Override\n    public void start() {\n        ......\n        context.addServlet(new ServletHolder(setPeerServlet), \"/wallet/setpeer\");\n        .......\n    }\n\n}\n</code></pre> Then you can debug the above code, start the java-tron node in IDEA, and interact with the node through the below Curl command in the terminal:</p> <p><pre><code>$ curl --location --request POST 'http://127.0.0.1:16667/wallet/setpeer' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"peer\":\"192.163.3.2:16667\"\n}'\n</code></pre> Return:</p> <pre><code>Success to set trusted peer:192.163.3.2:16667\n</code></pre> <p>At this point, the code development is complete, and then you need to write unit tests for the changes. For simple changes, unit tests can be written after the development code is completed, but for larger changes, it is recommended to write unit tests at the same time as development.</p>"},{"location":"developers/demo/#write-unit-test","title":"Write Unit Test","text":"<p>The unit test of the java-tron project is based on the JUnit framework. For the usage of JUnit, please refer to JUnit official website. The following is a brief introduction to the java-tron unit test case specification and common annotations.</p>"},{"location":"developers/demo/#java-tron-unit-test-cases-writing-specification","title":"java-tron Unit Test Cases Writing Specification","text":"<p>When writing java-tron unit test cases, please follow the below guidelines:</p> <ul> <li>All test classes should be placed in the test directory, and the package of the test class should be consistent with the package structure of the tested code. Generally, use <code>Test</code> as the suffix of a class name</li> <li>The test method must be decorated with <code>@Test</code> and it must be <code>public</code> <code>void</code> type. Generally, <code>test</code> is used as the prefix of the method name</li> <li>Each test method in the test class must be independently testable, and there must be no dependencies between methods</li> </ul>"},{"location":"developers/demo/#common-annotations","title":"Common Annotations","text":"<p>The following are descriptions of some commonly used annotations. For other annotations, please refer to JUnit official website documentation.</p> <ul> <li><code>@Test</code> - transforms a normal method into a test method</li> <li><code>@Ignore</code> - the decorated test method will be ignored by the test runner</li> <li><code>@BeforeClass</code> - the method will be executed before all methods, static method (only executed once globally, and it is the first running one)</li> <li><code>@AfterClass</code> - the method will be executed after all methods, static methods ( only executed once globally, and it will be the last running one)</li> <li><code>@Before</code> - it will be executed once before each test method</li> <li><code>@After</code> - it will be executed once after each test method</li> </ul>"},{"location":"developers/demo/#the-composition-of-the-unit-test-class","title":"The Composition Of The Unit Test Class","text":"<p>A unit test class should contain the following three parts:</p> <ul> <li><code>@Before</code> or <code>@BeforeClass</code> decorated function, used for initialization before test case execution</li> <li><code>@After</code> or <code>@BeforeClass</code> decorated function, used to process data cleaning after the test case execution</li> <li>Test method decorated by <code>@Test</code></li> </ul> <pre><code>public class demoTest {\n\n  @Before\n  public void init() {\n    // Initialization work before test case execution\n  }\n  @After\n  public void destroy() {\n      // Destroy work after test case execution\n\n  }\n  @Test\n  public void testDemoMethod() { \n  }\n}\n</code></pre> <p>For this example in the article, a new file should be created in the <code>framework/src/test/java/org/tron/core/services/http/</code> directory: SetPeerServletTest.java used to write test cases.</p> <pre><code>public class SetPeerServletTest {\n  private static TronApplicationContext context;\n  private static Application appT;\n  public static ChannelManager channelManager;\n  @Before\n  public void init() {\n\n    Args.setParam(new String[]{}, Constant.TEST_CONF);\n    context = new TronApplicationContext(DefaultConfig.class);\n    channelManager = context.getBean(ChannelManager.class);\n    appT = ApplicationFactory.create(context);\n    appT.initServices(Args.getInstance());\n    appT.startServices();\n    appT.startup();\n\n  }\n  @After\n  public void destroy() {\n    Args.clearParam();\n    appT.shutdownServices();\n    appT.shutdown();\n\n  }\n  @Test\n  public void testAddPeer() {\n    SetPeerServlet setPeerServlet = new SetPeerServlet();\n    Assert.assertFalse(setPeerServlet.addPeer(\"127.0.0.1\"));\n  }\n}\n</code></pre>"},{"location":"developers/demo/#code-style-check","title":"Code Style Check","text":"<p>Check the modified files one by one, and select <code>Check Current File</code> in the right-click menu. If there are code style problems, please modify them one by one according to the prompts.</p> <p> Fix the code style warning in the picture, and then check the file again until there is no warning. </p>"},{"location":"developers/demo/#commit-code","title":"Commit Code","text":"<p>Submit the code after development complete, please refer to the commit specification. <pre><code>git add .\ngit commit -m 'add a new http api setpeer'\n</code></pre></p> <p>Push the new branch to the personal remote repository:</p> <pre><code>git push origin feature/add-new-http-demo\n</code></pre>"},{"location":"developers/demo/#submit-pull-request","title":"Submit Pull Request","text":"<p>Submit a pull request (PR) from your repository to <code>tronprotocol/java-tron</code>.</p> <p></p>"},{"location":"developers/deployment/","title":"Deployment","text":""},{"location":"developers/deployment/#premise","title":"Premise","text":"<p>Create separate directories for fullnode and soliditynode</p> <p>NOTE: SolidityNode is deprecated. Now a FullNode supports all RPCs of a SolidityNode. New developers should deploy FullNode only.</p> <pre><code>/deploy/fullnode\n/deploy/soliditynode\n</code></pre> <p>Create two folders for fullnode and soliditynode.</p> <p>Clone the latest master branch of https://github.com/tronprotocol/java-tron and extract it to <pre><code>/deploy/java-tron\n</code></pre></p> <p>Make sure you have the proper dependencies.</p> <ul> <li>JDK 1.8 (JDK 1.9+ is not supported yet)</li> <li>On Linux Ubuntu system (e.g. Ubuntu 16.04.4 LTS), ensure that the machine has Oracle JDK 8, instead of having Open JDK 8 in the system. If you are building the source code by using Open JDK 8, you will get Build Failed result.</li> <li>Open UDP ports for connection to the network</li> <li>MINIMUM 2 CPU Cores</li> </ul>"},{"location":"developers/deployment/#deployment-guide","title":"Deployment Guide","text":"<p>1.\u00a0Build the java-tron project <pre><code>cd /deploy/java-tron\n./gradlew build\n</code></pre></p> <p>2.\u00a0Copy the FullNode.jar and SolidityNode.jar along with configuration files into the respective directories <pre><code>download your needed configuration file from https://github.com/tronprotocol/TronDeployment.\n\nmain_net_config.conf is the configuration for MainNet, and test_net_config.conf is the configuration for TestNet.\n\nplease rename the configuration file to `config.conf` and use this config.conf to start FullNode and SolidityNode.\n\ncp build/libs/FullNode.jar ../fullnode\n\ncp build/libs/SolidityNode.jar ../soliditynode\n</code></pre></p> <p>3.\u00a0You can now run your FullNode using the following command <pre><code>java -jar FullNode.jar -c config.conf // make sure that your config.conf is downloaded from https://github.com/tronprotocol/TronDeployment\n</code></pre></p> <p>4.\u00a0Configure the SolidityNode configuration file</p> <p>You need to edit <code>config.conf</code> to connect to your local FullNode. Change  <code>trustNode</code> in <code>node</code> to local <code>127.0.0.1:50051</code>, which is the default rpc port. Set <code>listen.port</code> to any number within the range of 1024-65535. Please don't use any ports between 0-1024 since you'll most likely hit conflicts with other system services. Also change <code>rpc port</code> to <code>50052</code> or something to avoid conflicts. Please forward the UDP port 18888 for FullNode. <pre><code>rpc {\n      port = 50052\n    }\n</code></pre></p> <p>5.\u00a0You can now run your SolidityNode using the following command\uff1a <pre><code>java -jar SolidityNode.jar -c config.conf //make sure that your config.conf is downloaded from https://github.com/tronprotocol/TronDeployment\n</code></pre></p> <p>6.\u00a0Running a Super Representative Node for mainnet <pre><code>java -jar FullNode.jar -p your private key --witness -c your config.conf(Example\uff1a/data/java-tron/config.conf)\nExample:\njava -jar FullNode.jar -p 650950B193DDDDB35B6E48912DD28F7AB0E7140C1BFDEFD493348F02295BD812 --witness -c /data/java-tron/config.conf\n</code></pre></p> <p>This is similar to running a private testnet, except that the IPs in the <code>config.conf</code> are officially declared by TRON.</p> <p>7.\u00a0Running a Super Representative Node for private testnet</p> <p>You should modify the config.conf:</p> <ul> <li>Replace existing entry in genesis.block.witnesses with your address</li> <li>Replace existing entry in seed.node ip.list with your ip list</li> <li>The first Super Node start, needSyncCheck should be set false</li> <li>Set p2pversion to 61</li> </ul> <pre><code>cd build/libs\njava -jar FullNode.jar -p your private key --witness -c your config.conf (Example\uff1a/data/java-tron/config.conf)\nExample:\njava -jar FullNode.jar -p 650950B193DDDDB35B6E48912DD28F7AB0E7140C1BFDEFD493348F02295BD812 --witness -c /data/java-tron/config.conf\n</code></pre>"},{"location":"developers/deployment/#logging-and-network-connection-verification","title":"Logging and Network Connection Verification","text":"<p>Logs for both nodes are located in <code>/deploy/\\*/logs/tron.log</code>. Use <code>tail -f /logs/tron.log/</code> to follow along with the block syncing.</p> <p>You should see something similar to this in your logs for block synchronization:</p> <p>FullNode <pre><code>12:00:57.658 INFO  [pool-7-thread-1] [o.t.c.n.n.NodeImpl](NodeImpl.java:830) Success handle block Num:236610,ID:0000000000039c427569efa27cc2493c1fff243cc1515aa6665c617c45d2e1bf\n</code></pre> SolidityNode <pre><code>12:00:40.691 INFO  [pool-17-thread-1] [o.t.p.SolidityNode](SolidityNode.java:88) sync solidity block, lastSolidityBlockNum:209671, remoteLastSolidityBlockNum:211823\n</code></pre></p>"},{"location":"developers/deployment/#stop-node-gracefully","title":"Stop Node Gracefully","text":"<p>Create file stop.sh\uff0cuse kill -15 to close FullNode.jar(or SolidityNode.jar). You need to modify pid=<code>ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'</code> to find the correct pid. <pre><code>#!/bin/bash\nwhile true; do\n  pid=`ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'`\n  if [ -n \"$pid\" ]; then\n    kill -15 $pid\n    echo \"The java-tron process is exiting, it may take some time, forcing the exit may cause damage to the database, please wait patiently...\"\n    sleep 1\n  else\n    echo \"java-tron killed successfully!\"\n    break\n  fi\ndone\n</code></pre></p>"},{"location":"developers/deployment/#fullnode-and-soliditynode-fast-deployment","title":"FullNode and SolidityNode Fast Deployment","text":"<p>Download fast deployment script, run the script according to different types of node.</p> Scope of use <p>This script could be used on Linux/MacOS, but not on Windows. Just Support FullNode and SolidityNode.</p> Download and run script <pre><code>wget https://raw.githubusercontent.com/tronprotocol/TronDeployment/master/deploy_tron.sh -O deploy_tron.sh\n</code></pre> Parameter Illustration <pre><code>bash deploy_tron.sh --app [FullNode|SolidityNode] --net [mainnet|testnet|privatenet] --db [keep|remove|backup] --heap-size &lt;heapsize&gt;\n\n--app Optional, Running application. The default node is Fullnode and it could be FullNode or SolidityNode.\n--net Optional, Connecting network. The default network is mainnet and it could be mainnet, testnet.\n--db  Optional, The way of data processing could be keep, remove and backup. Default is keep. If you launch two different networks, like from mainnet to testnet or from testnet to mainnet, you need to delete database.\n--trust-node  Optional, It only works when deploying SolidityNode. Default is 127.0.0.1:50051. The specified gRPC service of Fullnode, like 127.0.0.1:50051 or 13.125.249.129:50051.\n--rpc-port  Optional, Port of grpc. Default is 50051. If you deploy SolidityNode and FullNode on the same host\uff0cyou need to configure different ports.\n--commit  Optional, commitid of project.\n--branch  Optional, branch of project.  Mainnet default is latest release and Testnet default is master.\n--heap-size  Optional, jvm option: Xmx. The default heap-size is 0.8 * memory size.\n--work_space  Optional, default is current directory.\n</code></pre>  Deployment of FullNode on the one host  <pre><code>wget https://raw.githubusercontent.com/tronprotocol/TronDeployment/master/deploy_tron.sh -O deploy_tron.sh\nbash deploy_tron.sh\n</code></pre>  Deployment of SolidityNode on the one host  <pre><code>wget https://raw.githubusercontent.com/tronprotocol/TronDeployment/master/deploy_tron.sh -O deploy_tron.sh\n# User can self-configure the IP and Port of GRPC service in the trust-node field of SolidityNode. trust-node is the fullnode you just deploy.\nbash deploy_tron.sh --app SolidityNode --trust-node &lt;grpc-ip:grpc-port&gt;\n</code></pre>  Deployment of FullNode and SolidityNode on the same host  <pre><code># You need to configure different gRPC ports on the same host because gRPC port is available on SolidityNode and FullNodeConfigure and it cannot be set as default value 50051. In this case the default value of rpc port is set as 50041.\nwget https://raw.githubusercontent.com/tronprotocol/TronDeployment/master/deploy_tron.sh -O deploy_tron.sh\nbash deploy_tron.sh --app FullNode\nbash deploy_tron.sh --app SolidityNode --rpc-port 50041\n</code></pre>"},{"location":"developers/deployment/#grpc-gateway-deployment","title":"Grpc Gateway Deployment","text":"Summary  <p>This script helps you download the code from https://github.com/tronprotocol/grpc-gateway and deploy the code on your environment.</p>  Pre-requests  <p>Please follow the guide on https://github.com/tronprotocol/grpc-gateway Install Golang, Protoc, and set $GOPATH environment variable according to your requirement.</p>  Download and run script  <pre><code>wget https://raw.githubusercontent.com/tronprotocol/TronDeployment/master/deploy_grpc_gateway.sh -O deploy_grpc_gateway.sh\n</code></pre>  Parameter Illustration  <pre><code>bash deploy_grpc_gateway.sh --rpchost [rpc host ip] --rpcport [rpc port number] --httpport [http port number]\n\n--rpchost The fullnode or soliditynode IP where the grpc service is provided. Default value is \"localhost\".\n--rpcport The fullnode or soliditynode port number grpc service is consuming. Default value is 50051.\n--httpport The port intends to provide http service provided by grpc gateway. Default value is 18890.\n</code></pre>  Example  <p>Use default configuration\uff1a <pre><code>bash deploy_grpc_gateway.sh\n</code></pre> Use customized configuration\uff1a <pre><code>bash deploy_grpc_gateway.sh --rpchost 127.0.0.1 --rpcport 50052 --httpport 18891\n</code></pre></p>"},{"location":"developers/deployment/#event-subscribe-plugin-deployment","title":"Event Subscribe plugin Deployment","text":"<p>This is an implementation of TRON eventsubscribe model.</p> <ul> <li>api module defines IPluginEventListener, a protocol between java-tron and event plugin.</li> <li>app module is an example for loading plugin, developers could use it for debugging.</li> <li>kafkaplugin module is the implementation for kafka, it implements IPluginEventListener, it receives events subscribed from java-tron and relay events to kafka server.</li> <li>mongodbplugin mongodbplugin module is the implementation for mongodb.</li> </ul>  Setup/Build  <ol> <li>Clone the repo <code>git clone https://github.com/tronprotocol/event-plugin.git</code></li> <li>Go to eventplugin <code>cd event-plugin</code></li> <li> <p>run <code>./gradlew build</code></p> </li> <li> <p>This will produce one plugin zip, named <code>plugin-kafka-1.0.0.zip</code>, located in the <code>event-plugin/build/plugins/</code> directory.</p> </li> </ol>  Edit **config.conf** of java-tron\uff0c add the following fields: <p><pre><code>event.subscribe = {\n    path = \"\" // absolute path of plugin\n    server = \"\" // target server address to receive event triggers\n    dbconfig=\"\" // dbname|username|password\n    topics = [\n        {\n          triggerName = \"block\" // block trigger, the value can't be modified\n          enable = false\n          topic = \"block\" // plugin topic, the value could be modified\n        },\n        {\n          triggerName = \"transaction\"\n          enable = false\n          topic = \"transaction\"\n        },\n        {\n          triggerName = \"contractevent\"\n          enable = true\n          topic = \"contractevent\"\n        },\n        {\n          triggerName = \"contractlog\"\n          enable = true\n          topic = \"contractlog\"\n        }\n    ]\n\n    filter = {\n       fromblock = \"\" // the value could be \"\", \"earliest\" or a specified block number as the beginning of the queried range\n       toblock = \"\" // the value could be \"\", \"latest\" or a specified block number as end of the queried range\n       contractAddress = [\n           \"\" // contract address you want to subscribe, if it's set to \"\", you will receive contract logs/events with any contract address.\n       ]\n\n       contractTopic = [\n           \"\" // contract topic you want to subscribe, if it's set to \"\", you will receive contract logs/events with any contract topic.\n       ]\n    }\n}\n</code></pre>  * path: is the absolute path of \"plugin-kafka-1.0.0.zip\"  * server: Kafka server address  * topics: each event type maps to one Kafka topic, we support four event types subscribing, block, transaction, contractlog and contractevent.  * dbconfig: db configuration information for mongodb, if using kafka, delete this one; if using Mongodb, add like that dbname|username|password  * triggerName: the trigger type, the value can't be modified.  * enable: plugin can receive nothing if the value is false.  * topic: the value is the kafka topic to receive events. Make sure it has been created and Kafka process is running  * filter: filter condition for process trigger.  note: if the server is not 127.0.0.1, pls set some properties in config/server.properties file            remove comment and set listeners=PLAINTEXT://:9092            remove comment and set advertised.listeners to PLAINTEXT://host_ip:9092</p>"},{"location":"developers/deployment/#kafka","title":"Install Kafka  Run Kafka  Create topics to receive events, the topic is defined in config.conf  Kafka consumer  Load plugin in java-tron  Event filter","text":"<p>On Mac: <pre><code>brew install kafka\n</code></pre></p> <p>On Linux: <pre><code>cd /usr/local\nwget http://archive.apache.org/dist/kafka/0.10.2.2/kafka_2.10-0.10.2.2.tgz\ntar -xzvf kafka_2.10-0.10.2.2.tgz\nmv kafka_2.10-0.10.2.2 kafka\n\nadd \"export PATH=$PATH:/usr/local/kafka/bin\" to end of /etc/profile\nsource /etc/profile\n\n\nkafka-server-start.sh /usr/local/kafka/config/server.properties &amp;\n</code></pre> Note: make sure the version of Kafka is the same as the version set in build.gradle of eventplugin project.(kafka_2.10-0.10.2.2 kafka)</p> <p>On Mac: <pre><code>zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties &amp; kafka-server-start /usr/local/etc/kafka/server.properties\n</code></pre></p> <p>On Linux: <pre><code>zookeeper-server-start.sh /usr/local/kafka/config/zookeeper.properties &amp;\nSleep about 3 seconds\nkafka-server-start.sh /usr/local/kafka/config/server.properties &amp;\n</code></pre></p> <p>On Mac: <pre><code>kafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic block\nkafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic transaction\nkafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic contractlog\nkafka-topics --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic contractevent\n</code></pre></p> <p>On Linux: <pre><code>kafka-topics.sh  --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic block\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic transaction\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic contractlog\nkafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic contractevent\n</code></pre></p> <p>On Mac: <pre><code>kafka-console-consumer --bootstrap-server localhost:9092  --topic block\nkafka-console-consumer --bootstrap-server localhost:9092  --topic transaction\nkafka-console-consumer --bootstrap-server localhost:9092  --topic contractlog\nkafka-console-consumer --bootstrap-server localhost:9092  --topic contractevent\n</code></pre></p> <p>On Linux: <pre><code>kafka-console-consumer.sh --zookeeper localhost:2181 --topic block\nkafka-console-consumer.sh --zookeeper localhost:2181 --topic transaction\nkafka-console-consumer.sh --zookeeper localhost:2181 --topic contractlog\nkafka-console-consumer.sh --zookeeper localhost:2181 --topic contractevent\n</code></pre></p> <ul> <li>add --es to command line, for example: <pre><code> java -jar FullNode.jar -p privatekey -c config.conf --es\n</code></pre></li> </ul> <p>which is defined in config.conf, path: event.subscribe <pre><code>filter = {\n       fromblock = \"\" // the value could be \"\", \"earliest\" or a specified block number as the beginning of the queried range\n       toblock = \"\" // the value could be \"\", \"latest\" or a specified block number as end of the queried range\n       contractAddress = [\n           \"TVkNuE1BYxECWq85d8UR9zsv6WppBns9iH\" // contract address you want to subscribe, if it's set to \"\", you will receive contract logs/events with any contract address.\n       ]\n\n       contractTopic = [\n           \"f0f1e23ddce8a520eaa7502e02fa767cb24152e9a86a4bf02529637c4e57504b\" // contract topic you want to subscribe, if it's set to \"\", you will receive contract logs/events with any contract topic.\n       ]\n    }\n</code></pre></p>"},{"location":"developers/deployment/#mongo","title":"Download and install MongoDB","text":"<p>** Suggested Configuration **</p> <ul> <li>CPU/ RAM: 16Core / 32G</li> <li>DISK: 500G</li> <li>System: CentOS 64</li> </ul> <p>The version of MongoDB is 4.0.4, below is the command:</p> <ul> <li>cd /home/java-tron</li> <li>curl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.4.tgz</li> <li>tar zxvf mongodb-linux-x86_64-4.0.4.tgz</li> <li>mv mongodb-linux-x86_64-4.0.4 mongodb</li> </ul> <p>** Set environment ** - export MONGOPATH=/home/java-tron/mongodb/ - export PATH=PATH:MONGOPATH/bin</p> <p>** Create mongodb config ** The path is : /etc/mongodb/mgdb.conf</p> <ul> <li>cd /etc/mongodb</li> <li>touch mgdb.conf</li> </ul> <p>Create data&amp;log folder for mongodb Create data, log subfolder in mongodb directory,  and add their absolute path to mgdb.conf</p> <p>** Example: **</p> <ul> <li>dbpath=/home/java-tron/mongodb/data</li> <li>logpath=/home/java-tron/mongodb/log/mongodb.log</li> <li>port=27017</li> <li>logappend=true</li> <li>fork=true</li> <li>bind_ip=0.0.0.0</li> <li>auth=true</li> <li>wiredTigerCacheSizeGB=2</li> </ul> <p>** Note: ** - bind_ip must be configured to 0.0.0.0\uff0cotherwise remote connection will be refused. - wiredTigerCacheSizeGB, must be configured to prevent OOM</p> <p>** Launch MongoDB **   - mongod  --config /etc/mongodb/mgdb.conf</p> <p>** Create admin account: ** - mongo - use admin - db.createUser({user:\"root\",pwd:\"admin\",roles:[{role:\"root\",db:\"admin\"}]})</p> <p>** Create eventlog and its owner account **</p> <ul> <li>db.auth(\"root\", \"admin\")</li> <li>use eventlog</li> <li>db.createUser({user:\"tron\",pwd:\"123456\",roles:[{role:\"dbOwner\",db:\"eventlog\"}]})</li> </ul> <p>database: eventlog, username:tron, password: 123456</p> <p>** Firewall rule: ** - iptables -A INPUT -p tcp -m state --state NEW -m tcp --dport 27017 -j ACCEPT</p> <p>** Remote connection via mongo: **</p> <ul> <li>mongo 47.90.245.68:27017</li> <li>use eventlog</li> <li>db.auth(\"tron\", \"123456\")</li> <li>show collections</li> <li>db.block.find()</li> </ul> <p>** Query block trigger data: **</p> <ul> <li>db.block.find({blockNumber: {$lt: 1000}});  // return records whose blockNumber less than1000</li> </ul> <p>** Set database index to speedup query: **</p> <p>cd /{projectPath} sh insertIndex.sh</p>"},{"location":"developers/deployment/#event-query-service-deployment","title":"Event query service deployment","text":"Download sourcecode <p>Download sourcecode</p> <p>git clone https://github.com/tronprotocol/tron-eventquery.git cd troneventquery</p>  Build  <ul> <li>mvn package</li> </ul> <p>After the build command is executed successfully, troneventquery jar to release will be generated under troneventquery/target directory.</p> <p>Configuration of mongodb \"config.conf\" should be created for storing mongodb configuration, such as database name, username, password, and so on. We provided an example in sourcecode, which is \" troneventquery/config.conf \". Replace with your specified configuration if needed.</p> <p>Note:</p> <p>Make sure the relative path of config.conf and troneventquery jar. The config.conf 's path is the parent of troneventquery jar.</p> <ul> <li>mongo.host=IP</li> <li>mongo.port=27017</li> <li>mongo.dbname=eventlog</li> <li>mongo.username=tron</li> <li>mongo.password=123456</li> <li>mongo.connectionsPerHost=8</li> <li>mongo.threadsAllowedToBlockForConnectionMultiplier=4</li> </ul> <p>Any configuration could be modified except mongo.dbname, \"eventlog\" is the specified database name for event subscribe.</p>  Run  <ul> <li>troneventquery/deploy.sh is used to deploy troneventquery</li> <li>troneventquery/insertIndex.sh is used to setup mongodb index to speedup query.</li> </ul>"},{"location":"developers/deployment/#advanced-configurations","title":"Advanced Configurations","text":"<p>Read the Advanced Configuration</p>"},{"location":"developers/governance/","title":"Governance","text":"<p>The governance of the TRON network is accomplished by modifying the network parameters. The modification of network parameters is also called a network upgrade. Anyone can propose a discussion on modifying one or several network parameters, however, only super representatives or super representative partners can submit voting requests on-chain. Before the voting deadline, 27 super representatives can vote on the proposal. After the voting deadline arrives and the number of votes meets the requirement, the proposal will take effect.</p> <p>You can view the list of the past completed proposals here.</p> <p>Please according to the following process to propose a voting request:</p> <ol> <li>Initiate a discussion on proposal</li> <li>Community discussion</li> <li>Initiate a voting request</li> <li>Voting and taking effective</li> </ol>"},{"location":"developers/governance/#initiate-a-discussion-on-a-proposal","title":"Initiate a discussion on a proposal","text":"<p>Any TRON network participant can initiate a discussion on a proposal. Please create a proposal discussion issue in TIP repository. The Issue is used to introduce the proposal in detail, including the motivation of this proposal, the TRON network parameters to be modified and their values, technical specifications, and the impact of the modification, etc. for a new proposal, please refer to this example to create an issue for discussion.</p> <p>Below are the specifications of how to write an issue for proposal discussion.</p>"},{"location":"developers/governance/#title","title":"Title","text":"<p>We hope that all users of the TRON ecosystem can participate in network governance. In order to be able to better publicize in the community, it is recommended to name the proposal and put the name at the beginning of the title. Here is an example:</p> <pre><code>Palma Upgrade: proposal to change the unit price of energy to 210 sun\n</code></pre>"},{"location":"developers/governance/#body","title":"Body","text":"<p>In the issue body, the content of the proposal should be introduced in detail, including motivation, estimated time to initiate the proposal vote and effective time of the proposal, how to initiate a proposal vote, technical specifications or background information of the proposal, etc.</p> <pre><code># Simple Summary\nBriefly introduce the parameters to be modified by this proposal and their values, and summarize the issue it wants to solve\n\n# Motivation\nDescribe the motivation for the proposal, what is the problem encountered now, that is, why one or some dynamic parameters need to be modified.\n\n# Timeline\nIndicate when to initiate the proposal voting request, and the estimated effective date of the proposal. After the issue is proposed, two weeks are generally reserved for community discussion. Therefore, the proposal initiation time set in the Issue should be two weeks after the issue is proposed.\n\n# How to Initialize the Voting Request\nIndicates the command to initiate the proposal voting request.\n\n# Technical Specification / Background\nThe specific technical specifications or background information of the proposal\n</code></pre>"},{"location":"developers/governance/#community-discussion","title":"Community discussion","text":"<p>After the proposal issue is initiated, the initiator of the issue should try his best to promote it in the community, attract community users to participate in the discussion on the proposal, and update the proposal according to the results of the discussion.</p>"},{"location":"developers/governance/#initiate-a-voting-request","title":"Initiate a voting request","text":"<p>Generally, the initiation time of the voting request set in the proposal is two weeks after the proposed issue is initiated. When the community has already fully discussed on the proposal and formed a community consensus, the super representative or super representative partner will initiate a voting request on the chain.</p>"},{"location":"developers/governance/#vote-and-take-effect","title":"Vote and take effect","text":"<p>The validity period of the voting request initiated on-chain is 3 days. During the validity period, all 27 super representatives can vote for the proposal. When the voting deadline is reached, if the number of votes obtained is equal to or greater than 18 votes, the proposal will take effect.</p>"},{"location":"developers/issue-workflow/","title":"Issue Work Flow","text":"<p>We encourage community contributors to participate in the submission and discussion of java-tron issues. You can submit your questions or ideas in the form of issues, or participate in issue discussions or help to provide solutions. Your every question or comment is driving java-tron's development. We thank you for your contribution to java-tron.</p>"},{"location":"developers/issue-workflow/#submit-an-issue","title":"Submit an Issue","text":"<p>If you encounter java-tron related problems or find related bugs, you are welcome to submit an Issue, but please respect the following rules:</p> <ul> <li> <p>Search for existing issues</p> <p>Please check to see if someone has already reported your issue or requested your idea, this will not only solve your problem quickly but also avoid duplicate issues.</p> </li> <li> <p>Submit an issue</p> <p>Please select the type of issue you want to report and fill in the issue content according to the template requirements.</p> <ul> <li><code>Ask a question</code> - Please elaborate on the problem you encountered, the results you expected, and the results you actually saw, so community participants can better understand your problem and come up with a solution faster.</li> <li><code>Report a bug</code> - In addition to clarifying the problem, the expected behaviour, and the actual behaviour, the steps to reproduce the bug should also be described, and the java-tron log and backtrace when the problem occurs should be attached.</li> <li><code>Request a feature</code> - Please clarify why should this feature exist\uff0cwhat are the use-cases\uff0cdo you have ideas regarding the implementation of this feature and are you willing to implement this feature.</li> </ul> </li> </ul>"},{"location":"developers/issue-workflow/#issue-handling-process","title":"Issue Handling Process","text":"<p>The issue handling process is as follows:</p> <ol> <li>Tag Issues - We hold weekly meetings to categorize Issues and tag Issues with appropriate Labels.</li> <li>Assign an Issue - Assign an Issue to one or several community core developers, and the core developers will participate in Issue investigations and discussions.</li> <li>Community Discussion - anyone can participate in the investigation and discussion of the Issue, and write their thoughts or opinions in the comments, and the solution to the problem can be obtained from the community discussion.</li> <li>Close the Issue - Issue submitters can close the Issue at any time. When the issue is resolved, or it has not been discussed by the community for a long time, we will close the Issue. Issue submitters or other users can also reopen the Issue as needed.</li> </ol>"},{"location":"developers/issue-workflow/#issue-labels","title":"Issue Labels","text":"<p>Use the following labels according to the Issue feature:</p> <ul> <li>topic<ul> <li><code>topic: Block/Transaction</code></li> <li><code>topic: Build</code></li> <li><code>topic: Consensus</code></li> <li><code>topic: DB</code></li> <li><code>topic: Deployment</code></li> <li><code>topic: Documentation</code></li> <li><code>topic: Event subscribe</code></li> <li><code>topic: gRPC/HTTP api</code></li> <li><code>topic: Net</code></li> <li><code>topic: Performance</code></li> <li><code>topic: Resource manage</code></li> <li><code>topic: Shielded Transaction</code></li> <li><code>topic: Smart contract</code></li> <li><code>topic: Solidity</code></li> <li><code>topic: Testnet/Privatenet</code></li> </ul> </li> <li> <p>type</p> <ul> <li><code>type: Announcement</code></li> <li><code>type: Bug</code></li> <li><code>type: Enhancement</code></li> <li><code>type: Feature Request</code></li> <li><code>type: Manual</code></li> <li><code>type: Other</code></li> <li><code>type: Question</code></li> </ul> </li> <li> <p>resolution</p> <ul> <li><code>resolution: Duplicated</code></li> <li><code>resolution: Needs More Information</code></li> <li><code>resolution: Wontfix</code></li> </ul> </li> <li><code>improvement</code></li> </ul>"},{"location":"developers/java-tron/","title":"Developer Guide","text":"<p>Thank you for considering to help out with the source code! We welcome contributions from anyone, and are grateful for even the smallest of fixes!</p> <p>GitHub is used to track issues and contribute code, suggestions, feature requests or documentation. If you want to participate in java-tron development, please follow the Github code submission process as follows:</p> <ul> <li>Fork java-tron repository</li> <li>Fix the code</li> <li>Commit the code</li> <li>Send a pull request</li> <li>The maintainers review and merge into the main code base</li> </ul> <p>For small fixes, you can send a pull request (PR) directly, but make sure the PR includes a detailed description. For more complex changes, you need to submit an issue to the TIP repository detailing your motivations, implementation plans, etc. For how to submit a TIP issue, please refer to TIP Specification.</p> <p>We encourage java-tron developers to submit PRs as soon as possible. Even if they are not fully developed, you can submit a PR first, so that other developers can know that the TIP Issue corresponding to this PR is in the state of <code>In Progress</code>.</p> <p>Developers should develop and submit a PR based on the <code>develop</code> branch, reviewers will review the PR according to Code Review Guidelines.</p>"},{"location":"developers/java-tron/#key-branches","title":"Key Branches","text":"<p>java-tron only has <code>master</code>, <code>develop</code>, <code>release-*</code>, <code>feature-*</code>, and <code>hotfix-*</code> branches, which are described below:</p> <ul> <li> <p><code>develop</code> branch</p> <p>The <code>develop</code> branch only accepts merge requests from other forked branches or<code>release_*</code> branches. It is not allowed to directly push changes to the <code>develop</code> branch. A <code>release_*</code> branch has to be pulled from the develop branch when a new build is to be released.</p> </li> <li> <p><code>master</code> branch</p> <p><code>release_*</code> branches and <code>hotfix/*</code> branches should only be merged into the <code>master</code> branch when a new build is released.</p> </li> <li> <p><code>release</code> branch</p> <p><code>release_*</code> is a branch pulled from the <code>develop</code> branch for release. It should be merged into <code>master</code> after a regression test and will be permanently kept in the repository. If a bug is identified in a <code>release_*</code> branch, its fixes should be directly merged into the <code>release_*</code> branch. After the fixes passing the regression test, the <code>release_*</code> branch should be merged back into the <code>develop</code> branch. Essentially, a <code>release_*</code> branch serves as a snapshot for each release.</p> </li> <li> <p><code>feature</code> branch</p> <p><code>feature/*</code> is an important feature branch pulled from the <code>develop</code> branch. After the <code>feature/*</code> branch is code-complete, it should be merged back to the <code>develop</code> branch. The <code>feature/*</code> branch is maintainable.</p> </li> <li> <p><code>hotfix</code> branch</p> <p>It is pulled from the <code>master</code> branch and should be merged back into the <code>master</code> branch and the <code>develop</code> branch. Only pull requests of the fork repository (pull requests for bug fixes) should be merged into the <code>hotfix/</code> branch. <code>hotfix/</code> branches are used only for fixing bugs found after release.</p> </li> </ul>"},{"location":"developers/java-tron/#submitting-code","title":"Submitting Code","text":"<p>If you want to contribute codes to java-tron, please follow the following steps:</p> <ul> <li> <p>Fork java-tron repository</p> <p>Fork a new repository from tronprotocol/java-tron to your personal code repository</p> <pre><code>$ git clone https://github.com/yourname/java-tron.git\n\n$ git remote add upstream https://github.com/tronprotocol/java-tron.git   (\"upstream\" refers to upstream projects repositories, namely tronprotocol's repositories, and can be named as you like it. We usually call it \"upstream\" for convenience) \n</code></pre> </li> <li> <p>Edit the code in the fork repository </p> <p>Before developing new features, please synchronize your fork repository with the upstream repository.</p> <pre><code>git fetch upstream \ngit checkout develop \ngit merge upstream/develop --no-ff   (Add --no-ff to turn off the default fast merge mode)\n</code></pre> <p>Pull a new branch from the develop branch of your repository for local development. Please refer to Branch Naming Conventions\u3002</p> <pre><code>git checkout -b feature/branch_name develop\n</code></pre> <p>Write and commit the new code when it is completed. Please refer to Commit Messages <pre><code>git add .\ngit commit -m 'commit message'\n</code></pre></p> <p>Commit the new branch to your personal remote repository</p> <pre><code>git push origin new_feature\n</code></pre> </li> <li> <p>Push code</p> <p>Submit a pull request (PR) from your repository to <code>tronprotocol/java-tron</code>. Please be sure to click on the link in the red box shown below. Select the base branch for tronprotocol and the compare branch for your personal fork repository. </p> </li> </ul>"},{"location":"developers/java-tron/#code-review-guidelines","title":"Code Review Guidelines","text":"<p>The only way to get code into java-tron is to send a pull request. Those pull requests need to be reviewed by someone. The following guide explains our expectations around PRs for both authors and reviewers.</p>"},{"location":"developers/java-tron/#the-process","title":"The Process","text":"<p>The first decision to make for any PR is whether it\u2019s worth including at all. To make the decision we must understand what the PR is about. If there isn\u2019t enough description content or the diff is too large, request an explanation. Anyone can do this part.</p> <p>We expect that reviewers check the style and functionality of the PR, providing comments to the author using the GitHub review system. Reviewers should follow up with the PR until it is in good shape, then approve the PR. Approved PRs can be merged by the code maintainer.</p> <p>When communicating with authors, be polite and respectful.</p>"},{"location":"developers/java-tron/#functional-checks","title":"Functional Checks","text":"<p>For PRs that fix an issue, reviewers should try reproduce the issue and verify that the pull request actually fixes it. Authors can help with this by including a unit test that fails without (and passes with) the change.</p> <p>For PRs adding new features, reviewers should attempt to use the feature and comment on how it feels to use it. For example: if a PR adds a new command line flag, use the program with the flag and comment on whether the flag feels useful.</p> <p>We expect appropriate unit test coverage. Reviewers should verify that new code is covered by unit tests.</p>"},{"location":"developers/java-tron/#code-style","title":"Code Style","text":"<p>We would like all developers to follow a standard development flow and coding style. Therefore, we suggest the following:</p> <ol> <li>Review the code with coding style checkers.</li> <li>Review the code before submission.</li> <li>Run standardized tests.</li> </ol> <p><code>Sonar</code>-scanner and <code>Travis CI</code> continuous integration scanner will be automatically triggered when a pull request has been submitted. When a PR passes all the checks, the java-tron maintainers will then review the PR and offer feedback and modifications when necessary.  Once adopted, the PR will be closed and merged into the <code>develop</code> branch.</p> <p>We are glad to receive your pull requests and will try our best to review them as soon as we can. Any pull request is welcome, even if it is for a typo.</p> <p>Please kindly address the issue you find. We would appreciate your contribution.</p> <p>Please do not be discouraged if your pull request is not accepted, as it may be an oversight. Please explain your code as detailed as possible to make it easier to understand.</p> <p>Please make sure your submission meets the following code style:</p> <ul> <li>The code must conform to Google Code Style.</li> <li>The code must have passed the Sonar scanner test.</li> <li>The code has to be pulled from the <code>develop</code> branch.</li> </ul>"},{"location":"developers/java-tron/#branch-naming-conventions","title":"Branch Naming Conventions","text":"<p>Branch naming should follow the following guidelines:</p> <ol> <li>Always name the <code>master</code> branch and <code>develop</code> branch as \"master\" and \"develop\".</li> <li>Name the <code>release_*</code> branch using version numbers, which are assigned by the project lead (e.g., Odyssey-v3.1.3, 3.1.3, etc.).</li> <li>Use <code>hotfix/</code> as the prefix of the <code>hotfix</code> branch, briefly describe the bug in the name, and connect words with underline (e.g., hotfix/typo, hotfix/null_point_exception, etc.).</li> <li>Use <code>feature/</code> as the prefix of the <code>feature</code> branch, briefly describe the feature in the name, and connect words with underline (e.g., feature/new_resource_model, etc.).</li> </ol>"},{"location":"developers/java-tron/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<p>Pull Requests should follow the following specifications:</p> <ol> <li>Create one PR for one issue.</li> <li>Avoid massive PRs.</li> <li>Write an overview of the purpose of the PR in its title.</li> <li>Write a description of the PR for future reviewers.</li> <li>Elaborate on the feedback you need (if any).</li> </ol>"},{"location":"developers/java-tron/#commit-messages","title":"Commit Messages","text":"<p>Commit messages should follow the rule below, we provide a template with corresponding instructions.</p> <p>Template: <pre><code>&lt;commit type&gt;(&lt;scope&gt;): &lt;subject&gt;\n&lt;BLANK LINE&gt;\n&lt;body&gt;\n&lt;BLANK LINE&gt;\n&lt;footer&gt;\n</code></pre></p> <p>The message header is a single line that contains a succinct description of the change containing a <code>commit type</code>, an optional <code>scope</code> and a subject.</p> <p><code>commit type</code> describes the kind of change that this commit is providing: * feat     (new feature) * fix      (bug fix) * docs     (changes to documentation) * style    (formatting, missing semi colons, etc. no code change) * refactor (refactoring production code) * test     (adding or refactoring tests. no production code change) * chore    (updating grunt tasks etc. no production code change)</p> <p>The <code>scope</code> can be anything specifying place of the commit change. For example:<code>protobuf</code>,<code>api</code>,<code>test</code>,<code>docs</code>,<code>build</code>,<code>db</code>,<code>net</code>.You can use * if there isn't a more fitting scope.</p> <p>The <code>subject</code> contains a succinct description of the change: 1. Limit the subject line, which briefly describes the purpose of the commit, to 50 characters. 2. Start with a verb and use first-person present-tense (e.g., use \"change\" instead of \"changed\" or \"changes\"). 3. Do not capitalize the first letter. 4. Do not end the subject line with a period. 5. Avoid meaningless commits. It is recommended to use the git rebase command.</p> <p>Message body use the imperative, present tense: \"change\" not \"changed\" nor \"changes\". The body should include the motivation for the change and contrast this with previous behavior.</p> <p>Here is an example: <pre><code>feat(block): optimize the block-producing logic\n\n1. increase the priority that block producing thread acquires synchronization lock\n2. add the interruption exception handling in block-producing thread\n\nCloses #1234\n</code></pre> If the purpose of this submission is to modify one issue, you need to refer to the issue in the footer, starting with the keyword Closes, such as <code>Closes #1234</code>, if multiple bugs have been modified, separate them with commas, such as <code>Closes #123, #245, #992</code>.</p>"},{"location":"developers/java-tron/#special-situations-and-how-to-deal-with-them","title":"Special Situations And How To Deal With Them","text":"<p>As a reviewer, you may find yourself in one of the situations below. Here\u2019s how to deal with those:</p> <ul> <li>The author doesn\u2019t follow up: ping them after a while (i.e. after a few days). If there is no further response, close the PR or complete the work yourself.</li> <li>Author insists on including refactoring changes alongside bug fixes: We can tolerate small refactorings alongside any change. If you feel lost in the diff, ask the author to submit the refactoring as an independent PR, or at least as an independent commit in the same PR.</li> <li>Author keeps rejecting your feedback: You may close the PR.</li> </ul>"},{"location":"developers/java-tron/#conduct","title":"Conduct","text":"<p>While contributing, please be respectful and constructive, so that participation in our project is a positive experience for everyone.</p> <p>Examples of behavior that contributes to creating a positive environment include:</p> <ul> <li>Using welcoming and inclusive language   Being respectful of differing viewpoints and experiences</li> <li>Gracefully accepting constructive criticism</li> <li>Focusing on what is best for the community</li> <li>Showing empathy towards other community members</li> </ul> <p>Examples of unacceptable behavior include:</p> <ul> <li>The use of sexualized language or imagery and unwelcome sexual attention or advances</li> <li>Trolling, insulting/derogatory comments, and personal or political attacks</li> <li>Public or private harassment</li> <li>Publishing others\u2019 private information, such as a physical or electronic address, without explicit permission</li> <li>Other conduct which could reasonably be considered inappropriate in a professional setting</li> </ul>"},{"location":"developers/run-in-idea/","title":"Configure the IntelliJ IDEA IDE","text":"<p>For Java development, in order to reduce development difficulty and improve development efficiency, developers should first select and configure a Java integrated development environment, such as IntelliJ IDEA, NetBeans or Eclipse, etc. This article will take InteliJ IDEA as an example to introduce how to configure java-tron integration development environment.</p> <p>This article describes the configuration of the java-tron integrated development environment in InteliJ IDEA. java-tron nodes support to be deployed on <code>Linux</code> or <code>MacOS</code> operating systems, and rely on <code>Oracle JDK 1.8</code>, other versions of JDK are not supported. Before configuring the InteliJ IDE development environment, please ensure the following prerequisites:</p> <ul> <li>Configure the development environment on <code>Linux</code> or <code>MacOS</code> operating system</li> <li><code>Oracle JDK 1.8</code>, <code>git</code>, InteliJ IDEA are installed </li> </ul>"},{"location":"developers/run-in-idea/#configure-intelij-idea","title":"Configure InteliJ IDEA","text":"<p>The IntelliJ IDEA configuration steps are as follows:</p> <ul> <li> <p>Install Lombok plugin</p> <p>Search for <code>lombok</code> in [IDEA]-&gt;[Preferences]-&gt;[Plugins] to install <code>Lombok</code> plugin, <code>Lombok</code> makes java-tron code more concise by adding annotations.</p> </li> <li> <p>Enable <code>Enable annotation processing</code> configuration item       </p> </li> <li> <p>Check the JDK version and make sure that <code>Oracle JDK 1.8</code> is used in IntelliJ IDEA       </p> </li> <li> <p>Download java-tron source code</p> <p>Clone the java-tron source code locally and switch to the <code>develop</code> branch. <pre><code>$ git clone https://github.com/tronprotocol/java-tron.git\n$ git checkout -t origin/develop\n</code></pre></p> </li> </ul>"},{"location":"developers/run-in-idea/#configure-the-code-style-check-plugin","title":"Configure the code style check plugin","text":"<p>The java-tron code style needs to meet the <code>Google check style</code> specification. In IDEA, you can use the <code>Checkstyle</code> plugin to check whether the code conforms to the <code>Google check style</code> specification. The installation and configuration process of the plugin is as follows:</p> <ul> <li> <p>Search for <code>checkstyle</code> in [IDEA]-&gt;[Preferences]-&gt;[Plugins] to install the plugin     </p> </li> <li> <p>Code style configuration</p> <p>First, download the java-tron code style check configuration file, then in the Checkstyle configuration page, click \"+ \", choose to use the \"checkStyleAll.xml\" just downloaded, after adding that, you can see this file in the \"Configuration Files\" list, and finally click \"Apply\" to complete the configuration. </p> <p>After configuring the <code>Checkstyle</code> plugin, you can use <code>Checkstyle</code> to check the code. <code>Checkstyle</code> can check a module or the whole project, and can also check a single file. Select \"Check Current File\" in the right-click menu of the file editor, and Checkstyle will check the file. If a code problem is detected, you need to modify it according to the prompts. Code can only be submitted when there are no code problems. </p> </li> </ul>"},{"location":"developers/run-in-idea/#compile-java-tron","title":"Compile java-tron","text":"<p>You can use the terminal to compile java-tron with the following command in the java-tron project directory:</p> <p><pre><code>$ ./gradlew clean build\n</code></pre> The above compile command will execute all test cases, you can use <code>-x test</code> to skip the execution of test cases: <pre><code>$ ./gradlew clean build -x test\n</code></pre></p> <p>You can also compile java-tron in IDEA: Open the java-tron project in IDEA and click \"Build\" -&gt; \"Build Project\" to compile the project.</p>"},{"location":"developers/run-in-idea/#run-and-debug","title":"Run and Debug","text":"<p>Before running java-tron, you need to create a working directory to store the database files and log files generated when the node is running. <pre><code>$ mkdir /Users/javatrondeploy\n</code></pre></p> <p>In the \"Run/Debug Configurations\" configuration panel, specify the JDK version running java-tron as <code>java 8</code>, and then configure the command parameters for running java-tron, for example, specify the node configuration file through the <code>-c</code> parameter as <code>config.conf</code>.</p> <p>\"Working directory\" is configured as the working directory of java-tron created earlier. When java-tron starts, it will look for the <code>config.conf</code> configuration file in this directory. Please make sure that <code>config.conf</code> has already been in this directory.</p> <p></p> <p>After the setting, click the \"Apply\" button to complete the configuration. Then you can click \"Run\"-&gt;\"Run FullNode\" in IDEA to start the java-tron node or click \"Run\"-&gt;\"Debug FullNode\" to start the node in debug mode. After the node is started, java-tron logs are stored in the working directory. </p> <p>If you want to debug the java-tron code, you can set breakpoints in the java-tron code and start it in debug mode, so that you can trace the debug code line by line. </p>"},{"location":"developers/tips/","title":"TRON Improvement Proposals (TIPs)","text":"<p>TIP stands for TRON Improvement Proposal. TIPs record the entire process of TRON improvement, including the process of community making suggestions, discussions, and adoption. A TIP is a design document about a proposal, including the rationale and technical specifications of the proposal. Community users can read the TIP document to learn more about the proposal.</p> <p>TIPs are the unit around which governance happens in TRON\uff0canyone is free to propose one, and then community participants will debate to determine if it should be adopted as a standard or included in a network upgrade. The TIP author is responsible for building consensus within the community and documenting dissenting opinions. </p>"},{"location":"developers/tips/#tip-types","title":"TIP Types","text":"<p>TIPs are mainly divided into <code>Standard Track</code> and <code>Informational</code>:</p> <ul> <li> <p><code>Standard Track</code> :  Describes any change that affects most or all TRON implementations, such as a change in block or transaction validity rules, proposed application standards/conventions, or any change or addition that affects the interoperability of applications using TRON. Furthermore, Standard TIPs can be broken down into the following categories.</p> <ul> <li><code>Core</code>:  Improvements requiring a consensus fork, as well as changes that are not necessarily consensus critical but may be relevant to \"core dev\" discussions.</li> <li><code>Networking</code>: Improvements around network protocol.</li> <li><code>Interface</code>:  Improvements around client API/RPC specifications and standards.</li> <li><code>TRC</code>\uff1aApplication-level standards and conventions, including contract standards such as token standards (TRC-20).</li> <li><code>TVM</code>\uff1amprovements around TRON Virtual Machine.</li> </ul> </li> <li> <p><code>Informational</code>: Describes a TRON design issue, or provides general guidelines or information to the TRON community, but does not propose a new feature.</p> </li> </ul>"},{"location":"developers/tips/#tip-work-flow","title":"TIP Work Flow","text":"<p>Before you submit a TIP, you need to create an issue for comment and add the issue URL to your TIP header. The format of a TIP issue is consistent with the content of TIP. The process of submitting TIP is as follows:</p> <ol> <li>Fork the TIP repository by clicking \"Fork\" in the top right.</li> <li>Add your TIP to your fork of the repository. There is a TIP template here.</li> <li>Submit a Pull Request to TRON's TIPs repository.</li> </ol> <p>Please use <code>markdown</code> to write TIP in strict accordance with the requirements of template. Make sure you include a discussions-to header with the URL to a discussion forum or open GitHub issue where people can discuss the TIP as a whole. If a TIP is about the feature development of java-tron, and a PR of the development exists, in your TIP and your java-tron's PR you need to refer each other's github link to make the requirements analysis of new features and development code traceable.</p> <p>Your first PR for a new TIP will be in the state of <code>draft</code>. It must meet the formatting criteria enforced by the build. An editor will manually review it and assign it a number before merging it.</p> <p>When you believe your TIP is mature and ready to progress past the <code>draft</code> phase, you should do one of two things:</p> <ul> <li>For a Standards Track TIP of type Core, ask to have your issue added to the agenda of an upcoming All Core Devs meeting, where it can be discussed for inclusion in a future hard fork. If core devs agree to include it, the TIP editors will update the state of your TIP to <code>Accepted</code>.</li> <li>For all other TIPs, open a PR changing the state of your TIP to <code>Final(non-Core)</code>. An editor will review your draft and ask if anyone objects to its being finalized. If the editor decides there is no rough consensus, they may close the PR and request you fix the issues in the draft before trying again.</li> </ul>"},{"location":"developers/tips/#tip-status","title":"TIP Status","text":"<p>A TIP may go through the following states:</p> <ul> <li><code>Draft</code>: A TIP that is undergoing rapid iteration and changes.</li> <li><code>Last Call</code>:  A TIP that is done with its initial iteration and ready for review by a wide audience.</li> <li><code>Accepted</code>: A core TIP that has been in the <code>Last Call</code> for at least 2 weeks and any technical changes that were requested have been addressed by the author. The process for Core Devs to decide whether to encode a TIP into their clients as part of a hard fork is not part of the TIP process. If such a decision is made, the TIP will move to the <code>final</code>.</li> <li><code>Final (non-Core)</code>: A TIP that has been in the <code>Last Call</code> for at least 2 weeks and any technical changes that were requested have been addressed by the author. </li> <li><code>Final (Core)</code>: A TIP that the Core Devs have decided to implement and release in a future version or has already been released.</li> <li><code>Active</code>: If the TIPs are never meant to be completed, the TIPs may have a status of <code>Active</code>.</li> <li><code>Abandoned</code>: If a TIP is no longer pursued by the original authors or it may not be a (technically) preferred option anymore.</li> <li><code>Rejected</code>: A TIP that is fundamentally broken or a Core TIP that was rejected by the Core Devs and will not be implemented.</li> <li><code>Superseded</code>: A TIP which was previously Final but is no longer considered state-of-the-art. Another TIP will be in the Final status and cite the Superseded TIP.</li> <li><code>Deferred</code>: A TIP which isn't accepted now, may be accepted in the future.</li> </ul>"},{"location":"developers/tips/#tip-structure","title":"TIP Structure","text":"<p>A TIP consists of a title preamble and body content.</p>"},{"location":"developers/tips/#tip-header-preamble","title":"TIP Header Preamble","text":"<p>The TIP header preamble contains the TIP number, a short descriptive title (limited to a maximum of 44 characters), author details, discussion link, TIP status, TIP type, creation time, etc. Please refer to the specific format: <pre><code>---\ntip: &lt;to be assigned&gt;\ntitle: &lt;TIP title&gt;\nauthor: &lt;a list of the author's or authors' name(s) and/or username(s), or name(s) and email(s), e.g. (use with the parentheses or triangular brackets): FirstName LastName (@GitHubUsername), FirstName LastName &lt;foo@bar.com&gt;, FirstName (@GitHubUsername) and GitHubUsername (@GitHubUsername)&gt;\ndiscussions-to: &lt;URL&gt;\nstatus: &lt;Draft | Last Call | Accepted | Final | Deferred&gt;\ntype: &lt;Standards Track (Core, Networking, Interface, TRC, VM) | Informational&gt;\ncategory (*only required for Standard Track): &lt;Core | Networking | Interface | TRC | VM&gt;\ncreated: &lt;date created on, in ISO 8601 (yyyy-mm-dd) format&gt;\nrequires (*optional): &lt;TIP number(s)&gt;\nreplaces (*optional): &lt;TIP number(s)&gt;\n---  \n</code></pre></p>"},{"location":"developers/tips/#tip-body","title":"TIP Body","text":"<p>TIP body should have the following parts:</p> <ul> <li><code>Simple Summary</code>\uff1aProvide a simplified explanation of the TIP.</li> <li><code>Abstract</code>\uff1a A short (~200 word) description of the technical issue being addressed. It should be a very terse and human-readable version of the <code>specification</code> section. Someone should be able to read only the abstract to get the gist of what this specification does.</li> <li><code>Motivation</code>: (optional) A motivation section is critical for TIPs. It should clearly explain why the existing protocol specification is inadequate to address the problem that the TIP solves. This section may be omitted if the motivation is evident.</li> <li><code>Specification</code>\uff1aThe technical specification should detail the syntax and semantics of any new feature.</li> <li><code>Rationale</code>\uff1aThe rationale fleshes out the specification by describing what motivated the design and why particular design decisions were made. It should describe alternate designs that were considered and related work. The rationale should discuss important objections or concerns raised during the discussion around the TIP.</li> <li><code>Backwards Compatibility</code> \uff1a(optional) All TIPs that introduce backward incompatibilities must include a section describing these incompatibilities and their consequences. The TIP must explain how the author proposes to deal with these incompatibilities. </li> <li><code>Test Cases</code> \uff1a(optional) Test cases for an implementation are mandatory for TIPs that are affecting consensus changes. This section may be omitted for non-Core proposals.</li> <li><code>Implementation</code>\uff1aThe implementations must be completed before any TIP is given the status <code>Final</code>, but it need not be completed before the TIP is <code>accepted</code>. The principle of \"rough consensus and running code\" is still useful when it comes to resolving many discussions of API details.</li> </ul>"},{"location":"developers/tips/#linking-to-external-resources","title":"Linking to External Resources","text":"<p>Links to external resources SHOULD NOT be included. External resources may disappear, move, or change unexpectedly.</p>"},{"location":"developers/tips/#linking-to-other-tips","title":"Linking to other TIPs","text":"<p>References to other TIPs should follow the format <code>TIP-N</code> where N is the TIP number you are referring to. Each TIP that is referenced in a TIP MUST be accompanied by a relative markdown link. The link MUST always be done via relative paths so that the links work in TIP GitHub repository and forks of TIP repository. For example, you would link to TIP-1 with <code>[TIP-1](/TIPS/tip-1)</code>.</p>"},{"location":"developers/tips/#auxiliary-files","title":"Auxiliary Files","text":"<p>Images, diagrams and auxiliary files should be included in a subdirectory of the <code>assets</code> folder for that TIP as follows: <code>assets/tip-N</code> (where N is to be replaced with the TIP number). When linking to an image in the TIP, use relative links such as <code>../assets/tip-1/image.png</code>.</p>"},{"location":"getting_started/getting_started_with_javatron/","title":"Getting Started with java-tron","text":"<p>This page mainly explains how to start the java-tron node and use the command line tool <code>wallet-cli</code> to execute basic commands to interact with the java-tron node. Regarding the installation of java-tron, you can download the runnable file directly or build it from source code. Instructions for installing java-tron can be found on the Install and Build page. This tutorial on this page assumes java-tron and associated developer tools have been successfully installed.</p> <p>This page covers the basics of using java-tron, which includes generating accounts, joining the TRON Nile testnet, and sending TRX between accounts. wallet-cli is also used in this document. wallet-cli is a command-line tool of the TRON network. This tool provides user interactive commands, which can be used to interact with java-tron more conveniently.</p> <p>java-tron is a TRON network client written in Java. This means a computer running java-tron will become a TRON network node. TRON is a distributed network where information is shared directly between nodes rather than being managed by a central server. After the super representative's node generates a new block, it will send the block to its peers. On receiving a new block, each node checks that it is valid and adds it to their database. java-tron uses the information provided by each block to update its \"state\" - the balance of each account on the TRON network. There are two types of accounts on the TRON network: externally owned accounts and contract accounts. The contract account executes the contract code when a transaction is received. An external account is an account that a user manages locally in order to sign and submit transactions. Each external account is a public-private key pair, where the public key is used to derive a unique address for the user, and the private key is used to protect the account and securely sign messages. Therefore, in order to use the TRON network, it is first necessary to generate an external account (hereinafter referred to as \"account\"). This tutorial will guide users on how to create an account, deposit TRX tokens, and transfer TRX.</p>"},{"location":"getting_started/getting_started_with_javatron/#generat-account","title":"Generat account","text":"<p>There are various ways to generate a TRON network account, here we will demonstrate how to generate an account using wallet-cli. An account is a pair of keys (public and private keys).</p> <p>Enter the command <code>java -jar wallet-cli.jar</code> in the terminal to start a wallet-cli: <pre><code>$ java -jar wallet-cli.jar\n\nWelcome to TRON wallet-cli\nPlease type one of the following commands to proceed.\nLogin, RegisterWallet or ImportWallet\n\nYou may also use the Help command at anytime to display a full list of commands.\n\nwallet&gt; \n</code></pre></p> <p>Enter the command: <code>registerwallet</code>, and then enter the password as prompted. This command will generate a TRON network account and register it with wallet-cli, that is, wallet-cli will save the private key of this account, and then you can use the private key to sign transactions. <pre><code>wallet&gt; registerwallet\nPlease input password.\npassword: \nuser defined config file doesn't exists, use default config file in jar\nWalletApi getRpcVsersion: 2\nPlease input password again.\npassword: \nRegister a wallet successful, keystore file name is UTC--2022-07-04T06-35-35.304000000Z--TQXjm2J8K2DKTV49MdfT2anjUehbU3WDJz.json\nwallet&gt; \n</code></pre></p>"},{"location":"getting_started/getting_started_with_javatron/#login-wallet-cli","title":"Login wallet-cli","text":"<p>After the registration is complete, enter the <code>login</code> command to log in to wallet-cli. <pre><code>wallet&gt; login\n</code></pre></p> <p>Select the account you want to login, and then enter the password. If the password is entered correctly, you will see the following result to the terminal: \"Login successful !!!\". <pre><code>Please choose between 1 and 3\n2\nPlease input your password.\npassword: \nLogin successful !!!\nwallet&gt; \n</code></pre></p> <p>After logging in, you can view the login account address through the <code>getaddress</code> command: <pre><code>wallet&gt; getaddress\nGetAddress successful !!\naddress = TQXjm2J8K2DKTV49MdfT2anjUehbU3WDJz\nwallet&gt; \n</code></pre> Then you can use the <code>backupwallet</code> command to view the private key of the account, you need to enter the password according to the prompt. It is recommended to save the private key.</p>"},{"location":"getting_started/getting_started_with_javatron/#run-a-java-tron-node","title":"Run a java-tron node","text":"<p>java-tron is a TRON network client that enables computers to connect to the TRON network. The network in this tutorial refers to the TRON Nile testnet. To start java-tron, you need first obtain the java-tron executable file, please refer to the Installation and Deployment chapter, and then run the following command to start java-tron. <pre><code>$  java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar -c nile_net_config.conf\n</code></pre> After java-tron starts, the logs will include the following: <pre><code>11:07:58.758 INFO  [main] [app](Args.java:1143) ************************ Net config ************************\n11:07:58.758 INFO  [main] [app](Args.java:1144) P2P version: 201910292\n11:07:58.758 INFO  [main] [app](Args.java:1145) Bind IP: 192.168.20.101\n11:07:58.758 INFO  [main] [app](Args.java:1146) External IP: 203.12.203.3\n11:07:58.758 INFO  [main] [app](Args.java:1147) Listen port: 18888\n11:07:58.758 INFO  [main] [app](Args.java:1148) Discover enable: true\n</code></pre></p> <p>The above logs indicate that java-tron has started and connected to the Nile testnet, then it will look for peers to connect to. Once it has found peers, it can request blocks from them, and the logs confirm this: <pre><code>11:08:42.547 INFO  [TronJClientWorker-1] [net](Channel.java:116) Finish handshake with /123.56.3.74:18888.\n11:08:42.547 INFO  [TronJClientWorker-1] [net](ChannelManager.java:161) Add active peer /123.56.3.74:18888 | fea80a0298b465a54fd332ff36819545d850115e77b327858b5306c9a58c6b8c2e7c08df76ab508a7594ed3577a8f4157727108442877077ab499b102b488467, total active peers: 1\n11:08:42.549 INFO  [TronJClientWorker-1] [net](Channel.java:208) Peer /123.56.3.74:18888 status change to SYNCING.\n11:08:42.566 INFO  [TronJClientWorker-1] [DB](Manager.java:1636) headNumber:23113867\n11:08:42.566 INFO  [TronJClientWorker-1] [DB](Manager.java:1638) syncBeginNumber:23113867\n11:08:42.567 INFO  [TronJClientWorker-1] [DB](Manager.java:1642) solidBlockNumber:23113849\n11:08:42.567 INFO  [TronJClientWorker-1] [net](SyncService.java:179) Get block chain summary, low: 23113867, highNoFork: 23113867, high: 23113867, realHigh: 23113867\n11:08:42.572 INFO  [TronJClientWorker-1] [net](MessageQueue.java:106) Send to /123.56.3.74:18888, type: SYNC_BLOCK_CHAIN\nsize: 1, start block: Num:23113867,ID:000000000160b08b510b6c501c980a2567bff1229eed62ca79874c9ca7828e9c \n11:08:42.631 INFO  [TronJClientWorker-1] [net](MessageQueue.java:121) Receive from /123.56.3.74:18888, type: BLOCK_CHAIN_INVENTORY\nsize: 2001, first blockId: Num:23113867,ID:000000000160b08b510b6c501c980a2567bff1229eed62ca79874c9ca7828e9c, end blockId: Num:23115867,ID:000000000160b85b587ef18d00a1905d8022ec0a8fd174f3980b78f6aacf0ede\n\n......\n\n11:08:43.478 INFO  [pool-49-thread-1] [net](MessageQueue.java:106) Send to /123.56.3.74:18888, type: FETCH_INV_DATA\ninvType: BLOCK, size: 100, First hash: 000000000160b08c6eeba60eced4fb13d7c56e46a3c5220a67bb2801a05e5679, End hash: 000000000160b0efd90560e389d1f6e5b3c8d3877709ce375a8e063f5db73af9 \n11:08:43.502 INFO  [TronJClientWorker-1] [net](MessageQueue.java:121) Receive from /123.56.3.74:18888, type: BLOCK\nNum:23113868,ID:000000000160b08c6eeba60eced4fb13d7c56e46a3c5220a67bb2801a05e5679, trx size: 1\n\n11:08:43.504 INFO  [TronJClientWorker-1] [net](MessageQueue.java:121) Receive from /123.56.3.74:18888, type: BLOCK\nNum:23113869,ID:000000000160b08d231e450ae1993a72ba19eb8f3c748fa70d105dadd0c9fd5f, trx size: 0\n\n11:08:43.504 INFO  [TronJClientWorker-1] [net](MessageQueue.java:121) Receive from /123.56.3.74:18888, type: BLOCK\nNum:23113870,ID:000000000160b08e37cb9951d31a4233f106c7e77e0535c597dbb6a16f163699, trx size: 0\n</code></pre></p> <p>These logs show that java-tron is running as expected. You can determine whether the node has been started and check the status of the node by sending the following http request to the java-tron node: <pre><code>$ curl http://127.0.0.1:16887/wallet/getnodeinfo\n</code></pre> If no error messages are reported in the node logs, everything is fine. In order for users to interact with the TRON network, the java-tron node must be running and in a normal state of synchronization. Whether the node is synchronized with other nodes in the network, you can query the current block height in Tronscan and compare it with the result of the local java-tron node <code>/wallet/getnowblock</code>. If they are equal, it means that the synchronization status of the local node is normal.</p> <p>If you want to shut down java-tron node, please use this command: <code>kill -15 process id</code>.</p>"},{"location":"getting_started/getting_started_with_javatron/#obtain-trx","title":"Obtain TRX","text":"<p>In order to make some transactions, the user must fund their account with TRX. On TRON mainnet, TRX can only be obtained in three ways: 1. Rewards for block production by SRs/rewards for voting for SRs\uff1b 2. Another TRON account transfers TRX to it; 3. Obtained from the exchange.</p> <p>In the TRON testnet, TRX has no real value and can be obtained for free through faucet.</p>"},{"location":"getting_started/getting_started_with_javatron/#interact-with-java-tron-node","title":"Interact with java-tron node","text":""},{"location":"getting_started/getting_started_with_javatron/#interact-by-using-wallet-cli","title":"Interact by using wallet-cli","text":"<p>java-tron provides http interface and grpc interface externally, which is convenient for users to interact with TRON network. wallet-cli uses the grpc interface.</p>"},{"location":"getting_started/getting_started_with_javatron/#get-account-information","title":"Get account information","text":"<p>After entering the <code>getaccount</code> command in wallet-cli, it will request account information data from the java-tron node, and then display the result in the terminal. <pre><code>wallet&gt; getaccount TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\n</code></pre> Result: <pre><code>{\n    \"address\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n    \"balance\": 93643857919,\n    \"create_time\": 1619681898000,\n    \"latest_opration_time\": 1655358327000,\n    \"is_witness\": true,\n    \"asset_issued_name\": \"TestTRC10T\",\n    \"latest_consume_free_time\": 1652948766000,\n    \"account_resource\": {\n        \"latest_consume_time_for_energy\": 1655358327000\n    },\n\n        ......\n}\n</code></pre></p>"},{"location":"getting_started/getting_started_with_javatron/#get-account-balance","title":"Get account balance","text":"<p>Get the balance of an account with the <code>getbalance</code> command: <pre><code>wallet&gt; getbalance\nBalance = 93642857919\nwallet&gt; \n</code></pre></p>"},{"location":"getting_started/getting_started_with_javatron/#transferring-trx","title":"Transferring TRX","text":"<p>To transfer TRX through the <code>sendcoin</code> command, enter the transfer address, and the amount: <pre><code>wallet&gt; sendcoin TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf 1000000\n{\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"amount\":1000000,\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n                        \"to_address\":\"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\":\"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"cbc3\",\n        \"ref_block_hash\":\"8581ae7e29258a52\",\n        \"expiration\":1656917577000,\n        \"timestamp\":1656917518232\n    },\n    \"raw_data_hex\":\"0a02cbc322088581ae7e29258a5240a89aefbf9c305a67080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca121541d0b69631440f0a494bb51f7eee68ff5c593c00f018c0843d7098cfebbf9c30\"\n}\nbefore sign transaction hex string is 0a85010a02cbc322088581ae7e29258a5240a89aefbf9c305a67080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca121541d0b69631440f0a494bb51f7eee68ff5c593c00f018c0843d7098cfebbf9c30\nPlease confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\n</code></pre></p> <p>This command returns the transaction of transferring TRX. After confirmation, enter <code>y</code> to confirm, and other letters indicate to cancel the transaction. If you enter <code>y</code>, then according to the prompt, choose which account's private key to use for signing, and finally enter the password to complete the signing of the transaction, and wallet-cli will send the signed transaction to the java-tron node. <pre><code>Please confirm and input your permission id, if input y or Y means default 0, other non-numeric characters will cancel transaction.\ny\nPlease choose your key for sign.\nThe 1th keystore file name is .DS_Store\nThe 2th keystore file name is UTC--2022-07-04T06-35-35.304000000Z--TQXjm2J8K2DKTV49MdfT2anjUehbU3WDJz.json\nThe 3th keystore file name is UTC--2022-06-21T09-51-26.367000000Z--TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM.json\nPlease choose between 1 and 3\n3\nPlease input your password.\npassword: \nafter sign transaction hex string is 0a85010a02cbc322088581ae7e29258a5240dbfc91ca9c305a67080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca121541d0b69631440f0a494bb51f7eee68ff5c593c00f018c0843d7098cfebbf9c301241241a3ce4797ccc2fedf49ae41af28b49df1e15a476e4948af4df5aadf23a1e940ad5cc2133f501c08f2bab6a2231cdc82a745fed0fc6a012dc19310532d9138600\ntxid is 21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4\nSend 1000000 Sun to TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf successful !!\nwallet&gt; \n</code></pre></p>"},{"location":"getting_started/getting_started_with_javatron/#query-transaction-by-transaction-id","title":"Query transaction by transaction id","text":"<p>The above step sends a transferring TRX transaction through the <code>sendcoin</code> command, and prints the id of the transaction on the wallet-cli terminal:<code>21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4</code>. Next, you can query the transaction through <code>gettransactionbyid</code>, or query the result of the transaction through <code>gettransactioninfobyid</code>.</p> <pre><code>wallet&gt; gettransactionbyid 21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4\n{\n    \"ret\":[\n        {\n            \"contractRet\":\"SUCCESS\"\n        }\n    ],\n    \"signature\":[\n        \"241a3ce4797ccc2fedf49ae41af28b49df1e15a476e4948af4df5aadf23a1e940ad5cc2133f501c08f2bab6a2231cdc82a745fed0fc6a012dc19310532d9138600\"\n    ],\n    \"txID\":\"21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4\",\n    \"raw_data\":{\n        \"contract\":[\n            {\n                \"parameter\":{\n                    \"value\":{\n                        \"amount\":1000000,\n                        \"owner_address\":\"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n                        \"to_address\":\"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\"\n                    },\n                    \"type_url\":\"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\":\"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\":\"cbc3\",\n        \"ref_block_hash\":\"8581ae7e29258a52\",\n        \"expiration\":1656939118171,\n        \"timestamp\":1656917518232\n    },\n    \"raw_data_hex\":\"0a02cbc322088581ae7e29258a5240dbfc91ca9c305a67080112630a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412320a1541ce8a0cf0c16d48bcf22825f6053248df653c89ca121541d0b69631440f0a494bb51f7eee68ff5c593c00f018c0843d7098cfebbf9c30\"\n}\nwallet&gt; \n</code></pre> <pre><code>wallet&gt; gettransactioninfobyid 21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4\n{\n    \"id\": \"21851bcf1faf22c99a7a49c4f246d709cf9f54db2f264ca145adcd464ea155a4\",\n    \"blockNumber\": 27773932,\n    \"blockTimeStamp\": 1656917586000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"receipt\": {\n        \"net_usage\": 267\n    }\n}\nwallet&gt; \n</code></pre>"},{"location":"getting_started/getting_started_with_javatron/#interact-by-using-curl","title":"Interact by using Curl","text":"<p>The above describes how to use wallet-cli to interact with java-tron. Compared with sending grpc/http commands directly, this tool provides more friendly interactive commands, allowing users to send commands to java-tron more conveniently. But, how to send HTTP requests directly to the java-tron node? Curl is a command line tool for sending HTTP requests. This chapter will explain how to check account balances and send transactions through Curl.</p>"},{"location":"getting_started/getting_started_with_javatron/#get-account-balance_1","title":"Get account balance","text":"<p>You can query the TRX balance information of the account through the node HTTP interface <code>wallet/getaccount</code>. The <code>balance</code> field in the returned result is the TRX balance, in sun: <pre><code> curl -X POST http://127.0.0.1:16887/wallet/getaccount -d \n     '{\"address\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n       \"visible\": true\n     }'\n</code></pre> Result\uff1a <pre><code>{\"account_name\": \"testacc2\",\"address\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\"balance\": 1000000000000000,\"account_resource\": {}}\n</code></pre></p>"},{"location":"getting_started/getting_started_with_javatron/#send-transactions","title":"Send transactions","text":"<p>Sending a transaction through the http interface requires a total of three steps:</p> <ol> <li>Create a transaction</li> <li>Sign the transaction</li> <li>Broadcast transaction</li> </ol> <p>The following takes the transferring TRX as an example to illustrate how to send a transaction to java-tron node.</p> <p>Create an unsigned TRX transferring transaction through the fullnode HTTP interface <code>wallet/createtransaction</code>:</p> <p><pre><code>curl -X POST  http://127.0.0.1:16887/wallet/createtransaction -d \n    '{\n        \"to_address\": \"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\", \n        \"owner_address\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\", \n        \"amount\": 10000000,\n        \"visible\":true\n    }'\n</code></pre> Returns an unsigned TRX transferring transaction: <pre><code>{\n    \"visible\": true,\n    \"txID\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\",\n    \"raw_data\": {\n        \"contract\": [\n            {\n                \"parameter\": {\n                    \"value\": {\n                        \"amount\": 10000000,\n                        \"owner_address\": \"TPswDDCAWhJAZGdHPidFg5nEf8TkNToDX1\",\n                        \"to_address\": \"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\"\n                    },\n                    \"type_url\": \"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\": \"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\": \"193b\",\n        \"ref_block_hash\": \"aaecd88e4e0e7528\",\n        \"expiration\": 1656580476000,\n        \"timestamp\": 1656580418228\n    },\n    \"raw_data_hex\": \"0a02193b2208aaecd88e4e0e752840e098909f9b305a68080112640a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412330a154198927ffb9f554dc4a453c64b2e553a02d6df514b121541d0b69631440f0a494bb51f7eee68ff5c593c00f01880ade20470b4d58c9f9b30\"\n}\n</code></pre> Then sign the transaction offline. </p> <p>Finally, Broadcast the signed transaction to the java-tron node through the <code>wallet/broadcasttransaction</code> interface to complete the sending of the TRX transferring transaction.</p> <p><pre><code>curl --location --request POST 'http://127.0.0.1:16887/wallet/broadcasttransaction' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n    \"visible\": true,\n    \"signature\": [\n        \"e12996cfaf52f8b49e64400987f9158a87b1aa809a11a75e01bb230722db97a26204334aea945b1ece0851a89c96459872e56229b0bd725c4f6a0577bfe331c301\"\n    ],\n    \"txID\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\",\n    \"raw_data\": {\n        \"contract\": [\n            {\n                \"parameter\": {\n                    \"value\": {\n                        \"amount\": 10000000,\n                        \"owner_address\": \"TPswDDCAWhJAZGdHPidFg5nEf8TkNToDX1\",\n                        \"to_address\": \"TUznHJfHe6gdYY7gvWmf6bNZHuPHDZtowf\"\n                    },\n                    \"type_url\": \"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\": \"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\": \"193b\",\n        \"ref_block_hash\": \"aaecd88e4e0e7528\",\n        \"expiration\": 1656580476000,\n        \"timestamp\": 1656580418228\n    },\n    \"raw_data_hex\": \"0a02193b2208aaecd88e4e0e752840e098909f9b305a68080112640a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412330a154198927ffb9f554dc4a453c64b2e553a02d6df514b121541d0b69631440f0a494bb51f7eee68ff5c593c00f01880ade20470b4d58c9f9b30\"\n}'\n</code></pre> Result\uff1a <pre><code>{\n    \"result\": true,\n    \"txid\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\"\n}\n</code></pre> The return result is true, indicating that the transaction broadcast was successful.</p>"},{"location":"getting_started/getting_started_with_javatron/#query-transaction-by-transaction-id_1","title":"Query transaction by transaction id","text":"<p>Query the content of the transaction through the http interface <code>wallet/gettransactionbyid</code>: <pre><code>curl --location --request POST 'http://127.0.0.1:16887/wallet/gettransactionbyid' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n     \"value\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\"\n}'\n</code></pre> Result: <pre><code>{\n    \"ret\": [\n        {\n            \"contractRet\": \"SUCCESS\"\n        }\n    ],\n    \"signature\": [\n        \"e12996cfaf52f8b49e64400987f9158a87b1aa809a11a75e01bb230722db97a26204334aea945b1ece0851a89c96459872e56229b0bd725c4f6a0577bfe331c301\"\n    ],\n    \"txID\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\",\n    \"raw_data\": {\n        \"contract\": [\n            {\n                \"parameter\": {\n                    \"value\": {\n                        \"amount\": 10000000,\n                        \"owner_address\": \"4198927ffb9f554dc4a453c64b2e553a02d6df514b\",\n                        \"to_address\": \"41d0b69631440f0a494bb51f7eee68ff5c593c00f0\"\n                    },\n                    \"type_url\": \"type.googleapis.com/protocol.TransferContract\"\n                },\n                \"type\": \"TransferContract\"\n            }\n        ],\n        \"ref_block_bytes\": \"193b\",\n        \"ref_block_hash\": \"aaecd88e4e0e7528\",\n        \"expiration\": 1656580476000,\n        \"timestamp\": 1656580418228\n    },\n    \"raw_data_hex\": \"0a02193b2208aaecd88e4e0e752840e098909f9b305a68080112640a2d747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e5472616e73666572436f6e747261637412330a154198927ffb9f554dc4a453c64b2e553a02d6df514b121541d0b69631440f0a494bb51f7eee68ff5c593c00f01880ade20470b4d58c9f9b30\"\n}\n</code></pre></p> <p>Query transaction results and transaction receipts through the http interface <code>wallet/gettransactioninfobyid</code>:</p> <p><pre><code>curl --location --request POST 'http://127.0.0.1:16887/wallet/gettransactioninfobyid' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n     \"value\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\"\n}'\n</code></pre> Result: <pre><code>{\n    \"id\": \"c558bd35978267d8999baf6148703cbc94786f3f2e22893637588ca05437d7f0\",\n    \"blockNumber\": 27662687,\n    \"blockTimeStamp\": 1656580470000,\n    \"contractResult\": [\n        \"\"\n    ],\n    \"receipt\": {\n        \"net_usage\": 268\n    }\n}\n</code></pre></p>"},{"location":"mechanism-algorithm/account/","title":"Account Model","text":""},{"location":"mechanism-algorithm/account/#introduction","title":"Introduction","text":"<p>TRON uses the account model. The address is the unique identifier of an account, and a private key signature is required to operate an account. An account has many attributes, including TRX &amp; TRC10 token balances, bandwidth, energy, Etc. An account can send transactions to increase or reduce its TRX or TRC10 token balances, deploy smart contracts, and trigger the smart contracts released by itself or others. All TRON accounts can apply to be Super Representatives or vote for the elected Super Representatives. Accounts are the basis of all activities on TRON.</p>"},{"location":"mechanism-algorithm/account/#how-to-create-an-account","title":"How to Create an Account","text":"<ol> <li>Use a wallet application(TronLink is recommended) to generate a pair of address and private key. To active the account, you need to transfer TRX or other token to it.</li> <li>Use an account already existed in TRON network to create an account</li> </ol> <p>If you have enough staked BandWidth Points, creating an account only consume your staked BandWidth Points, otherwise, it burns 0.1 TRX.</p>"},{"location":"mechanism-algorithm/account/#key-pair-generation","title":"Key-pair Generation","text":"<p>TRON signature algorithm is ECDSA, curve used is SECP256K1. Private key is a random number, public key is a point in the elliptic curve. The process is: first generate a random number d to be the private key, then calculate P = d * G as the public key, G is the elliptic curve base point.</p>"},{"location":"mechanism-algorithm/account/#address-format","title":"Address Format","text":"<p>Use the public key P as the input, by SHA3 get the result H. The length of the public key is 64 bytes, SHA3 uses Keccak256. Use the last 20 bytes of H, and add a byte of 0x41 in front of it, then the address come out. Do basecheck to address, here is the final address. All addresses start with 'T'.</p> <p>basecheck process: first do sha256 calculation to address to get h1, then do sha256 to h1 to get h2, use the first 4 bytes as check to add it to the end of the address to get address||check, do base58 encode to address||check to get the final result.</p> <p>character map: ALPHABET = \"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz\"</p>"},{"location":"mechanism-algorithm/account/#signature","title":"Signature","text":""},{"location":"mechanism-algorithm/account/#steps","title":"Steps","text":"<ol> <li>Get the rawdata of the transaction, then transfer it to <code>byte[]</code></li> <li>Do sha256 calculation to the rawdata</li> <li>Use the private key to sign the result gained from step 2</li> <li>Add the signature back into the transaction</li> </ol>"},{"location":"mechanism-algorithm/account/#algorithm","title":"Algorithm","text":"<ol> <li>ECDSA, SECP256K</li> <li> <p>Example:</p> <pre><code>priKey:::8e812436a0e3323166e1f0e8ba79e19e217b2c4a53c970d4cca0cfb1078979df\npubKey::04a5bb3b28466f578e6e93fbfd5f75cee1ae86033aa4bbea690e3312c087181eb366f9a1d1d6a437a9bf9fc65ec853b9fd60fa322be3997c47144eb20da658b3d1\nhash:::159817a085f113d099d3d93c051410e9bfe043cc5c20e43aa9a083bf73660145\nr:::38b7dac5ee932ac1bf2bc62c05b792cd93c3b4af61dc02dbb4b93dacb758123f\ns:::08bf123eabe77480787d664ca280dc1f20d9205725320658c39c6c143fd5642d\nv:::0\n</code></pre> <p>Note: The size of the signature result is 65 bytes. r 32 bytes, s 32 bytes, v 1 bytes.</p> </li> <li> <p>fullnode will verify the signature, it generates an address with the value of hash and r\u3001s\u3001v, then it compares with the address in the transaction.</p> </li> </ol>"},{"location":"mechanism-algorithm/account/#demo","title":"Demo","text":"<pre><code>public static Transaction sign(Transaction transaction, ECKey myKey) {\n    Transaction.Builder transactionBuilderSigned = transaction.toBuilder();\n    byte[] hash = sha256(transaction.getRawData().toByteArray());\n    List&lt;Contract&gt; listContract = transaction.getRawData().getContractList();\n\n    for (int i = 0; i &lt; listContract.size(); i++) {\n        ECDSASignature signature = myKey.sign(hash);\n        ByteString bsSign = ByteString.copyFrom(signature.toByteArray());\n\n        // Each contract may be signed with a different private key in the future.\n        transactionBuilderSigned.addSignature(bsSign);\n    }\n}\n</code></pre>"},{"location":"mechanism-algorithm/dex/","title":"Decentralized Exchange(DEX)","text":"<p>TRON network supports decentralized exchange(DEX) using Bancor protocol. DEX is composed of many exchange pairs. You can find the api below in HTTP API.</p>"},{"location":"mechanism-algorithm/dex/#what-is-an-exchange-pair","title":"What is an Exchange Pair","text":"<p>The term of 'Exchange Pair' describes a trade between one token with another, like A/B, A/TRX.</p>"},{"location":"mechanism-algorithm/dex/#exchange-pair-creation","title":"Exchange Pair Creation","text":"<p>Any account can create an exchange pair, it burns 1024 TRX.</p> <p>Please refer to 'wallet/exchangecreate'.</p>"},{"location":"mechanism-algorithm/dex/#exchange-pair-transaction","title":"Exchange Pair Transaction","text":"<p>Any account can trade in the DEX. The trade follows Bancor protocol.</p> <p>Please refer to 'wallet/exchangetransaction'.</p>"},{"location":"mechanism-algorithm/dex/#exchange-pair-injection","title":"Exchange Pair Injection","text":"<p>The exchange pair creator can inject more tokens into the exchange pair. Injection can decrease the range of ratio fluctuation. If one token is injected, the other one will be injected automatically to keep the current ratio of the two tokens unchanged.</p> <p>Please refer to 'wallet/exchangeinject'.</p>"},{"location":"mechanism-algorithm/dex/#exchange-pair-withdrawal","title":"Exchange Pair Withdrawal","text":"<p>The exchange pair creator can withdraw tokens from the exchange pair. Withdrawal can increase the range of ratio fluctuation. If one token is withdrawn, the other one will be withdrawn automatically to keep the current ratio of the two tokens unchanged.</p> <p>Please refer to 'wallet/exchangewithdraw'.</p>"},{"location":"mechanism-algorithm/dex/#query","title":"Query","text":""},{"location":"mechanism-algorithm/dex/#transaction-query","title":"Transaction Query","text":"<p><code>ListExchanges</code>: Query the list of all the exchange pairs.</p> <p><code>GetPaginatedExchangeList</code>: Query the list of all the exchange pairs by pagination.</p> <p><code>GetExchangeById</code>: Query an exchange pair by exchange pair id.</p>"},{"location":"mechanism-algorithm/dex/#price-calculation","title":"Price Calculation","text":"<p>The token price is determined by the ratio of the balance of the two tokens.</p>"},{"location":"mechanism-algorithm/dex/#calculate-the-amount-of-token-you-can-get","title":"Calculate the Amount of Token You Can Get","text":"<p><code>sellTokenQuant</code> is the amount of the <code>first_token</code> you want to sell.</p> <p><code>buyTokenQuant</code> is the amount of <code>second_token</code> you can get.</p> <pre><code>supply = 1,000,000,000,000,000,000L\n\nsupplyQuant = -supply * (1.0 - Math.pow(1.0 + (double) sellTokenQuant/(firstTokenBalance + sellTokenQuant, 0.0005))\n\nbuyTokenQuant = (long)balance * (Math.pow(1.0 + (double) supplyQuant / supply, 2000.0) - 1.0)\n</code></pre>"},{"location":"mechanism-algorithm/dpos/","title":"DPoS","text":""},{"location":"mechanism-algorithm/dpos/#overview","title":"Overview","text":"<p>Blockchain is a distributed accounting system. In a blockchain system, there can be thousands of nodes, each of which independently stores the same ledger. If new transaction data is to be written into the ledger,  approvals from these nodes are needed. Achieving this goal in an untrusted distributed environment is a complicated systematic quest. The blockchain system operates normally means each node in the blockchain can always keep the same ledger, provided that most nodes in the system are honest and reliable. In order to ensure that honest and reliable nodes can jointly supervise the transaction data written into the ledgers, each blockchain system needs to build its own consensus, which is equivalent to the constitution of the blockchain. As long as the vast majority of nodes comply with the consensus requirements, it is able to guarantee the results will certainly be credible, even in an untrusted distributed environment. Therefore, the significance of the consensus is that the honest nodes in the blockchain can ultimately achieve the agreement of the ledgers as long as they strictly abide by this consensus.</p> <p>There are several types of consensus, and the most commonly used are POW, POS, and DPoS. Definitely, different blockchain systems will have a unique way of implementation. This article will mainly introduce the DPoS consensus on which TRON based. We will also explain the basic components and mechanisms of DPoS.</p> <p>The role of consensus is to select the SR(Super Representatives) in the blockchain system. The SR(Super Representatives) verify the transaction data and keep the account in order to broadcast new accounts to other nodes in the network and obtains the approval of the new accounts from other nodes. As a specific implementation of consensus, DPoS works in the following way:</p> <p>The DPoS consensus selects some nodes as SR(Super Representatives) in the blockchain system based on the number of votes they receive. First, when the blockchain system starts to operate, a certain number of tokens will be issued, and then the tokens will be given to nodes in the blockchain system. A node can apply to be a super representative candidate in the blockchain system with a portion of the tokens. Any token-holding node in the blockchain system can vote for these candidates. Every t period of time, the votes for all the candidates will be counted. Top N candidate nodes with the most votes will become SR(Super Representatives) for the next t period. After t period of time, the votes will be counted again to elect the new SR(Super Representatives), and the cycle continues.</p> <p>Let's see how it's realized in the context of TRON:</p>"},{"location":"mechanism-algorithm/dpos/#definition","title":"Definition","text":"<ul> <li> <p>TRON: refers to the TRON network. The document does not distinguish between TRON, TRON blockchain, TRON blockchain system, etc.</p> </li> <li> <p>TRON token: refers to the equity token issued by and circulating in TRON, known as TRX.</p> </li> <li> <p>super representative candidates: nodes eligible for becoming super representatives in TRON.</p> </li> <li> <p>SR(Super Representatives): nodes in TRON qualified for book-keeping. They are usually called super representatives in DPoS consensus. In TRON, there will be 27 super representatives, which are also called super nodes (or SR). Here, we will not distinguish between bookkeeper, witness, supernode, SR, etc.</p> </li> <li> <p>Bookkeeping: the process of verifying transactions and recording them in a ledger. Because ledgers in TRON are carried by blocks, the bookkeeping process is also called block generation. We will not distinguish between bookkeeping and block generation in the document.</p> </li> <li> <p>Bookkeeping order: block generation order. The descending order of the 27 super representatives based on the number of votes they receive.</p> </li> <li> <p>Slot: In TRON, every three seconds is regarded as one slot. Under normal circumstances, each SR will produce a block within the corresponding slot time. Therefore, the average block interval of TRON is approximately three seconds. If an SR fails to produce a block for some reasons, the corresponding slot will be vacant and the next SR will produce a block in the following slot. During the maintenance period, block production will skip two slots.</p> </li> <li> <p>Epoch: TRON sets an Epoch to be 6 hours. The last 2 block time of an Epoch is the maintenance period, during which block generating order for the next Epoch will be decided.</p> </li> <li> <p>The maintenance period: TRON sets the period to be 2 block time, which is 6 seconds. This period of time is used to count the votes for candidates. There are 4 Epochs in 24 hours, and naturally, 4 maintenance periods. During the maintenance period, no block is generated and block generation order for the next Epoch is decided.</p> </li> </ul> <p></p>"},{"location":"mechanism-algorithm/dpos/#block-production-process","title":"Block Production Process","text":"<p>The SR(Super Representatives) of the blockchain network collect the newly generated transactions in the blockchain network and verify the legality of these transactions, then package the transactions in a block, record them as a new page on the ledger, and broadcast the page to the entire blockchain network. Other nodes will receive the new page and verify the legality of the transaction data on the page and add it to their own ledger. The SR(Super Representatives) will repeat this process so all new transaction data in the blockchain system can be recorded in the ledger.</p>"},{"location":"mechanism-algorithm/dpos/#sr-election-mechanism","title":"SR Election mechanism","text":"<ul> <li>Vote</li> </ul> <p>In TRON, 1 TRX equals 1 vote.</p> <ul> <li>Voting process</li> </ul> <p>In TRON, voting for candidates is a special transaction. Nodes can vote for candidates through generating a voting transaction.</p> <ul> <li>Vote counting</li> </ul> <p>During each maintenance period, the votes for candidates will be counted. The top 27 candidates with the most votes will be the super representatives for the next Epoch.</p>"},{"location":"mechanism-algorithm/dpos/#block-generation-mechanism","title":"Block generation mechanism","text":"<p>During each Epoch, the 27 super representatives will take turns to generate blocks according to the bookkeeping order. Each super representative can only generate blocks when it is their turn. Super representatives package the data of multiple verified transactions into each block. The hash of the previous block will be included in each new block as the parentHash. The super representative will sign the data of this block with his/her private key and fill in witness_signature, along with the address of the super representative, the block height, and the time that block is generated, etc.</p> <p>Through storing the hash of the previous block, blocks are logically connected. Eventually, they form a chain. A typical blockchain structure is shown in the following picture:</p> <p></p> <p>In ideal circumstances, the bookkeeping process in a DPoS consensus-based blockchain system proceeds according to the bookkeeping order calculated in advance. Blocks are generated by super representatives in turn (see figure a). However, in reality, the blockchain network is a distributed and untrusted complex system in the following three ways. - Due to poor network environment, blocks generated by some super representatives cannot be received by other super representatives in valid time (see figure b1 and b2). - The normal operation of a certain super representative cannot always be guaranteed (see figure c). - Some malicious super representatives will generate fork blocks in order to fork the chain (see figure d).</p> <p></p> <p></p> <p>As mentioned above, the basis for the blockchain system to operate normally is that most of the nodes in the system are honest and reliable. Furthermore, the primary guarantee for the security of the blockchain system is the security of the ledger, meaning that illegal data cannot be written into the ledger maliciously and ledger copies saved on each node should be consistent as well. Based on the DPoS consensus, the bookkeeping process is carried out by super representatives. Therefore, the safety of TRON depends on the reliability of the majority of the super representatives. TRON has put confirmed blocks in the system which are irreversible. At the same time, in order to resist the malicious behaviors of a small number of super representatives nodes, TRON recognizes the longest chain as the main chain based on \"the longest chain principle\".</p>"},{"location":"mechanism-algorithm/dpos/#the-confirmed-block-principle","title":"The confirmed block principle","text":"<p>The newly produced blocks are in unconfirmed state, and only those blocks that are \"approved\" by more than 2/3 of the 27 super representatives(27 * 2/3 = 18, i.e., a minimum of 19) are considered to be irreversible blocks, commonly referred to as solidified blocks, and the transactions contained in the solidified blocks have been confirmed by the entire blockchain network.  The way to \"approve\" the unconfirmed state block is that the SR producing subsequent blocks after it, as shown in Figure d, the SR C produces block 103, the SR E produces 104' on the basis of block 103, the block 105', 106', and 107' produced respectively by the SR G, A and B, are also subsequent blocks of the 103rd block, which means these four blocks approve the 103rd block. It can be seen that when the block of height 121 is produced, the 103rd block becomes a solidified block, since by this time the 103rd block has 19 subsequent blocks, and the point to be emphasized here is that the super representatives producing these 19 blocks must be different from each other and from the super representatives producing the 103rd block.</p>"},{"location":"mechanism-algorithm/dpos/#the-longest-chain-principle","title":"The longest chain principle","text":"<p>When a fork occurs, an honest super representative would always choose to produce blocks on the longest chain.</p>"},{"location":"mechanism-algorithm/dpos/#incentive-model","title":"Incentive model","text":"<p>To ensure the safe and efficient operation of the blockchain system, TRON sets up an incentive model to encourage more nodes to join the network, thereby expanding the scale of the network. Every time a block is generated by the TRON network, a block reward of 16 TRX will be awarded to the super representative who produced the block, and a voting reward of 160 TRX will be awarded to all super representatives and super partners (super representative candidates who ranking 28th~ 127th are also called super partners), and they share the voting rewards proportionally according to the number of votes they get. At the same time, super representatives and partners will also deduct the rewards according to their commission ratio, and distribute the remaining part to voters according to the voter voting ratio.</p>"},{"location":"mechanism-algorithm/dpos/#proposal-based-parameter-adjustment","title":"Proposal-based parameter adjustment","text":"<p>An important characteristic of DPoS is that any parameter adjustment can be proposed on the chain, and super representatives will decide whether to approve the proposal by starting a vote. The advantage of this method is that it avoids hard fork upgrades when adding new features. For the current dynamic parameters and values \u200b\u200bof the TRON network, as well as past proposals, please refer to here.</p>"},{"location":"mechanism-algorithm/dpos/#reference-documentations","title":"Reference Documentations","text":"<ul> <li>Delegated Proof of Stake (DPoS) \u2013 Total Beginners Guide</li> <li>Consensus Algorithms: Proof-of-Stake &amp; Cryptoeconomics</li> <li>Role of Delegates</li> <li>What is Delegated Proof of Stake?</li> </ul>"},{"location":"mechanism-algorithm/multi-signatures/","title":"Account Permission Management","text":""},{"location":"mechanism-algorithm/multi-signatures/#background","title":"Background","text":"<p>Account permission management functions allow for permission grading, and each permission can correspond to multiple private keys. This makes it possible to achieve multi-person joint control of accounts. This guide walks the user through TRON's account permission management implementation and design.</p>"},{"location":"mechanism-algorithm/multi-signatures/#concept","title":"Concept","text":"<p>There are three types of permission: owner\u3001witness and active. Owner permission has the right to execute all the contracts. Witness permission is for SR. Active permission contains a set of contracts selected execution permissions.</p>"},{"location":"mechanism-algorithm/multi-signatures/#protocol-definition","title":"Protocol Definition","text":""},{"location":"mechanism-algorithm/multi-signatures/#account","title":"Account","text":"<pre><code>message Account {\n  // ...\n  Permission owner_permission = 31;\n  Permission witness_permission = 32;\n  repeated Permission active_permission = 33;\n}\n</code></pre> <p>Three attributes are added, owner_permission\u3001witness_permission and active_permission. active_permission is a list, the length can not be bigger than 8.</p>"},{"location":"mechanism-algorithm/multi-signatures/#contracttype","title":"ContractType","text":"<p><pre><code>message Transaction {\n  message Contract {\n    enum ContractType {\n      AccountCreateContract = 0;\n      // ...\n      AccountPermissionUpdateContract = 46;\n    }\n  }\n}\n</code></pre> The definition of ContractType can be found here.</p> <p>AccountPermissionUpdateContract is a ContractType used to update the account permission.</p>"},{"location":"mechanism-algorithm/multi-signatures/#accountpermissionupdatecontract","title":"AccountPermissionUpdateContract","text":"<pre><code>message AccountPermissionUpdateContract {\n  bytes owner_address = 1;\n  Permission owner = 2;\n  Permission witness = 3;\n  repeated Permission actives = 4;\n}\n</code></pre> <ul> <li><code>owner_address</code>: The address of the account whose permissions are to be modified</li> <li><code>owner</code>: Owner permission</li> <li><code>witness</code>: Witness permission (only used by witness)</li> <li><code>actives</code>: Active permission</li> </ul> <p>This will override the Original account permission. Therefore, if you only want to modify the owner permission, witness (if it is a SR account) and active permission also need to be set</p>"},{"location":"mechanism-algorithm/multi-signatures/#permission","title":"Permission","text":"<pre><code>message Permission {\n  enum PermissionType {\n    Owner = 0;\n    Witness = 1;\n    Active = 2;\n  }\n  PermissionType type = 1;\n  int32 id = 2;\n  string permission_name = 3;\n  int64 threshold = 4;\n  int32 parent_id = 5;\n  bytes operations = 6;\n  repeated Key keys = 7;\n}\n</code></pre> <ul> <li><code>PermissionType</code>: Permission type</li> <li><code>id</code>: Generated by system. Owner id=0, Witness id=1, Active id increases from 2. Specifying using which permission to execute a contract by setting id. For instance, using owner permission, set id=0</li> <li><code>permission_name</code>: Permission name, 32 bytes length limit</li> <li><code>threshold</code>: The threshold of the signature weight</li> <li><code>parent_id</code>: Current 0</li> <li> <p><code>operations</code>: used by active permission, a hexadecimal coded sequence (little-endian byte order), 32 bytes (256 bits), and each bit represents the authority of a ContractType. The nth bit indicates the authority of the ContractType with ID n, its value 1 means that it has the authority to execute the ContractType, its value 0 means it doesn't have the authority.     To make it easier for users to read, start with the binary big-endian byte order to illustrate how to calculate the value of operations. The number of digits starts from 0, and corresponds to the ID of the ContractType from left to right. Convert a binary big-endian byte sequence to a hexadecimal little-endian byte sequence, that will be the value of operations. Below is an example of how to calculate the operations of active permission with operation TransferContract(ID=1) and operation VoteWitnessContract(ID=4) allowed. The mapping between ContractType and its ID can be seen in the above definition link of ContractType.</p> Operations Allowed Binary Code(big-endian) Binary Code(little-endian) Hex Code(little-endian) TransferContract(1) &amp; VoteWitnessContract(4) 01001000 00000000 00000000 ... 00010010 00000000 00000000 ... 12 00 00 ... </li> <li> <p><code>keys</code>: The accounts and weights that all own the permission, 5 keys at most.</p> </li> </ul>"},{"location":"mechanism-algorithm/multi-signatures/#key","title":"Key","text":"<pre><code>message Key {\n  bytes address = 1;\n  int64 weight = 2;\n}\n</code></pre> <ul> <li><code>address</code>: The account address</li> <li><code>weight</code>: The signature weight</li> </ul>"},{"location":"mechanism-algorithm/multi-signatures/#transaction","title":"Transaction","text":"<pre><code>message Transaction {\n  // ...\n  int32 Permission_id = 5;\n}\n</code></pre> <p><code>Permission_id</code> is added. It is corresponding to <code>Permission.id</code> 1 is not allowed, because witness permission is only used to produce blocks, not for transaction signature.</p>"},{"location":"mechanism-algorithm/multi-signatures/#owner-permission","title":"Owner Permission","text":"<p>Owner permission is the top permission of an account. It is used to control account ownership, adjust permission  structure. Owner Permission has the right to execute all the contracts.</p> <p>Owner permission's features:</p> <ol> <li>The account that has owner permission can change the owner permission</li> <li>When owner permission is null, the default owner of the account owns the owner permission</li> <li>When you create a new account, the address will be insert into owner permission automatically, default weight is 1, keys field only contains this address and also weight is 1.</li> <li>If a permissionId is not specified when a contract is executed, using owner permission by default.</li> </ol>"},{"location":"mechanism-algorithm/multi-signatures/#witness-permission","title":"Witness Permission","text":"<p>Super representatives can use this permission to manage block producing. Only SR(Super Representative) account has this permission.</p> <p>Usage scenario example: A super representative deploys a witness node on cloud server. In order to keep the account on the cloud server safe, you can only give the block producing permission to the account you put on cloud server. Because this account only owns  block producing permission, no TRX transfer permission, so even if the account on the cloud server is leaked, the TRX will not be lost.</p> <p>Witness node configuration: when start a fullnode as witness, <code>localwitness</code> in the config file is filled in with the private key of the witness account and <code>localWitnessAccountAddress</code> is commented on as below: <pre><code># config.conf\n//localWitnessAccountAddress = \nlocalwitness = [\n  xxx // private key of the witness account\n]\n</code></pre></p> <ul> <li>If witness permission is not modified, there is no need to change config file.  </li> <li> <p>If witness permission is modified, two modifications are required as follows:</p> <ul> <li><code>localwitness</code> needs to be changed to the private key of the account authorized with witness permission</li> <li><code>localWitnessAccountAddress</code> shoule be explicitly set as the address of the witness account</li> </ul> <p>Below is an example of how to configure witness account TCbxHgibJutCjVZUprvexKZZ4Rc6sJ4Xrk which authorize its witness permission to account TSwCH45gi2HvtqDYX3Ff39yHeu5moEqQDJ. <pre><code>#config.conf\nlocalWitnessAccountAddress = TCbxHgibJutCjVZUprvexKZZ4Rc6sJ4Xrk\nlocalwitness = [\n  yyy // private key of TSwCH45gi2HvtqDYX3Ff39yHeu5moEqQDJ\n]\n</code></pre> Notice: Only one private key can be added to <code>localwitness</code> when witness permission is modified.</p> </li> </ul>"},{"location":"mechanism-algorithm/multi-signatures/#active-permission","title":"Active Permission","text":"<p>Active permission is composed of a set of contract execution permission, like creating an account, transfer function, etc.</p> <p>Active permission's features:</p> <ol> <li>the account owns owner permission can change active permission</li> <li>the account owns the execution permission of AccountPermissionUpdateContract can also change active permission</li> <li>8 permissions at most</li> <li>permissionId increases from 2 automatically</li> <li>when a new account is created, an active permission will be created automatically, and the address will be inserted into it, default weight is 1, keys field only contains this address and weight is 1</li> </ol>"},{"location":"mechanism-algorithm/multi-signatures/#fee","title":"Fee","text":"<ol> <li>Using AccountPermissionUpdateContract costs 100TRX</li> <li>If a transaction contains 2 or more than 2 signatures, it charges an extra 1 TRX besides the transaction fee</li> <li>The fee can be modified by proposing</li> </ol>"},{"location":"mechanism-algorithm/multi-signatures/#api","title":"API","text":""},{"location":"mechanism-algorithm/multi-signatures/#change-permission","title":"Change Permission","text":"<p><code>AccountPermissionUpdateContract</code>, steps:</p> <ol> <li>call <code>getaccount</code> to query the account, get the original permission</li> <li>change permission</li> <li>build transaction and sign</li> <li>send transaction</li> </ol> <p>Demo HTTP request:</p> <pre><code>// POST to http://{{host}}:{{port}}/wallet/accountpermissionupdate\n\n{\n  \"owner_address\": \"41ffa9466d5bf6bb6b7e4ab6ef2b1cb9f1f41f9700\",\n  \"owner\": {\n    \"type\": 0,\n    \"id\": 0,\n    \"permission_name\": \"owner\",\n    \"threshold\": 2,\n    \"keys\": [{\n        \"address\": \"41F08012B4881C320EB40B80F1228731898824E09D\",\n        \"weight\": 1\n      },\n      {\n        \"address\": \"41DF309FEF25B311E7895562BD9E11AAB2A58816D2\",\n        \"weight\": 1\n      },\n      {\n        \"address\": \"41BB7322198D273E39B940A5A4C955CB7199A0CDEE\",\n        \"weight\": 1\n      }\n    ]\n  },\n  \"witness\": {\n      \"type\": 1,\n      \"id\": 1,\n      \"permission_name\": \"witness\",\n      \"threshold\": 1,\n      \"keys\": [{\n          \"address\": \"41F08012B4881C320EB40B80F1228731898824E09D\",\n          \"weight\": 1\n        }\n      ]\n    },\n  \"actives\": [{\n    \"type\": 2,\n    \"id\": 2,\n    \"permission_name\": \"active0\",\n    \"threshold\": 3,\n    \"operations\": \"7fff1fc0037e0000000000000000000000000000000000000000000000000000\",\n    \"keys\": [{\n        \"address\": \"41F08012B4881C320EB40B80F1228731898824E09D\",\n        \"weight\": 1\n      },\n      {\n        \"address\": \"41DF309FEF25B311E7895562BD9E11AAB2A58816D2\",\n        \"weight\": 1\n      },\n      {\n        \"address\": \"41BB7322198D273E39B940A5A4C955CB7199A0CDEE\",\n        \"weight\": 1\n      }\n    ]\n  }]\n}\n</code></pre>"},{"location":"mechanism-algorithm/multi-signatures/#calculate-the-active-permissions-operations","title":"Calculate the Active Permission's Operations","text":"<pre><code>public static void main(String[] args) {\n\n  //you need to specify the id of the contract you need to give permission to by referring to the definition of Transaction.ContractType in proto to get the id of the contract, below includes all the contract except AccountPermissionUpdateContract(id=46)\n\n  Integer[] contractId = {0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 30, 31,\n      32, 33, 41, 42, 43, 44, 45};\n  List&lt;Integer&gt; list = new ArrayList&lt;&gt;(Arrays.asList(contractId));\n  byte[] operations = new byte[32];\n  list.forEach(e -&gt; {\n    operations[e / 8] |= (1 &lt;&lt; e % 8);\n  });\n\n  //7fff1fc0033e0000000000000000000000000000000000000000000000000000\n  System.out.println(ByteArray.toHexString(operations));\n}\n</code></pre>"},{"location":"mechanism-algorithm/multi-signatures/#contract-execution","title":"Contract Execution","text":"<p>(1). Create transaction, the same as none multi-signatures</p> <p>(2). Specify <code>Permission_id</code>, default 0, represent owner permission, demo</p> <p>(3). User A sign the transaction, and then send it to user B</p> <p>(4). User B sign the transaction gets from A, and then send it to user C</p> <p>......</p> <p>(n). The last users that signs the transaction broadcast it to the node</p> <p>(n+1). The node will verify if the sum of the weight of all signatures is bigger than threshold, if true, the transaction is accepted, otherwise, is rejected</p>"},{"location":"mechanism-algorithm/multi-signatures/#other-apis","title":"Other APIs","text":"<p>Please refer to HTTP API and RPC API for more information.</p> <ol> <li> <p>query the addresses that already signed a transaction</p> <pre><code>&gt; curl -X POST http://127.0.0.1:8090/wallet/getapprovedlist -d '{\"transaction\"}'\n</code></pre> <pre><code>rpc GetTransactionApprovedList(Transaction) returns (TransactionApprovedList) { }\n</code></pre> </li> <li> <p>query the signature weight of a transaction</p> <pre><code>&gt; curl -X POST http://127.0.0.1:8090/wallet/getsignweight -d '{\"transaction\"}'\n</code></pre> <pre><code>rpc GetTransactionSignWeight (Transaction) returns (TransactionSignWeight) {}\n</code></pre> </li> </ol>"},{"location":"mechanism-algorithm/resource/","title":"Resource Model","text":""},{"location":"mechanism-algorithm/resource/#introduction","title":"Introduction","text":"<p>Voting Right, bandwidth and energy are important system resources of the TRON network. Among them, voting rights are used to vote for super representatives; Bandwidth is the unit that measures the size of the transaction bytes stored in the blockchain database. The larger the transaction, the more bandwidth resources will be consumed. Energy is the unit that measures the amount of computation required by the TRON virtual machine to perform specific operations on the TRON network. Since smart contract transactions require computing resources to execute, each smart contract transaction requires to pay for the energy fee.</p> <p>Note</p> <ul> <li>Ordinary transaction only consumes Bandwidth points</li> <li>Smart contract related transaction not only consumes Bandwidth points, but also Energy</li> </ul>"},{"location":"mechanism-algorithm/resource/#voting-right","title":"Voting Right","text":"<p>Before any account can vote for super representatives, it needs to obtain voting rights, that is, TRON Power (TP). Voting rights can be obtained by staking TRX. In addition to obtaining bandwidth or energy, staking TRX will also obtain voting rights at the same time. Voters who stake 1TRX will receive 1TP. For how to stake, please refer to the Staking on TRON Network chapter.</p> <p>Voters can stake multiple times, and the voting rights obtained by multiple stake will be added to the voter's account. Voters can query the total number of voting rights owned by the account and the number of used voting rights through the <code>wallet/getaccountresource</code> interface.</p>"},{"location":"mechanism-algorithm/resource/#bandwidth-points","title":"Bandwidth Points","text":"<p>The transaction information is stored and transmitted in the form of byte array, Bandwidth Points consumed = the number of bytes of the transaction * Bandwidth Points rate. Currently Bandwidth Points rate = 1.</p> <p>Such as if the number of bytes of a transaction is 200, so this transaction consumes 200 Bandwidth Points.</p> <p>Note</p> <p>Due to the change of the total amount of the staked TRX in the network and the self-staked TRX amount, the Bandwidth Points an account possesses is not fixed.</p>"},{"location":"mechanism-algorithm/resource/#1-how-to-get-bandwidth-points","title":"1. How to Get Bandwidth Points","text":"<ol> <li>By staking TRX to get Bandwidth Points, Bandwidth Points = the amount of TRX self-staked / the total amount of TRX staked for Bandwidth Points in the network * 43,200,000,000</li> <li>Every account has a fixed amount of free Bandwidth Points(600) every day</li> </ol>"},{"location":"mechanism-algorithm/resource/#2-bandwidth-points-consumption","title":"2. Bandwidth Points Consumption","text":"<p>Except for query operation, any transaction consumes Bandwidth points.</p> <p>Bandwidth points consumption sequence for TRC-10 transfer:</p> <ol> <li> <p>Free Bandwidth points.</p> </li> <li> <p>TRC-10 issuer's Bandwidth points(if possible.)</p> </li> <li> <p>Bandwidth points TRX staking.</p> </li> <li> <p>Bandwidth points obtained by TRX burning, the rate = the number of bytes of the transaction * 1,000 SUN;</p> </li> </ol> <p>Bandwidth points consumption sequence for other transactions:</p> <ol> <li> <p>Free Bandwidth points.</p> </li> <li> <p>Bandwidth points TRX staking.</p> </li> <li> <p>Bandwidth points obtained by TRX burning, the rate = the number of bytes of the transaction * 1,000 SUN;</p> </li> </ol>"},{"location":"mechanism-algorithm/resource/#3-bandwidth-points-recovery","title":"3. Bandwidth Points Recovery","text":"<p>After the account's free bandwidth and the bandwidth obtained by staking TRX are consumed, they will gradually recover within 24 hours.</p>"},{"location":"mechanism-algorithm/resource/#4-account-bandwidth-balance-query","title":"4. Account Bandwidth Balance Query","text":"<p>First, call the node HTTP interface <code>wallet/getaccountresource</code> to obtain the current resource status of the account, and then calculate the bandwidth balance by the following formula:</p> <pre><code>Free bandwidth balance = freeNetLimit - freeNetUsed\n\nBandwidth balance obtained by staking TRX = NetLimit - NetUsed\n</code></pre> <p>Note: If the result returned by the interface does not contain the parameters in the above formula, it means that the parameter value is 0.</p>"},{"location":"mechanism-algorithm/resource/#energy","title":"Energy","text":"<p>Each command of smart contract consume system resource while running, we use 'Energy' as the unit of the consumption of the resource.</p>"},{"location":"mechanism-algorithm/resource/#1-how-to-get-energy","title":"1. How to Get Energy","text":"<p>Stake TRX to get energy.</p> <p>Example (Using wallet-cli):</p> <pre><code>freezeBalanceV2 frozen_balance [ResourceCode:0 BANDWIDTH,1 ENERGY]\n</code></pre> <p>stake TRX to get energy, energy obtained = user's TRX staked amount / total amount of staked TRX in TRON * 180,000,000,000.</p> <p>Example:</p> <pre><code>If there are only two users, A stakes 2 TRX, B stakes 2 TRX\nthe energy they can get is:\nA: 75,000,000,000 and energy_limit is 90,000,000,000\nB: 75,000,000,000 and energy_limit is 90,000,000,000\n\nwhen C stakes 1 TRX:\nthe energy they can get is:\nA: 60,000,000,000 and energy_limit is 72,000,000,000\nB: 60,000,000,000 and energy_limit is 72,000,000,000\nC: 30,000,000,000 and energy_limit is 36,000,000,000\n</code></pre>"},{"location":"mechanism-algorithm/resource/#energy-consumption","title":"Energy Consumption","text":"<p>When the contract is executed, Energy is calculated and deducted according to instruction one by one. The priority of account energy consumption is as follows:</p> <ul> <li>Energy obtained by staking TRX</li> <li>Burn TRX</li> </ul> <p>First, the energy obtained by staking TRX will be consumed. If this part of energy is not enough, the account's TRX will continue to be burned to pay for the energy resources required for the transaction, according to the unit price of 0.00021TRX per energy. </p> <p>If the contract exits due to throwing a revert exception while execution, only the energy consumed by instructions that have already been executed will be deducted. But for abnormal contracts, such as contract execution timeout, or abnormal exit due to bug, the maximum available energy of this transaction will be deducted. You can limit the maximum energy cost of this transaction by setting the <code>fee_limit</code> parameter of the transaction.</p>"},{"location":"mechanism-algorithm/resource/#energy-recovery","title":"Energy Recovery","text":"<p>After the energy resource of the account is consumed, it will gradually recover within 24 hours.</p>"},{"location":"mechanism-algorithm/resource/#account-energy-balance-query","title":"Account Energy Balance Query","text":"<p>First call the node HTTP interface <code>wallet/getaccountresource</code> to obtain the current resource status of the account, and then calculate the energy balance by the following formula:</p> <pre><code>Energy Balance = EnergyLimit - EnergyUsed\n</code></pre> <p>Note: If the result returned by the interface does not contain the parameters in the above formula, it means that the parameter value is 0.</p>"},{"location":"mechanism-algorithm/resource/#2-how-to-set-fee-limit-caller-must-read","title":"2. How to Set Fee Limit (Caller Must Read)","text":"<p>Within the scope of this section, the smart contract developer will be called \"developer\", the users or other contracts which call the smart contract will be called \"caller\"</p> <p>The amount of energy consumed while call the contract can be converted to TRX or SUN, so within the scope of this section, when refer to the consumption of the resource, there's no strict difference between Energy, TRX and SUN, unless they are used as a number unit.</p> <p>Set a rational fee limit can guarantee the smart contract execution. And if the execution of the contract cost great energy, it will not consume too much energy from the caller. Before you set fee limit, you need to know several conception:</p> <ol> <li>The legal fee limit is a integer between 0 - 15*10^9, unit is SUN.</li> <li>Different smart contracts consume different amount of energy due to their complexity. The same trigger in the same contract almost consumes the same amount of energy[^1], however, due to the dynamic energy model mechanism, for popular contracts, different energy may be required for execution at different times. For details, please refer to the Dynamic Energy Model Chapter. When the contract is triggered, the commands will be executed one by one and consume energy. If it reaches the fee limit, commands will fail to be executed, and energy is not refundable.</li> <li>Currently fee limit only refers to the energy converted to SUN that will be consumed from the caller[^2]. The energy consumed by triggering contract also includes developer's share.</li> <li>For a vicious contract, if it encounters execution timeout or bug crash, all it's energy will be consumed.</li> <li>Developer may undertake a proportion of energy consumption(like 90%). But if the developer's energy is not enough for consumption, the rest of the energy consumption will be undertaken by caller completely. Within the fee limit range, if the caller does not have enough energy, then it will burn equivalent amount of TRX [^2].</li> </ol> <p>To encourage caller to trigger the contract, usually developer has enough energy.</p>"},{"location":"mechanism-algorithm/resource/#example","title":"Example","text":"<p>How to estimate the fee limit:</p> <ul> <li>Assume contract C's last execution consumes 18000 Energy, so estimate the energy consumption limit to be 20000 Energy.</li> <li>When to burn TRX, since the unit price of energy is currently 210sun, 21 trx can be exchanged for 100,000 Energy.</li> </ul> <p>Assume developer undertake 90% energy consumption, and developer has enough energy.</p> <p>Then the way to estimate the fee limit is:</p> <ol> <li>A = 20000 energy * 210sun = 4,200,000 sun = 4.2 trx</li> <li>Developer undertakes 90% energy consumption, caller undertakes 10% energy consumption,</li> </ol> <p>So, the caller is suggested to set fee limit to 4,200,000 sun * 10% = 420,000 sun.</p>"},{"location":"mechanism-algorithm/resource/#3-energy-calculation-developer-must-read","title":"3. Energy Calculation (Developer Must Read)","text":"<ol> <li> <p>In order to punish the vicious developer, for the abnormal contract, if the execution times out (more than 80ms) or quits due to bug (revert not included), the maximum available energy will be deducted. If the contract runs normally or revert, only the energy needed for the execution of the commands will be deducted.</p> </li> <li> <p>Developer can set the proportion of the energy consumption it undertakes during the execution, this proportion can be changed later. If the developer's energy is not enough, it will consume the caller's energy.</p> </li> <li> <p>Currently, the total energy available when trigger a contract is composed of caller fee limit and developer's share</p> </li> </ol> <p>Note</p> <ul> <li>If the developer is not sure about whether the contract is normal, do not set caller's energy consumption proportion to 0%, in case all developer's energy will be deducted due to vicious execution[^1].</li> <li>We recommend to set caller's energy consumption proportion to 10% ~ 100%[^2].</li> </ul> <p>** Example 1 **</p> <p>A has an account with a balance of 90 TRX(90000000 SUN) and 10 TRX staked for 100000 energy.</p> <p>Smart contract C set the caller energy consumption proportion to 100% which means the caller will pay for the energy consumption completely.</p> <p>A triggers C, the fee limit set is 30000000 (unit SUN, 30 TRX)</p> <p>So during this trigger the energy A can use is from two parts:</p> <ul> <li>A's energy by staking TRX;</li> <li>The energy converted from the amount of TRX burning according to a fixed rate;</li> </ul> <p>If fee limit is greater than the energy obtained from staking TRX, then it will burn TRX to get energy. The fixed rate is: 1 Energy = 210 SUN, fee limit still has (30 - 10) TRX = 20 TRX available, so the energy it can keep consuming is 20 TRX / 210 SUN = 95238 energy.</p> <p>Finally, in this call, the energy A can use is (100000 + 95238) = 195238 energy.</p> <p>If contract executes successfully without any exception, the energy needed for the execution will be deducted. Generally, it is far more less than the amount of energy this trigger can use.</p> <p>If Assert-style error come out, it will consume the whole number of energy set for fee limit.</p> <p>** Example 2 **</p> <p>A has an account with a balance of 90 TRX(90000000 SUN) and 10 TRX staked for 100000 energy.</p> <p>Smart contract C set the caller energy consumption proportion to 40% which means the developer will pay for the rest 60% energy consumption.</p> <p>Developer D stakes 50 TRX to get 500000 energy.</p> <p>A triggers C, the fee limit set is 200000000 (unit SUN, 200 TRX).</p> <p>So during this trigger the energy A can use is from three parts:</p> <ul> <li>A's energy by staking TRX -- X;</li> <li> <p>The energy converted from the amount of TRX burning according to a fixed rate -- Y;</p> <p>If fee limit is greater than the energy obtained from staking TRX, then it will burn TRX to get energy. The fixed rate is: 1 Energy = 210 sun, fee limit still has (200 - 10) TRX = 190 TRX available, but A only has 90 TRX left, so the energy it can keep consuming is 90 TRX / 210 sun = 428571 energy;</p> </li> <li> <p>D's energy by staking TRX -- Z;</p> </li> </ul> <p>There are two situation: if (X + Y) / 40% &gt;= Z / 60%, the energy A can use is X + Y + Z if (X + Y) / 40% &lt; Z / 60%, the energy A can use is (X + Y) / 40%</p> <p>If contract executes successfully without any exception, the energy needed for the execution will be deducted. Generally, it is far more less than the amount of energy this trigger can use.</p> <p>If Assert-style error comes out, it will consume the whole number of energy set for fee limit. </p> <p>Note: when developer create a contract, do not set consume_user_resource_percent to 0, which means developer will undertake all the energy consumption. If Assert-style error comes out, it will consume all energy from the developer itself. To avoid unnecessary lost, 10 - 100 is recommended for consume_user_resource_percent.</p>"},{"location":"mechanism-algorithm/resource/#dynamic-energy-model","title":"Dynamic Energy Model","text":"<p>The dynamic energy model is a resource balancing mechanism of the TRON network, which can dynamically adjust the energy consumption of each contract according to the resource occupancy of the contract, so as to make the allocation of energy resources on the chain more reasonable and prevent excessive concentration of network resources on a few popular contracts. For more details, please refer to Introduction to Dynamic Energy Model.</p>"},{"location":"mechanism-algorithm/resource/#principle","title":"Principle","text":"<p>If a contract uses too many resources in one maintenance cycle, then in the next maintenance cycle, a certain percentage of punitive consumption will be added, and users who send the same transaction to this contract will cost more energy than before. When the contract uses resources reasonably, the energy consumption generated by the user calling the contract will gradually return to normal. </p> <p>Each contract has an <code>energy_factor</code> field, which indicates the increase ratio of the energy consumption of the smart contract transaction relative to the base energy consumption and the initial value is 0. When the <code>energy_factor</code> of the contract is 0, it means that the contract is using resources reasonably, and there will be no additional energy consumption for calling the contract. When the <code>energy_factor</code> is greater than 0, it means that the contract is already a popular contract, and additional energy will be consumed when calling the contract. The <code>energy_factor</code> of a contract can be queried through the getcontractinfo API.</p> <p>The calculation formula for the final energy consumed by the contract invocation transaction is as follows:</p> <pre><code>energy consumption by a contract invocation transaction  = the basic energy consumption generated by the transaction * \uff081 +  energy_factor\uff09\n</code></pre> <p>The dynamic energy model introduces the following three parameters of the TRON network , which jointly control the <code>energy_factor</code> field of the contract:</p> <ul> <li><code>threshold</code>: The threshold of contract basic energy consumption. In a maintenance cycle, if the basic energy consumption of the contract exceeds this threshold, the energy consumption of the contract will increase at the next maintenance cycle.</li> <li><code>increase_factor</code>: If the basic energy consumption of the contract exceeds the threshold during a certain maintenance cycle, the <code>energy_factor</code> will increase by a certain percentage according to the <code>increase_factor</code> in the next maintenance cycle.</li> <li><code>max_factor</code>: the maximum value of energy_factor.</li> </ul> <p>There is also a variable <code>decrease_factor</code> used to reduce the <code>energy_factor</code> of the contract:</p> <ul> <li><code>decrease_factor</code>: 1/4 of <code>increase_factor</code>. After the basic energy consumption of the contract falls below the threshold, <code>energy_factor</code> will be reduced by a certain percentage according to <code>decrease_factor</code>.</li> </ul> <p>When the basic energy consumption of the contract exceeds <code>threshold</code> during a maintenance cycle, its <code>energy_factor</code> will increase in the next maintenance cycle, but the maximum will not be Exceeding <code>max_factor</code>, the calculation formula is:</p> <pre><code>energy_factor = min((1 + energy_factor) * (1 + increaese_factor)-1, max_factor)\n</code></pre> <p>When the basic energy consumption of the contract drops below the threshold in a maintenance cycle, the <code>energy_factor</code> will decrease in the next maintenance cycle, but the minimum value will not be lower than 0. The calculation formula is as follows:</p> <pre><code>energy_factor = max((1 + energy_factor) * (1 - decrease_factor)- 1, 0)\n</code></pre> <p>The dynamic energy model has been enabled on the main network, and the relevant parameters are set as follows:</p> <ul> <li><code>threshold</code>\uff1a5,000,000,000</li> <li><code>increase_factor</code>\uff1a0.2</li> <li><code>max_factor</code>\uff1a3.4</li> </ul> <p>Since the energy consumption of popular contracts is different in different maintenance cycles, it is necessary to set the appropriate feelimit parameter for the transaction when calling the contract.</p>"},{"location":"mechanism-algorithm/resource/#staking-on-tron-network","title":"Staking on TRON network","text":""},{"location":"mechanism-algorithm/resource/#how-to-stake-to-obtain-system-resources","title":"How to stake to obtain system resources","text":"<p>Energy and bandwidth resources are obtained by the account owner through staking, please use <code>wallet/freezebalancev2</code> to complete the stake operation through HTTP API, use Stake2.0 Solidity API to complete the stake operation through the contract.</p> <p>TRON allocates resources through the staking mechanism. In addition to obtaining bandwidth or energy resources, staking TRX will also obtain voting rights (TRON Power, TP for short) equal to the amount staked. Staking 1 TRX, you will get 1TP. The energy or bandwidth resources obtained by staking are used to pay transaction fees, and the obtained voting rights are used to vote for super representatives to obtain voting rewards.</p> <p>The unstaking operation will release the corresponding resources.</p>"},{"location":"mechanism-algorithm/resource/#how-to-delegate-resources","title":"How to delegate resources","text":"<p>After the account obtains energy or bandwidth resources through staking, it can delegate resources to other addresses through <code>delegateresource</code>, and can also take back allocated resources through <code>undelegateresource</code>. Please pay attention to the following situations when delegating resource:</p> <ul> <li>Only energy and bandwidth can be delegated to other addresses, voting rights cannot be delegated</li> <li>Only unused resources obtained by staking through Stake2.0 can be delegated to other addresses</li> <li>Energy/Bandwidth can only be delegated to an activated external account address, not to a contract address</li> </ul> <p>You can use the <code>wallet/getcandelegatedmaxsize</code> interface to query the available delegation share of a certain resource type in the account. <code>Time lock</code> can be used when delegating resources. If time lock is used, after the resource delegating is completed, the resource delegation for the address only can be canceled after 3 days. During the locking period, if the user performs resource delegating for the same address again, it will Reset the 3-days waiting period. If the time lock is not used, the delegation can be canceled immediately after the resource is delegated.</p>"},{"location":"mechanism-algorithm/resource/#how-to-unstake-trx","title":"How to unstake TRX","text":"<p>After completing the TRX staking, you can unstake at any time. After unstaking, you need to wait for 14 days before you can withdraw the unstaked TRX into your account. 14 days is the No.70 parameter of TRON network which can be voted on by network governance proposals. Please use <code>unfreezebalancev2</code> to complete unfreeze balance through HTTP API.</p> <p>The staked TRX can be partially unstaked multiple times, but only a maximum of 32 unstaking operations are allowed at the same time. That is to say, when a user initiates the first unstake operation, before the TRX of the first unstaking arrives and is ready to be withdrawn to his or her account, he or she can only initiate another 31 unstake operations. The remaining counts of unfreeze can be queried through the <code>getavailableunfreezecount</code> interface.</p> <p>The TRX that have been delegated cannot be unstaked. In addition to losing the same amount of resource shares, the unstaking will also lose the same amount of TP resources.</p> <p>When unstaking, if there are unclaimed voting rewards, the voting rewards will be automatically withdrawn to the account. If there is a previously unstaked principal that has passed the lock-up period, then this unstake operation will also withdraw the unstaked principal that has passed the lock-up period to the account at the same time. You can use the <code>gettransactioninfobyid</code>API to query the voting reward extracted in this transaction in <code>withdraw_amount</code> field and the withdrawn amount of unstaked TRX that has expired the lock-up period in <code>withdraw_expire_amount</code> field.</p>"},{"location":"mechanism-algorithm/resource/#tron-power-reclaim","title":"TRON Power Reclaim","text":"<p>After unstaking the TRX staked in the Stake2.0 stage, the same amount of voting rights will be lost. The system will first reclaim the idle voting rights in the account. If the idle TP is insufficient, it will continue to reclaim the used TP. If the user has voted for multiple super representatives, a certain number of votes will be withdrawn in proportion from each super representative, and the corresponding voting rights will be recovered. The calculation formula for withdrawing votes for each SR is,</p> <pre><code>The number of votes withdrawn from the current super representative = total number of votes to be withdrawn  * (number of votes for the current super representative / total number of votes of this account)\n</code></pre> <p>For example, Suppose A staked 2,000TRX and obtained 2,000 TRON Power, of which 1,000 TRON Power voted for 2 super representatives, 600 votes and 400 votes respectively, and 1,000 TRON Power remained in the account. At this time, A unstakes 1,500TRX, which means that 1,500 TRON Power needs to be reclaimed from A\u2019 account. In this case, the idle 1,000 TP in A\u2019s account will be withdrawn first, and the spared 500 TP will be withdrawn from the voted TP, which is 300 TP and 200 TP respectively from the two super representatives. Here's how the votes are calculated:</p> <ul> <li>Number of votes withdrawn by Super Representative 1 = 500 * (600 / 1,000) = 300</li> <li>Number of votes withdrawn by Super Representative 2 = 500 * (400 / 1,000) = 200</li> </ul> <p>At present, the TRON network uses the Stake2.0 stake mechanism, but the resources and votes obtained by Stake1.0 are still valid. The TRX staked at Stake1.0 can still be withdrawal through Stake1.0 API <code>unfreezebalance</code>, but it should be noted that if the TRX staked in Stake 1.0 is unstaked, all votes in the account will be revoked.</p>"},{"location":"mechanism-algorithm/resource/#how-to-cancel-unstaking","title":"How to cancel unstaking","text":"<p>Stake2.0 supports canceling all unstakes after the user unstakes TRX, which will make the assets be used for stake again to obtain corresponding resources, without having to wait for the unstaked funds to pass the lock-up period before withdrawing the funds to the account , and then stake them again. Please use <code>cancelallunfreezev2</code> to cancel all unstaking operations.</p> <p>When canceling unstakings, all unstaked funds still in the waiting period will be re-staked, and the resource obtained through the re-staking remains the same as before. Unstakings that exceeded the 14-day waiting period cannot be canceled, and this part of the unstaked funds will be automatically withdrawn to the owner\u2019s account. Users can query the canceled unstaked principal amount <code>cancel_unfreezeV2_amount</code>, and the withdrawn principal amount that has expired the lock-up period <code>withdraw_expire_amount</code> through the <code>gettransactioninfobyid</code> interface.</p>"},{"location":"mechanism-algorithm/resource/#api","title":"API","text":"<p>The following table shows the relevant interfaces of the stake model and their descriptions:</p> API Description freezebalancev2 Stake TRX unfreezebalancev2 Unstake TRX delegateresource Delegate resources undelegateresource Undelegate resources withdrawexpireunfreeze Withdraw unfrozen balance getavailableunfreezecount Query the remaining times of executing unstake operation getcanwithdrawunfreezeamount Query the withdrawable balance getcandelegatedmaxsize Query the amount of delegatable resources share of the specified resource Type getdelegatedresourcev2 Query the amount of resource delegated by fromAddress to toAddress getdelegatedresourceaccountindexv2 Query the resource delegation index by an account getaccount Query the account stake status, resource share, unstake status, and voting status getaccountresource Query the total amount of resources, the amount of used, and the amount of available cancelallunfreezev2 Cancel unstaking"},{"location":"mechanism-algorithm/shielded-transaction/","title":"Shielded Transaction","text":""},{"location":"mechanism-algorithm/shielded-transaction/#introduction","title":"Introduction","text":"<p>TRON shielded transaction uses zk-SNARK(Zero-Knowledge Succinct Non-Interactive Argument of Knowledge) to implement a completely anonymous transaction. TronZ is the name of shielded trc10 token.</p> <p>In shielded transaction of transferring TronZ, the sender and the receiver's address and transfer amount can both be completely confidential.</p> <p>In shielded transaction of transferring TronZ, there are two types of address:</p> <ul> <li>\"t-addr\" (Transparent Address)</li> <li>\"z-addr\" (Shielded Address)</li> </ul> <p>\"t-addr\" address uses TRON account model. \"z-addr\" address uses Anonymous account model.</p> <p>In shielded transaction of transferring TronZ, there are three types of transfer transaction: - From \"t-addr\" to \"z-addr\": The transaction information of \"t-addr\" can be tracked, \"z-addr\" can not be tracked.</p> <ul> <li> <p>From \"z-addr\" to \"z-addr\": The transaction information of both \"z-addr\" can not be tracked.</p> </li> <li> <p>From \"z-addr\" to \"t-addr\": The transaction information of both \"t-addr\" can be tracked, \"z-addr\" can not be tracked.</p> </li> </ul> <p>From \"t-addr\" to \"t-addr\" are not supported.</p>"},{"location":"mechanism-algorithm/shielded-transaction/#usage-guide","title":"Usage Guide","text":"<p>1.\u00a0The sender can only spend one note in each transfer. The receiver can receive two notes in each transfer at most.</p> <p>2.\u00a0When you transfer from \"z-addr\" to \"t-addr\", if no note returns to \"z-addr\" as a change, it will generate a note of zero value automatically, and send it to a random black hole address.</p> <p>3.\u00a0The fee for each shielded transaction is xx.</p> <p>The doc below describes how to use TRON Shielded Transaction with http api.</p>"},{"location":"mechanism-algorithm/shielded-transaction/#transfer-from-transparent-address-to-shielded-address","title":"Transfer from transparent address to shielded address","text":"<p>Step 1. Call api: wallet/createshieldedtransaction to build the transaction Method: Post Parameters: <pre><code>{\n    \"transparent_from_address\":\"41A7D8A35B260395C14AA456297662092BA3B76FC0\",\n    \"from_amount\":100000000,\n    \"ovk\":\"798ba79bfec55e154fa69b4e6a96247288f727b5e4ecc5cd848aefc0afab02b6\",\n    \"shielded_receives\":[{\n        \"note\":\n        {\n             \"value\": 500000000,\n             \"payment_address\": \"ztron1jld8fmvujrz2vgkc867zuwklmewy4ypw0wtwgweqs2paee0uhc8f3azy90el770arksa2kunl02\",\n             \"rcm\": \"723053bcbfecdf5da66c18ab0376476ef308c61b7abe891b2c01e903bcb87c0e\"\n        }\n    }]\n}\n</code></pre> Return: <pre><code>{\"txID\":\"1967c40954e8c6c4761c377a021ec3a6ad0545d8b4443f0ccdd1bec4dcbaa497\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"transparent_from_address\":\"41a7d8a35b260395c14aa456297662092ba3b76fc0\",\"binding_signature\":\"5407f7f7d43ae313bf54b8d6a8cf716f65390171e39c11c07b4c90e5ae7d5d114b1729d44a3bc58f6e40c413b972e8ab61a8e66502b30df35937f64957c0da0a\",\"from_amount\":100000000,\"fee\":10000000,\"receive_description\":[{\"value_commitment\":\"5a1cd384edab9c38901d0250ebdf96d4f29889094b7096a7ce2dd6af919afd21\",\"note_commitment\":\"f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b62\",\"epk\":\"e7ff2357376eafdabc6db3fdabc079e42dd14c61a9a08c6cd38405d086086b4b\",\"c_enc\":\"d1aaf220f531f31bd2d9ff6f6d59998e78f3f0d30c852258441c5d54fc6790af7620b8860f6ec48d93fedb4c9bbb0e43c8144a9e304ceee399ac6da0bb91dbace3c8a93e03f1d2a5a88b0998704a09a51ab147096a994420741e87168cda4f45f8ed03c816e947909f2997d48e2ceaed45c539463e5e8caf6a0a1529615afbfa01df0a89c6360512519aea8a1b30a367a8749b24946fcd2fbbc6cfbbb6562ed6aa16db5d9e76b1872683a841ebda3a16dda6083474c2ea5a81f4e5c04e6af6ed582f58cab36bc016cfcf03337bc64b5411c7cb6f6f55e17d96bfead8becb0b7661768e122c943159ff2854c0e6efdd408b5bd5afc9d629645bfff8d4a240591fa9adc37e4a5bc046fcf31f8088f3616dd2f69860e401221585fd1a5ebe88080742802ae4696b8ba5e826ddd42841dce71b4b3ebe47b1f254103ae49f0bd9d61f5c0193441c471d29535247c26ab9297975497f6051466dbc591c4cd7b4246604e445d7d3a1dd77538c1989a8c48f829c6a1ce0dee84019ef68b7407def2492f5c867f659b0f8f58cc1081706453bf3a1ec719927c6b3defdcc002e9f2f63b4bdb7f69a00db742d2571d7293bae3faffc43ea0ff032e1b262a3597290c6c9117a006c91074a455c80a3a8089d93aed5bd48bd04bb30ad68fc87ff2bb4e5c20fe4bc0ad1b586aef3d1183170dec490c6bc82ec85d4031e292782f8778f21252a7cb6730da2d8fb175017e213eb10527b104bf333767cfed23c7c993391d9029f404947a793c37c1880a6be5cc26cc447ea020db8832239aa09aad9876ec17c4095857971ae\",\"c_out\":\"8e3df70e1feaf8da5da72062d13c5200ab09f43e45d2ba1aac8a56c8e9d033d786cfe3ed7d2b30d8b6124afe2646c7af25b60ed02c3a50b2cb62637461e00b153b92f868f2194b46c49e9a1c9e987d5a\",\"zkproof\":\"8b338777245e733183101027436ea41ea15f61537f38a35109fe6e53806c7913c69f186a86ba1d63997c5301c650089aa888cdf939573b0e7aceefff59757f8ba2275bd4469de04174f1b450a53017260b4bbc4a27cd8aac45d5ff2e5f5ab0eb14ffc59cf0fa10cd32363ef9a9fb9bf68431c4ee1c2ca15797ba4c18dbde24ae451797b25f13a73a231783f72b6f7a429026e191a49619057b250fab6b7010fc58dfcf922b04ad83756e2b8780100dccaafc65e4ef0357c6aae57f4f5c790607\"}]},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"0245\",\"ref_block_hash\":\"b1ea272768028540\",\"expiration\":1558691289000,\"timestamp\":1558691230861},\"raw_data_hex\":\"0a0202452208b1ea27276802854040a8aff6c9ae2d5ae708083312e2080a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e747261637412a8080a1541a7d8a35b260395c14aa456297662092ba3b76fc01080c2d72f22c2070a205a1cd384edab9c38901d0250ebdf96d4f29889094b7096a7ce2dd6af919afd211220f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b621a20e7ff2357376eafdabc6db3fdabc079e42dd14c61a9a08c6cd38405d086086b4b22c404d1aaf220f531f31bd2d9ff6f6d59998e78f3f0d30c852258441c5d54fc6790af7620b8860f6ec48d93fedb4c9bbb0e43c8144a9e304ceee399ac6da0bb91dbace3c8a93e03f1d2a5a88b0998704a09a51ab147096a994420741e87168cda4f45f8ed03c816e947909f2997d48e2ceaed45c539463e5e8caf6a0a1529615afbfa01df0a89c6360512519aea8a1b30a367a8749b24946fcd2fbbc6cfbbb6562ed6aa16db5d9e76b1872683a841ebda3a16dda6083474c2ea5a81f4e5c04e6af6ed582f58cab36bc016cfcf03337bc64b5411c7cb6f6f55e17d96bfead8becb0b7661768e122c943159ff2854c0e6efdd408b5bd5afc9d629645bfff8d4a240591fa9adc37e4a5bc046fcf31f8088f3616dd2f69860e401221585fd1a5ebe88080742802ae4696b8ba5e826ddd42841dce71b4b3ebe47b1f254103ae49f0bd9d61f5c0193441c471d29535247c26ab9297975497f6051466dbc591c4cd7b4246604e445d7d3a1dd77538c1989a8c48f829c6a1ce0dee84019ef68b7407def2492f5c867f659b0f8f58cc1081706453bf3a1ec719927c6b3defdcc002e9f2f63b4bdb7f69a00db742d2571d7293bae3faffc43ea0ff032e1b262a3597290c6c9117a006c91074a455c80a3a8089d93aed5bd48bd04bb30ad68fc87ff2bb4e5c20fe4bc0ad1b586aef3d1183170dec490c6bc82ec85d4031e292782f8778f21252a7cb6730da2d8fb175017e213eb10527b104bf333767cfed23c7c993391d9029f404947a793c37c1880a6be5cc26cc447ea020db8832239aa09aad9876ec17c4095857971ae2a508e3df70e1feaf8da5da72062d13c5200ab09f43e45d2ba1aac8a56c8e9d033d786cfe3ed7d2b30d8b6124afe2646c7af25b60ed02c3a50b2cb62637461e00b153b92f868f2194b46c49e9a1c9e987d5a32c0018b338777245e733183101027436ea41ea15f61537f38a35109fe6e53806c7913c69f186a86ba1d63997c5301c650089aa888cdf939573b0e7aceefff59757f8ba2275bd4469de04174f1b450a53017260b4bbc4a27cd8aac45d5ff2e5f5ab0eb14ffc59cf0fa10cd32363ef9a9fb9bf68431c4ee1c2ca15797ba4c18dbde24ae451797b25f13a73a231783f72b6f7a429026e191a49619057b250fab6b7010fc58dfcf922b04ad83756e2b8780100dccaafc65e4ef0357c6aae57f4f5c7906072a405407f7f7d43ae313bf54b8d6a8cf716f65390171e39c11c07b4c90e5ae7d5d114b1729d44a3bc58f6e40c413b972e8ab61a8e66502b30df35937f64957c0da0a4080ade204708de9f2c9ae2d\"}\n</code></pre> Step 2. Sign the transaction using SDK</p> <p>Step 3. Call api: wallet/broadcasttransaction to broadcast the transaction Method: Post Parameters: <pre><code>{\"signature\":[\"5c1939e2e1177f44a6d168b5e473bd193ea099aa369ffe27727d560f1c72a3226dd4be61c19a09cabbe3f4a7433932df11cf3e54c4fc04cff0eea6906f04c32a00\"],\"txID\":\"1967c40954e8c6c4761c377a021ec3a6ad0545d8b4443f0ccdd1bec4dcbaa497\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"transparent_from_address\":\"41a7d8a35b260395c14aa456297662092ba3b76fc0\",\"binding_signature\":\"5407f7f7d43ae313bf54b8d6a8cf716f65390171e39c11c07b4c90e5ae7d5d114b1729d44a3bc58f6e40c413b972e8ab61a8e66502b30df35937f64957c0da0a\",\"from_amount\":100000000,\"fee\":10000000,\"receive_description\":[{\"value_commitment\":\"5a1cd384edab9c38901d0250ebdf96d4f29889094b7096a7ce2dd6af919afd21\",\"note_commitment\":\"f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b62\",\"epk\":\"e7ff2357376eafdabc6db3fdabc079e42dd14c61a9a08c6cd38405d086086b4b\",\"c_enc\":\"d1aaf220f531f31bd2d9ff6f6d59998e78f3f0d30c852258441c5d54fc6790af7620b8860f6ec48d93fedb4c9bbb0e43c8144a9e304ceee399ac6da0bb91dbace3c8a93e03f1d2a5a88b0998704a09a51ab147096a994420741e87168cda4f45f8ed03c816e947909f2997d48e2ceaed45c539463e5e8caf6a0a1529615afbfa01df0a89c6360512519aea8a1b30a367a8749b24946fcd2fbbc6cfbbb6562ed6aa16db5d9e76b1872683a841ebda3a16dda6083474c2ea5a81f4e5c04e6af6ed582f58cab36bc016cfcf03337bc64b5411c7cb6f6f55e17d96bfead8becb0b7661768e122c943159ff2854c0e6efdd408b5bd5afc9d629645bfff8d4a240591fa9adc37e4a5bc046fcf31f8088f3616dd2f69860e401221585fd1a5ebe88080742802ae4696b8ba5e826ddd42841dce71b4b3ebe47b1f254103ae49f0bd9d61f5c0193441c471d29535247c26ab9297975497f6051466dbc591c4cd7b4246604e445d7d3a1dd77538c1989a8c48f829c6a1ce0dee84019ef68b7407def2492f5c867f659b0f8f58cc1081706453bf3a1ec719927c6b3defdcc002e9f2f63b4bdb7f69a00db742d2571d7293bae3faffc43ea0ff032e1b262a3597290c6c9117a006c91074a455c80a3a8089d93aed5bd48bd04bb30ad68fc87ff2bb4e5c20fe4bc0ad1b586aef3d1183170dec490c6bc82ec85d4031e292782f8778f21252a7cb6730da2d8fb175017e213eb10527b104bf333767cfed23c7c993391d9029f404947a793c37c1880a6be5cc26cc447ea020db8832239aa09aad9876ec17c4095857971ae\",\"c_out\":\"8e3df70e1feaf8da5da72062d13c5200ab09f43e45d2ba1aac8a56c8e9d033d786cfe3ed7d2b30d8b6124afe2646c7af25b60ed02c3a50b2cb62637461e00b153b92f868f2194b46c49e9a1c9e987d5a\",\"zkproof\":\"8b338777245e733183101027436ea41ea15f61537f38a35109fe6e53806c7913c69f186a86ba1d63997c5301c650089aa888cdf939573b0e7aceefff59757f8ba2275bd4469de04174f1b450a53017260b4bbc4a27cd8aac45d5ff2e5f5ab0eb14ffc59cf0fa10cd32363ef9a9fb9bf68431c4ee1c2ca15797ba4c18dbde24ae451797b25f13a73a231783f72b6f7a429026e191a49619057b250fab6b7010fc58dfcf922b04ad83756e2b8780100dccaafc65e4ef0357c6aae57f4f5c790607\"}]},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"0245\",\"ref_block_hash\":\"b1ea272768028540\",\"expiration\":1558691289000,\"timestamp\":1558691230861},\"raw_data_hex\":\"0a0202452208b1ea27276802854040a8aff6c9ae2d5ae708083312e2080a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e747261637412a8080a1541a7d8a35b260395c14aa456297662092ba3b76fc01080c2d72f22c2070a205a1cd384edab9c38901d0250ebdf96d4f29889094b7096a7ce2dd6af919afd211220f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b621a20e7ff2357376eafdabc6db3fdabc079e42dd14c61a9a08c6cd38405d086086b4b22c404d1aaf220f531f31bd2d9ff6f6d59998e78f3f0d30c852258441c5d54fc6790af7620b8860f6ec48d93fedb4c9bbb0e43c8144a9e304ceee399ac6da0bb91dbace3c8a93e03f1d2a5a88b0998704a09a51ab147096a994420741e87168cda4f45f8ed03c816e947909f2997d48e2ceaed45c539463e5e8caf6a0a1529615afbfa01df0a89c6360512519aea8a1b30a367a8749b24946fcd2fbbc6cfbbb6562ed6aa16db5d9e76b1872683a841ebda3a16dda6083474c2ea5a81f4e5c04e6af6ed582f58cab36bc016cfcf03337bc64b5411c7cb6f6f55e17d96bfead8becb0b7661768e122c943159ff2854c0e6efdd408b5bd5afc9d629645bfff8d4a240591fa9adc37e4a5bc046fcf31f8088f3616dd2f69860e401221585fd1a5ebe88080742802ae4696b8ba5e826ddd42841dce71b4b3ebe47b1f254103ae49f0bd9d61f5c0193441c471d29535247c26ab9297975497f6051466dbc591c4cd7b4246604e445d7d3a1dd77538c1989a8c48f829c6a1ce0dee84019ef68b7407def2492f5c867f659b0f8f58cc1081706453bf3a1ec719927c6b3defdcc002e9f2f63b4bdb7f69a00db742d2571d7293bae3faffc43ea0ff032e1b262a3597290c6c9117a006c91074a455c80a3a8089d93aed5bd48bd04bb30ad68fc87ff2bb4e5c20fe4bc0ad1b586aef3d1183170dec490c6bc82ec85d4031e292782f8778f21252a7cb6730da2d8fb175017e213eb10527b104bf333767cfed23c7c993391d9029f404947a793c37c1880a6be5cc26cc447ea020db8832239aa09aad9876ec17c4095857971ae2a508e3df70e1feaf8da5da72062d13c5200ab09f43e45d2ba1aac8a56c8e9d033d786cfe3ed7d2b30d8b6124afe2646c7af25b60ed02c3a50b2cb62637461e00b153b92f868f2194b46c49e9a1c9e987d5a32c0018b338777245e733183101027436ea41ea15f61537f38a35109fe6e53806c7913c69f186a86ba1d63997c5301c650089aa888cdf939573b0e7aceefff59757f8ba2275bd4469de04174f1b450a53017260b4bbc4a27cd8aac45d5ff2e5f5ab0eb14ffc59cf0fa10cd32363ef9a9fb9bf68431c4ee1c2ca15797ba4c18dbde24ae451797b25f13a73a231783f72b6f7a429026e191a49619057b250fab6b7010fc58dfcf922b04ad83756e2b8780100dccaafc65e4ef0357c6aae57f4f5c7906072a405407f7f7d43ae313bf54b8d6a8cf716f65390171e39c11c07b4c90e5ae7d5d114b1729d44a3bc58f6e40c413b972e8ab61a8e66502b30df35937f64957c0da0a4080ade204708de9f2c9ae2d\"}\n</code></pre> Return: <pre><code>{\"result\": true}\n</code></pre></p>"},{"location":"mechanism-algorithm/shielded-transaction/#transfer-from-shielded-address-to-shielded-address","title":"Transfer from shielded address to shielded address","text":"<p>Step 1. Call api: wallet/getmerkletreevoucherinfo to get the voucher of the shield address, this info will be used when create shielded transaction Method: Post Parameter: <pre><code>{\n    \"out_points\":[{\n        \"hash\":\"1967c40954e8c6c4761c377a021ec3a6ad0545d8b4443f0ccdd1bec4dcbaa497\",\n        \"index\":0\n    }],\n    \"block_num\":1\n}\n</code></pre> Return: <pre><code>{\"vouchers\": [{\"tree\": {\"left\": {\"content\": \"7efdc58818923de35ec35b4ef8e6a508f6952b9dd2a86af30a93dcd67e13ed35\"},\"right\": {\"content\": \"f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b62\"}},\"rt\": \"72eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e\"}],\"paths\": [\"2020b2eed031d4d6a4f02a097f80b54cc1541d4163c6b6f5971f88b6e41d35c538142012935f14b676509b81eb49ef25f39269ed72309238b4c145803544b646dca62d20e1f34b034d4a3cd28557e2907ebf990c918f64ecb50a94f01d6fda5ca5c7ef722028e7b841dcbc47cceb69d7cb8d94245fb7cb2ba3a7a6bc18f13f945f7dbd6e2a20a5122c08ff9c161d9ca6fc462073396c7d7d38e8ee48cdb3bea7e2230134ed6a20d2e1642c9a462229289e5b0e3b7f9008e0301cbb93385ee0e21da2545073cb582016d6252968971a83da8521d65382e61f0176646d771c91528e3276ee45383e4a20fee0e52802cb0c46b1eb4d376c62697f4759f6c8917fa352571202fd778fd712204c6937d78f42685f84b43ad3b7b00f81285662f85c6a68ef11d62ad1a3ee0850200769557bc682b1bf308646fd0b22e648e8b9e98f57e29f5af40f6edb833e2c492008eeab0c13abd6069e6310197bf80f9c1ea6de78fd19cbae24d4a520e6cf3023208d5fa43e5a10d11605ac7430ba1f5d81fb1b68d29a640405767749e841527673206aca8448d8263e547d5ff2950e2ed3839e998d31cbc6ac9fd57bc6002b15921620cd1c8dbf6e3acc7a80439bc4962cf25b9dce7c896f3a5bd70803fc5a0e33cf00206edb16d01907b759977d7650dad7e3ec049af1a3d875380b697c862c9ec5d51c201ea6675f9551eeb9dfaaa9247bc9858270d3d3a4c5afa7177a984d5ed1be245120d6acdedf95f608e09fa53fb43dcd0990475726c5131210c9e5caeab97f0e642f20bd74b25aacb92378a871bf27d225cfc26baca344a1ea35fdd94510f3d157082c201b77dac4d24fb7258c3c528704c59430b630718bec486421837021cf75dab65120ec677114c27206f5debc1c1ed66f95e2b1885da5b7be3d736b1de98579473048204777c8776a3b1e69b73a62fa701fa4f7a6282d9aee2c7a6b82e7937d7081c23c20ba49b659fbd0b7334211ea6a9d9df185c757e70aa81da562fb912b84f49bce722043ff5457f13b926b61df552d4e402ee6dc1463f99a535f9a713439264d5b616b207b99abdc3730991cc9274727d7d82d28cb794edbc7034b4f0053ff7c4b68044420d6c639ac24b46bd19341c91b13fdcab31581ddaf7f1411336a271f3d0aa52813208ac9cf9c391e3fd42891d27238a81a8a5c1d3a72b1bcbea8cf44a58ce738961320912d82b2c2bca231f71efcf61737fbf0a08befa0416215aeef53e8bb6d23390a20e110de65c907b9dea4ae0bd83a4b0a51bea175646a64c12b4c9f931b2cb31b4920d8283386ef2ef07ebdbb4383c12a739a953a4d6e0d6fb1139a4036d693bfbb6c20ffe9fc03f18b176c998806439ff0bb8ad193afdb27b2ccbc88856916dd804e3420817de36ab2d57feb077634bca77819c8e0bd298c04f6fed0e6a83cc1356ca155207efdc58818923de35ec35b4ef8e6a508f6952b9dd2a86af30a93dcd67e13ed350100000000000000\"]}\n</code></pre> Step 2. Call api: wallet/createshieldedtransaction to create transaction Method: Post Parameter: <pre><code>{\n    \"ask\": \"f9302122162221f59a7668e0d740245dcabaeb51dd157ba995eecd02f4b60b06\",\n    \"nsk\": \"050fc9a42909e60fefb9d548fe12718cb759e3ee28d1b92ceaeaffc23d200a0d\",\n    \"ovk\": \"a0da0cc6294dc900e93887b9f08ac42a162234359fdaf523b98382602c92513c\",\n\n    \"shielded_spends\": [\n        {\n            \"note\": {\n                \"value\": 90000000,\n                \"payment_address\": \"ztron1jld8fmvujrz2vgkc867zuwklmewy4ypw0wtwgweqs2paee0uhc8f3azy90el770arksa2kunl02\",\n                \"rcm\": \"e48836a3cfae0e1b27b5230460199b46ebd88ad650fa9db5ac1eafb20b516302\"\n            },\n\n\n            \"alpha\": \"2608999c3a97d005a879ecdaa16fd29ae434fb67b177c5e875b0c829e6a1db04\",\n            \"voucher\": {\"tree\": {\"left\": {\"content\": \"7efdc58818923de35ec35b4ef8e6a508f6952b9dd2a86af30a93dcd67e13ed35\"},\"right\": {\"content\": \"f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b62\"}},\"rt\": \"72eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e\"},\n            \"path\": \"2020b2eed031d4d6a4f02a097f80b54cc1541d4163c6b6f5971f88b6e41d35c538142012935f14b676509b81eb49ef25f39269ed72309238b4c145803544b646dca62d20e1f34b034d4a3cd28557e2907ebf990c918f64ecb50a94f01d6fda5ca5c7ef722028e7b841dcbc47cceb69d7cb8d94245fb7cb2ba3a7a6bc18f13f945f7dbd6e2a20a5122c08ff9c161d9ca6fc462073396c7d7d38e8ee48cdb3bea7e2230134ed6a20d2e1642c9a462229289e5b0e3b7f9008e0301cbb93385ee0e21da2545073cb582016d6252968971a83da8521d65382e61f0176646d771c91528e3276ee45383e4a20fee0e52802cb0c46b1eb4d376c62697f4759f6c8917fa352571202fd778fd712204c6937d78f42685f84b43ad3b7b00f81285662f85c6a68ef11d62ad1a3ee0850200769557bc682b1bf308646fd0b22e648e8b9e98f57e29f5af40f6edb833e2c492008eeab0c13abd6069e6310197bf80f9c1ea6de78fd19cbae24d4a520e6cf3023208d5fa43e5a10d11605ac7430ba1f5d81fb1b68d29a640405767749e841527673206aca8448d8263e547d5ff2950e2ed3839e998d31cbc6ac9fd57bc6002b15921620cd1c8dbf6e3acc7a80439bc4962cf25b9dce7c896f3a5bd70803fc5a0e33cf00206edb16d01907b759977d7650dad7e3ec049af1a3d875380b697c862c9ec5d51c201ea6675f9551eeb9dfaaa9247bc9858270d3d3a4c5afa7177a984d5ed1be245120d6acdedf95f608e09fa53fb43dcd0990475726c5131210c9e5caeab97f0e642f20bd74b25aacb92378a871bf27d225cfc26baca344a1ea35fdd94510f3d157082c201b77dac4d24fb7258c3c528704c59430b630718bec486421837021cf75dab65120ec677114c27206f5debc1c1ed66f95e2b1885da5b7be3d736b1de98579473048204777c8776a3b1e69b73a62fa701fa4f7a6282d9aee2c7a6b82e7937d7081c23c20ba49b659fbd0b7334211ea6a9d9df185c757e70aa81da562fb912b84f49bce722043ff5457f13b926b61df552d4e402ee6dc1463f99a535f9a713439264d5b616b207b99abdc3730991cc9274727d7d82d28cb794edbc7034b4f0053ff7c4b68044420d6c639ac24b46bd19341c91b13fdcab31581ddaf7f1411336a271f3d0aa52813208ac9cf9c391e3fd42891d27238a81a8a5c1d3a72b1bcbea8cf44a58ce738961320912d82b2c2bca231f71efcf61737fbf0a08befa0416215aeef53e8bb6d23390a20e110de65c907b9dea4ae0bd83a4b0a51bea175646a64c12b4c9f931b2cb31b4920d8283386ef2ef07ebdbb4383c12a739a953a4d6e0d6fb1139a4036d693bfbb6c20ffe9fc03f18b176c998806439ff0bb8ad193afdb27b2ccbc88856916dd804e3420817de36ab2d57feb077634bca77819c8e0bd298c04f6fed0e6a83cc1356ca155207efdc58818923de35ec35b4ef8e6a508f6952b9dd2a86af30a93dcd67e13ed350100000000000000\"\n\n        }\n    ],\n    \"shielded_receives\": [\n        {\n            \"note\": {\n                \"value\": 80000000,\n                \"payment_address\": \"ztron1wd46s6fwmz99gulqpxul6zffqtevzfpl93ng3s5834fhwf6e7w5l6zmjhmpvtwsc4wxa7dusmvr\",\n                \"rcm\": \"ccced07d36641fc93cba33cddda7064cb82f6962a0bdf15a4240a4a742770e03\"\n            }\n        }\n    ]\n}\n</code></pre> Return: <pre><code>{\"txID\":\"5a057fde4a1add0da38eda9978f6c3d035f7ca4807adae4b8c57e34499dfedfb\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"binding_signature\":\"b77c81fdb8af64075a7d95e8f04ef28660bb2f3f2bfb884baf17abd87ae7f212de091016ae6147edbff280b52515a1a52515bd1fa118de2964412f87b6a5790c\",\"spend_description\":[{\"value_commitment\":\"ddc8138f73323eff8d2f0367070c63f5e2659538fa431d6aa06d62696845e529\",\"anchor\":\"72eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e\",\"nullifier\":\"29269506e140e7cc70699443c9b80eb161048ec0126e308d458245991242478c\",\"rk\":\"c76c88d21edb0f5b2b04c960668cf1053feda5954a00d70e7d329025323bf463\",\"spend_authority_signature\":\"518def6477325d78b77b00aac6142bfc7b9a5f3eaaff5b8b4b8f2c46114ed85d1cc15a314028f58ce0c42e9f030f465063bbc0c41d01c92edd639d02575f6b08\",\"zkproof\":\"82eda1b9baeaa5b08b3b33f157ae7a117e2561c702520e615a92e65098615eba1809a20e0b518fef286268d4c6f15a8eaa1b2a15630dd673fcfdde503a12daf80dfc157e6a0ea9333dedc2c365368847f2e7d8e3e648cc65cf5e805cd2343077051d70fcd140a8c665760f8cf066edb32036de7421e6755f3b64f44621aaa47d7e0f2012069ad374a7addb00b841b759b9e567c7b8b2642110eabd22358d22f4d3b4002a1ba4e9f6c018c58a5c1242acbc0169cf4aa0bf1423ed4a0b688928ad\"}],\"fee\":10000000,\"receive_description\":[{\"value_commitment\":\"6b082c7b9d01338d60fc4f5d434a152f9d8bf5c05c22422e23d3c74d36c2b925\",\"note_commitment\":\"e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f02\",\"epk\":\"36b1cb275228b3ab8275d6b04b3e2e93c04d5c0cc0ab1f41421093228b94f758\",\"c_enc\":\"1f91dd5cdf0731c99318a2a87b169b7159230c4dee4e47e8b0717fc51c604ccc7a2df9c873a91903e59528756e2c2f3bd07ec5aa9b994ae5d8492ad779d6a00d4a71e7cb742c1ae416e4d983554fade0e04b0213880da2e96be402a5351ca3a5d78e5a975d20cb5ec1475c7ed35dc09c0b04a3a2e8a65595d8d77652f2881a4b93ed99cff007b3923b36967be6819721ed3daea2190fca744423ffb77d1a579f569bfb30c77ad0dadc0ca484a7a89318e15d50e540744927e19c5f6f08be2e97e77cd9c6ce3e05bdbeeb6f6d7b53f83a2283f56786ea8544c98b648300dfb8554e7a2611204598ddc37c4e61ce5881e63ab171ec83c1aedf97166596d014b1fc8193ff30d4e1c7aff8a3c3638e3a41b2a4040828a8d9568ab0fe4aef08a97872ca84c6c247635a1774efde8b8ed16177393879c8626a8ea0075fa2db5af58754d712ccd5a94dcf87c019faffa2c8f3143a9a9d540de4a705c87fc16dc5efa0c387f1e6ed9dad12b84f2ca7bb09cd95a10a2e412fc410aa7ebf676f6a74f03a7334a0a1697067cc88ccd968bdf6d8c20ed7d7bd9687bda89fb28c2849e45734d30395fead9f955649a3e3f1deb15eb02f28dad608d6d0ef2943ae9fd9e14f2507e9b871a3bebe5d15ba41a8dafc7dd18cd594eb69ad89192e776fc35a3d6eb48c2446d78258fed12cbb61200ddf0c3d2dbbf73fc82a4a2e96f619fa1ad479e6da108ddab453c02fa2fa8e96721585b791f6478966e36d2d75a6677858a64672dde9bb72feb64b58b7723c13c75f70cf7333c3331d46951633a2686b108e48215eb5d56653\",\"c_out\":\"bbbf78f926fa2cae70ed68ef644487c32a82da230b5b8e2be26aa3102627ffc2db26f45f29c2379b20595ef26c60801f33508e17f03f66694cfdf15f606e5fabfe1d76593c1a8543593c10160f4ae4a0\",\"zkproof\":\"b5597534076320a98ef1a546253185011f17cc7d175a8937736bfe1daee1c33e25411346996e64d0bf1887c4553b49bb815cc8ef57b6811e7213b8c7f81c9853a4663703bf2b2989688a9ae5cabcc56c2316d411f6b910722169609d76890a2b0fc9b3fb536c3be378eb4100b925d9ae6a4a9e08eee591066f881c726a0416861ad41f69148619d187ee4d8f0f8b111da8f0d5bd4f781c2ddfdd7e4b3544b09ec2c9548cef85c28cd1129bf60f1f421c9ac7ed7f36b20984038fb33fcb409956\"}]},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"029b\",\"ref_block_hash\":\"027c45a7dc0875f7\",\"expiration\":1558691547000,\"timestamp\":1558691489292},\"raw_data_hex\":\"0a02029b2208027c45a7dc0875f740f88e86caae2d5adb0b083312d60b0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e7472616374129c0b1a8d030a20ddc8138f73323eff8d2f0367070c63f5e2659538fa431d6aa06d62696845e529122072eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e1a2029269506e140e7cc70699443c9b80eb161048ec0126e308d458245991242478c2220c76c88d21edb0f5b2b04c960668cf1053feda5954a00d70e7d329025323bf4632ac00182eda1b9baeaa5b08b3b33f157ae7a117e2561c702520e615a92e65098615eba1809a20e0b518fef286268d4c6f15a8eaa1b2a15630dd673fcfdde503a12daf80dfc157e6a0ea9333dedc2c365368847f2e7d8e3e648cc65cf5e805cd2343077051d70fcd140a8c665760f8cf066edb32036de7421e6755f3b64f44621aaa47d7e0f2012069ad374a7addb00b841b759b9e567c7b8b2642110eabd22358d22f4d3b4002a1ba4e9f6c018c58a5c1242acbc0169cf4aa0bf1423ed4a0b688928ad3240518def6477325d78b77b00aac6142bfc7b9a5f3eaaff5b8b4b8f2c46114ed85d1cc15a314028f58ce0c42e9f030f465063bbc0c41d01c92edd639d02575f6b0822c2070a206b082c7b9d01338d60fc4f5d434a152f9d8bf5c05c22422e23d3c74d36c2b9251220e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f021a2036b1cb275228b3ab8275d6b04b3e2e93c04d5c0cc0ab1f41421093228b94f75822c4041f91dd5cdf0731c99318a2a87b169b7159230c4dee4e47e8b0717fc51c604ccc7a2df9c873a91903e59528756e2c2f3bd07ec5aa9b994ae5d8492ad779d6a00d4a71e7cb742c1ae416e4d983554fade0e04b0213880da2e96be402a5351ca3a5d78e5a975d20cb5ec1475c7ed35dc09c0b04a3a2e8a65595d8d77652f2881a4b93ed99cff007b3923b36967be6819721ed3daea2190fca744423ffb77d1a579f569bfb30c77ad0dadc0ca484a7a89318e15d50e540744927e19c5f6f08be2e97e77cd9c6ce3e05bdbeeb6f6d7b53f83a2283f56786ea8544c98b648300dfb8554e7a2611204598ddc37c4e61ce5881e63ab171ec83c1aedf97166596d014b1fc8193ff30d4e1c7aff8a3c3638e3a41b2a4040828a8d9568ab0fe4aef08a97872ca84c6c247635a1774efde8b8ed16177393879c8626a8ea0075fa2db5af58754d712ccd5a94dcf87c019faffa2c8f3143a9a9d540de4a705c87fc16dc5efa0c387f1e6ed9dad12b84f2ca7bb09cd95a10a2e412fc410aa7ebf676f6a74f03a7334a0a1697067cc88ccd968bdf6d8c20ed7d7bd9687bda89fb28c2849e45734d30395fead9f955649a3e3f1deb15eb02f28dad608d6d0ef2943ae9fd9e14f2507e9b871a3bebe5d15ba41a8dafc7dd18cd594eb69ad89192e776fc35a3d6eb48c2446d78258fed12cbb61200ddf0c3d2dbbf73fc82a4a2e96f619fa1ad479e6da108ddab453c02fa2fa8e96721585b791f6478966e36d2d75a6677858a64672dde9bb72feb64b58b7723c13c75f70cf7333c3331d46951633a2686b108e48215eb5d566532a50bbbf78f926fa2cae70ed68ef644487c32a82da230b5b8e2be26aa3102627ffc2db26f45f29c2379b20595ef26c60801f33508e17f03f66694cfdf15f606e5fabfe1d76593c1a8543593c10160f4ae4a032c001b5597534076320a98ef1a546253185011f17cc7d175a8937736bfe1daee1c33e25411346996e64d0bf1887c4553b49bb815cc8ef57b6811e7213b8c7f81c9853a4663703bf2b2989688a9ae5cabcc56c2316d411f6b910722169609d76890a2b0fc9b3fb536c3be378eb4100b925d9ae6a4a9e08eee591066f881c726a0416861ad41f69148619d187ee4d8f0f8b111da8f0d5bd4f781c2ddfdd7e4b3544b09ec2c9548cef85c28cd1129bf60f1f421c9ac7ed7f36b20984038fb33fcb4099562a40b77c81fdb8af64075a7d95e8f04ef28660bb2f3f2bfb884baf17abd87ae7f212de091016ae6147edbff280b52515a1a52515bd1fa118de2964412f87b6a5790c4080ade204708ccc82caae2d\"}\n</code></pre> Step 3. Call api: wallet/broadcasttransaction to broadcast this transaction(no need to sign this transaction) Method: Post Parameter: <pre><code>{\"txID\":\"791d30b7123448a54c56407a11857d4f3885cb699a071ee5f265f7db408dec6c\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"binding_signature\":\"231cc2ddbf2715b51d07ed63e142ad874e7e173ec0c5d681b49e3060ca33bd65cf39921355dfaacc62dac7aa810c49daafbf8db8a1adc168da4a833eba0d7504\",\"spend_description\":[{\"value_commitment\":\"f4c543df8f0fe9b71b1bbd6aa2f06f87e07605dcd339b0eaa48afd9e2488b140\",\"anchor\":\"72eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e\",\"nullifier\":\"29269506e140e7cc70699443c9b80eb161048ec0126e308d458245991242478c\",\"rk\":\"c76c88d21edb0f5b2b04c960668cf1053feda5954a00d70e7d329025323bf463\",\"spend_authority_signature\":\"2f50449f92e4bf541c9ba7d82b93f6dd416208449ea8996dc45614c1cb90a7911264fece30446da875d8a864224f1a3870e3654ec8a4005305faa329224f4c08\",\"zkproof\":\"984779ad18c87d71dd79b78564e49c1c18d6f871ef45f79bdb012f73439d6402593dd7cda308d9d5412e2b64b0be461192eb2a8d2ffdcc700475a1c8b8912220f628af41bf44a7c010a8dda2a65f98b4aaf8c375c4046afd1af3e6bbe4b33b9210c68298f46999322174b9ba76b0be4d6ef2c74ff5d16370a8c30fa17c5c3bbeab217610de5cc680b1d64d557c4d53a4a3f73294699ac6a00b37c3d8076a20362ab09c77c94f08bb00db2648ade72f224821ecc190627222cf58130b9bcf639b\"}],\"fee\":10000000,\"receive_description\":[{\"value_commitment\":\"3f4465801b357f9b8334eb3025bd8b3cd84247355c099133c08d53a8cffd3595\",\"note_commitment\":\"e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f02\",\"epk\":\"3ece31615aec76e7711e25b05b05f5b7fb99d75f3812fe56702291633e5f474c\",\"c_enc\":\"4fc57e65bfdd91e2ae0284cfc2926d5df63d51b8f864e9191f368404db390e28ce15fefc9bd210aca4e7f42b30140bc4b1650d9a79bcbfb1670288c68d4678ba5c34266ce1bd4fd1f4e4040508b072cdca87d69e4921af8c8305f982aa7f37897a29c69cce06c311eafb2ef5928f07d5b8f207e5f46c32237f6e9b0eadc2597e0cd8d884cd3f4a35d86145e75565913b9d4a2e613523c9f377fe3bdf6f1d9e6789605e6bdaf9526412632e52a1994fec98dd086596c62ba028508d45933943f3446c83f463f56e860f29d2ea0eb3b87a55a0602974b7df6b58905872cb97a757f24515f05d2b12d932a0ac038e0c0b15b9c8b324c8e31d4ddf8bf39bfb65bd9d495eac1818b281822c9ad85adbe8a90f62adfbb6723fae7a7d91760a5b2d146f180d5ca4d85653449089f4788459752e899abd4abd395842e8b5315dd3738eee0b4e0f758698aabb92df587b703e85774048f290ea366696de3dde665eefb6fce6c2776e4e9ad18662b8d95af4203a10e9af54085ee498c77ad7e7b5824f91aaeb8f138d8c90d95f57e71dc15c177b602c45e38f12e402cc65c2c55b80c9a7d908332baa30b2871a0d6cf417bcaf0be6ae5c451c2468e945273151da500aaccd7235a29c7fcd0da4ac4d6ceefda59cf568f7a362b49654a5793c552bd970681a6489a1951ad75e22215b22d5cd511a030d751892b4b5746d66f048d6b6889c2ddcd5da908417b91ef52c0507b2ce8b1214567b71963c5d6ace1f6e858ce02b11fcf0f839cbe8183fa71b9a239f70c5e98642f6e9b9b6eb31f12a752829ebecf0f12df040\",\"c_out\":\"5fc1926bb6501f8ec4dc796d56786d7f019db9e43ccde07bbbddd95444df4f099310ef3f8d86a0a25ff72de0385563e44b9cb9e5e477299891959d24060a3b08b41aa36c29ce7297f0806a74f11aa99e\",\"zkproof\":\"b924ae84aba3af2c4d6529c22ebd6ba900ac63c629723e035ab843295d41aec1e9ebb2906fa7471473dbdae7e182fbd7a9f14a2f599a79456a3dbb949203d9923c3c3600225f12217e38b69b88a080b5b5751d78ac84375c9a03ad0bc61492850c49488a654c376c49701abdde20d5658bce851e9a6fd1bee5429b9b4d4b55ed1eb888a43f435740b8f063ea6e2e7e81b53f12e67e3eac60020aab5c3ff45d34ff2c3dde4eb76ed2893df22232993deb1b9397d1d4f9cc1eb8405f7cbef5a24b\"}]},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"0328\",\"ref_block_hash\":\"833c24d9f1019cd0\",\"expiration\":1558691970000,\"timestamp\":1558691911355},\"raw_data_hex\":\"0a0203282208833c24d9f1019cd040d0f79fcaae2d5adb0b083312d60b0a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e7472616374129c0b1a8d030a20f4c543df8f0fe9b71b1bbd6aa2f06f87e07605dcd339b0eaa48afd9e2488b140122072eca442bd775b022636fb9ae967c8e749c002660133e76193680d7f8b81fc0e1a2029269506e140e7cc70699443c9b80eb161048ec0126e308d458245991242478c2220c76c88d21edb0f5b2b04c960668cf1053feda5954a00d70e7d329025323bf4632ac001984779ad18c87d71dd79b78564e49c1c18d6f871ef45f79bdb012f73439d6402593dd7cda308d9d5412e2b64b0be461192eb2a8d2ffdcc700475a1c8b8912220f628af41bf44a7c010a8dda2a65f98b4aaf8c375c4046afd1af3e6bbe4b33b9210c68298f46999322174b9ba76b0be4d6ef2c74ff5d16370a8c30fa17c5c3bbeab217610de5cc680b1d64d557c4d53a4a3f73294699ac6a00b37c3d8076a20362ab09c77c94f08bb00db2648ade72f224821ecc190627222cf58130b9bcf639b32402f50449f92e4bf541c9ba7d82b93f6dd416208449ea8996dc45614c1cb90a7911264fece30446da875d8a864224f1a3870e3654ec8a4005305faa329224f4c0822c2070a203f4465801b357f9b8334eb3025bd8b3cd84247355c099133c08d53a8cffd35951220e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f021a203ece31615aec76e7711e25b05b05f5b7fb99d75f3812fe56702291633e5f474c22c4044fc57e65bfdd91e2ae0284cfc2926d5df63d51b8f864e9191f368404db390e28ce15fefc9bd210aca4e7f42b30140bc4b1650d9a79bcbfb1670288c68d4678ba5c34266ce1bd4fd1f4e4040508b072cdca87d69e4921af8c8305f982aa7f37897a29c69cce06c311eafb2ef5928f07d5b8f207e5f46c32237f6e9b0eadc2597e0cd8d884cd3f4a35d86145e75565913b9d4a2e613523c9f377fe3bdf6f1d9e6789605e6bdaf9526412632e52a1994fec98dd086596c62ba028508d45933943f3446c83f463f56e860f29d2ea0eb3b87a55a0602974b7df6b58905872cb97a757f24515f05d2b12d932a0ac038e0c0b15b9c8b324c8e31d4ddf8bf39bfb65bd9d495eac1818b281822c9ad85adbe8a90f62adfbb6723fae7a7d91760a5b2d146f180d5ca4d85653449089f4788459752e899abd4abd395842e8b5315dd3738eee0b4e0f758698aabb92df587b703e85774048f290ea366696de3dde665eefb6fce6c2776e4e9ad18662b8d95af4203a10e9af54085ee498c77ad7e7b5824f91aaeb8f138d8c90d95f57e71dc15c177b602c45e38f12e402cc65c2c55b80c9a7d908332baa30b2871a0d6cf417bcaf0be6ae5c451c2468e945273151da500aaccd7235a29c7fcd0da4ac4d6ceefda59cf568f7a362b49654a5793c552bd970681a6489a1951ad75e22215b22d5cd511a030d751892b4b5746d66f048d6b6889c2ddcd5da908417b91ef52c0507b2ce8b1214567b71963c5d6ace1f6e858ce02b11fcf0f839cbe8183fa71b9a239f70c5e98642f6e9b9b6eb31f12a752829ebecf0f12df0402a505fc1926bb6501f8ec4dc796d56786d7f019db9e43ccde07bbbddd95444df4f099310ef3f8d86a0a25ff72de0385563e44b9cb9e5e477299891959d24060a3b08b41aa36c29ce7297f0806a74f11aa99e32c001b924ae84aba3af2c4d6529c22ebd6ba900ac63c629723e035ab843295d41aec1e9ebb2906fa7471473dbdae7e182fbd7a9f14a2f599a79456a3dbb949203d9923c3c3600225f12217e38b69b88a080b5b5751d78ac84375c9a03ad0bc61492850c49488a654c376c49701abdde20d5658bce851e9a6fd1bee5429b9b4d4b55ed1eb888a43f435740b8f063ea6e2e7e81b53f12e67e3eac60020aab5c3ff45d34ff2c3dde4eb76ed2893df22232993deb1b9397d1d4f9cc1eb8405f7cbef5a24b2a40231cc2ddbf2715b51d07ed63e142ad874e7e173ec0c5d681b49e3060ca33bd65cf39921355dfaacc62dac7aa810c49daafbf8db8a1adc168da4a833eba0d75044080ade20470bbad9ccaae2d\"}\n</code></pre> Return: <pre><code>{\"result\": true}\n</code></pre></p>"},{"location":"mechanism-algorithm/shielded-transaction/#transfer-from-shielded-address-to-transparent-address","title":"Transfer from shielded address to transparent address","text":"<p>Step 1. Call api: wallet/getmerkletreevoucherinfo to get the voucher of the shield address, this info will be used when create shielded transaction Method: Post Parameter: <pre><code>{\n    \"out_points\":[{\n        \"hash\":\"791d30b7123448a54c56407a11857d4f3885cb699a071ee5f265f7db408dec6c\",\n        \"index\":0\n    }],\n    \"block_num\":1\n}\n</code></pre> Return: <pre><code>{\"vouchers\": [{\"tree\": {\"left\": {\"content\": \"e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f02\"},\"parents\": [{\"content\": \"c835053e32be73852e67a65f4cd40407a11f4a7a38bb84b8d3e8a1f57acdbf61\"}]},\"rt\": \"8bdf96ac1241f30d5cd54d4ece7f10867d9eef854121ef77d1015f0ab2a26b1b\"}],\"paths\": [\"2020b2eed031d4d6a4f02a097f80b54cc1541d4163c6b6f5971f88b6e41d35c538142012935f14b676509b81eb49ef25f39269ed72309238b4c145803544b646dca62d20e1f34b034d4a3cd28557e2907ebf990c918f64ecb50a94f01d6fda5ca5c7ef722028e7b841dcbc47cceb69d7cb8d94245fb7cb2ba3a7a6bc18f13f945f7dbd6e2a20a5122c08ff9c161d9ca6fc462073396c7d7d38e8ee48cdb3bea7e2230134ed6a20d2e1642c9a462229289e5b0e3b7f9008e0301cbb93385ee0e21da2545073cb582016d6252968971a83da8521d65382e61f0176646d771c91528e3276ee45383e4a20fee0e52802cb0c46b1eb4d376c62697f4759f6c8917fa352571202fd778fd712204c6937d78f42685f84b43ad3b7b00f81285662f85c6a68ef11d62ad1a3ee0850200769557bc682b1bf308646fd0b22e648e8b9e98f57e29f5af40f6edb833e2c492008eeab0c13abd6069e6310197bf80f9c1ea6de78fd19cbae24d4a520e6cf3023208d5fa43e5a10d11605ac7430ba1f5d81fb1b68d29a640405767749e841527673206aca8448d8263e547d5ff2950e2ed3839e998d31cbc6ac9fd57bc6002b15921620cd1c8dbf6e3acc7a80439bc4962cf25b9dce7c896f3a5bd70803fc5a0e33cf00206edb16d01907b759977d7650dad7e3ec049af1a3d875380b697c862c9ec5d51c201ea6675f9551eeb9dfaaa9247bc9858270d3d3a4c5afa7177a984d5ed1be245120d6acdedf95f608e09fa53fb43dcd0990475726c5131210c9e5caeab97f0e642f20bd74b25aacb92378a871bf27d225cfc26baca344a1ea35fdd94510f3d157082c201b77dac4d24fb7258c3c528704c59430b630718bec486421837021cf75dab65120ec677114c27206f5debc1c1ed66f95e2b1885da5b7be3d736b1de98579473048204777c8776a3b1e69b73a62fa701fa4f7a6282d9aee2c7a6b82e7937d7081c23c20ba49b659fbd0b7334211ea6a9d9df185c757e70aa81da562fb912b84f49bce722043ff5457f13b926b61df552d4e402ee6dc1463f99a535f9a713439264d5b616b207b99abdc3730991cc9274727d7d82d28cb794edbc7034b4f0053ff7c4b68044420d6c639ac24b46bd19341c91b13fdcab31581ddaf7f1411336a271f3d0aa52813208ac9cf9c391e3fd42891d27238a81a8a5c1d3a72b1bcbea8cf44a58ce738961320912d82b2c2bca231f71efcf61737fbf0a08befa0416215aeef53e8bb6d23390a20e110de65c907b9dea4ae0bd83a4b0a51bea175646a64c12b4c9f931b2cb31b4920d8283386ef2ef07ebdbb4383c12a739a953a4d6e0d6fb1139a4036d693bfbb6c20ffe9fc03f18b176c998806439ff0bb8ad193afdb27b2ccbc88856916dd804e3420c835053e32be73852e67a65f4cd40407a11f4a7a38bb84b8d3e8a1f57acdbf612001000000000000000000000000000000000000000000000000000000000000000200000000000000\"]}\n</code></pre></p> <p>Step 2. Call api: wallet/createshieldedtransaction to create transaction Method: Post Parameter: <pre><code>{\n    \"ask\": \"653b3a3fdd40b60d2f53ba121df8840f6590384993f8fa9a0ecb0dfb23496604\",\n    \"nsk\": \"428ff3c9e101dc1fca08f7b0e3387b23b68016746ae565aefc19d112b696db01\",\n    \"ovk\": \"1274dcc5c7307bf0fd0ead466e9dd5641fed4a51391f681862370e2f2654cc61\",\n    \"shielded_spends\": [\n        {\n            \"note\": {\n                \"value\": 80000000,\n                \"payment_address\": \"ztron1wd46s6fwmz99gulqpxul6zffqtevzfpl93ng3s5834fhwf6e7w5l6zmjhmpvtwsc4wxa7dusmvr\",\n                \"rcm\": \"ccced07d36641fc93cba33cddda7064cb82f6962a0bdf15a4240a4a742770e03\"\n            },\n            \"alpha\": \"3ad5406efd6efcd81d27696d5f91efc07ba5c98ea6fb0f787b93e557b51df405\",\n            \"voucher\": {\n                \"tree\": {\n                    \"left\": {\n                        \"content\": \"f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b62\"\n                    },\n                    \"right\": {\n                        \"content\": \"e4d02525ef586e77765e5cde77c4a25f8393508e749c2398aa91b8cea0a14f02\"\n                    }\n                },\n                \"rt\": \"774d05ec02749475672a94a8fb2daaa11c323defa09df121b7359353f0c3a567\"\n            },\n            \"path\": \"2020b2eed031d4d6a4f02a097f80b54cc1541d4163c6b6f5971f88b6e41d35c538142012935f14b676509b81eb49ef25f39269ed72309238b4c145803544b646dca62d20e1f34b034d4a3cd28557e2907ebf990c918f64ecb50a94f01d6fda5ca5c7ef722028e7b841dcbc47cceb69d7cb8d94245fb7cb2ba3a7a6bc18f13f945f7dbd6e2a20a5122c08ff9c161d9ca6fc462073396c7d7d38e8ee48cdb3bea7e2230134ed6a20d2e1642c9a462229289e5b0e3b7f9008e0301cbb93385ee0e21da2545073cb582016d6252968971a83da8521d65382e61f0176646d771c91528e3276ee45383e4a20fee0e52802cb0c46b1eb4d376c62697f4759f6c8917fa352571202fd778fd712204c6937d78f42685f84b43ad3b7b00f81285662f85c6a68ef11d62ad1a3ee0850200769557bc682b1bf308646fd0b22e648e8b9e98f57e29f5af40f6edb833e2c492008eeab0c13abd6069e6310197bf80f9c1ea6de78fd19cbae24d4a520e6cf3023208d5fa43e5a10d11605ac7430ba1f5d81fb1b68d29a640405767749e841527673206aca8448d8263e547d5ff2950e2ed3839e998d31cbc6ac9fd57bc6002b15921620cd1c8dbf6e3acc7a80439bc4962cf25b9dce7c896f3a5bd70803fc5a0e33cf00206edb16d01907b759977d7650dad7e3ec049af1a3d875380b697c862c9ec5d51c201ea6675f9551eeb9dfaaa9247bc9858270d3d3a4c5afa7177a984d5ed1be245120d6acdedf95f608e09fa53fb43dcd0990475726c5131210c9e5caeab97f0e642f20bd74b25aacb92378a871bf27d225cfc26baca344a1ea35fdd94510f3d157082c201b77dac4d24fb7258c3c528704c59430b630718bec486421837021cf75dab65120ec677114c27206f5debc1c1ed66f95e2b1885da5b7be3d736b1de98579473048204777c8776a3b1e69b73a62fa701fa4f7a6282d9aee2c7a6b82e7937d7081c23c20ba49b659fbd0b7334211ea6a9d9df185c757e70aa81da562fb912b84f49bce722043ff5457f13b926b61df552d4e402ee6dc1463f99a535f9a713439264d5b616b207b99abdc3730991cc9274727d7d82d28cb794edbc7034b4f0053ff7c4b68044420d6c639ac24b46bd19341c91b13fdcab31581ddaf7f1411336a271f3d0aa52813208ac9cf9c391e3fd42891d27238a81a8a5c1d3a72b1bcbea8cf44a58ce738961320912d82b2c2bca231f71efcf61737fbf0a08befa0416215aeef53e8bb6d23390a20e110de65c907b9dea4ae0bd83a4b0a51bea175646a64c12b4c9f931b2cb31b4920d8283386ef2ef07ebdbb4383c12a739a953a4d6e0d6fb1139a4036d693bfbb6c20ffe9fc03f18b176c998806439ff0bb8ad193afdb27b2ccbc88856916dd804e3420817de36ab2d57feb077634bca77819c8e0bd298c04f6fed0e6a83cc1356ca15520f21a987214b4aa8f041e6a8fde656396dbbf7ce6ee3394b6f9fbfb43f0e39b620100000000000000\"\n        }\n    ],\n    \"transparent_to_address\": \"41A7D8A35B260395C14AA456297662092BA3B76FC0\",\n    \"to_amount\": 70000000\n}\n</code></pre> Return: <pre><code>{\"txID\":\"4dbdc95574a155434baeaf5e690e2d0c77a2b883a048d8d0103ab5c7fed8d866\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"to_amount\":70000000,\"binding_signature\":\"780be5a118c7b96847a6b1932f1ab6f559ce3648e321821f22570dbde7d59c58559aae93a2f334537544b6c85218c83397b0779926247848560c3e9ef5ba8203\",\"spend_description\":[{\"value_commitment\":\"086c712a60d5aa0d16276fb18b5504a875d97cecb2a0afa8219c8031aec94bd9\",\"anchor\":\"774d05ec02749475672a94a8fb2daaa11c323defa09df121b7359353f0c3a567\",\"nullifier\":\"fa07f704bd34a8a7c1804601f322e6c1415247bfaa2f0d04715b9b4ac65b3587\",\"rk\":\"41132c4e6bc24faae1cb8cdee2c7f84bd4b3aa27e50c099ca205c1c0538ca2d4\",\"spend_authority_signature\":\"b928f855d397ab758b60251ee3ce40f951df51a6111064ad90fe4aa467cd69ec649c55ebb59c034c0c72daca0e9063da72383108942c79f7bd1b0f6b22f30207\",\"zkproof\":\"b3552325eb9212097ba3f56a4e0770c92cd28a8d6974e3a30436115b2a49adae7e1f49a0f2920042145bfe4a127ada22b3000ba0faa15b408340ca5c377943e3b3c8566ad471d84321b9d24c0a47b6b42b83d562523b07a16401cb5f4e51aa040b1300f443d963150db7f08b2606f3e17ba386d1308720c20901d74e8b94b47a78c00f416c71b4fffed1fd6d7b41ebb0993bbd1fa05754514d05575e09ce8f6a6438b8b158a1067d01b195c6631b25434f64360aedcdcfacb163efe866a05ee1\"}],\"fee\":10000000,\"transparent_to_address\":\"41a7d8a35b260395c14aa456297662092ba3b76fc0\"},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"00dc\",\"ref_block_hash\":\"a45c748f93fa2854\",\"expiration\":1558928754000,\"timestamp\":1558928695327},\"raw_data_hex\":\"0a0200dc2208a45c748f93fa285440d08a94bbaf2d5ab204083312ad040a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e747261637412f3031a8d030a20086c712a60d5aa0d16276fb18b5504a875d97cecb2a0afa8219c8031aec94bd91220774d05ec02749475672a94a8fb2daaa11c323defa09df121b7359353f0c3a5671a20fa07f704bd34a8a7c1804601f322e6c1415247bfaa2f0d04715b9b4ac65b3587222041132c4e6bc24faae1cb8cdee2c7f84bd4b3aa27e50c099ca205c1c0538ca2d42ac001b3552325eb9212097ba3f56a4e0770c92cd28a8d6974e3a30436115b2a49adae7e1f49a0f2920042145bfe4a127ada22b3000ba0faa15b408340ca5c377943e3b3c8566ad471d84321b9d24c0a47b6b42b83d562523b07a16401cb5f4e51aa040b1300f443d963150db7f08b2606f3e17ba386d1308720c20901d74e8b94b47a78c00f416c71b4fffed1fd6d7b41ebb0993bbd1fa05754514d05575e09ce8f6a6438b8b158a1067d01b195c6631b25434f64360aedcdcfacb163efe866a05ee13240b928f855d397ab758b60251ee3ce40f951df51a6111064ad90fe4aa467cd69ec649c55ebb59c034c0c72daca0e9063da72383108942c79f7bd1b0f6b22f302072a40780be5a118c7b96847a6b1932f1ab6f559ce3648e321821f22570dbde7d59c58559aae93a2f334537544b6c85218c83397b0779926247848560c3e9ef5ba8203321541a7d8a35b260395c14aa456297662092ba3b76fc03880bbb0214080ade204709fc090bbaf2d\"}\n</code></pre></p> <p>Step 3. Call api: wallet/broadcasttransaction to broadcast this transaction(no need to sign this transaction) Method: Post Parameter: <pre><code>{\"txID\":\"4dbdc95574a155434baeaf5e690e2d0c77a2b883a048d8d0103ab5c7fed8d866\",\"raw_data\":{\"contract\":[{\"parameter\":{\"value\":{\"to_amount\":70000000,\"binding_signature\":\"780be5a118c7b96847a6b1932f1ab6f559ce3648e321821f22570dbde7d59c58559aae93a2f334537544b6c85218c83397b0779926247848560c3e9ef5ba8203\",\"spend_description\":[{\"value_commitment\":\"086c712a60d5aa0d16276fb18b5504a875d97cecb2a0afa8219c8031aec94bd9\",\"anchor\":\"774d05ec02749475672a94a8fb2daaa11c323defa09df121b7359353f0c3a567\",\"nullifier\":\"fa07f704bd34a8a7c1804601f322e6c1415247bfaa2f0d04715b9b4ac65b3587\",\"rk\":\"41132c4e6bc24faae1cb8cdee2c7f84bd4b3aa27e50c099ca205c1c0538ca2d4\",\"spend_authority_signature\":\"b928f855d397ab758b60251ee3ce40f951df51a6111064ad90fe4aa467cd69ec649c55ebb59c034c0c72daca0e9063da72383108942c79f7bd1b0f6b22f30207\",\"zkproof\":\"b3552325eb9212097ba3f56a4e0770c92cd28a8d6974e3a30436115b2a49adae7e1f49a0f2920042145bfe4a127ada22b3000ba0faa15b408340ca5c377943e3b3c8566ad471d84321b9d24c0a47b6b42b83d562523b07a16401cb5f4e51aa040b1300f443d963150db7f08b2606f3e17ba386d1308720c20901d74e8b94b47a78c00f416c71b4fffed1fd6d7b41ebb0993bbd1fa05754514d05575e09ce8f6a6438b8b158a1067d01b195c6631b25434f64360aedcdcfacb163efe866a05ee1\"}],\"fee\":10000000,\"transparent_to_address\":\"41a7d8a35b260395c14aa456297662092ba3b76fc0\"},\"type_url\":\"type.googleapis.com/protocol.ShieldedTransferContract\"},\"type\":\"ShieldedTransferContract\"}],\"ref_block_bytes\":\"00dc\",\"ref_block_hash\":\"a45c748f93fa2854\",\"expiration\":1558928754000,\"timestamp\":1558928695327},\"raw_data_hex\":\"0a0200dc2208a45c748f93fa285440d08a94bbaf2d5ab204083312ad040a35747970652e676f6f676c65617069732e636f6d2f70726f746f636f6c2e536869656c6465645472616e73666572436f6e747261637412f3031a8d030a20086c712a60d5aa0d16276fb18b5504a875d97cecb2a0afa8219c8031aec94bd91220774d05ec02749475672a94a8fb2daaa11c323defa09df121b7359353f0c3a5671a20fa07f704bd34a8a7c1804601f322e6c1415247bfaa2f0d04715b9b4ac65b3587222041132c4e6bc24faae1cb8cdee2c7f84bd4b3aa27e50c099ca205c1c0538ca2d42ac001b3552325eb9212097ba3f56a4e0770c92cd28a8d6974e3a30436115b2a49adae7e1f49a0f2920042145bfe4a127ada22b3000ba0faa15b408340ca5c377943e3b3c8566ad471d84321b9d24c0a47b6b42b83d562523b07a16401cb5f4e51aa040b1300f443d963150db7f08b2606f3e17ba386d1308720c20901d74e8b94b47a78c00f416c71b4fffed1fd6d7b41ebb0993bbd1fa05754514d05575e09ce8f6a6438b8b158a1067d01b195c6631b25434f64360aedcdcfacb163efe866a05ee13240b928f855d397ab758b60251ee3ce40f951df51a6111064ad90fe4aa467cd69ec649c55ebb59c034c0c72daca0e9063da72383108942c79f7bd1b0f6b22f302072a40780be5a118c7b96847a6b1932f1ab6f559ce3648e321821f22570dbde7d59c58559aae93a2f334537544b6c85218c83397b0779926247848560c3e9ef5ba8203321541a7d8a35b260395c14aa456297662092ba3b76fc03880bbb0214080ade204709fc090bbaf2d\"}\n</code></pre> Return: <pre><code>{\"result\": true}\n</code></pre></p>"},{"location":"mechanism-algorithm/sr/","title":"Super Representative","text":""},{"location":"mechanism-algorithm/sr/#how-to-become-a-super-representative","title":"How to Become a Super Representative","text":"<p>Block producers in the TRON network, also called super representatives, are elected by voting. Any account can apply to become a super representative candidate by paying 9999 TRX and then participate in the super representative election. Any account can vote for super representative candidates, and the top 27 candidates with the most votes become super representatives, and they have the right to produce blocks. Super representative needs to run a TRON node to participate in block production, and will also receive block rewards and voting rewards. Voters who vote to super representatives will receive voting rewards.</p> <p>The super representative candidates ranked 28th to 127th are also called super representative partners. Super representative partners do not participate in block production and packaging transactions, but will receive voting rewards. Voters who vote to super representative partners will also receive voting rewards.</p> <p>The votes will be counted every 6 hours, so super representatives and super representative partners will be changed every 6 hours.</p>"},{"location":"mechanism-algorithm/sr/#super-representative-election","title":"Super Representative Election","text":"<p>To vote, you need to have TRON Power(TP). To get TRON Power, you need to stake TRX. Every 1 staked TRX accounts for one TRON Power(TP). Every account in TRON network has the right to vote for a super representative candidate. After you unstake your staked TRX, you will lose the responding TRON Power(TP), so your previous vote will be invalid.</p> <p>Note: Only your latest vote will be counted in TRON network which means your previous vote will be over written by your latest vote.</p> <p>Example (Using wallet-cli):</p> <pre><code>&gt; freezebalancev2 10,000,000 3 // Stake 10 TRX to get 10 TRON Power(TP)\n&gt; votewitness SR1 4 SR2 6 // Vote 4 votes for SR1, 6 votes for SR2\n&gt; votewitness SR1 3 SR2 7 // Vote 3 votes for SR1, 7 votes for SR2\n</code></pre> <p>The final output above is: Vote 3 votes for SR1, 7 votes for SR2.</p>"},{"location":"mechanism-algorithm/sr/#super-representatives-brokerage","title":"Super Representatives Brokerage","text":"<p>The default ratio is 20%. Super representatives and super representative partners can query the brokerage ratio through the <code>wallet/getBrokerage</code> interface, and can also modify the brokerage ratio through the <code>wallet/updateBrokerage</code> interface.</p> <p>If a SR(Super Representatives) get 20% of the reward, and the other 80% will be awarded to the voters. If the brokerage ratio is set to 100%, the rewards are all obtained by the SR; if set to 0, the rewards are all sent to the voters.</p>"},{"location":"mechanism-algorithm/sr/#reward-for-srsuper-representatives","title":"Reward for SR(Super Representatives)","text":""},{"location":"mechanism-algorithm/sr/#votes-reward","title":"Votes Reward","text":"<p>Vote rewards are 160 TRX every block, with a block generated every 3 seconds, the total vote rewards per day is  4,608,000 TRX.</p> <p>For each SR and Partner, the daily Vote Rewards = 4,608,000 * ( votes /  total votes) x 20%  TRX</p>"},{"location":"mechanism-algorithm/sr/#block-producing-reward","title":"Block Producing Reward","text":"<p>Every time after a super representative produces a block, it will be reward 16 TRX. The 27 super representatives take turns to produce blocks every 3 seconds. The annual block producing reward is 168,192,000 TRX in total.</p> <p>Every time after a super representative produces a block, the 16 TRX block producing reward will be sent to it's sub-account. The sub-account is a read-only account, it allows a withdraw action from sub-account to super representative account every 24 hours.</p> <p>16 (\\mathsf{TRX}/block) \\times 28,800 (blocks/day) = 460,800 (\\mathsf{TRX}/day)</p> <p>For each super representative, the daily block Rewards_{sr} = (460,800 / 27) \\times 20 \\% \\mathsf{TRX}.</p> <p>Reward may be less than the theoretical number due to missed blocks and maintenance period.</p>"},{"location":"mechanism-algorithm/sr/#reward-for-voters","title":"Reward for Voters","text":"<p>If you vote for a SR(Super Representative):</p> <p>the daily Voter Rewards = (((the number of votes you vote to a SR) * 4,608,000 / total votes) * 80%) + ((460,800 / 27) * 80%) * (the number of votes you vote to a SR) / (the total number of votes a SR receives) TRX</p> <p>If you vote for a Partner:</p> <p>the daily Voter Rewards = (((the number of votes you vote to a SR) * 4,608,000 / total votes) * 80%) TRX</p>"},{"location":"mechanism-algorithm/sr/#committee","title":"Committee","text":""},{"location":"mechanism-algorithm/sr/#what-is-committee","title":"What is Committee","text":"<p>Committee can modify the TRON network parameters, like transacton fees, block producing reward amount, etc. Committee is composed of the current 27 super representatives. Every super representative has the right to start a proposal. The proposal will be passed after it gets more than 18 approves from the super representatives and will become valid in the next maintenance period.</p>"},{"location":"mechanism-algorithm/sr/#create-a-proposal","title":"Create a Proposal","text":"<p>Only SRs, Partners and Candidates can create a proposal.</p> <p>Please refer to here for TRON network dynamic parameters and their values.</p> <p>Example (Using wallet-cli):</p> <pre><code>&gt; createproposal id value\n# id: the serial number\n# value: the parameter value\n</code></pre>"},{"location":"mechanism-algorithm/sr/#vote-for-a-proposal","title":"Vote for a Proposal","text":"<p>Proposal only support YES vote. Since the creation time of the proposal, the proposal is valid within 3 days. If the proposal does not receive enough YES votes within the period of validity, the proposal will be invalid beyond the period of validity. Yes vote can be cancelled.</p> <p>Example (Using wallet-cli):</p> <pre><code>&gt; approveProposal id is_or_not_add_approval\n# id: proposal id\n# is_or_not_add_approval: YES vote or cancel YES vote\n</code></pre>"},{"location":"mechanism-algorithm/sr/#cancel-proposal","title":"Cancel Proposal","text":"<p>Proposal creator can cancel the proposal before it is passed.</p> <p>Example (Using wallet-cli):</p> <pre><code>&gt; deleteProposal id\n# id: proposal id\n</code></pre>"},{"location":"mechanism-algorithm/sr/#query-proposal","title":"Query Proposal","text":"<ul> <li>Query all the proposals list (ListProposals)</li> <li>Query all the proposals list by pagination (GetPaginatedProposalList)</li> <li>Query a proposal by proposal id (GetProposalById)</li> </ul> <p>For more API detail, please refer to HTTP API.</p>"},{"location":"mechanism-algorithm/system-contracts/","title":"System Contracts","text":"<p>The TRON network supports many different types of transactions, such as TRX transfer transactions, TRC10 transfer transactions, creating smart contract transactions, triggering smart contract transactions, staking TRX transactions, and more. To create different types of transactions, you need to call different API. For example, the type of smart contract deployment transaction is <code>CreateSmartContract</code>, you need to call <code>wallet/deploycontractAPI</code> to create a transaction; the type of stake TRX transactions is <code>FreezeBalanceV2Contract</code>, you need to call<code>wallet/freezebalancev2API</code> to create transactions, we collectively refer to the implementation of these different transaction types as system contracts, the following are the types of system contracts and their contents:</p>"},{"location":"mechanism-algorithm/system-contracts/#accountcreatecontract","title":"AccountCreateContract","text":"<pre><code>    message AccountCreateContract {\n      bytes owner_address = 1;\n      bytes account_address = 2;\n      AccountType type = 3;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>account_address</code>: The target address to create.</li> <li><code>type</code>: Account type. 0 means normal account; 1 means the Genesis account; 2 means smart contract account.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#transfercontract","title":"TransferContract","text":"<pre><code>    message TransferContract {\n      bytes owner_address = 1;\n      bytes to_address = 2;\n      int64 amount = 3;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>to_address</code>: The target address to transfer.</li> <li><code>amount</code>: The amount of TRX to transfer.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#transferassetcontract","title":"TransferAssetContract","text":"<pre><code>    message TransferAssetContract {\n      bytes asset_name = 1;\n      bytes owner_address = 2;\n      bytes to_address = 3;\n      int64 amount = 4;\n    }\n</code></pre> <ul> <li><code>asset_name</code>: The token id to transfer.</li> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>to_address</code>: The target address to transfer.</li> <li><code>amount</code>: The amount of token to transfer.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#votewitnesscontract","title":"VoteWitnessContract","text":"<pre><code>    message VoteWitnessContract {\n      message Vote {\n        bytes vote_address = 1;\n        int64 vote_count = 2;\n      }\n      bytes owner_address = 1;\n      repeated Vote votes = 2;\n      bool support = 3;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>vote_address</code>: The SR or candidate's address.</li> <li><code>vote_count</code>: The votes number.</li> <li><code>support</code>: Constant true, not used.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#witnesscreatecontract","title":"WitnessCreateContract","text":"<pre><code>    message WitnessCreateContract {\n      bytes owner_address = 1;\n      bytes url = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>url</code>: The website url of the witness.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#assetissuecontract","title":"AssetIssueContract","text":"<pre><code>    message AssetIssueContract {\n      message FrozenSupply {\n        int64 frozen_amount = 1;\n        int64 frozen_days = 2;\n      }\n      bytes owner_address = 1;\n      bytes name = 2;\n      bytes abbr = 3;\n      int64 total_supply = 4;\n      repeated FrozenSupply frozen_supply = 5;\n      int32 trx_num = 6;\n      int32 num = 8;\n      int64 start_time = 9;\n      int64 end_time = 10;\n      int64 order = 11; // the order of tokens of the same name\n      int32 vote_score = 16;\n      bytes description = 20;\n      bytes url = 21;\n      int64 free_asset_net_limit = 22;\n      int64 public_free_asset_net_limit = 23;\n      int64 public_free_asset_net_usage = 24;\n      int64 public_latest_free_net_time = 25;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>name</code>: The token name to issue.</li> <li><code>abbr</code>: The abbreviation of the token name.</li> <li><code>total_supply</code>: The amount of token to issue.</li> <li><code>frozen_supply</code>: The amount of token and staked days to stake.</li> <li><code>trx_num</code>: trx_num/num defines the token price.</li> <li><code>num</code>: trx_num/num defines the token price.</li> <li><code>start_time</code>: ICO starts time.</li> <li><code>end_time</code>: ICO ends time.</li> <li><code>order</code>: Deprecated.</li> <li><code>vote_score</code>: Deprecated.</li> <li><code>description</code>: The description of the token.</li> <li><code>url</code>: The website url of the token.</li> <li><code>free_asset_net_limit</code>: The free bandwidth limit each account owns when transfers asset.</li> <li><code>public_free_asset_net_limit</code>: The free bandwidth limit all the accounts can use.</li> <li><code>public_free_asset_net_usage</code>: The free bandwidth usage of all the accounts.</li> <li><code>public_latest_free_net_time</code>: The latest bandwidth consumption time of token transfer.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#witnessupdatecontract","title":"WitnessUpdateContract","text":"<pre><code>    message WitnessUpdateContract {\n      bytes owner_address = 1;\n      bytes update_url = 12;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>update_url</code>: The website url of the witness.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#participateassetissuecontract","title":"ParticipateAssetIssueContract","text":"<pre><code>    message ParticipateAssetIssueContract {\n      bytes owner_address = 1;\n      bytes to_address = 2;\n      bytes asset_name = 3;\n      int64 amount = 4;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>to_address</code>: The token owner address.</li> <li><code>account_name</code>: The token id.</li> <li><code>amount</code>: The amount of token to purchase.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#accountupdatecontract","title":"AccountUpdateContract","text":"<pre><code>    // Update account name. Account name is unique now.\n    message AccountUpdateContract {\n      bytes account_name = 1;\n      bytes owner_address = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>account_name</code>: Account name.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#deprecatedfreezebalancecontract","title":"(Deprecated)FreezeBalanceContract","text":"<pre><code>    message FreezeBalanceContract {\n      bytes owner_address = 1;\n      int64 frozen_balance = 2;\n      int64 frozen_duration = 3;\n      ResourceCode resource = 10;\n      bytes receiver_address = 15;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>frozen_balance</code>: The amount of TRX to stake.</li> <li><code>frozen_duration</code>: The stake duration.</li> <li><code>resource</code>: The type of resource get by staking TRX.</li> <li><code>receiver_address</code>: The account address to receive resource.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#unfreezebalancecontract","title":"UnfreezeBalanceContract","text":"<pre><code>    message UnfreezeBalanceContract {\n      bytes owner_address = 1;\n      ResourceCode resource = 10;\n      bytes receiver_address = 13;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>resource</code>: The type of resource to unfree.</li> <li><code>receiver_address</code>: The account address to receive resource.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#withdrawbalancecontract","title":"WithdrawBalanceContract","text":"<pre><code>    message WithdrawBalanceContract {\n      bytes owner_address = 1;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#unfreezeassetcontract","title":"UnfreezeAssetContract","text":"<pre><code>    message UnfreezeAssetContract {\n      bytes owner_address = 1;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#updateassetcontract","title":"UpdateAssetContract","text":"<pre><code>    message UpdateAssetContract {\n      bytes owner_address = 1;\n      bytes description = 2;\n      bytes url = 3;\n      int64 new_limit = 4;\n      int64 new_public_limit = 5;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>description</code>: The description of the token.</li> <li><code>url</code>: The website url of the token.</li> <li><code>new_limit</code>: The bandwidth consumption limit of each account when transfers asset.</li> <li><code>new_public_limit</code>: The bandwidth consumption limit of the accounts.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#proposalcreatecontract","title":"ProposalCreateContract","text":"<pre><code>    message ProposalCreateContract {\n      bytes owner_address = 1;\n      map&lt;int64, int64&gt; parameters = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>parameters</code>: The proposal.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#proposalapprovecontract","title":"ProposalApproveContract","text":"<pre><code>    message ProposalApproveContract {\n      bytes owner_address = 1;\n      int64 proposal_id = 2;\n      bool is_add_approval = 3; // add or remove approval\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>proposal_id</code>: The proposal id.</li> <li><code>is_add_approval</code>: Whether to approve.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#proposaldeletecontract","title":"ProposalDeleteContract","text":"<pre><code>    message ProposalDeleteContract {\n      bytes owner_address = 1;\n      int64 proposal_id = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>proposal_id</code>: The proposal id.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#setaccountidcontract","title":"SetAccountIdContract","text":"<pre><code>    // Set account id if the account has no id. Account id is unique and case insensitive.\n    message SetAccountIdContract {\n      bytes account_id = 1;\n      bytes owner_address = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>account_id</code>: The account id.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#createsmartcontract","title":"CreateSmartContract","text":"<pre><code>    message CreateSmartContract {\n      bytes owner_address = 1;\n      SmartContract new_contract = 2;\n      int64 call_token_value = 5;\n      int64 token_id = 6;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>new_contract</code>: the smart contract.</li> <li><code>call_token_value</code> : The amount of TRC-10 token to send to the contract when triggers.</li> <li><code>token_id</code> : The id of the TRC-10 token to be sent to the contract.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#triggersmartcontract","title":"TriggerSmartContract","text":"<pre><code>    message TriggerSmartContract {\n      bytes owner_address = 1;\n      bytes contract_address = 2;\n      int64 call_value = 3;\n      bytes data = 4;\n      int64 call_token_value = 5;\n      int64 token_id = 6;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>contract_address</code>: The contract address.</li> <li><code>call_value</code>: The amount of TRX to send to the contract when triggers.</li> <li><code>data</code>: The parameters to trigger the contract.</li> <li><code>call_token_value</code> : The amount of TRC-10 token to send to the contract when triggers.</li> <li><code>token_id</code> : The id of the TRC-10 token to be sent to the contract.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#updatesettingcontract","title":"UpdateSettingContract","text":"<pre><code>    message UpdateSettingContract {\n      bytes owner_address = 1;\n      bytes contract_address = 2;\n      int64 consume_user_resource_percent = 3;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>contract_address</code>: The address of the smart contract.</li> <li><code>consume_user_resource_percent</code>: The percentage of resource consumption ratio.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#exchangecreatecontract","title":"ExchangeCreateContract","text":"<pre><code>    message ExchangeCreateContract {\n      bytes owner_address = 1;\n      bytes first_token_id = 2;\n      int64 first_token_balance = 3;\n      bytes second_token_id = 4;\n      int64 second_token_balance = 5;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>first_token_id</code>: First token id.</li> <li><code>first_token_balance</code>: First token balance.</li> <li><code>second_token_id</code>: Second token id.</li> <li><code>second_token_balance</code>: Second token balance.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#exchangeinjectcontract","title":"ExchangeInjectContract","text":"<pre><code>    message ExchangeInjectContract {\n      bytes owner_address = 1;\n      int64 exchange_id = 2;\n      bytes token_id = 3;\n      int64 quant = 4;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>exchange_id</code>: The token pair id.</li> <li><code>token_id</code>: The token id to inject.</li> <li><code>quant</code>: The token amount to inject.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#exchangewithdrawcontract","title":"ExchangeWithdrawContract","text":"<pre><code>    message ExchangeWithdrawContract {\n      bytes owner_address = 1;\n      int64 exchange_id = 2;\n      bytes token_id = 3;\n      int64 quant = 4;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>exchange_id</code>: The token pair id.</li> <li><code>token_id</code>: The token id to withdraw.</li> <li><code>quant</code>: The token amount to withdraw.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#exchangetransactioncontract","title":"ExchangeTransactionContract","text":"<pre><code>    message ExchangeTransactionContract {\n      bytes owner_address = 1;\n      int64 exchange_id = 2;\n      bytes token_id = 3;\n      int64 quant = 4;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>exchange_id</code>: The token pair id.</li> <li><code>token_id</code>: The token id to sell.</li> <li><code>quant</code>: The token amount to sell.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#shieldedtransfercontract","title":"ShieldedTransferContract","text":"<pre><code>    message ShieldedTransferContract {\n      bytes transparent_from_address = 1;\n      int64 from_amount = 2;\n      repeated SpendDescription spend_description = 3;\n      repeated ReceiveDescription receive_description = 4;\n      bytes binding_signature = 5;\n      bytes transparent_to_address = 6;\n      int64 to_amount = 7;\n    }\n</code></pre> <ul> <li><code>transparent_from_address</code>: The transparent address of the sender.</li> <li><code>from_amount</code>: The amount to send.</li> <li><code>spend_description</code>: Shielded spend information.</li> <li><code>receive_description</code>: Shielded receive information.</li> <li><code>binding_signature</code>: The binding signature.</li> <li><code>transparent_to_address</code>: The transparent address of the receiver.</li> <li><code>to_amount</code>: The amount to receive.</li> </ul> <pre><code>message SpendDescription {\n  bytes value_commitment = 1;\n  bytes anchor = 2;\n  bytes nullifier = 3;\n  bytes rk = 4;\n  bytes zkproof = 5;\n  bytes spend_authority_signature = 6;\n}\n</code></pre> <ul> <li><code>value_commitment</code>: value commitment of spender's transfer amount.</li> <li><code>anchor</code>: root of the note commitment Merkle tree at some block.</li> <li><code>nullifier</code>: nullifier of spender's note, to prevent double-spent.</li> <li><code>rk</code>: public key, to verify spender's Spend Authorization Signature.</li> <li><code>zkproof</code>: zero-knowledge proof of spender's note, prove that this note exists and could be spent.</li> <li><code>spend_authority_signature</code>: the spender's Spend Authorization Signature.</li> </ul> <pre><code>message ReceiveDescription {\n  bytes value_commitment = 1;\n  bytes note_commitment = 2;\n  bytes epk = 3;\n  bytes c_enc = 4;\n  bytes c_out = 5;\n  bytes zkproof = 6;\n}\n</code></pre> <ul> <li><code>value_commitment</code>: value commitment of receiver's transfer amount.</li> <li><code>note_commitment</code>: commitment of the receiver's not.</li> <li><code>epk</code>: ephemeral public key, in order to generate note's decryption key.</li> <li><code>c_enc</code>: part of note ciphertext, encryption of diversifier, receiver's transfer amount, rcm, and memo.</li> <li><code>c_out</code>: part of note ciphertext, encryption of the receiver's public key and ephemeral private key.</li> <li><code>zkproof</code>: zero-knowledge proof of the receiver's note.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#account-permission-management","title":"Account Permission Management","text":"<p>Account Permission Management</p>"},{"location":"mechanism-algorithm/system-contracts/#clearabicontract","title":"ClearABIContract","text":"<pre><code>    message ClearABIContract {\n      bytes owner_address = 1;\n      bytes contract_address = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>account_address</code>: The target contract address to clear ABI.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#updatebrokeragecontract","title":"UpdateBrokerageContract","text":"<pre><code>    message UpdateBrokerageContract {\n      bytes owner_address = 1;\n      int32 brokerage = 2;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>brokerage</code>: Commission rate, from 0 to 100,1 mean 1%.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#updateenergylimitcontract","title":"UpdateEnergyLimitContract","text":"<pre><code>    message UpdateEnergyLimitContract {\n      bytes owner_address = 1;\n      bytes contract_address = 2;\n      int64 origin_energy_limit = 3;\n    }\n</code></pre> <ul> <li><code>owner_address</code>: The owner of the current account.</li> <li><code>contract_address</code>: The contract address.</li> <li><code>origin_energy_limit</code>: The target energy limit to change.</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#freezebalancev2contract","title":"FreezeBalanceV2Contract","text":"<pre><code>     message FreezeBalanceV2Contract {\n      bytes owner_address = 1;\n      int64 frozen_balance = 2;\n      ResourceCode resource = 3;\n      }\n</code></pre> <ul> <li><code>owner_address</code>\uff1aOwner address</li> <li><code>frozen_balance</code>\uff1aTRX stake amount, the unit is sun</li> <li><code>resource</code>\uff1a Resource type</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#unfreezebalancev2contract","title":"UnfreezeBalanceV2Contract","text":"<pre><code>      message UnfreezeBalanceV2Contract {\n       bytes owner_address = 1;\n       int64 unfreeze_balance = 2;\n       ResourceCode resource = 3;\n      }\n</code></pre> <ul> <li><code>owner_address</code>\uff1aOwner address</li> <li><code>unfreeze_balance</code>\uff1aThe amount of TRX to unstake, in sun</li> <li><code>resource</code>\uff1a Resource type</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#withdrawexpireunfreezecontract","title":"WithdrawExpireUnfreezeContract","text":"<pre><code>      message WithdrawExpireUnfreezeContract {\n        bytes owner_address = 1;\n      }\n</code></pre> <ul> <li><code>owner_address</code>\uff1aOwner address</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#delegateresourcecontract","title":"DelegateResourceContract","text":"<pre><code>      message DelegateResourceContract {\n      bytes owner_address = 1;\n      ResourceCode resource = 2;\n      int64 balance = 3;\n      bytes receiver_address = 4;\n      bool  lock = 5;\n      }\n</code></pre> <ul> <li><code>owner_address</code>\uff1aOwner address</li> <li><code>resource</code>\uff1a Resource type</li> <li><code>balance</code>\uff1a Amount of TRX staked for resources to be delegated, unit is sun</li> <li><code>receiver_address</code>\uff1aResource receiver address</li> <li><code>lock</code>\uff1aWhether it is locked, if it is set to true, the delegated resources cannot be undelegated within 3 days. When the lock time is not over, if the owner delegates the same type of resources using the lock to the same address, the lock time will be reset to 3 days</li> </ul>"},{"location":"mechanism-algorithm/system-contracts/#undelegateresourcecontract","title":"UnDelegateResourceContract","text":"<pre><code>      message UnDelegateResourceContract {\n      bytes owner_address = 1;\n      ResourceCode resource = 2;\n      int64 balance = 3;\n      bytes receiver_address = 4;\n      }\n</code></pre> <ul> <li><code>owner_address</code>\uff1aOwner address</li> <li><code>resource</code>\uff1a Resource type</li> <li><code>balance</code>\uff1aundelegated TRX, unit is sun</li> <li><code>receiver_address</code>\uff1aResource receiver address</li> </ul>"},{"location":"releases/history/","title":"History","text":"Code Name Version Released Incl TIPs Release Note Specs Epicurus GreatVoyage-v4.7.7 2024-11-29 TIP-697 Release Note Specs Anaximander GreatVoyage-v4.7.6 2024-10-04 N/A Release Note Specs Cleobulus GreatVoyage-v4.7.5 2024-5-30 TIP-653 Release Note Specs Bias GreatVoyage-v4.7.4 2024-3-15 TIP-635 TIP-621 Release Note Specs Solon GreatVoyage-v4.7.3.1 2024-1-12 N/A Release Note Specs Chilon GreatVoyage-v4.7.3 2023-10-25 TIP-586 TIP-592 Release Note Specs Periander GreatVoyage-v4.7.2 2023-7-1 TIP-541 TIP-542 TIP-543 TIP-544 TIP-555 TIP-547 TIP-548 TIP-549 TIP-550 Release Note Specs Pittacus GreatVoyage-v4.7.1.1 2023-4-17 TIP-534 Release Note Specs Sartre GreatVoyage-v4.7.1 2023-2-27 N/A Release Note Specs Aristotle GreatVoyage-v4.7.0.1 2023-1-20 TIP-467 TIP-474 TIP-491 Release Note Specs Socrates GreatVoyage-v4.6.0 2022-11-21 TIP-387 TIP-461 TIP-465 TIP-476 Release Note Specs Aurelius GreatVoyage-v4.5.2 2022-8-18 TIP-425 TIP-428 TIP-440 Release Note Specs Tertullian GreatVoyage-v4.5.1 2022-1-19 TIP-391 TIP-388 TIP-383 TIP-382 TIP-370 TIP-369 TIP-397 Release Note Specs David GreatVoyage-v4.4.6 2022-5-25 N/A Release Note Specs Cicero GreatVoyage-4.4.5 2022-4-27 N/A Release Note Specs Plotinus GreatVoyage-4.4.4 2022-2-22 TIP-362 TIP-366 Release Note Specs Pythagoras GreatVoyage-4.4.3 2021-12-17 N/A Release Note N/A Augustinus GreatVoyage-4.4.2 2021-12-16 TIP-343 TIP-344 Release Note Specs Protagoras GreatVoyage-4.4.1 2021-10-19 N/A Release Note N/A Rousseau GreatVoyage-4.4.0 2021-10-15 TIP-289 TIP-290 TIP-272 TIP-318 Release Note Specs Bacon GreatVoyage-4.3.0 2021-8-3 TIP-292 TIP-293 TIP-295 TIP-271 TIP-306 Release Note Specs Epictetus GreatVoyage-4.2.2.1 2021-6-25 N/A Release Note Specs Lucretius GreatVoyage-4.2.2 2021-6-22 TIP-268 TIP-269 TIP-281 Release Note Specs Origen GreatVoyage-4.2.1 2021-5-22 N/A Release Note N/A Plato GreatVoyage-4.2.0 2021-4-27 TIP-157 TIP-207 Release Note Specs Thales GreatVoyage-4.1.3 2021-3-18 TIP-238 Release Note Specs N/A GreatVoyage-4.1.2 2021-1-20 TIP-196 TIP-204 TIP-209 Release Note Specs N/A GreatVoyage-4.1.1 2020-11-9 N/A Release Note Specs N/A GreatVoyage-v4.1.0 2020-11-2 TIP-127 TIP-128 TIP-174 TIP-175 TIP-176 Release Note N/A N/A GreatVoyage-v4.0.2 2020-11-2 N/A Release Note N/A N/A GreatVoyage-v4.0.1 2020-3-17 N/A Release Note N/A N/A GreatVoyage-4.0.0 2020-7-7 TIP-135 TIP-137 TIP-138 Release Note Specs N/A Odyssey-v3.7 2020-3-17 N/A Release Note Specs N/A Odyssey-v3.6.5 2019-10-8 TIP-37 TIP-43 TIP-44 TIP-53 TIP-54 TIP-60 Release Note Specs N/A Odyssey-v3.6.2 2019-8-8 N/A Release Note N/A N/A Odyssey-v3.6.1 2019-7-10 TIP-41 Release Note N/A N/A Odyssey-v3.6.0 2019-6-20 TIP-26 TIP-28 TIP-29 TIP-30 TIP-31 TIP-32 Release Note N/A N/A Odyssey-v3.5.1 2019-4-10 N/A Release Note N/A N/A Odyssey-v3.5.0.1 2019-3-1 N/A Release Note N/A N/A Odyssey-v3.5 2019-3-1 N/A Release Note N/A N/A Odyssey-v3.2.5 2019-1-25 N/A Release Note N/A N/A Odyssey-v3.2.4 2019-1-14 N/A Release Note N/A N/A Odyssey-v3.2.3 2018-12-24 N/A Release Note N/A N/A Odyssey-v3.2.2 2018-12-17 N/A Release Note N/A N/A Odyssey-v3.2.1.2 2018-12-7 N/A Release Note N/A N/A Odyssey-v3.2.1 2018-11-30 N/A Release Note N/A N/A Odyssey-v3.2 2018-11-30 N/A Release Note N/A N/A Odyssey-v3.1.3 2018-10-19 N/A Release Note N/A N/A Odyssey-v3.1.2 2018-10-12 N/A Release Note N/A N/A Odyssey-v3.1.1 2018-9-17 N/A Release Note N/A N/A Odyssey-v3.1.0 2018-9-10 N/A Release Note N/A N/A Odyssey-v3.0.1 2018-9-6 N/A Release Note N/A N/A Odyssey-v3.0 2018-8-30 N/A Release Note N/A N/A Odyssey-v2.0.8.1 2018-8-20 N/A Release Note N/A N/A Odyssey-v2.0.8 2018-8-14 N/A Release Note N/A N/A Odyssey-v2.0.7 2018-8-9 N/A Release Note N/A N/A Odyssey-v2.0.6 2018-7-11 N/A Release Note N/A N/A Odyssey-v2.0.5 2018-6-24 N/A Release Note N/A N/A Odyssey-v2.0.4.1 2018-6-24 N/A Release Note N/A N/A Odyssey-v2.0.4 2018-6-22 N/A Release Note N/A N/A Odyssey-v2.0.3 2018-6-20 N/A Release Note N/A N/A Odyssey-v2.0.2 2018-6-19 N/A Release Note N/A N/A Odyssey-v2.0.1 2018-6-6 N/A Release Note N/A N/A Odyssey-v2.0 2018-5-31 N/A Release Note N/A N/A Odyssey-v1.1.2 2018-5-31 N/A Release Note N/A N/A Odyssey-v1.1.1 2018-5-28 N/A Release Note N/A N/A Odyssey-v1.1 2018-5-18 N/A Release Note N/A N/A Odyssey-v1.0.6.3 2018-5-10 N/A Release Note N/A N/A Odyssey-v1.0.6.1 2018-5-7 N/A Release Note N/A N/A Odyssey-v1.0.6 2018-5-7 N/A Release Note N/A N/A Odyssey-v1.0.5 2018-4-20 N/A Release Note N/A N/A Odyssey-v1.0.4 2018-4-13 N/A Release Note N/A N/A Odyssey-v1.0.3 2018-4-5 N/A Release Note N/A N/A Exodus-v1.0 2017-12-28 N/A Release Note N/A"},{"location":"releases/history/#greatvoyage-477epicurus","title":"GreatVoyage-4.7.7(Epicurus)","text":"<p>GreatVoyage-4.7.7(Epicurus) introduces multiple important optimizations and updates, including a new proposal to upgrade the floating-point power calculation library from <code>java.lang.Math</code> to <code>java.lang.StrictMath</code>, to expand TRON hardware compatibility and provide users with more flexible hardware platform selection, and save operating costs; optimizing event subscription processing logic to ensure the integrity of event acquisition, and bring users a more user-friendly development experience; adapting to the GRPC asynchronous call mode, and further improve the node monitoring system. You may find the details below.</p>"},{"location":"releases/history/#core","title":"Core","text":""},{"location":"releases/history/#1-migrate-pow-operation-from-javalangmath-to-javalangstrictmath-for-cross-platform-computational-consistency","title":"1. Migrate <code>pow</code> operation from java.lang.Math to java.lang.StrictMath for cross-platform computational consistency","text":"<p>In order to enable java-tron to support multiple platforms and be compatible with new JDK versions, the Epicurus version switches the floating-point power operation library from <code>java.lang.Math</code> to <code>java.lang.StrictMath</code> to ensure consistency in cross-platform calculations.</p> <p>Note: This optimization is the No. 87 parameter of the TRON network. After Epicurus is deployed, it is disabled by default and can be enabled through governance voting.</p> <p>TIP: https://github.com/tronprotocol/tips/issues/697 </p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/6098 </p>"},{"location":"releases/history/#other-changes","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-event-subscription-processing-logic","title":"1. Optimize event subscription processing logic","text":"<p>java-tron provides event subscription service, and developers can subscribe to specific events from node through event plugin. For block events, when a node receives a new block, if it successfully verifies and processes the block, it will save the block data in the memory database. At the same time, if there is a new solidified block, the solidified block data will be written to the disk database. If the node deployer subscribes to block events, after the node completing the above block processing steps, the event sending related logic will be performed, that is, the latest block event and the latest solidified block event will be sent to the event plugin. However, in previous versions of Epicurus, block processing and event sending used the same exception capture logic: the newly received block data was removed from the memory database and an exception was thrown. This would result in the new block data being deleted when the block processing was normal but an exception occurred during event sending, which might temporarily affect block synchronization.</p> <p>The Epicurus version optimizes the event subscription processing logic and performs separate exception capture on the block event sending logic. When an exception occurs during event sending, an error log is output and the node exits, so that the node deployer can understand the node abnormality in time and ensure the integrity of event acquisition.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/6096 </p>"},{"location":"releases/history/#2-support-graceful-shutdown-with-signal-15-sigterm-for-nodes-enabling-backup","title":"2. Support graceful shutdown with signal -15 (SIGTERM) for nodes enabling backup.","text":"<p>The Epicurus version adjusts the resource release order of the master and backup services, first closing the communication channel between the master and backup nodes, and then closing the thread pool to ensure that the nodes enabling backup can exit gracefully through the <code>kill -15</code> command.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/6095 </p>"},{"location":"releases/history/#3-improve-duration-metrics-accuracy-of-grpc-interfaces","title":"3. Improve duration metrics accuracy of gRPC interfaces","text":"<p>The Epicurus version optimizes the duration statistics method for GRPC interface calls to adapt to the GRPC asynchronous call mode: a new server-side interceptor is added to record the start time of the GRPC call and monitor the end event of the GRPC call to accurately calculate the time consumption of the GRPC interface asynchronous call.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/6097 </p> <p>Not what we have but what we enjoy, constitutes our abundance.</p> <p>---Epicurus</p>"},{"location":"releases/history/#greatvoyage-v476anaximander","title":"GreatVoyage-v4.7.6(Anaximander)","text":"<p>The GreatVoyage-4.7.6(Anaximander) introduces several important optimizations and updates, including optimized unit test tasks to improve the stability of test cases execution; newly added TCP and UDP traffic statistics further enriches node monitoring data; optimized peer node idle judgment logic improves the stability of block synchronization; optimized node connection random disconnection logic improves the robustness of node network. Please find the details below.</p>"},{"location":"releases/history/#other-changes_1","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-the-statistical-logic-of-node-http-request-monitoring-metric","title":"1. Optimize the statistical logic of node HTTP request monitoring metric","text":"<p>java-tron supports node monitoring and provides various metrics data. Anaximander optimizes the statistical logic of node HTTP request monitoring metric to ensure data consistency during concurrent access by multiple threads when counting request data from each mapping address.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5920 </p>"},{"location":"releases/history/#2-improve-stability-of-gradle-test-task","title":"2. Improve stability of Gradle test task","text":"<p>Anaximander optimizes the unit test task. The Gradle test-retry  plugin is introduced to allow the failed unit test tasks to be re-executed. The <code>@Ignore</code> annotation is used to skip temporarily unused and unstable test cases. This optimization improves the stability of test task execution.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5916 https://github.com/tronprotocol/java-tron/pull/5927 </p>"},{"location":"releases/history/#3-add-tcp-outflow-monitoring-metric-for-prometheus-and-add-udp-inflow-traffic-statistic-to-monitorgetstatsinfo-api","title":"3. Add TCP outflow monitoring metric for Prometheus and add UDP inflow traffic statistic to <code>/monitor/getstatsinfo</code> API","text":"<p>Anaximander adds a new node TCP outflow monitoring metric and adds a UDP inflow statistic to the <code>/monitor/getstatsinfo</code> interface, further enriching the node monitoring data.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5942 </p>"},{"location":"releases/history/#4-optimize-peer-node-idle-judgment-logic","title":"4. Optimize peer node idle judgment logic","text":"<p>Anaximander optimizes the logic of judging whether the peer node is idle during the block synchronization process, so that block synchronization is not affected by the process of broadcasting blocks/transactions, which improves the efficiency of block synchronization and the stability of the connection between nodes.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5921 </p>"},{"location":"releases/history/#5-optimize-peer-sorting-logic","title":"5. Optimize peer sorting logic","text":"<p>Anaximander optimizes the peers\u2019 sorting logic and adds exception-catching to improve the efficiency of establishing connections between nodes.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5923 </p>"},{"location":"releases/history/#6-optimize-check-logic-for-fetching-block-inventory-message","title":"6. Optimize check logic for fetching block inventory message","text":"<p>Anaximander optimizes the check logic for fetching block inventory messages. The block number requested should be smaller than the largest block number in chain inventory message so that the node can detect illegal messages in time and disconnect from the other node. At the same time, richer node logs are conducive to the troubleshooting and location of connection issues between nodes.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5922 </p>"},{"location":"releases/history/#7-optimize-block-processing-logic","title":"7. Optimize block processing logic","text":"<p>Anaximander optimizes the block processing logic. When processing a received broadcasted block, the node will promptly update the ID and number of  the block which the node with its peer both have to better understand the status of the peers.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5925 </p>"},{"location":"releases/history/#8-optimize-random-disconnection-strategy","title":"8. Optimize random disconnection strategy","text":"<p>When a node\u2019s latest block height is higher than all peers\u2019 that are connected to it, this node will neither be able to synchronize blocks from peers, nor broadcast transactions. We call it an \"island node\". An island node actually does not have a valid peer. In order to prevent a node from entering the island state, Anaximander optimizes the random disconnection logic of the node, disconnects nodes that have been inactive for a long time, increases the number of valid connections, and improves the robustness of the node network.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5924 https://github.com/tronprotocol/java-tron/pull/5944 https://github.com/tronprotocol/java-tron/pull/5956 https://github.com/tronprotocol/java-tron/pull/5984 </p> <p>Nature is eternal and does not age.</p> <p>---Anaximander</p>"},{"location":"releases/history/#greatvoyage-v475cleobulus","title":"GreatVoyage-v4.7.5(Cleobulus)","text":"<p>The Cleobulus version introduces multiple important optimizations and updates, including a new proposal to adjust the energy cost of some opcodes in TVM to make the energy cost more reasonable. The enhanced transaction and block verification logic improves the system's fault tolerance. The optimized synchronization logic between threads improves data consistency. You may find the details below.</p>"},{"location":"releases/history/#core_1","title":"Core","text":""},{"location":"releases/history/#1-optimize-block-synchronization-and-production-logic","title":"1. Optimize block synchronization and production logic","text":"<p>The Cleobulus version optimizes the block production logic. After obtaining the block production lock, the node will check whether it meets the conditions for producing blocks to avoid inconsistent state before and after obtaining the block production lock, thereby improving the stability of the TRON network.</p> <p>Additionally, Cleobulus enhances the block verification logic. All nodes add checks on block size and block time. </p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5833 https://github.com/tronprotocol/java-tron/pull/5830 </p>"},{"location":"releases/history/#2-strengthen-size-check-of-account-creation-transactions","title":"2. Strengthen size check of account creation transactions","text":"<p>The Cleobulus version optimizes the account creation logic, strengthens the size check of account creation transactions, and adds the No.82 TRON network parameter to set the maximum number of bytes allowed for account creation transactions. The parameter ranges from 500 to 10000 and the default value is 1000. The value can be modified by initiating a proposal for a vote.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5835 </p>"},{"location":"releases/history/#tvm","title":"TVM","text":""},{"location":"releases/history/#1-adjust-energy-cost-for-some-opcodes-in-tvm","title":"1. Adjust energy cost for some opcodes in TVM","text":"<p>Cleobulus adjusts the energy cost of the <code>VOTEWITNESS</code> and <code>SUICIDE</code> opcodes to make the energy consumption more reasonable based on the resources and time required for the actual execution of each opcode.</p> <p>This optimization is the No. 81 parameter of the TRON network. After Cleobulus is deployed, it is disabled by default and can be enabled through governance voting.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-653.md  Source Code: https://github.com/tronprotocol/java-tron/pull/5837 </p>"},{"location":"releases/history/#other-changes_2","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-synchronization-logic-among-threads","title":"1. Optimize synchronization logic among threads","text":"<p>The Cleobulus version optimizes the block request logic and no longer reads <code>fetchBlockInfo</code> data when printing logs, improving the stability of concurrent access to <code>fetchBlockInfo</code> object by multiple threads.</p> <p>Additionally, Cleobulus optimizes the synchronization block processing logic. Regardless of whether the <code>syncBlockToFetch</code> queue is empty, the node can process block data normally, improving the efficiency of block synchronization.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5831 https://github.com/tronprotocol/java-tron/pull/5832 </p>"},{"location":"releases/history/#2-remove-redundant-code","title":"2. Remove redundant code","text":"<p>The Cleobulus version removes redundant code in the block processing logic, improving the readability and maintainability of the code.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5834 </p> <p>Seek virtue and eschew vice. </p> <p> ---Cleobulus</p>"},{"location":"releases/history/#greatvoyage-v474bias","title":"GreatVoyage-v4.7.4(Bias)","text":"<p>The Bias version introduces several important optimizations and updates, including a new proposal to optimize the performance of voting reward withdrawal; the refactored Gradle dependency reduces the complexity of core protocol development; support for gRPC reflection services and optimized logging system brings a more friendly and convenient development experience to users. Please find the details below.</p>"},{"location":"releases/history/#core_2","title":"Core","text":""},{"location":"releases/history/#1-optimize-voting-reward-withdrawal-performance","title":"1. Optimize voting reward withdrawal performance","text":"<p>TIP-465 aims to improve the calculation performance of TRON voting rewards. By recording the single-vote cumulative reward value of each super representative in each maintenance period, the time complexity of voting reward calculation can be reduced from linear time to constant time. The TIP-465 has been implemented as early as the Socrates version, and No. 82 proposal based on TIP-465 has been officially adopted at 2023-01-20 14:00:00. However, this proposal only optimizes the calculation performance of voting rewards generated after the proposal takes effect (constant time complexity), while the calculation performance of voting rewards generated before the proposal takes effect is still low (linear time complexity).</p> <p>The Bias version optimizes the calculation performance of voting rewards generated before the No.82 proposal takes effect. It calculates the single-vote cumulative reward value of each super representative in each maintenance period before the No.82 proposal takes effect in advance through background tasks, and saves the calculation results to the database. This will make the calculation performance of voting rewards generated before and after the No. 82 proposal takes effect consistent, so that any transaction involving reward withdrawal can complete the reward calculation within a constant time, speeding up the execution speed of transactions related to voting rewards withdrawal, improving network throughput.</p> <p>This optimization is the No. 79 parameter of the TRON network. After Bias is deployed, it is turned off by default and can be enabled through governance voting.</p> <p>TIP: https://github.com/tronprotocol/tips/issues/635 Source Code: https://github.com/tronprotocol/java-tron/pull/5406 https://github.com/tronprotocol/java-tron/pull/5654 https://github.com/tronprotocol/java-tron/pull/5683 https://github.com/tronprotocol/java-tron/pull/5742 https://github.com/tronprotocol/java-tron/pull/5748 </p>"},{"location":"releases/history/#2-add-check-function-for-the-number-of-unsolidified-blocks","title":"2. Add check function for the number of unsolidified blocks","text":"<p>The block solidification mechanism of the TRON network is: a block can be solidified only after it is confirmed by 70% of the super representatives, that is, the block data is written to the disk and the data cannot be changed. Blocks that cannot be solidified are always stored in memory. If the number of unsolidified blocks continues to increase, it may cause memory exhaustion and the node to stop running.</p> <p>The Bias version adds a check function for the number of unsolidified blocks. When it is detected that the number of unsolidified blocks of a node reaches the threshold, the node will stop broadcasting transactions to avoid too many transactions that cannot be solidified in the network. This can not only reduce the node's memory usage, but also reduce the number of transactions in the block, improve the block execution speed, and facilitate the rapid recovery of the network in the later period..</p> <p>This feature is disabled by default. Node deployers can turn on it and configure the threshold through the below configuration items.</p> <pre><code>node.unsolidifiedBlockCheck = true\nnode.maxUnsolidifiedBlocks = 54\n</code></pre> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5643 </p>"},{"location":"releases/history/#api","title":"API","text":""},{"location":"releases/history/#1-supply-block_unsolidified-in-code-for-walletbroadcasttransaction-api","title":"1. Supply BLOCK_UNSOLIDIFIED in code for /wallet/broadcasttransaction API","text":"<p>The Bias version adds a check function for the number of unsolidified blocks. When it is detected that the number of unsolidified blocks of a node reaches the threshold, the node will stop broadcasting transactions. In order to provide better feedback on the node status, the Bias version adds a new return code <code>BLOCK_UNSOLIDIFIED</code> for the <code>/wallet/broadcasttransaction</code> API. This code indicates that the node has too many unsolidified blocks and the number has exceeded the threshold, the node cannot broadcast the transaction.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5643 </p>"},{"location":"releases/history/#other-changes_3","title":"Other Changes","text":""},{"location":"releases/history/#1-add-field-codeversion-to-hellomessage-to-declare-code-version","title":"1. Add field codeVersion to HelloMessage to declare code version","text":"<p>Bias adds a new field <code>codeVersion</code> representing version information in the HelloMessage message, so that nodes can obtain the version information of the other node during the node discovery phase, which is beneficial to troubleshooting and locating problems later.</p> <p>TIP: https://github.com/tronprotocol/tips/issues/621 Source Code: https://github.com/tronprotocol/java-tron/pull/5584 https://github.com/tronprotocol/java-tron/pull/5667 </p>"},{"location":"releases/history/#2-bump-libp2p-to-version-221","title":"2. Bump libp2p to version 2.2.1","text":"<p>Bias upgrades the network module to libp2p v2.2.1. The main contents of this version include: bump snappy-java dependency library to v1.1.10.5, add LAN IP acquisition logic, optimize handshake logic, and adjust some log levels.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5692 </p>"},{"location":"releases/history/#3-bump-jetty-to-9453v20231009","title":"3. Bump jetty to 9.4.53.v20231009","text":"<p>The Bias version bumps the jetty dependency library to v9.4.53.v20231009. </p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5571 </p>"},{"location":"releases/history/#4-refactor-gradle-dependencies","title":"4. Refactor Gradle dependencies","text":"<p>The java-tron code is divided into multiple modules, each module has its own dependencies, but currently there are situations where dependencies are declared multiple times in multiple modules. The Bias version reconstructs the Gradle dependencies of each module and deletes duplicate dependency statements, making the code dependencies clearer and enabling unified management of dependencies to reduce maintenance costs.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5625 </p>"},{"location":"releases/history/#5-provide-grpc-reflection-service","title":"5. Provide gRPC reflection service","text":"<p>Starting from the Bias version, the gRPC reflection service is supported. Users can directly use the gRPCurl command line tool to make the gPRC interface calls, which improves the ease of use of the gRPC interface. This feature needs to be enabled through the following configuration items: <pre><code>node.rpc.reflectionService=true\n</code></pre> Source Code: https://github.com/tronprotocol/java-tron/pull/5583 </p>"},{"location":"releases/history/#6-delete-the-litefullnodetool-related-code-under-the-framework-module","title":"6. Delete the LiteFullNodeTool related code under the framework module","text":"<p>In order to facilitate tool maintenance and developer use, TRON has launched the <code>Toolkit.jar</code> toolbox, which includes various TRON development tools. As early as the Aristotle version, the code related to the LiteFullNode data clipping tool has been integrated into the <code>Toolkit</code> toolbox (located under the plugin module), and <code>Toolkit</code> can completely replace <code>LiteFullNodeTool</code> (located under the framework module). Therefore, the Bias version deletes the <code>LiteFullNodeTool</code> related code under the framework module, which not only reduces code redundancy, but also makes the division of functional modules clearer. The commands to use the LiteFullNode data pruning function in the <code>Toolkit</code> are as follows:</p> <pre><code>$ java -jar Toolkit.jar db lite \n</code></pre> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5711 </p>"},{"location":"releases/history/#7-remove-configuration-item-nodediscoverybindip","title":"7. Remove configuration item node.discovery.bind.ip","text":"<p>Bias upgrades libp2p to v2.2.1. That makes the node can obtain the node LAN IP directly through libp2p without manual configuration by the deployer. Therefore, the Bias version deletes the no longer used configuration item <code>node.discovery.bind.ip</code>, simplifying the configuration complexity.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5597 https://github.com/tronprotocol/java-tron/pull/5750 </p>"},{"location":"releases/history/#8-remove-redundant-ci-scripts","title":"8. Remove redundant CI scripts","text":"<p>The Bias version removes project build scripts that are no longer used, including checkStyle.sh, codecov.sh, querySonar.sh, sonar.sh.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5580 </p>"},{"location":"releases/history/#9-initialize-the-api-service-first-during-the-node-startup","title":"9. Initialize the API service first during the node startup","text":"<p>The Bias version adjusts the start order of each service, starts the node API service first, and then starts the P2P service and consensus service. This prevents the API service port from being occupied by other services.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5711 </p>"},{"location":"releases/history/#10-optimize-log","title":"10. Optimize log","text":"<p>The Bias version optimizes node logs, adjusts some log levels according to business logic, simplifies expected exception logs, and elaborates unexpected exception logs to facilitate problem location.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5624 https://github.com/tronprotocol/java-tron/pull/5601 https://github.com/tronprotocol/java-tron/pull/5660 https://github.com/tronprotocol/java-tron/pull/5687 https://github.com/tronprotocol/java-tron/pull/5697 </p>"},{"location":"releases/history/#11-add-synchronization-control-when-writing-to-zeromq","title":"11. Add synchronization control when writing to ZeroMQ","text":"<p>java-tron supports subscribing to events through the built-in ZeroMQ message queue. However, when multiple threads concurrently send events to the ZeroMQ, write exception errors may occur. The Bias version adds synchronization control when writing to ZeroMQ, ensuring the order of concurrent access between threads.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5536 </p>"},{"location":"releases/history/#12optimize-unexpected-exception-capture-process-of-scalingfactor-in-walletcreateshieldedcontractparameters-api","title":"12.Optimize unexpected exception capture process of scalingFactor in /wallet/createshieldedcontractparameters API.","text":"<p>The Bias version optimizes the <code>/wallet/createshieldedcontractparameters</code> interface and adds a legality check for the anonymous contract scaling factor parameter <code>scalingFactor</code>, which must be a positive integer.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5746 </p> <p>Be slow in considering, but resolute in action. </p> <p> ---Bias</p>"},{"location":"releases/history/#greatvoyage-v4731solon","title":"GreatVoyage-v4.7.3.1(Solon)","text":"<p>Solon is a non-mandatory upgrade version that will introduce two important updates. A more stable HTTP interface and Lite FullNode data pruning tool bring users a more friendly development experience.</p> <p>Please find the details below.</p>"},{"location":"releases/history/#other-changes_4","title":"Other Changes","text":""},{"location":"releases/history/#1-more-stable-walletgetnodeinfo-interface","title":"1. More stable /wallet/getnodeinfo interface","text":"<p>In versions prior to Solon, there was a very small probability that an exception might be triggered when calling the /wallet/getnodeinfo interface due to the concurrent execution of block data object serialization. Therefore, the Solon version modified the serialization logic of block data to ensure the correctness of block data acquisition and make the /wallet/getnodeinfo interface more stable.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5594 </p>"},{"location":"releases/history/#2-optimize-lite-fullnode-data-pruning-tool","title":"2. Optimize Lite FullNode data pruning tool","text":"<p>In order to solve the problem of node database corruption caused by the abnormal shutdowns, starting from Socrates version, the Checkpoint V2 mechanism was introduced. The V2 mechanism saves multiple checkpoints on the disk, corresponding to multiple solidified block data, which is used to restore the data when the node database is damaged.</p> <p>The Lite FullNode data pruning tool should also be compatible with the checkpoint v2 version. When a node stops abnormally, the pruning tool can also restore the node data and complete the data pruning. </p> <p>Therefore, Solon optimized the Lite FullNode data pruning tool in the toolkit. When it is found that checkpoint v2 is used, the data will be queried from the checkpoint v2 database, so that even if the node stops abnormally, the tool can restore and prune the data, which improves the usability of the Lite FullNode data pruning tool.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5658 </p> <p>Do not counsel what is most pleasant, but what is best. </p> <p> ---Solon</p>"},{"location":"releases/history/#greatvoyage-v473chilon","title":"GreatVoyage-v4.7.3(Chilon)","text":"<p>Chilon is a non-mandatory upgrade version that will introduce multiple important updates. Richer gRPC interfaces and faster node startup speed, bring users a more friendly development experience. Optimized disconnection strategy and synchronization process improve the stability of the connection among nodes. The optimized transaction processing logic and database query performance elevate the transaction packaging efficiency and network throughput.</p> <p>Please find the details below.</p>"},{"location":"releases/history/#core_3","title":"Core","text":""},{"location":"releases/history/#1-add-grpc-interfaces-for-resource-price-and-transaction-memo-fee-query","title":"1. Add gRPC interfaces for resource price and transaction memo fee query","text":"<p>Chilon adds three new gRPC interfaces. Users can obtain historical bandwidth unit price through <code>getBandwidthPrices</code> API, obtain historical energy unit price through <code>getEnergyPrices</code> API, and obtain transaction memo fee through <code>getMemoFee</code> API. These new gRPC APIs further improve the developer experience.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-586.md Source Code: https://github.com/tronprotocol/java-tron/pull/5412 </p>"},{"location":"releases/history/#2-supplement-disconnect-reasons","title":"2. Supplement disconnect reasons","text":"<p>When a node fails to process a message from a peer, it may initiatively disconnect from the peer. However, in previous versions of Chilon, in some cases, the node did not inform the other node of the reason for the disconnection, which was not conducive to the analysis and troubleshooting of the connection issue by the other node.</p> <p>The Chilon version supplements two reasons for disconnection. Node will send the disconnection reasons to the other node before dropping the connection, so as to facilitate efficient handling of node connection problems.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-592.md Source Code: https://github.com/tronprotocol/java-tron/pull/5392  </p>"},{"location":"releases/history/#3-discard-transactions-from-bad-peers-instead-of-disconnected-peers","title":"3. Discard transactions from bad peers instead of disconnected peers","text":"<p>For a broadcast transaction, the node must determine whether to process it. In previous versions of Chilon, the basis for judgment is whether the transaction comes from a disconnected peer. If so, the transaction will be discarded. However, whether to execute a broadcasted transaction should not be judged based on whether it maintains a connection with the other node, but whether the other node is a malicious node. </p> <p>Therefore, the Chilon version optimizes the transaction processing logic and no longer discards transactions from disconnected peers. Instead, it only discards transactions broadcasted from the nodes that have sent illegal transactions. This change improves transaction broadcast and packaging efficiency.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5440 </p>"},{"location":"releases/history/#4-optimize-stake-20-codes-and-error-messages","title":"4. Optimize Stake 2.0 codes and error messages","text":"<p>The Chilon version standardizes Stake 2.0-related code and simplifies complex functions\uff0c improving the simplicity and readability of the code.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5426 </p>"},{"location":"releases/history/#5-accelerate-bloomfilter-initialization-for-transaction-cache","title":"5. Accelerate bloomFilter initialization for transaction cache","text":"<p>When a node starts, it will load the transactions of the latest 65536 blocks from the database to build a transaction cache bloomFilter, which is used to determine duplicate transactions when verifying transactions later. In previous versions of Chilon, the loading time of the transaction cache accounted for more than 70% of the node startup time. In order to accelerate the speed of the transaction cache bloomFilter initialization, the Chilon version persists in the transaction cache bloomFilter. When the node exits normally, the transaction cache bloomFilter-related data will be stored on the disk. When the node restarts, there will be no need to read the transaction information in the recent blocks, but directly load the bloomFilter data into the memory, speeding up the initialization process of the transaction cache bloomFilter and greatly improving the node startup speed. This feature is disabled by default and can be enabled through the node configuration item <code>storage.txCache.initOptimization = true</code>.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5394  https://github.com/tronprotocol/java-tron/pull/5491  https://github.com/tronprotocol/java-tron/pull/5505  https://github.com/tronprotocol/java-tron/pull/5523  https://github.com/tronprotocol/java-tron/pull/5543  </p>"},{"location":"releases/history/#6-fix-concurrency-issues-when-generating-chain-inventory","title":"6. Fix concurrency issues when generating chain inventory","text":"<p>In previous versions of Chilon, when node A requests to synchronize blocks from node B, it first sends its own chain summary to node B. After receiving it, node B generates node A's missing block list according to the local chain and returns the list to node A. The list generation process is: first, find the maximum common block height of the two nodes from the chain summary of node A, and then add the IDs of several blocks starting from the maximum common block height to the missing blocks list of node A. Since the generation of the missing block list and chain switching are executed concurrently, if chain switching occurs when generating the missing block list, it may happen that after the maximum common block height is obtained, the corresponding block id cannot be obtained, causing the generated missing block list does not match the chain summary of node A, resulting in dropping the node connection.</p> <p>The Chilon version optimizes the generation logic of the missing block list. When the ID of the highest common block previously calculated cannot be obtained, the node will retry to ensure that the returned list contains the highest common block information, which improves the stability of connections between nodes.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5393  https://github.com/tronprotocol/java-tron/pull/5532 </p>"},{"location":"releases/history/#7-correct-resource-disorder-closure-behavior-on-kill-15","title":"7. Correct resource disorder closure behavior on kill -15","text":"<p>In previous versions of Chilon, when the service is shut down, abnormal errors may occur  due to the resource release order issue. The Chilon version optimizes the service shutdown logic. When the <code>kill -15</code> command is used to shut down the service, it can ensure the accuracy of the release sequence of various types of resources so that the node can exit normally.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5410 https://github.com/tronprotocol/java-tron/pull/5425  https://github.com/tronprotocol/java-tron/pull/5421 https://github.com/tronprotocol/java-tron/pull/5429  https://github.com/tronprotocol/java-tron/pull/5447  </p>"},{"location":"releases/history/#api_1","title":"API","text":""},{"location":"releases/history/#1-optimize-http-interface-monitoring","title":"1. Optimize HTTP interface monitoring","text":"<p>Chilon optimizes the HTTP interface monitoring, it no longer counts requests for APIs that are not supported by the node, making the statistics of successful or failed HTTP interface requests more accurate.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5332 </p>"},{"location":"releases/history/#2-provide-uniform-rate-limitation-configuration-for-all-http-and-grpc-apis","title":"2. Provide uniform rate limitation configuration for all HTTP and gRPC APIs","text":"<p>java-tron supports interface rate limiting. The default qps (queries per second) of each interface is 1000. Node deployers can also limit the traffic of a particular interface. However, in previous versions of Chilon, it was not supported to modify the default qps of each interface, that way, If you want to configure the default qps of each interface to 2000, you need to configure the current limit for each interface respectively. The Chilon version adds a new default interface rate limit configuration <code>rate.limiter.global.api.qps</code>. With this configuration, users can change the rate limit of all interfaces, simplifying the configuration complexity.</p> <pre><code>rate.limiter.global.api.qps = 1000\n</code></pre> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5502 </p>"},{"location":"releases/history/#3-optimize-http-interface-parameter-parsing","title":"3. Optimize HTTP interface parameter parsing","text":"<p>In previous versions of Chilon, for interfaces involving reward queries, if the request passes in invalid parameters or non-JSON formatted parameters, the node will throw an exception. The Chilon version optimizes the HTTP interface parameter parsing logic and returns a 0 value or error message for requests with incorrect parameter formats.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5367 https://github.com/tronprotocol/java-tron/pull/5483 </p>"},{"location":"releases/history/#4-add-solidity-query-interfaces-of-resource-unit-price","title":"4. Add solidity query interfaces of resource unit price","text":"<p>Chilon supplements query interfaces of resource unit price for solidity, they are <code>/walletsolidity/getbandwidthprices</code> and  <code>/walletsolidity/getenergyprices</code>.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5412 https://github.com/tronprotocol/java-tron/pull/5451 https://github.com/tronprotocol/java-tron/pull/5437 </p>"},{"location":"releases/history/#5-optimize-the-processing-logic-of-some-http-interfaces","title":"5. Optimize the processing logic of some HTTP interfaces","text":"<p>The Chilon version optimizes some HTTP interfaces to make it consistent with get and post request processing, including parameters check and return value. The interfaces include <code>/wallet/getavailableunfreezecount</code>, <code>/wallet/getcanwithdrawunfreezeamount</code>, <code>/wallet/getcandelegatedmaxsize</code>, and <code>/wallet/getavailableunfreezecount</code>. </p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5408 </p>"},{"location":"releases/history/#other-changes_5","title":"Other Changes","text":""},{"location":"releases/history/#1-add-check-for-expired-transactions-when-fetching-transactions","title":"1. Add check for expired transactions when fetching transactions","text":"<p>Chilon adds a check for expired transactions in the broadcast list it receives. For transactions timed out in the list, it will no longer make requests to its remote node, avoiding node connections being disconnected due to transaction processing failures, and improving node connection stability.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5460 </p>"},{"location":"releases/history/#2-fix-concurrency-issue-of-getheadblockid-method","title":"2. Fix concurrency issue of getHeadBlockId method","text":"<p>During the block synchronization process, the node must obtain the <code>BlockId</code> of the latest block through the <code>getHeadBlockId</code> method. In previous versions of Chilon, the <code>BlockId</code> was obtained through the block number and hash of the latest block. However, due to the concurrent execution of the latest block data acquisition thread and the update thread, getHeadBlockId may start to obtain the BlockId of the latest block before the block number and hash value of the latest block have been updated, which makes it possible for the <code>getHeadBlockId</code> method to return an abnormal <code>BlockId</code> value. </p> <p>Chilon optimizes the <code>BlockId</code> acquisition logic of the latest block, and <code>getHeadBlockId</code> only obtains <code>BlockId</code> through the hash value of the latest block, ensuring the correctness of the block ID acquisition.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5403 </p>"},{"location":"releases/history/#3-delete-unused-network-configurations","title":"3. Delete unused network configurations","text":"<p>Chilon deleted four unused network parameters, including the three configuration items below, simplifying the complexity of using for developers.</p> <pre><code>node.discovery.public.home.node\nnode.discovery.ping.timeout\nnode.p2p.pingInterval\n</code></pre> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5441 </p>"},{"location":"releases/history/#4-obtain-external-ip-through-libp2p","title":"4. Obtain external IP through Libp2p","text":"<p>In previous versions of Chilon, when a node starts, the external IP address would be obtained repeatedly, and java-tron and lib2p2 each perform the IP acquisition once. To improve the node startup speed, Chilon optimizes the external IP acquisition logic. When a node starts, it directly calls the libp2p module to obtain the external IP, and it can directly assign the external IP to libp2p and repeated obtaining is avoided.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5407 </p>"},{"location":"releases/history/#5-add-address-parsing-for-stake-related-transactions-in-event-subscription","title":"5. Add address parsing for stake-related transactions in event subscription","text":"<p>Chilon optimizes the event subscription service and adds the parsing of addresses in stake-related transactions, so that event subscribers can obtain address information in stake, resource delegation, and other transactions.</p> <p>Source Code:https://github.com/tronprotocol/java-tron/pull/5419 </p>"},{"location":"releases/history/#6-adjust-default-number-of-cpu-cores-used-in-signature-validation","title":"6. Adjust default number of CPU cores used in signature validation","text":"<p>In previous versions of Chilon, nodes used 1/2 of the system CPU cores for parallel signature verification by default. To improve the performance of node synchronization and block processing, the Chilon version changed the default value of the number of threads used for signature verification to the maximum number of CPU cores to maximize signature verification performance. Node deployers can also adjust the number of signature verification threads through the <code>node.validateSignThreadNum</code> configuration item.</p> <p>Source Code:https://github.com/tronprotocol/java-tron/pull/5396  </p>"},{"location":"releases/history/#7-migrate-litefullnode-tool-related-unit-test-cases-to-plugins-module","title":"7. Migrate LiteFullNode tool related unit test cases to Plugins module","text":"<p>In the previous version, the code related to the LiteFullNode tool has been integrated into the toolkit in the plugins module. The Chilon version has further integrated and moved the test cases related to the LiteFullNode tool from the framework module to the plugins module. Not only does It make the code structure clearer but also improves the execution efficiency of test cases.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5475 https://github.com/tronprotocol/java-tron/pull/5482 </p>"},{"location":"releases/history/#8-enhance-query-performance-of-properties-db","title":"8. Enhance query performance of properties DB","text":"<p>During the block processing process, nodes access the <code>properties</code> database more frequently. Better <code>properties</code> database query performance will improve the processing speed of the block. Since the property data volume is small and updates are infrequent, Chilon optimizes the query performance of the <code>properties</code> database, loading all data into the first-level cache to maximize data query performance and thereby improve transaction processing capabilities.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5378  </p> <p>Do not desire impossible. </p> <p> ---Chilon</p>"},{"location":"releases/history/#greatvoyage-v472periander","title":"GreatVoyage-v4.7.2(Periander)","text":"<p>The Periander version introduces several important optimizations and updates, adding two governance proposals to optimize Stake 2.0, greatly improving the flexibility of the TRON stake mechanism; adding a governance proposal to implement EIP-3855 <code>PUSH0</code> Instruction, which not only ensures the compatibility of TRON and Ethereum at the virtual machine level but also reduces the cost of using TRON smart contracts; more friendly smart contracts interfaces to improve the convenience of smart contract development; the P2P network module of TRON has been fully upgraded to support IPV6 protocol, node discovery via DNS, message compression, etc., greatly improving the performance of TRON network infrastructure.</p> <p>Please see the details below.</p>"},{"location":"releases/history/#core_4","title":"Core","text":""},{"location":"releases/history/#1-upgrade-libp2p-to-v120","title":"1. Upgrade Libp2p to v1.2.0","text":"<p>Libp2p is a Java version open-source P2P protocol framework developed by the java-tron core developers and anyone can develop distributed applications with Libp2p, as the underlying P2P network of java-tron is implemented based on Libp2p. In order to further improve the underlying network performance of java-tron, Periander upgrades the Libp2p v0.1.4 with the v1.2.0 version.</p> <p>Libp2p v1.2.0 has the following new features\uff1a</p> <ul> <li> <p>Support IPv6 protocol</p> <p>IPV6 protocol is the next-generation Internet IP protocol that replaces IPV4. While solving the problem of IP4 address exhaustion, the network performance has also been improved. Currently, mainstream server operating systems support both IPv4 and IPv6. Therefore, Libp2p v1.2.0 supporting dual protocol stacks not only improves the network performance of TRON but also enables nodes that either support one of the protocols or support both of them to join the TRON network.</p> <p>This function is disabled by default and needs to be enabled through the node configuration item <code>node.enableIpv6 = true</code>.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-549.md </li> </ul> </li> <li> <p>Node Discovery via DNS</p> <p>Libp2p v1.2.0 supports node discovery through DNS so that nodes can use not only the Kademlia algorithm but also the DNS servers for node discovery. The nodes supporting the feature can publish nodes to the DNS service and use DNS for node discovery. These functions need to be enabled through node configuration items, see below:</p> <p>Publish Nodes to DNS</p> <p>The node supports publishing known nodes to the DNS service for other nodes to use. There are two ways to publish nodes: dynamic publishing and static publishing. Dynamic publishing is the node periodically publishing the remote node IP in the K-bucket to DNS. Static publishing is to publish the nodes in the <code>dns.staticNodes</code> configuration item to the DNS service at one time, without updating later. If <code>dns.staticNodes</code> is not empty, it means to adopt the static publishing way, otherwise, the dynamic publishing way.</p> <pre><code>node.dns {\n    # enable or disable dns publish, default false\n    publish = true\n\n    # dns domain to publish nodes, required if publish is enable\n    dnsDomain = \"...\"\n\n    # dns private key used to publish, required if publish is enable, hex string of length 64\n    dnsPrivate = \"...\"\n\n    # dns server to publish, required if publish is enable, only \u201daws\u201d or \u201caliyun\u201d is support\n    serverType = \"...\"\n\n    # access key id of aws or aliyun api, required if publish is enable, string\n    accessKeyId = \"...\"\n\n    # access key secret of aws or aliyun api, required if publish is enable, string\n    accessKeySecret = \"...\"\n\n    # if publish is enable and serverType is aliyun, it's endpoint of aws dns server, string\n    aliyunDnsEndpoint = \"...\"\n\n    # if publish is enable and serverType is aws, it's region of aws api, such as \"eu-south-1\", string\n    awsRegion = \"...\"\n    # if publish is enable and serverType is aws, it's host zone id of aws's domain, string\n    awsHostZoneId = \"...\"\n\n    # static nodes to published on dns\n    staticNodes = [\n        # Sample entries:\n        # \"ip:port\",\n        # \"ip:port\"\n    ]\n\n    # the range is from 1 to 5\n    maxMergeSize = 2\n\n    changeThreshold = 0.001\n}\n</code></pre> <p>Node discovery via DNS</p> <p>To use the function of node discovery via DNS, you need to configure the following configuration items: <pre><code>node.dns {\n # DNS URL to get nodes, URL format tree://{pubkey}@{domain}, default empty\n treeUrls = [......]\n}\n</code></pre></p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-548.md </li> </ul> </li> <li> <p>Connection precheck before P2P communication </p> <p>Libp2p v0.1.4 chooses whether to establish a connection and synchronize data with a remote node according to the order of the update time of the node. In actual scenarios, the connection may be rejected by the other party for some reason, which will affect data synchronization. In order to improve the efficiency of establishing connections between nodes, Libp2p v1.2.0 supports node connection precheck before the P2P communication, which can check whether the other node can accept the connection in advance.</p> <p>The node tries to establish a TCP connection with the other node in advance to know whether it is online. If the TCP connection is established, a pair of interactive messages are used to obtain the relevant information of the other node, including the Libp2p version, the maximum number of connections, the current number of connections, etc., to determine whether the other node can still accept connections. This function avoids invalid connection requests and greatly improves the efficiency of connection establishment.</p> <p>This function is disabled by default and needs to be enabled through the node configuration item <code>node.nodeDetectEnable</code>.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-547.md </li> </ul> </li> <li> <p>P2P message Snappy compression</p> <p>Libp2p v1.2.0 supports TCP message compression. The node compresses the TCP message before transmission and decompresses it after receiving the compressed message. After testing, the time consumption for message compression and decompression is short, less than 1 ms, and this function can significantly reduce the network bandwidth occupation of message transmission, which can save about 40% of the bandwidth.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-550.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5017</li> </ul> </li> </ul>"},{"location":"releases/history/#2-support-canceling-unstaking-in-stake-20","title":"2. Support canceling unstaking in Stake 2.0","text":"<p>In the versions previous to Periander, after initiating an unstaking transaction through the HTTP API in Stake 2.0, the user needs to wait for a 14-day waiting period before withdrawing the corresponding funds, and the unstaking cannot be canceled.</p> <p>The Periander version optimizes the Stake 2.0 mechanism, allowing users to cancel unstakings that have been initiated but not completed yet. When canceling unstakings, all unstaked funds still in the waiting period will be re-staked, and the resource obtained through the re-staking remains the same as before. Unstakings that exceeded the 14-day waiting period cannot be canceled, and this part of the unstaked funds will be automatically withdrawn to the owner\u2019s account. This feature is controlled by the No. 77 parameter of the TRON network, which needs to be enabled through governance voting. After it is enabled, the nodes will support a new transaction type, and users can use the <code>wallet/cancelallunfreezev2</code> API to create an unstaking canceling transaction: <pre><code>curl -X POST http://127.0.0.1:8090/wallet/cancelallunfreezev2 -d \\\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"visible\": true\n}'\n</code></pre></p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-541.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5230 https://github.com/tronprotocol/java-tron/pull/5260 https://github.com/tronprotocol/java-tron/pull/5279 </li> </ul>"},{"location":"releases/history/#3-resource-delegating-supports-customizable-lock-period","title":"3. Resource delegating supports customizable lock period","text":"<p>In the versions previous to Periander, users can choose whether to lock or not when delegating resources. If chosen to lock, the resource delegating to the recipient address could not be canceled within 3 days, which is more conducive for users participating in the resource rental market.</p> <p>The Periander version further optimizes the lock time when delegating resources, changing it from the current fixed value of 3 days to a configurable length of time for users according to their needs.</p> <p>This feature is controlled by the No.78 parameter of the TRON network. It needs to be enabled through governance voting. When enabling the proposal, a time parameter needs to be specified, indicating the maximum value of the lock time that can be set. Once enabled, a new parameter, <code>lock_period</code>, will be added to wallet/delegateresource API:</p> <pre><code>curl -X POST http://127.0.0.1:8090/wallet/delegateresource -d \\\n'{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"receiver_address\": \"TPswDDCAWhJAZGdHPidFg5nEf8TkNToDX1\",\n  \"balance\": 1000000,\n  \"resource\": \"ENERGY\",\n  \"lock\": true,\n  \"lock_period\": 86400,\n  \"visible\": true\n}'\n</code></pre> <ul> <li>lock: whether to lock the delegating</li> <li>lock_period: lock time, only when <code>lock</code> is <code>true</code>, this field is valid. The owner cannot cancel the delegating before the lock time is up. The unit of lock_period is block interval(3 seconds). This field indicates the time of how many blocks will be produced from the moment the transaction is executed. So the above 86400 means locking for 259200 seconds (3 days). lock_period cannot exceed the maximum lock period (value of the No.78 network parameter).</li> </ul> <p>The default value of lock_period is 86400, which is 3 days. That is, when <code>lock</code> is <code>true</code>, if <code>lock_period</code> is not specified or set to 0, <code>lock_period</code> will be set to 86400 by default, which will ensure compatibility before and after this feature takes effect.</p> <p>In addition, the value of <code>lock_period</code> cannot be lower than the remaining lock time of this type of resource that was previously delegated to the same recipient address, and the value will overwrite the remaining lock time of the previous delegating.</p> <p>For example, user A delegates 100 energy shares to B, and <code>lock_period</code> is set to 57600 (2 days), and so that the remaining lock time after 1 day is 28800. At this time, when A delegates energy to B again, if choose to lock, <code>lock_period</code> should be set to at least 28800 (1 day), otherwise, an exception error will be thrown when creating the delegating transaction: \u201cThe lock period for ENERGY this time cannot be less will be thrown when creating a proxy transaction than the remaining time[9600000ms] of the last lock period for ENERGY!.\u201d</p> <ul> <li>TIP:  https://github.com/tronprotocol/tips/blob/master/tip-542.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5255</li> </ul>"},{"location":"releases/history/#4-optimize-effective-peer-acquiring-strategy","title":"4. Optimize effective peer-acquiring strategy","text":"<p>When the latest block heights of all connected remote nodes are lower than a node\u2019s, then the node will not be able to synchronize blocks from the remote nodes, nor broadcast the transactions. We call this kind of node an \"island node\". In fact, the island node has no valid peer node.</p> <p>In order to enable nodes to connect to effective peer nodes, the Periander version optimizes the node acquisition strategy and adds island node detection. If a node finds that it is in an island state, it will look for a node with a higher header block than the local one and establish a connection with it. This strategy prevents the node from being in an isolated state for a long time, ensures that the node can quickly replenish effective connections, enables it to obtain new blocks and broadcast transactions, and improves the stability of the node.</p> <p>This function is disabled by default and needs to be enabled by setting the node configuration item <code>node.effectiveCheckEnable</code>.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5088</li> </ul>"},{"location":"releases/history/#tvm_1","title":"TVM","text":""},{"location":"releases/history/#1-implement-eip-3855-push0-instruction","title":"1. Implement EIP-3855 PUSH0 Instruction","text":"<p>EIP-3855 is included in the Shanghai upgrade of Ethereum, which adds a new instruction called <code>PUSH0</code> to the Ethereum Virtual Machine (EVM) to reduce the gas cost of smart contract transactions, and Periander also adds a new governance proposal to be compatible with EIP-3855. On one hand, it can ensure the compatibility between TRON and Ethereum at the virtual machine level, and on the other hand, it also reduces the energy cost of using smart contracts on TRON as well.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-543.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5175</li> </ul>"},{"location":"releases/history/#api_2","title":"API","text":""},{"location":"releases/history/#1-add-api-global-rate-limiter","title":"1. Add API global rate limiter","text":"<p>Limiting the API access rate can not only effectively allocate node resources, but also ensure the stable running of a node. In previous versions of Periander, a rate limiter only affected a single interface. You can set the maximum number of accesses per second for an interface, the maximum number of accesses per second for an IP to this interface, and the number of concurrent accesses allowed to this interface. But there is no global rate limiter for all interfaces.</p> <p>In addition to the original rate limit control function for individual interfaces, the Periander version adds a global rate limit for all interfaces. The overall traffic of all HTTP, gRPC and JSON-RPC interfaces can be limited through the configuration item <code>rate.limiter.global.qps</code>, and the access rate of an IP to all interfaces can be limited through <code>rate.limiter.global.ip.qps</code>.</p> <pre><code># QPS rate limit for all interfaces\nrate.limiter.global.qps =10  \n# QPS rate limit to all interfaces from the same IP address\nrate.limiter.global.ip.qps = 5  \n</code></pre> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5093</li> </ul>"},{"location":"releases/history/#2-add-data-to-http-interfaces-for-smart-contract-interaction","title":"2. Add <code>data</code> to HTTP Interfaces for Smart Contract Interaction","text":"<p>The Periander version optimizes the HTTP smart contract calling interfaces <code>triggersmartcontract</code>, <code>triggerconstantcontract</code> and <code>estimateenergy</code>, and adds a <code>data</code> parameter to them. This optimization not only realizes the contract call directly through the <code>data</code> field in the transaction but also enables the <code>triggerconstantcontract</code> and <code>estimateenergy</code> interfaces to estimate the energy consumption of smart contract deployment transactions, which greatly improves the convenience of smart contract development.</p> <ul> <li> <p>Calling contract using <code>function_selector</code> and <code>parameter</code> <pre><code>curl --request POST \\\n --url https://api.shasta.trongrid.io/wallet/triggersmartcontract \\\n --header 'accept: application/json' \\\n --header 'content-type: application/json' \\\n --data '\n{\n    \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"contract_address\": \"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs\",\n  \"function_selector\": \"balanceOf(address)\",\n  \"parameter\": \"000000000000000000000000a614f803b6fd780986a42c78ec9c7f77e6ded13c\",\n  \"visible\": true\n}\n'\n</code></pre></p> </li> <li> <p>Calling contract through <code>data</code> <pre><code>curl --request POST \\\n --url https://api.shasta.trongrid.io/wallet/triggersmartcontract \\\n --header 'accept: application/json' \\\n --header 'content-type: application/json' \\\n --data '\n{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"contract_address\": \"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs\",\n  \"data\": \"70a08231000000000000000000000000a614f803b6fd780986a42c78ec9c7f77e6ded13c\",\n  \"visible\": true\n}'\n</code></pre></p> </li> <li> <p>Estimate energy consumption of contract deployment transaction     <pre><code>curl --request POST \\\n --url https://api.shasta.trongrid.io/wallet/triggerconstantcontract \\\n --header 'accept: application/json' \\\n --header 'content-type: application/json' \\\n --data '\n{\n  \"owner_address\": \"TZ4UXDV5ZhNW7fb2AMSbgfAEZ7hWsnYS2g\",\n  \"data\": \"608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b506101c18061003a6000396000f3fe608060405234801561001057600080fd5b50d3801561001d57600080fd5b50d2801561002a57600080fd5b50600436106100455760003560e01c8063f8b2cb4f1461004a575b600080fd5b610064600480360381019061005f919061012a565b61007a565b6040516100719190610170565b60405180910390f35b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600080fd5b600074ffffffffffffffffffffffffffffffffffffffffff82169050919050565b6100ca816100a0565b81146100d557600080fd5b50565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610103826100d8565b9050919050565b600081359050610119816100c1565b610122816100f8565b905092915050565b6000602082840312156101405761013f61009b565b5b600061014e8482850161010a565b91505092915050565b6000819050919050565b61016a81610157565b82525050565b60006020820190506101856000830184610161565b9291505056fea26474726f6e58221220839f9be3efc349a3efd6bb491d0bee7bc34d86313c73f6e6eeddc4719ec69c0064736f6c63430008120033\",\n  \"visible\": true\n}'\n</code></pre></p> </li> <li> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-544.md </p> </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5079</li> </ul>"},{"location":"releases/history/#3-optimize-getstorageat-interface","title":"3. Optimize getStorageAt interface","text":"<p>In versions previous to Periander, for contracts created by the <code>create2</code> instruction, the contract data cannot be queried through the getStorageAt interface. This is due to the difference in index construction of contract data in the underlying storage for contracts created using the <code>create</code> instruction and the <code>create2</code> instruction. The Periander version optimizes the getStorageAt interface, which will select the corresponding method to construct the index according to the way the contract was created to ensure the availability of the getStorageAt interface.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5061</li> </ul>"},{"location":"releases/history/#other-changes_6","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-event-forwarding-logic-in-event-subscription","title":"1. Optimize event forwarding logic in event subscription","text":"<p>java-tron supports event subscription. In the previous version of Periander, if the solidified transaction event is subscribed, then when the node receives a new block, it would send the transaction information in the latest solidified block to the subscriber. If the network of most SR nodes is unstable, making them unable to synchronize and produce blocks in time, in this case, according to the calculation logic of the latest solidified block of the node, the height of the latest solidified block will not be guaranteed to increase by one each time. So that the latest obtained solidified block forwarded to the subscriber during event forwarding may not be the block next to the one that was forwarded the last time, resulting in data missing. </p> <p>Since the conditions for this problem are very strict, it will basically not appear in the main network. However, to avoid this problem occurring in the test network or private chain, the Periander version optimizes the event forwarding logic in the event subscription and records the height of the solidified block forwarded last time, so when the node receives a new block, it will sequentially send the blocks after the last forwarded solidified block to the subscribers, ensuring the integrity of data forwarding.</p> <ul> <li>Source Code:  https://github.com/tronprotocol/java-tron/pull/5031</li> </ul>"},{"location":"releases/history/#2-support-dynamic-loading-according-to-nodeactive-and-nodepassive","title":"2. Support dynamic loading according to node.active and node.passive","text":"<p>java-tron supports configuring trusted nodes for the local node with <code>node.active</code> and <code>node.passive</code>. The local node will actively connect to the nodes in <code>node.active</code> and accept the connection request of the nodes in <code>node.passive</code>. By configuring trusted nodes, you can solve the problem that the node has no valid connections or the number of connections is rather small. However, in the previous version of Periander, you need to stop the node first to change the configuration file, and then restart the node after the update is completed. Restarting the node has a certain impact on some applications. Therefore, starting from the Periander version, the dynamic loading of <code>node.active</code> and <code>node.passive</code> configuration items are supported, so that the change of the trusted node can be completed without restarting the local node, which improves the online stability of the node.</p> <p>This function is disabled by default and needs to be enabled by modifying the following node configuration items. <pre><code>node.dynamicConfig.enable=true\nnode.dynamicConfig.checkInterval = 600\n</code></pre></p> <ul> <li>Source Code:  https://github.com/tronprotocol/java-tron/pull/5090</li> </ul>"},{"location":"releases/history/#3-optimize-block-synchronization-logic","title":"3. Optimize block synchronization logic","text":"<p>The Periander version optimizes the block synchronization logic, ensures the correctness of concurrent execution of the block acquisition thread and block synchronization thread, the block summary obtaining thread and chain switching thread through the lock mechanism, and improves the stability of block synchronization and node connection.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5094 https://github.com/tronprotocol/java-tron/pull/5097 https://github.com/tronprotocol/java-tron/pull/5102 </li> </ul>"},{"location":"releases/history/#4-normalize-http-urls","title":"4. Normalize HTTP URLs","text":"<p>The node supports disabling the specified HTTP APIs, and the node deployer can configure the interfaces to which the node will stop providing services through the <code>node.disabledApi</code>. In previous versions of Periander, even if the interface was added to the <code>node.disabledApi</code> list, the node would still respond to non-standard URL requests. The Periander version normalizes the requested URL to ensure the validity of the <code>node.disabledApi</code> list.</p> <pre><code>node.disabledApi= [\n   \"getaccount\",\n    \"getnowblock2\"\n]\n</code></pre> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5085 </li> </ul>"},{"location":"releases/history/#5-optimize-block-fetching-logic","title":"5. Optimize block fetching logic","text":"<p>After a node requests a block from another node, if it does not receive the block within a certain period of time, the request will be considered as a timeout, and then it will request the block from another node that meets the conditions. Of which, one of the conditions for selecting a node is that the node's <code>block acquisition delay</code> is lower than the <code>block timeout period</code>. Therefore, a low <code>block timeout</code> setting may make the node unable to find other remote nodes, resulting in slow block synchronization or stopping the synchronization.</p> <p>In order to improve block synchronization performance under an unstable network, the Periander version increases the default value of the timeout period for nodes to obtain blocks, from 200ms to 500ms, which not only expands the scope of node selection but also increases the probability of successfully obtaining blocks, greatly improving the efficiency of block synchronization. The node deployer can also adjust the timeout period through the <code>node.fetchBlock.timeout</code> configuration item.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5106</li> </ul>"},{"location":"releases/history/#6-add-a-new-node-startup-mode","title":"6. Add a new node startup mode","text":"<p>In order to facilitate data backup or data statistics for node deployers, the client supports stopping running under specific conditions. Users can set the conditions for node stop through the node configuration file. When the conditions are met, the node will stop syncing and exit. However, in the versions previous to Periander, the node only supports stopping under certain conditions and does not support the interface query service after stopping, so users cannot call the interface to query the status of the system. Therefore, the Periander version adds a new node startup mode to support data query services without starting the P2P network module. When the node successfully stops under certain conditions, the user can add <code>-p2p- disable true</code> parameter to the command to start the node. At this time, the node will not start the network module, and will not perform node discovery and block synchronization, but will provide interface query services, so that users can query the current system status. Below is the start command:</p> <pre><code>java -jar FullNode.jar -c config.conf --p2p-disable true \n</code></pre> <ul> <li>Source Code:  https://github.com/tronprotocol/java-tron/pull/5011</li> </ul>"},{"location":"releases/history/#7-upgrade-junit-to-4132","title":"7. Upgrade JUnit to 4.13.2","text":"<p>The Periander version upgrades the unit testing framework and upgrades the JUnit dependency library from v4.12 to v4.13.2.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5244 </li> </ul>"},{"location":"releases/history/#8-add-monitoring-metrics-for-json-rpc","title":"8. Add monitoring metrics for JSON-RPC","text":"<p>The Periander version supports JSON-RPC interface latency monitoring metrics, allowing node deployers to monitor the latency of all types of interfaces.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5222 </li> </ul>"},{"location":"releases/history/#9-optimize-the-database-module","title":"9. Optimize the database module","text":"<p>In versions previous to Periander, for nodes using LevelDB as the storage engine, if the LevelDB database is detected to be damaged during the startup period, it will try to repair the data. Although this function can repair the data, it cannot guarantee the integrity of the data. Therefore, the Periander version optimizes the database module and removes the LevelDB data automatic repair function, so that when the node detects that the database is damaged, it immediately reports an error and exits, avoiding invalid synchronization.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5223 </li> </ul>"},{"location":"releases/history/#10-optimize-checkpoint-v2-recovery-process","title":"10. Optimize checkpoint v2 recovery process","text":"<p>In order to solve the problem of node database corruption caused by the abnormal shutdowns, starting from GreatVoyage-v4.6.0 (Socrates), the Checkpoint V2 mechanism is introduced. The V2 mechanism will save multiple checkpoints on the disk, corresponding to multiple solidified block data, which is used to restore the data when the node database is damaged. </p> <p>This function needs to periodically clean up expired checkpoints. Since the operation of deleting expired checkpoints is not an atomic operation, this will lead to the situation that expired checkpoints may not be completely deleted when the machine is abnormally shut down, that is, there may be damaged checkpoints. Therefore, the Periander version optimizes the automatic repair function of checkpoint v2. When restoring data, all expired checkpoints are skipped, avoiding the situation of using damaged checkpoints to repair data, and improving the stability of nodes.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/5224</li> </ul> <p>Forethought in all things. </p> <p> ---Periander</p>"},{"location":"releases/history/#greatvoyage-v4711-pittacus","title":"GreatVoyage-v4.7.1.1 (Pittacus)","text":"<p>GreatVoyage-v4.7.1.1 (Pittacus) version optimized multiple interfaces and removed APIs involving sensitive information.</p> <p>Please see the details below.</p>"},{"location":"releases/history/#api_3","title":"API","text":""},{"location":"releases/history/#1-remove-apis-involving-sensitive-information","title":"1. Remove APIs involving sensitive information","text":"<p>Versions prior to GreatVoyage-v4.7.1.1 (Pittacus) provide APIs related to signature and address generation. Since the input or output of these APIs contains private keys, there are security risks in transmission in the network. At present, public API service providers in the TRON ecosystem have closed these APIs, such as TronGrid, Anker, GetBlock, etc. In the developer document, these APIs have already been tagged as obsolete and it is recommended to sign transactions and create addresses offline using SDK.</p> <p>GreatVoyage-v4.7.1.1(Pittacus) officially removes these APIs:</p> <ul> <li>HTTP<ul> <li><code>createaddress</code>: Create an address based on the specified password</li> <li><code>generateaddress</code>: Create address randomly</li> <li><code>easytransfer</code>: Transfer TRX with password</li> <li><code>easytransferbyprivate</code>: Transfer TRX with private key</li> <li><code>easytransferasset</code>: Transfer TRC10 token with password</li> <li><code>easytransferassetbyprivate</code>: Transfer TRC10 token with private key</li> <li><code>gettransactionsign</code>: Sign transaction with private key</li> <li><code>addtransactionsign</code>: Sign transaction with private key which is mainly used to sign multi-signature transactions</li> </ul> </li> <li>gRPC<ul> <li><code>CreateAddress</code>: Create an address based on the specified password</li> <li><code>GenerateAddress</code>: Create address randomly</li> <li><code>EasyTransfer</code>: Transfer TRX with password</li> <li><code>EasyTransferByPrivate</code>: Transfer TRX with private key</li> <li><code>EasyTransferAsset</code>: Transfer TRC10 token with password</li> <li><code>EasyTransferAssetByPrivate</code>: Transfer TRC10 token with private key</li> <li><code>GetTransactionSign</code>: Sign transaction with private key</li> <li><code>GetTransactionSign2</code>: Sign transaction with private key</li> <li><code>AddSign</code>: Sign transaction with private key which is mainly used to sign multi-signature transactions</li> </ul> </li> </ul> <p>TIP: https://github.com/tronprotocol/tips/issues/534</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5096 </p>"},{"location":"releases/history/#2-optimize-resource-delegate-information-query-interface","title":"2. Optimize resource delegate information query interface","text":"<p>The <code>/wallet/getdelegatedresourcev2</code> interface can query the resources that an address delegates to another address, and resource delegate can choose whether to be locked. For 2 resource delegation to the same address, one of them may be locked, and the other may be not locked, so <code>/wallet/getdelegatedresourcev2</code> interface will return two sets of information: locked resource delegation data and unlocked resource delegation data. In versions prior to GreatVoyage-v4.7.1.1 (Pittacus), if all the resource delegation by one address to another address are locked, then the non-locked resource delegation data will be 0. In this case, the interface may also return non-locked resource delegation data (0 value which is meaningless). The GreatVoyage-v4.7.1.1 (Pittacus) version optimizes the <code>/wallet/getdelegatedresourcev2</code> interface, and only returns resource delegation data with non-zero value, making the returned data more concise and clear.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5123 </p>"},{"location":"releases/history/#other-changes_7","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-the-update-logic-of-the-origin_energy_usage-field-in-the-transaction-receipt","title":"1. Optimize the update logic of the <code>origin_energy_usage</code> field in the transaction receipt","text":"<p>The TRON network supports contract deployers to share part of the contract call cost. In order to facilitate users to query the energy consumption of contract transactions, in addition to recording the total energy consumption of the transaction through the <code>energy_usage_total</code> field, the transaction receipt will also record the amount of energy paid by the contract deployer through the <code>origin_energy_usage</code> field. <code>energy_usage_total</code> contains <code>origin_energy_usage</code>. </p> <p>In versions prior to GreatVoyage-v4.7.1.1 (Pittacus), in rare cases, the <code>energy_usage_total</code> field is 0 while the <code>origin_energy_usage</code> field is not 0 when querying through <code>/wallet/gettransactioninfobyid</code> API. Therefore the GreatVoyage-v4.7.1.1 (Pittacus) version optimizes the update logic of <code>origin_energy_usage</code> in the transaction receipt to ensure the accuracy of querying the consumed energy of the contract deployer.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/5120 </p> <p>Whatever you do, do it well. </p> <p> ---Pittacus</p>"},{"location":"releases/history/#greatvoyage-v471sartre","title":"GreatVoyage-v4.7.1(Sartre)","text":"<p>GreatVoyage-v4.7.1(Sartre) introduces several important optimizations and updates. The optimized block synchronization logic improves the stability of block synchronization; the optimized node IP setting improves the availability of nodes; the optimized node log improves the maintainability of nodes.</p> <p>Please see the details below.</p>"},{"location":"releases/history/#cores","title":"Cores","text":""},{"location":"releases/history/#1-optimize-the-node-ip-setting","title":"1. Optimize the node IP setting","text":"<p>When the node starts, it will obtain the local IP of the node, and then use this IP to communicate with other nodes in the network. If the node cannot access the external network, it will not be able to obtain the local IP. At this time, the node will set its local IP to the default value of 0.0.0.0, and this IP will make the node even unable to communicate with other nodes successfully in the LAN. So the GreatVoyage- v4.7.1 (Sartre) version changes the default IP of the node. If the node cannot obtain the local IP, it will set its local IP to 127.0.0.1, so that even if the node cannot access the external network, it can still communicate with other nodes in the LAN normally. </p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4990 </p>"},{"location":"releases/history/#2-optimize-block-synchronization-logic","title":"2. Optimize block synchronization logic","text":"<p>During the block synchronization process, the node will maintain a block request list, which contains the IDs of all blocks that have sent requests to other nodes. When the connection between the node and node A is abnormally disconnected with a very small probability, the block ID that is being requested to node A will be deleted from the request list. After that, the node will think that it has not requested the block, and then send the block request to node B and add the block ID to the request list again. Before this node disconnects with node A, the requested block may have already been sent by node A\uff0cand it is received by the node after disconnecting. Since the node found that the block is from node A that has already been disconnected, it will discard the block, and delete the block ID from the request list again, this will lead to the node to send a request for the same block to node B again. When Node B receives the repeated block request, it will consider it an illegal message and disconnect from the node.</p> <p>In order to improve the efficiency of block synchronization in concurrent scenarios, the GreatVoyage-v4.7.1 (Sartre) version optimized the update mechanism of the block request list, and saved the block ID and node information in the request list at the same time. In the above scenario, after receiving a block from node A that has been disconnected, the same block ID requested from node B will not be deleted from the request list to ensure that it will not be disconnected from node B, thereby improving the stability of block synchronization.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4995 </p> <p>When a node synchronizes blocks from other nodes, it needs to obtain the local block chain summary of the node. The summary includes the IDs of several blocks including the local header block. In versions prior to GreatVoyage-v4.7.1 (Sartre), when obtaining the summary, the node will first query the Dynamic database to obtain the block height, and then query the Block database to obtain the ID of the block according to the block height. However, when the node is processing a block, the writing to each database is not carried out at the same time. The node will first update the Dynamic database, and then update other databases such as Block. As a result, in versions prior to GreatVoyage-v4.7.1 (Sartre), the following scenario will occur with a very small probability: when the latest block information is only written into the Dynamic database, but have not yet been written into the block database, the node starts to obtain the summary. In this situation the corresponding block ID will not be found in the block database according to the head block height obtained from the Dynamic database, leading to the summary reading fail. The GreatVoyage-v4.7.1 (Sartre) version optimizes the block chain summary acquisition logic. The ID of the head block is directly obtained from the Dynamic database instead of the Block database, which improves the stability of summary reading.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/5009 </p> <p>The GreatVoyage-v4.7.1 (Sartre) version optimizes the lock mechanism during block synchronization and improves the stability of the node connection under concurrency.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4996 </p>"},{"location":"releases/history/#api_4","title":"API","text":""},{"location":"releases/history/#1-optimize-the-list-of-solidified-block-apis","title":"1. Optimize the list of solidified block APIs","text":"<p>GreatVoyage-v4.7.1(Sartre) version deletes the useless solidified block query API to make the code more clearer.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4997 </p>"},{"location":"releases/history/#2-optimize-resource-delegation-relationship-api","title":"2. Optimize resource delegation relationship API","text":"<p>GreatVoyage-v4.7.1 (Sartre) version optimizes the resource delegation relationship query API, adds the check to the interface parameters, and makes the interface more stable.</p>"},{"location":"releases/history/#other-changes_8","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-litefullnode-detection-logic","title":"1. Optimize LiteFullNode detection logic","text":"<p>In versions prior to GreatVoyage-v4.7.1 (Sartre), different modules of the node have different logics for detecting whether the current node is a LiteFullNode. GreatVoyage-v4.7.1 (Sartre) version unifies the logic of light node judgment, making the code more concise.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4986 </p>"},{"location":"releases/history/#2-optimize-node-log-output","title":"2. Optimize node log output","text":"<p>The Database Log</p> <p>Starting from GreatVoyage-v4.7.0.1 (Aristotle), the logs of LevelDB or RocksDB databases are redirected to the node log file, which simplifies the difficulty of database troubleshooting. GreatVoyage-v4.7.1 (Sartre) further optimizes the log module, Output database logs to a separate db.log file to make node logs clearer.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4985 https://github.com/tronprotocol/java-tron/pull/5001 https://github.com/tronprotocol/java-tron/pull/5010</p> <p>The Event Service Module Log</p> <p>Remove invalid logging output for event service module.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4974 </p> <p>The network module log </p> <p>Optimized the log output of the network module, outputting Error-level logs for received abnormal blocks, and outputting Warn-level logs for network requests that have already timed out, improving the efficiency of troubleshooting network-related problems.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4977</p> <p>The more sand that has escaped from the hourglass of our life, the clearer we should see through it. </p> <p> ---Sartre</p>"},{"location":"releases/history/#greatvoyage-v4701aristotle","title":"GreatVoyage-v4.7.0.1(Aristotle)","text":"<p>GreatVoyage-v4.7.0.1 (Aristotle) introduces several important optimizations and updates. The new stake mechanism, Stake 2.0, improves the flexibility of the resource model and the stability of the stake system; the dynamic energy model helps to promote ecologically balanced development; the secondary cache mechanism optimizes the database reading performance, improves transaction execution performance, and expands the network throughput; uses the libp2p library as the java-tron P2P network module to make the code structure clearer and reduce code coupling; optimizes the log output, redirect the logs of LevelDB and RocksDB to java-tron log files; integrate more tools and functions into the \u2018Toolkit.jar\u2019 toolbox to bring users a more convenient development experience.</p> <p>Please see the details below.</p>"},{"location":"releases/history/#cores_1","title":"Cores","text":""},{"location":"releases/history/#1-a-new-stake-model-stake-20","title":"1. A new stake model - Stake 2.0","text":"<p>GreatVoyage-v4.7.0.1 (Aristotle) version introduces a new stake model, Stake 2.0, aiming to establish a more flexible, efficient and stable stake system. Compared with the current Stake 1.0 model, Stake 2.0 has been improved in the following aspects,</p> <ul> <li> <p>Staking and delegating are separated</p> <p>In Stake 1.0, staking and resource delegating are combined in one operation. The resource recipient must be specified in the operation. After the staking is completed, the resource will be delegated to the designated resource recipient. The unstaking and undelegating are also combined in one operation. If you want to cancel the delegating, you must unstake the corresponding TRX as well. Stake 2.0 separates staking and resource delegating into two independent operations. The user executes the staking first, the resource selected is allocated to the owner now. And then executes the delegate operation to assign the resource to the designated address. Unstaking and undelegating are also separated into two operations. If the user wants to cancel the delegating, he or she can directly perform the undelegate operation without unstaking and then can delegate the resource to others again as needed. Separation of staking/unstaking and delegating/undelegating simplifies user operations and reduces operational complexity.</p> </li> <li> <p>Resource Fragmentation Management</p> <p>In Stake 1.0, one unstake operation will unstake all the staked TRX, and the specified amount of TRX cannot be unstaked. This is optimized in Stake 2.0 now. We can specify an amount of TRX to unstake, as long as the specified amount is less than or equal to the total staked amount. In Stake 1.0, to cancel a certain resource delegate, you can only cancel all delegated resources at once, and you cannot cancel by specifying an amount. Stake 2.0 has also brought partially undelegate, we can now undelegate part of the delegated resources as needed, which improves the flexibility of resource management.</p> </li> <li> <p>Unstake Lock Period and Delayed Arrival of Unstaked TRX</p> <p>In Stake 1.0, after staking TRX, we need to wait 3 days before releasing the TRX. After the release, the TRX staked will immediately arrive in the owner\u2019s account. In Stake 2.0, after the staking is completed, the TRX staked can be released at any time, but it needs to wait for \u2019N\u2019 days. After the \u2019N\u2019 days delay, the TRX released could be withdrawn to the owner\u2019s account. \u2019N\u2019 is the TRON network parameter. When the TRX market fluctuates violently, due to the delayed arrival of funds, it will no longer trigger a large number of stake or unstake operations, which improves the stability of the stake model, and at the same time will not cause a large number of funds to flood into the market and aggravate market volatility. It helps to build a more anticipated future of the entire network circulation for the network participants.</p> </li> <li> <p>TVM Supports Staking and Resource Management</p> <p>In Stake 2.0, the TRON virtual machine integrates instructions related to stake and resource management. Users can perform TRX stake/unstake operations in smart contracts, as well as perform resource delegate/undelegate operations.</p> </li> </ul> <p>For more details on Stake 2.0, please refer to  What is Stake 2.0?</p> <p>The new stake mechanism is a dynamic parameter in the TRON network. After GreatVoyage-v4.7.0.1 (Aristotle) is deployed, it is disabled by default and can be enabled by initiating a proposal vote.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/467 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4838 </li> </ul>"},{"location":"releases/history/#2enhance-database-query-performance","title":"2.Enhance database query performance","text":"<p>java-tron uses memory and disk databases for data storage. The solidified block data will be stored in multiple disk databases, and the unsolidified data will be stored in memory. When a block is solidified, the corresponding in-memory data is written to the disk databases. When querying data, first query the data in memory, if not found, then query the disk database. The disk database query is time-consuming. Therefore, the GreatVoyage-v4.7.0.1 (Aristotle) version optimizes the database query performance and adds a secondary cache before performing the underlying disk database operation. When data is written to the disk, the data is also written to the second-level cache. When the disk database needs to be queried, if the data to be queried exists in the second-level cache, it will be returned directly without querying the disk database. The second-level cache reduces the number of queries to the disk database, improves transaction execution speed, and improves network throughput.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4740 </li> </ul>"},{"location":"releases/history/#3-optimize-block-production-process","title":"3. Optimize block production process","text":"<p>When a node produces a block, it will sequentially verify and execute all transactions that can be packaged into the block, and each transaction verification and execution will involve the acquisition of block data, such as block number, block size, block transaction information, etc. In versions prior to GreatVoyage-v4.7.0.1 (Aristotle), when nodes package transactions, block data is recalculated during the process of verifying and executing each transaction, which includes many repeated calculations.</p> <p>In order to improve the efficiency of packaging transactions, the GreatVoyage-v4.7.0.1 (Aristotle) optimizes the block production process, only calculates the block data once and updates the data only when necessary, thus greatly reducing the number of block data calculations and improving the block packaging efficiency.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4756 </li> </ul>"},{"location":"releases/history/#4-add-transaction-hash-cache","title":"4. Add transaction hash cache","text":"<p>When a node processes a block, it will use the transaction hash value multiple times. In versions before GreatVoyage-v4.7.0.1 (Aristotle), the transaction hash value is calculated as it is used, and the calculation of the transaction hash value is time-consuming, which leads to slower block processing. Therefore, GreatVoyage-v4.7.0.1 (Aristotle) adds a transaction hash cache, the transaction hash will be directly obtained from the cache when used. Only when the transaction data changes, the transaction hash is recalculated. The newly added cache reduces unnecessary transaction hash calculations and improves block processing speed.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4792 </li> </ul>"},{"location":"releases/history/#5-add-libp2p-module-as-java-tron-p2p-network-protocol-implementation","title":"5. Add <code>libp2p</code> module as java-tron p2p network protocol implementation","text":"<p>Starting from GreatVoyage-v4.7.0.1 (Aristotle), the libp2p library will be directly used as the P2P network module of java-tron, instead of using the original p2p network stack, so that the code structure is clearer, the code coupling is lower, and is easy to maintain.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4791 </li> </ul>"},{"location":"releases/history/#tvm_2","title":"TVM","text":""},{"location":"releases/history/#1-add-new-instructions-to-support-stake-20","title":"1. Add new instructions to support Stake 2.0","text":"<p>GreatVoyage-v4.7.0.1 (Aristotle) introduces Stake 2.0, TVM will support Stake 2.0 related stake and resource delegate instructions simultaneously. Users can perform stake and resource delegate operations through smart contracts, which further enriches the application scenarios of smart contracts on the TRON network. A total of 6 instructions from 0xda to 0xdf have been added to TVM:</p> ID TVM instruction Description 0xda FREEZEBALANCEV2 Performs the same operation as the system contract FreezeBalanceV2 for contract account 0xdb UNFREEZEBALANCEV2 Performs the same operation as the system contract UnfreezeBalanceV2 for contract account 0xdc CANCELALLUNFREEZEV2 Cancel all pending unfreeze balances for contract account 0xdd WITHDRAWEXPIREUNFREEZE Performs the same operation as the system contract WithdrawExpireUnfreeze for contract account 0xde DELEGATERESOURCE Performs the same operation as the system contract DelegateResource for contract account 0xdf UNDELEGATERESOURCE Performs the same operation as the system contract UnDelegateResource for contract account <p>A total of 11 precompiled contracts from 0x100000b to 0x1000015 have been added to TVM:</p> ID Precompiled Contract Description 0x100000b GetChainParameter Query the specific chain parameters 0x100000c AvailableUnfreezeV2Size Query the size of the available unfreeze queue for target address 0x100000d UnfreezableBalanceV2 Query the unfreezable balance of a specified resourceType for target address 0x100000e ExpireUnfreezeBalanceV2 Query the withdrawal balance at the specified timestamp for target address 0x100000f DelegatableResource Query the amount of delegatable resources(unit: SUN) of the specified resourceType for the target address 0x1000010 ResourceV2 Query the amount of resources(unit: SUN) of a specific resourceType delegated by from address to target address 0x1000011 CheckUnDelegateResource Check whether the contract can recycle the specified amount of resources of a specific resourceType that have been delegated to target address, and return the amount of clean resource(unit: SUN), the amount of dirty resource(unit: SUN) and the restore time 0x1000012 ResourceUsage Query the usage of a specific resourceType of resources for target address, and return the amount of usage(unit: SUN) and the restore time 0x1000013 TotalResource Query the total amount of resources(unit: SUN) of a specific resourceType for target address 0x1000014 TotalDelegatedResource Query the amount of delegated resources of a specific resourceType for target address 0x1000015 TotalAcquiredResource Query the amount of acquired resources(unit: SUN) of a specific resourceType for target address <p>Stake 2.0 is a dynamic parameter in the TRON network. After GreatVoyage-v4.7.0.1 (Aristotle) is deployed, it is disabled by default and can be enabled by initiating a proposal vote.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/467 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4872 </li> </ul>"},{"location":"releases/history/#2-dynamic-energy-model","title":"2. Dynamic energy model","text":"<p>The dynamic energy model is a scheme to dynamically adjust the future energy consumption of the contract based on the known energy usage of the contract. If a contract uses too many resources in one cycle, then the next cycle in this contract, a certain percentage of punitive consumption will be added, and users who send the same transaction to this contract will cost more energy than before. When the contract uses resources reasonably, the energy consumption generated by the user calling the contract will gradually return to normal. Through this mechanism, the allocation of energy resources on the chain will be more reasonable, and excessive concentration of network resources on a few contracts will be prevented. </p> <p>For more information about the dynamic energy model: Introduction to Dynamic Energy Model</p> <p>The dynamic energy model is a dynamic parameter in the TRON network. After GreatVoyage-v4.7.0.1 (Aristotle) is deployed, it is disabled by default and can be enabled by initiating a proposal vote.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/491 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4873 </li> </ul>"},{"location":"releases/history/#3-optimize-the-return-value-of-the-chainid-opcode","title":"3. Optimize the return value of the <code>chainId</code> opcode","text":"<p>Starting from the GreatVoyage-v4.7.0.1 (Aristotle) version, the return value of the <code>chainid</code> opcode is changed from the block hash of the genesis block to the last four bytes of the block hash of the genesis block, keeping the return value of the chainid opcode consistent with the return value of the java-tron JSON-RPC <code>eth_chainId</code> API.</p> <p>The return value optimization of the chainId opcode is a dynamic parameter of the TRON network. It is disabled by default after GreatVoyage-v4.7.0.1 (Aristotle) is deployed, and can be enabled by initiating a proposal.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/474 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4863 </li> </ul>"},{"location":"releases/history/#api_5","title":"API","text":""},{"location":"releases/history/#1-add-apis-to-support-stake-20","title":"1. Add APIs to support Stake 2.0","text":"<p>GreatVoyage-v4.7.0.1 (Aristotle) adds 10 APIs to support Stake 2.0:</p> API Description /wallet/freezebalancev2 Stake TRX to obtain resources /wallet/unfreezebalancev2 Unstake TRX /wallet/delegateresource Delegate resources to other account /wallet/undelegateresource Undelegate resource /wallet/withdrawexpireunfreeze Withdraw the funds that has expired the <code>N</code> lock-up period /wallet/getavailableunfreezecount Query the remaining times of available unstaking operation /wallet/getcanwithdrawunfreezeamount Query the withdrawable balance at the specified timestamp /wallet/getcandelegatedmaxsize Query the amount of delegatable resources of the specified resource type for target address /wallet/getdelegatedresourcev2 Query the resource delegate amount from an address to the target address (unit: sun) /wallet/getdelegatedresourceaccountindexv2 Query the resource delegate amount from an address to the target address (unit: sun) <p>For detailed information of new APIs, please refer to: What is Stake 2.0?</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/467 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4838 </li> </ul>"},{"location":"releases/history/#2-add-energy-estimation-api","title":"2. Add energy estimation API","text":"<p>In versions prior to GreatVoyage-v4.7.0.1 (Aristotle), users can estimate the energy consumption for executing smart contract transactions through the <code>/wallet/triggerconstantcontract</code> interface, and then set the <code>feelimit</code> parameter of the transaction according to the estimated consumption. However, since some smart contract transactions may call other smart contracts, it is possible that the estimated <code>feelimit</code> parameter is inaccurate.</p> <p>Therefore, the GreatVoyage-v4.7.0.1(Aristotle) version adds an energy estimation interface <code>/wallet/estimateenergy</code>, and the <code>feelimit</code> estimated by this interface is reliable in any case. The <code>energy_required</code> field in the return value of this interface indicates the estimated amount of energy required for the successful execution of this smart contract transaction. So user can calculate the <code>feelimit</code> parameter based on this field: <code>feelimit</code> = <code>energy_required</code> * energy unit price, currently the unit price of energy is 210 sun.</p> <p>If the execution of the estimated interface call fails for some reason, the value of the <code>energy_required</code> field will be 0, and this field will not be displayed in the return value. At this time, you can check the reason for the execution failure for the estimated interface call through the <code>result</code> field.</p> <p>After the GreatVoyage-v4.7.0.1 (Aristotle) version is successfully deployed, this API is closed by default. To open this interface, the two configuration items <code>vm.estimateEnergy</code> and <code>vm.supportConstant</code> must be enabled in the node configuration file at the same time. The default values of <code>vm.estimateEnergy</code> and <code>vm.supportConstant</code> are both false.</p> <p>An example of <code>/wallet/estimateenergy</code> call is as follows:</p> <pre><code>curl --location --request POST 'https://api.nileex.io/wallet/estimateenergy' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n     \"owner_address\": \"TUoHaVjx7n5xz8LwPRDckgFrDWhMhuSuJM\",\n     \"contract_address\": \"TXLAQ63Xg1NAzckPwKHvzw7CSEmLMEqcdj\",\n     \"function_selector\": \"transfer(address,uint256)\",\n     \"parameter\": \"0000000000000000000000002EEF13ADA48F286066F9066CE84A9AD686A3EA480000000000000000000000000000000000000000000000000000000000000004\",\n     \"visible\": true\n}'\n</code></pre> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4873 </li> </ul>"},{"location":"releases/history/#other-changes_9","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-gradle-compilation-parameters","title":"1. Optimize Gradle compilation parameters","text":"<p>GreatVoyage-v4.7.0.1(Aristotle) optimizes the compiling parameters of Gradle, configuring JVM minimum heap size to 1GB, which improves the compilation speed of java-tron.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4837 </li> </ul>"},{"location":"releases/history/#2-optimize-node-conditional-stop-function","title":"2. Optimize node conditional stop function","text":"<p>In order to facilitate data backup or data statistics for node deployers, starting from GreatVoyage-v4.5.1 (Tertullian), nodes support stopping under specific conditions. Users can set the conditions for node stopping through the node configuration file, and the node will stop running when the conditions are met. It supports three stop conditions to be set at the same time, and the node is stopped when any condition is met. These three conditions include block time, block height, and the number of blocks that need to be synchronized from the start to the stop of the node. However, since multiple stop conditions are allowed to be set at the same time, when the user only needs one condition,  the other 2 conditional configuration items in the configuration file need to be deleted, so if the user forgets to delete, the node may stop on an unexpected block. However, there are actually no application scenarios that require multiple conditions to be set at the same time. Therefore, the GreatVoyage-v4.7.0.1 (Aristotle) version optimizes the node conditional stop function. The optional configuration parameters remain unchanged, but only one valid parameter is allowed to be set at the same time. If the node deployer sets multiple parameters, the node will report an error and exit run. This optimization simplifies the complexity of users\u2019 settings.</p> <ul> <li>Source code:  https://github.com/tronprotocol/java-tron/pull/4853 https://github.com/tronprotocol/java-tron/pull/4858 </li> </ul>"},{"location":"releases/history/#3-delete-code-related-to-database-v1","title":"3. Delete code related to database v1","text":"<p>In versions prior to GreatVoyage-v4.7.0.1 (Aristotle), there are two versions of the database, v1 and v2. Users can choose from them through the configuration item <code>db.version</code>. Since the v2 version adopts the memory + disk database mode, it supports the expansion of the underlying database, the correct data recovery function under abnormal conditions, etc., and has obvious advantages compared with v1. Therefore, in order to make the code structure clearer, starting from GreatVoyage-v4.7.0.1 (Aristotle), the code related to the database v1 version and the database version configuration item <code>db.version</code> has been deleted. Users no longer need to configure the database version, only v2 is available from now on, which reduces the complexity of configuring nodes.</p> <ul> <li>Source code:  https://github.com/tronprotocol/java-tron/pull/4836</li> </ul>"},{"location":"releases/history/#4-optimize-database-log-output","title":"4. Optimize database log output","text":"<p>In versions prior to GreatVoyage-v4.7.0.1 (Aristotle), the node logs do not include the underlying logs output by LevelDB or RocksDB itself, making it difficult to troubleshoot database read and write problems. Therefore, the GreatVoyage-v4.7.0.1 (Aristotle) optimizes the database log and redirects the output of the underlying log of the LevelDB or RocksDB data module to the node log file, which simplifies the difficulty of database troubleshooting and improves the reliability of node operation and maintenance efficiency.</p> <ul> <li>Source code:  https://github.com/tronprotocol/java-tron/pull/4833 </li> </ul>"},{"location":"releases/history/#5-make-snapshot-flush-speed-configurable","title":"5. Make snapshot flush speed configurable","text":"<p>Nodes newly added to the network need to synchronize block data from other nodes, and the nodes will first save the synchronized block data in memory, and then store it on disk. In versions prior to GreatVoyage-v4.7.0.1 (Aristotle), when a node synchronizes the blocks, a flush operation will write the data of 500 blocks from the memory to the disk, so more than 500 blocks data will be kept in the memory, and each block data is associated through a linked list. When querying data, it will first search in these more than 500 blocks in sequence, and then query the disk database when the data to be queried is not found, but traversing more than 500 block data reduces the efficiency of data query.</p> <p>Therefore, starting from the GreatVoyage-v4.7.0.1 (Aristotle) version, the number of snapshot flush can be configured, and the maximum number of snapshot flush at one time can be set through the configuration item: <code>storage.snapshot.maxFlushCount</code> to maximize the efficiency of database query and improve block processing speed. If the configuration item is not set, the maximum number of snapshots flush into the dish is the default value of 1.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4834 </li> </ul>"},{"location":"releases/history/#6-toolkitjar-integration","title":"6. Toolkit.jar Integration","text":"<p><code>DBConvert.jar</code> is a database conversion tool, which can convert LevelDB into RocksDB; <code>LiteFullNodeTool.jar</code> is a light FullNode tool, which can convert FullNode data into LiteFullNode data. Starting from GreatVoyage-v4.7.0.1 (Aristotle), <code>DBConvert.jar</code> and <code>LiteFullNodeTool.jar</code> have been integrated into the <code>Toolkit.jar</code> toolbox, and a database copy function is added which can realize fast Node database copy. In the future, the tools around java-tron will be gradually integrated into the <code>Toolkit.jar</code> toolbox in order to facilitate tool maintenance and developer use. The commands for using the new functions of the <code>Toolkit.jar</code> toolbox are as follows:</p> <pre><code>// Convert LevelDB data to RocksDB data\njava -jar Toolkit.jar db convert -h\n// convert FullNode data into LiteFullNode data\njava -jar Toolkit.jar db lite -h\n// Database copy\njava -jar Toolkit.jar db copy -h\n</code></pre> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4813 </li> </ul> <p>Courage is the first of human qualities because it is the quality that guarantees others. </p> <p> --- Aristotle</p>"},{"location":"releases/history/#greatvoyage-v460-socrates","title":"GreatVoyage-v4.6.0 (Socrates)","text":"<p>The GreatVoyage-v4.6.0 (Socrates) introduces several important optimizations and updates, such as an optimized database checkpoint mechanism, which improves the stability of node operation; optimized resource delegate relationship index structure, and an updated voting reward algorithm, which speed up the execution speed of transactions and increase network throughput; a new proposal to add transaction memo fees, increasing the cost of transactions with memo to reduce the number of low-value transactions, so that improves the security and reliability of the TRON network. The integrated toolkit, new network-related Prometheus metrics, and new help command line together bring users a more convenient development experience.</p> <p>Please check below for details.</p>"},{"location":"releases/history/#core_5","title":"Core","text":""},{"location":"releases/history/#1-optimize-delegate-relationship-index-structure","title":"1. Optimize delegate relationship index structure","text":"<p>In the TRON network, accounts can delegate resources to other accounts through staking, and can also accept resources that other accounts stake for themselves. Therefore, each account needs to maintain a record of the delegate relationship, including all the recipient addresses that the account delegated resources to and all the addresses that delegated resources for the account.</p> <p>In versions prior to GreatVoyage-v4.6.0 (Socrates), the delegate relationship is stored in the form of a list. When performing resource delegating, it needs first to check whether the recipient account already exists in the list and then adds the account to the list only if it is not present. If a particular account has delegated resources to multiple accounts or many accounts have delegated the resources to the particular account, then the length of the delegate relationship list for the particular account will be substantial. The lookup operation would be considerably time-consuming, resulting in long transaction execution times. </p> <p>Therefore,  GreatVoyage-v4.6.0 (Socrates) optimizes the index storage structure of the resource delegate relationship and changes it from a list to a key-value pair, so as to complete the querying and modification of its data in a constant time, which greatly speeds up the execution speed of the delegation related transactions and improves network throughput.</p> <p>The delegate relationship storage optimization is a dynamic parameter of the TRON network. It is disabled by default and can be enabled by initiating a proposal.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/476 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4788 </li> </ul>"},{"location":"releases/history/#2-add-transaction-memo-fee-proposal","title":"2. Add transaction memo fee proposal","text":"<p>Starting from GreatVoyage-v4.6.0 (Socrates), a memo fee will be charged for transactions with a memo. By increasing the cost, the fee will reduce the number of low-value transactions, so as to improve the security and reliability of the TRON network.</p> <p>The memo fee is a dynamic parameter of the TRON network. After GreatVoyage-v4.6.0 (Socrates) is deployed, the default value is \u20180\u2019, and the unit is \u2018sun\u2019. It can be enabled by specifying a non-zero value by initiating a proposal, for example, \u20181000000\u2019, indicating that the transaction with memo will require an additional 1 TRX fee.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/387 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4758 </li> </ul>"},{"location":"releases/history/#3-add-optimized-reward-algorithm-proposal","title":"3. Add optimized reward algorithm proposal","text":"<p>Many voters in the TRON network will accumulate rewards for a long time before withdrawing them. The interval between two withdrawals of rewards is often very long. In versions prior to GreatVoyage-v4.6.0 (Socrates), for the transaction to withdraw rewards, it will calculate and accumulate rewards for each maintenance period since the last withdrawal of rewards, so the longer the time since the last withdrawal of rewards, the more time-consuming it will be to calculate the reward. Therefore, GreatVoyage-v4.6.0 (Socrates) optimizes the calculation algorithm of voting rewards. Instead of accumulating the rewards of each maintenance period, the sum of unwithdrawn rewards can be obtained by subtracting the total number of rewards recorded in the maintenance period of the last reward withdrawal from the total rewards recorded in the previous maintenance period. This algorithm realizes the calculation of the total number of unclaimed rewards in a constant time, which greatly improves the calculation efficiency and speeds up the execution of reward calculation, thereby improving the throughput of the network.</p> <p>The optimized reward algorithm is a TRON network parameter and is disabled by default once GreatVoyage-v4.6.0 (Socrates) is deployed, and can be enabled by voting through a proposal.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/465 </li> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4694 </li> </ul>"},{"location":"releases/history/#4-upgrade-checkpoint-mechanism-to-v2-in-database-module","title":"4. Upgrade checkpoint mechanism to v2 in database module","text":"<p>The Checkpoint is a recovery mechanism established to prevent database damage caused by the exceptional shutdown. java-tron uses memory and multi-disk databases for data storage. The data of the solidified block will be stored in multiple business databases. Unsolidified data is stored in the memory. When a block is solidified, the corresponding memory data will be written to relevant databases. However, since the writing to multiple business databases is not an atomic operation, if there is an unexpected downtime due to some reason, then all the data in the block may not be able to be written to the disk, and the node will not be able to restart due to database corruption.</p> <p>Therefore, before the memory data is written to the disk, a checkpoint would be created. The checkpoint contains all the data that needs to be written to each business database this time. After the checkpoint is created, first writes the checkpoint data to an independent Checkpoint database, and then performs the operation of writing the business database, and the Checkpoint database always retains the latest solidified block data. If the business database is damaged due to system shutdown, after the node restarts, the business database will be recovered through the data previously saved in the checkpoint database.</p> <p>At present, the Checkpoint mechanism can deal with the vast majority of downtime situations, but there is still a small probability that the business database will be damaged due to downtime. At present, the data writing of LevelDB is asynchronous. The program calls LevelDB to request to write the data to the disk. In fact, the data is only written into the cache of the operating system, and then the operating system will decide when to actually write to the disk according to its own strategy. If an unexpected downtime occurs at the time when the node just finished writing to the Checkpoint database and continues to write to the business database, it is possible that the data written to the Checkpoint database is not actually written to the disk by the operating system. In this case, the node would fail to restart properly because the Checkpoint database has no recovery data.</p> <p>In order to solve this problem, GreatVoyage-v4.6.0 (Socrates) upgrades the V2 version of Checkpoint implementation. The Checkpoint mechanism V2 will store multiple solidified blocks data. So that even if the latest solidified block data is not written successfully to the Checkpoint database due to abnormal shutdown, the historical solidified block data can be used to restore the business database when the node restarts.</p> <p>The  Checkpoint mechanism V2 is disabled by default in the configuration file. This function can be enabled by modifying the configuration. It should be noted that if a node has enabled the checkpoint V2 and has been running for a certain period of time, it would not be able to roll back to V1 anymore.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/issues/461 </li> <li>Source code:  https://github.com/tronprotocol/java-tron/pull/4614 </li> </ul>"},{"location":"releases/history/#5-optimize-block-production-priority-between-active-and-backup-nodes","title":"5. Optimize block production priority between active and backup nodes","text":"<p>If the super representative deploys the active and backup nodes, the connection between the nodes will be maintained. When the active and backup nodes are temporarily disconnected due to network problems, the backup node will consider that the active node is invalid and take over the block production. This will cause a duplicate block production process as both the active and backup nodes will produce blocks at the same time. In versions prior to GreatVoyage-v4.6.0 (Socrates), when the active and backup nodes receive blocks of the same height block generated by each other, both of them will suspend for 1-9 block production cycles. That is, the super representative will miss 1-9 blocks.</p> <p>The GreatVoyage-v4.6.0 (Socrates) optimizes the priority of block production logic. When the situation above happens, both nodes will compare the hash value of the block produced by the other node. The node with a larger block hash will continue to produce blocks, and the node with smaller block hash will suspend a block production cycle, then continue to produce blocks, and compare the block hash again. A total of 27 super representatives will generate blocks sequentially, so it takes 81 seconds to skip a block production cycle. During this period, if the connection problem between them is a short-term network failure, there will be enough time to recover it. In addition, after receiving these two blocks, other nodes will also choose the block with a larger hash and discard the one with a smaller hash. This implementation will significantly improve the block production efficiency during obstructed network connections between active and backup nodes and network stability.</p> <ul> <li>Source code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4630 </li> </ul>"},{"location":"releases/history/#6optimize-the-kademlia-algorithm-for-the-network-module","title":"6.Optimize the Kademlia algorithm for the network module","text":"<p>The java-tron node ID is a random number, which will be regenerated every time the node is started. In the implementation of the Kademlia algorithm of java-tron, the distance of the node will be calculated according to the node ID, and then the node information will be put into the corresponding K bucket according to the distance. If the node in the K bucket is restarted for some reason, the node ID will change. When it is detected that the node is offline again, the distance calculated according to the latest node ID has been unable to locate the original K bucket, therefore it is not able to delete the node from the bucket. Too many such nodes restarted will cause too much invalid data to be stored in the K bucket of the node.</p> <p>Therefore, the GreatVoyage-v4.6.0 (Socrates) optimizes the Kademlia algorithm, and uses a hash table to record the discovered nodes. The distance of a node is only calculated once when it is written into the K bucket for the first time and is assigned to the \u2018distance\u2019 field of the node, and then the node is added to the hash table. In the future, the node distance will be obtained directly through this field. Even if the node ID changes after the node is restarted, the distance of the node in the Hash table will not be updated. When the node is detected to be offline, the corresponding node can be found from the hash table according to the node IP, and then the distance to the node can be obtained through the node distance field, at last the node information can be deleted from the K bucket.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4620 https://github.com/tronprotocol/java-tron/pull/4622 </li> </ul>"},{"location":"releases/history/#other-changes_10","title":"Other Changes","text":""},{"location":"releases/history/#1-merge-archivemanifestjar-into-toolkitjar","title":"1.  Merge ArchiveManifest.jar into Toolkit.jar","text":"<p>ArchiveManifest.jar is an independent LevelDB startup optimization tool, which can optimize the file size of LevelDB manifest, thereby reducing memory usage and greatly improving node startup speed. Starting from the GreatVoyage-v4.6.0 (Socrates), the ArchiveManifest.jar tool has been integrated into the Toolkit.jar. In the future, all the tools around java-tron will be gradually integrated into the Toolkit.jar toolbox to facilitate tool maintenance and developer use.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4603 </li> </ul>"},{"location":"releases/history/#2-add-prometheus-metrics-for-network-module","title":"2. Add prometheus metrics for network module","text":"<p>GreatVoyage-v4.6.0 (Socrates) adds three new Prometheus metrics related to the network module: block fetching delay, block receiving delay, and message processing delay. New metrics help with network health monitoring of the node.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4626 </li> </ul>"},{"location":"releases/history/#3-add-the-help-command-option","title":"3. Add the --help command option","text":"<p>GreatVoyage-v4.6.0(Socrates) adds \u2018help\u2019 command line options to check all parameters and instructions. Please check the example below, <pre><code>$ java -jar FullNode.jar --help\n\nName:\n    FullNode - the java-tron command line interface\n\nUsage: java -jar FullNode.jar [options] [seedNode &lt;seedNode&gt; ...]\n\nVERSION:\n4.5.2-d05f766\n\nTRON OPTIONS:\n-v, --version           Output code version\n-h, --help              Show help message\n-c, --config            Config file (default:config.conf)\n--log-config            Logback config file\n--es                    Start event subscribe server\n\nDB OPTIONS:\n-d, --output-directory          Data directory for the databases (default:output-directory)\n\nWITNESS OPTIONS:\n-w, --witness               Is witness node\n-p, --private-key           Witness private key\n\nVIRTUAL MACHINE OPTIONS:\n--debug         Switch for TVM debug mode. In debug model, TVM will not check for timeout. (default: false)\n</code></pre></p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4606 </li> </ul>"},{"location":"releases/history/#4-optimize-litefullnodetooljar","title":"4. Optimize LiteFullNodeTool.jar","text":"<p>LiteFullNodeTool.jar is a light node tool of java-tron. Its main function is to convert the fullnode database into a light node database. GreatVoyage-v4.6.0 (Socrates) optimizes the tool and improves the convenience and stability of the tool.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4607</li> </ul>"},{"location":"releases/history/#5-optimize-the-return-value-of-eth_getblockbyhash-and-eth_getblockbynumber-apis","title":"5. Optimize the return value of  eth_getBlockByHash and eth_getBlockByNumber APIs","text":"<p>In order to be better compatible with Ethereum's JsonRPC 2.0 protocol interface, GreatVoyage-v4.6.0(Socrates) changes the unit of the <code>timestamp</code> field in the return value of the eth_getBlockByHash and eth_getBlockByNumber APIs from milliseconds to seconds, making the return values of these two APIs fully compatible with Ethereum Geth.</p> <ul> <li>Source code: https://github.com/tronprotocol/java-tron/pull/4642 </li> </ul> <p>To move the world we must move ourselves. </p> <p> --- Socrates</p>"},{"location":"releases/history/#greatvoyage-v452aurelius","title":"GreatVoyage-v4.5.2(Aurelius)","text":"<p>The GreatVoyage-v4.5.2 (Aurelius) version introduces several important optimizations. The optimized transaction cache mechanism greatly reduces memory usage and improves node performance; the optimized P2P node connection strategy improves the efficiency of establishing connections between nodes and speeds up the node synchronization process;  the optimized block production and processing logic improve node stability; the newly added database storage partition tool reduces the pressure on data storage; the newly added block header query API and historical bandwidth unit price Query API are to bring users a more convenient development experience.</p>"},{"location":"releases/history/#core_6","title":"Core","text":""},{"location":"releases/history/#1-optimize-block-processing","title":"1. Optimize block processing","text":"<p>In versions prior to GreatVoyage-v4.5.2 (Aurelius), threads such as block production, block processing, and transaction processing compete for synchronization lock at the same time. In the case of high concurrency and transactions executing much time, the block production thread or the block processing thread will take a long time to get to the synchronization lock, which leads to the occurrence of a small probability of a block loss event. In order to improve node stability, the GreatVoyage-v4.5.2 (Aurelius) version optimizes the synchronization lock in the block processing logic, allowing only one transaction processing thread to compete for the synchronization lock with the block production or processing thread, and when the transaction processing thread finds that block-related threads waiting for the synchronization lock, it will voluntarily give in, which greatly increases the probability of block production and block processing threads acquiring synchronization lock, and ensures high throughput and stable operation of the node.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-428.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4551 </p>"},{"location":"releases/history/#2-optimize-transaction-cache","title":"2. Optimize transaction cache","text":"<p>The node uses the transaction cache to determine whether the newly received transaction is a duplicate transaction. In versions prior to GreatVoyage-v4.5.2 (Aurelius), the transaction cache is a hashmap data structure, which saves transactions in the latest 65536 blocks. The hashmap allocates memory for each transaction separately. Therefore, the transaction cache will occupy nearly 2GB of memory during program runtime, meanwhile, frequent memory requests will trigger frequent JVM garbage collection which indirectly affects the performance of the node. To solve this issue, the GreatVoyage-v4.5.2 (Aurelius) version optimizes the implementation of the transaction cache, using the bloom filter instead of the hashmap, the bloom filter uses a fixed and extremely small memory space to record recent historical transactions, which greatly reduces the memory usage of the transaction cache and improve the node performance.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-440.md Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4538  </p>"},{"location":"releases/history/#3-optimize-nodes-connection-strategy","title":"3. Optimize nodes connection strategy","text":"<p>In versions prior to GreatVoyage-v4.5.2 (Aurelius), when the number of remote nodes connected by a node has reached the maximum value, the node will reject connection requests from new remote nodes. With the increase of such fully connected nodes in the network, it will become more and more difficult for the newly added nodes to establish connections with other nodes in the network.</p> <p>In order to speed up the connection process between nodes in the network, the GreatVoyage-v4.5.2 (Aurelius) version optimizes the P2P node connection strategy. It will periodically check the number of TCP connections of the node. When the number of  connections is full, a certain disconnection strategy is adopted to disconnect one or two nodes to increase the possibility of a newly added node in the network successfully connecting to it, thereby improving the efficiency of establishing connections between P2P nodes in the network and improving network stability. Please note that the nodes configured in the <code>node.active</code> and <code>node.passive</code> lists in the configuration file are trusted nodes and will not be disconnected.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-425.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4549   </p>"},{"location":"releases/history/#4-optimize-block-generating-logic","title":"4. Optimize block generating logic","text":"<p>In versions prior to GreatVoyage-v4.5.2 (Aurelius), for pre-executed normal transactions, they may encounter JVM GC pauses during packaging which can result in transaction execution timeout and being discarded. Therefore, the GreatVoyage-v4.5.2 (Aurelius) version optimizes the block generating logic. For a pre-executed normal transaction, if it executes time out during packaging, a retry operation is taken to avoid transaction discard caused by JVM GC pause during the packaging.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4387 </p>"},{"location":"releases/history/#5-optimize-fork-switching-logic","title":"5. Optimize fork switching logic","text":"<p>Micro-forks occur in the TRON network occasionally. The chain switching behavior will occur when a micro-fork happens.  The chain switching will roll back blocks, and the transactions in the rolled back block will be put back into the transaction pending queue. When these transactions are repackaged and executed, the execution results may be inconsistent due to chain switching. In versions prior to GreatVoyage-v4.5.2 (Aurelius), the entire process refers to the same transaction object, so chain switching may lead to the transaction result in the rolled back block being changed. When the chain switching occurs again and the original chain is switched back, the transaction on the original chain will be executed again, at this time, it will report a <code>Different resultCode</code> error, which will cause the node to stop synchronizing. </p> <p>Therefore, the GreatVoyage-v4.5.2 (Aurelius) version optimizes the chain-switching logic. When a block is rolled back, a new transaction object is created for the transaction in the rolled-back block, so as to avoid the modification of the transaction result and improve the node's stability for fork handling.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4583 </p>"},{"location":"releases/history/#6-add-database-storage-partition-tool","title":"6. Add database storage partition tool","text":"<p>As the data on the chain grows, the disk space of the FullNode may be insufficient, and a larger capacity disk needs to be replaced. So starting from the GreatVoyage-v4.5.2 (Aurelius) version, a database storage partition tool is provided, which can migrate some databases to other disk partitions according to the user's configuration, so users only need to add disks according to capacity requirements, no need to replace the original disk, that is convenient for users to expand the disk capacity, and at the same time reduces the cost of running a node.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4545  https://github.com/tronprotocol/java-tron/pull/4559  https://github.com/tronprotocol/java-tron/pull/4563 </p>"},{"location":"releases/history/#api_6","title":"API","text":""},{"location":"releases/history/#1-new-block-header-query-api","title":"1. New block header query API","text":"<p>From the GreatVoyage-v4.5.2 (Aurelius) version, a new block header query API is added, which only returns the block header information, not the transaction information in the block. Users can obtain the block header information without querying the entire block. This not only reduces the network I/O load of the node, and since the block does not carry transaction information, the serialization time is reduced, the interface delay is reduced, and the query efficiency is improved.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4492  https://github.com/tronprotocol/java-tron/pull/4552 </p>"},{"location":"releases/history/#2-new-historical-bandwidth-unit-price-query-api","title":"2. New historical bandwidth unit price query API","text":"<p>According to the bandwidth consumption rules, if the transaction initiator\u2019s  bandwidth obtained by staking TRX or free bandwidth is insufficient, TRX will be burned to pay for the bandwidth fee. At this time, only the bandwidth fee is recorded in the transaction record, but not the bandwidth consumption number. In order to understand bandwidth consumption of historical transactions, starting from GreatVoyage-v4.5.2 (Aurelius), a new historical bandwidth unit price query API <code>/wallet/getbandwidthprices</code> is added. Users can obtain historical records of bandwidth unit price through this API so that they can calculate bandwidth consumption of historical transactions.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4556 </p>"},{"location":"releases/history/#other-changes_11","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-block-synchronization-logic","title":"1. Optimize block synchronization logic","text":"<p>The GreatVoyage-v4.5.2 (Aurelius) version optimizes the block synchronization logic, avoids unnecessary node disconnection in the process of synchronizing blocks, and improves node stability.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4542  https://github.com/tronprotocol/java-tron/pull/4540 </p>"},{"location":"releases/history/#2-optimize-eth_estimategas-and-eth_call-api","title":"2. Optimize <code>eth_estimateGas</code> and <code>eth_call</code> API","text":"<p>The GreatVoyage-v4.5.2 (Aurelius) version optimizes the <code>eth_estimateGas</code> and <code>eth_cal</code> JSON-RPC interfaces; they can return error information when smart contract transaction execution is interrupted.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4570 </p>"},{"location":"releases/history/#3-enhance-the-fault-tolerance-of-the-interface","title":"3. Enhance the fault tolerance of the interface","text":"<p>The GreatVoyage-v4.5.2 (Aurelius) version optimizes multiple API interfaces, enhances its fault tolerance for parameters, and improves the stability of API interfaces.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4560  https://github.com/tronprotocol/java-tron/pull/4556 </p> <p>The universe is change; our life is what our thoughts make it. </p> <p> ---  Aurelius</p>"},{"location":"releases/history/#greatvoyage-v451tertullian","title":"GreatVoyage-v4.5.1(Tertullian)","text":"<p>The GreatVoyage-v4.5.1(Tertullian) version introduces several important optimization updates. The optimized transaction cache loading process shortens the node startup time; the optimized block acquisition logic and light node synchronization logic promote the stability of the node; the optimized account asset structure and TVM cache structure improves the processing speed of transactions, thereby further improving the performance of node; supporting prometheus protocol interface brings users a more convenient development experience and helps to further prosper the TRON ecosystem.</p>"},{"location":"releases/history/#core_7","title":"Core","text":""},{"location":"releases/history/#1-optimize-transaction-cache-loading","title":"1. Optimize transaction cache loading","text":"<p>In versions prior to GreatVoyage-v4.5.1 (Tertullian), it took a long time from node startup to block synchronization, and the loading of the transaction cache took up most of the node startup time. The transaction cache is used by the node to determine whether a transaction is a duplicate transaction, so during the node startup process, the transaction cache needs to be loaded from the database to the memory, and in versions prior to GreatVoyage-v4.5.1 (Tertullian), it adopts transaction as the storage unit to read the database when loading the transaction cache, so the amount of data to be read is large, and the entire reading process is time-consuming.</p> <p>In order to speed up the startup of the node, the GreatVoyage-v4.5.1 (Tertullian) version optimizes the loading of the transaction cache. By adopting the block as the storage unit to read the database reduces the times of database reading,  improves the efficiency of transaction cache loading, and improves the speed of node startup.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-383.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4319 </p>"},{"location":"releases/history/#2-optimize-account-trc-10-asset-storage-structure","title":"2. Optimize account TRC-10 asset storage structure","text":"<p>In versions prior to GreatVoyage-v4.5.1 (Tertullian), when there were too many TRC10 assets in the account, the content of the account stored in the database was large, resulting in the deserialization of the account during the transaction execution process is very time-consuming , therefore, the GreatVoyage-v4.5.1 (Tertullian) version adds a new proposal to optimize the asset structure of the account, allowing TRC-10 assets to be separated from the account and stored separately in a key-value data structure. That will reduce the content of the account structure, speed up the deserialization operation of the account and reduce the execution time of the transaction, thereby increasing the network throughput and improving the network performance.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-382.md Source Code: https://github.com/tronprotocol/java-tron/pull/4392 </p>"},{"location":"releases/history/#3-optimize-light-node-synchronization","title":"3. Optimize light node synchronization","text":"<p>Since light nodes do not store complete block data, there is a possibility that a node connects to a light node which does not have the block the node wants to synchronize with, in this situation, the light node will actively disconnect the connection. In versions prior to GreatVoyage-v4.5.1 (Tertullian), nodes may repeatedly establish connections with such light nodes, and then be disconnected by the other part, which greatly affects the efficiency of synchronizing blocks between nodes. Therefore, in the GreatVoyage-v4.5.1 (Tertullian) version, the logic of establishing a connection with light nodes has been optimized, and the two fields of \"node type\" and \"node's lowest block\" are added to the handshake message between nodes, and the nodes will save the handshake messages with each node. If the highest block of the current node is lower than the lowest block of the light node, it will actively disconnect from the light node, and the next time it establishes a connection with the node, it will filter out such nodes to avoid more invalidations connection, which improves the efficiency of synchronization between nodes.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-388.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4323  </p>"},{"location":"releases/history/#4-optimize-block-broadcasting","title":"4. Optimize block broadcasting","text":"<p>The GreatVoyage-v4.5.1 (Tertullian) version optimizes the block broadcast logic, so that the fast forward node only broadcasts the block to the three super representative nodes that will produce blocks next (the number of broadcasted super representative nodes can be changed through the configuration file) to ensure that the super representative node can obtain the latest block in time, which improves the efficiency of block production.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/4336 </p>"},{"location":"releases/history/#5-optimize-fetch-block-process","title":"5. Optimize fetch block process","text":"<p>Due to network reasons, the node may not receive the new broadcasted block. In versions before GreatVoyage-v4.5.1 (Tertullian), when the block acquisition times out, the node will acquire the block through the P2P synchronization process, but the process is complicated and time-consuming. Therefore, the GreatVoyage-v4.5.1 (Tertullian) version optimizes the process of obtaining the latest block. The node will first select a node according to the status of each node, and then directly send the block obtaining message <code>FetchInvDataMessage</code> to this node to obtain the latest block, which saves most of the time in the block synchronization process, speeds up the acquisition of the latest block, and improves the stability of the node.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-391.md Source Code: https://github.com/tronprotocol/java-tron/pull/4326 </p>"},{"location":"releases/history/#6-support-prometheus-metric-protocol-interface","title":"6. Support prometheus metric protocol interface","text":"<p>Starting from the GreatVoyage-v4.5.1 (Tertullian) version, the node provides an open source system monitoring tool - prometheus\u2019s protocol interface, and users can monitor the health status of the node more conveniently.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-369.md Source Code: https://github.com/tronprotocol/java-tron/pull/4337 </p>"},{"location":"releases/history/#7-support-node-stop-at-specified-condition","title":"7. Support node stop at specified condition","text":"<p>In order to facilitate node deployers to do data backup or data statistics, starting from the GreatVoyage-v4.5.1 (Tertullian) version, the node could stop running under specific conditions. Users can set the conditions for node stop through the node configuration file, such as the node stop\u2019s block time, block height, and the number of blocks the node needs to synchronize from start to stop. The node will stop running automatically when the set conditions are met.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-370.md Source Code: https://github.com/tronprotocol/java-tron/pull/4325 </p>"},{"location":"releases/history/#tvm_3","title":"TVM","text":""},{"location":"releases/history/#1-adjust-the-upper-limit-that-can-be-set-for-the-maximum-execution-time-of-tvm","title":"1. Adjust the upper limit that can be set for the maximum execution time of TVM","text":"<p>\"TVM maximum execution time\" is a dynamic parameter of the TRON network, indicating the maximum time allowed for a smart contract to be executed. Super representatives can change this parameter through proposal voting. In versions prior to GreatVoyage-v4.5.1 (Tertullian), the maximum value that this parameter can be modified is 100ms. With the stability of the TRON network infrastructure and the vigorous development of the ecology, the 100ms upper limit confines the complexity of smart contracts. Therefore, GreatVoyage-v4.5.1 (Tertullian) version adds a new proposal that allows to raise the configurable upper limit of \"TVM maximum execution time\" to 400ms.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-397.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4375 </p>"},{"location":"releases/history/#2-optimize-the-cache-structure-of-tvm","title":"2. Optimize the cache structure of TVM","text":"<p>In versions prior to GreatVoyage-v4.5.1 (Tertullian), the cached data in TVM is stored in the form of a byte array. When the data in the cache needs to be changed, the data must first be converted from the form of a byte array to a protobuf object by performing a serialization operation, then change a field of the object (such as account balance, etc.) to generate a new object, then serialize the newly generated protobuf object to byte array, and at last write the result byte array to TVM cache. Since the serialization and deserialization of protobuf is time-consuming, the GreatVoyage-v4.5.1 (Tertullian) version optimizes the data structure in the cache when TVM is executed, and directly saves the protobuf object data to reduce the serialize/deserialize operations when accessing the data in the cache, speeding up TVM execution of bytecode.</p> <p>Source Code: https://github.com/tronprotocol/java-tron/pull/4375   </p> <p>Hope is patience with the lamp lit. </p> <p> --- Tertullian </p>"},{"location":"releases/history/#greatvoyage-v446david","title":"GreatVoyage-v4.4.6(David)","text":"<p>GreatVoyage-v4.4.6 (David) updated the version of the dependency library fastjson to ensure the security of using fastjson.</p>"},{"location":"releases/history/#other-changes_12","title":"Other Changes","text":""},{"location":"releases/history/#1-update-the-fastjson-dependency-library-to-the-latest-version","title":"1. Update the fastjson dependency library to the latest version","text":"<p>Due to security vulnerabilities in fastjson 1.2.80 and earlier versions, GreatVoyage-v4.4.6 (David) updated the version of the fastjson dependency library to 1.2.83, and enabled the <code>safemode</code> mode of fastjson to ensure the safety of using fastjson.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4393 </p> <p>*Beauty in things exists in the mind which contemplates them. * </p> <p> ---David Hume</p>"},{"location":"releases/history/#greatvoyage-445cicero","title":"GreatVoyage-4.4.5(Cicero)","text":"<p>The GreatVoyage-v4.4.5 (Cicero) version optimizes the query interface of the node to filter out invalid fields, which ensures the stability of the interface for parsing data.</p>"},{"location":"releases/history/#other-changes_13","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-the-query-interface-of-the-node","title":"1. Optimize the query interface of the node","text":"<p>The GreatVoyage-v4.5.0 (Cicero) version optimizes the query interface of the node. When parsing the obtained data, the node will filter out invalid fields to ensure to return the correct interface data </p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4349 </p> <p>No one can give you better advice than yourself. </p> <p> ---Cicero </p>"},{"location":"releases/history/#greatvoyage-444plotinus","title":"GreatVoyage-4.4.4(Plotinus)","text":"<p>The GreatVoyage-v4.4.4 (Plotinus) version introduces several important optimization updates, which reduces the node memory usage; speeds up node startup; Optimized network module, block production threads, improve the stability of nodes; Improved java-tron upgrade mechanism achieves more efficient decentralized governance; TVM supports multi-version program executors, which helps make it more compatible with EVM, brings users a more convenient development experience, and helps further flourish the TRON ecosystem.</p>"},{"location":"releases/history/#core_8","title":"Core","text":""},{"location":"releases/history/#1-optimize-node-startup-time","title":"1. Optimize node startup time","text":"<p>Before the GreatVoyage-v4.4.4 (Plotinus), the node will execute about a minute from startup to block synchronization. The block synchronization thread will first delay 30s to wait for the P2P thread to discover remote nodes, then establish TCP connection with the discovered nodes, and finally perform the block synchronization. This delay time occupies most of the startup time. In fact, every newly discovered node will be persisted to the local database, so there is no need to spend extra time waiting for the node to be discovered when node is started for the second time. So in the GreatVoyage-v4.4.4(Plotinus) version, the waiting time for node discovery has been reduced from 30s to 100ms to improve the speed of node startup.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-366.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4254  </p>"},{"location":"releases/history/#2-optimize-memory-usage","title":"2. Optimize memory usage","text":"<p>In order to avoid repeatedly broadcasting a transaction, the node will cache the transaction data into the broadcast data buffer. However,due to the limitation of the JVM's recycling policy, old cached data cannot be deleted in time until the buffer is full. Therefore, a buffer with a larger capacity will occupy a large amount of memory space. Before the GreatVoyage-v4.4.4 (Plotinus) version, the buffer pool size was 100000 transactions. In order to release the memory occupied by expired transactions in time , the GreatVoyage-v4.4.4 (Plotinus) version changed the buffer size to 20000 to reduce memory usage.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-362.md  Source Code: https://github.com/tronprotocol/java-tron/pull/4250 </p>"},{"location":"releases/history/#3-optimize-the-block-producing-thread","title":"3. Optimize the block-producing thread","text":"<p>The GreatVoyage-v4.4.4 (Plotinus) version adds the interrupt exceptions handling in block-producing thread, so that when the block-producing node catches the interrupt instruction, it can exit safely.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4219 </p>"},{"location":"releases/history/#tvm_4","title":"TVM","text":""},{"location":"releases/history/#1-tvm-support-multi-version-program-executors","title":"1. TVM support multi-version program-executors","text":"<p>In order to enable the TRON network to support various types of smart contract transactions in the future, starting from GreatVoyage-v4.4.4 (Plotinus), TVM code is refactored to support multi-version program  executors, it will select different instruction set to interpret and execute the bytecode of smart contract according to the contract version information.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4257                               https://github.com/tronprotocol/java-tron/pull/4259 </p>"},{"location":"releases/history/#other-changes_14","title":"Other Changes","text":""},{"location":"releases/history/#1-optimize-log-storage","title":"1. Optimize log storage","text":"<p>The GreatVoyage-v4.4.4 (Plotinus) version modifies the node log retention time from 3 days to 7 days to facilitate users to troubleshoot issues.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4245 </p>"},{"location":"releases/history/#2-optimize-network-service-shutdown-logic","title":"2. Optimize network service shutdown logic","text":"<p>The GreatVoyage-v4.4.4(Plotinus) version optimizes the network service shutdown logic, closing the synchronization service first, and then closing the TCP connection service to ensure that all P2P connection related services exit safely.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4220 </p>"},{"location":"releases/history/#3-improve-the-java-tron-upgrade-mechenism","title":"3. improve the java-tron upgrade mechenism","text":"<p>For upgrade mechanism of java-tron,Before the GreatVoyage-v4.4.4 (Plotinus) version,all 27 super representative nodes need to complete the code upgrade, TRON network can be upgraded to the new version,TRON is a completely decentralized governance network,Sometimes the 27 super representative nodes cannot complete the code upgrade within a certain period of time, making the version upgrade process slow.In order to achieve more efficient decentralized governance, in GreatVoyage-v4.4.4 (Plotinus), the upgrade mechanism of java-tron has been improved, only 22 super representative nodes are needed to complete the code upgrade, and the TRON network can complete the upgrade.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4218</p> <p>The world is knowable, harmonious, and good. </p> <p> --- Plotinus </p>"},{"location":"releases/history/#greatvoyage-442augustinus","title":"GreatVoyage-4.4.2(Augustinus)","text":"<p>The GreatVoyage-v4.4.2(Augustinus) has three essential updates: The new execution model of opcode boosts the TVM performance; individualized LevelDB parameters improve the database performance; and the newly added log filter APIs make the JSON-RPC API more comprehensive.</p>"},{"location":"releases/history/#tvm_5","title":"TVM","text":""},{"location":"releases/history/#1-tvm-opcode-execution-model-optimization","title":"1. TVM Opcode Execution Model Optimization","text":"<p>The opcode execution model of the interpreter in TVM is optimized in GreatVoyage-v4.4.2(Augustinus). The performance of TVM is proven to have a great boost through testing.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-344.md Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4157</p>"},{"location":"releases/history/#api_7","title":"API","text":""},{"location":"releases/history/#1-newly-adding-eth-compatible-log-filter-for-json-rpc-apis","title":"1. Newly Adding ETH compatible log filter for JSON-RPC APIs.","text":"<p>Log filter related APIs are available from GreatVoyage-v4.4.2 for compatibility with Ethereum JSON-RPC API.</p> <p>TIP: https://github.com/tronprotocol/tips/issues/343  Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4153 </p>"},{"location":"releases/history/#other-changes_15","title":"Other Changes","text":""},{"location":"releases/history/#1-leveldb-databases-performance-optimization","title":"1. LevelDB Databases Performance Optimization","text":"<p>Parameters of each LevelDB database have been individualized by the I/O frequencies from GreatVoyage-v4.4.2(Augustinus). This will significantly boost the database performance.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4154 </p> <p>Patience is the companion of wisdom. </p> <p> ---  Augustinus </p>"},{"location":"releases/history/#greatvoyage-440rousseau","title":"GreatVoyage-4.4.0(Rousseau)","text":"<p>The GreatVoyage-v4.4.0 (Rousseau) version introduces several important updates: the optimization of block broadcasting will let the block be broadcast to the entire network faster; the query performance optimization of <code>dynamic store</code> and the optimization of database parameters will be greatly improved Block processing speed, thereby improving the performance of java-tron; API customization in FullNode makes node configuration more flexible for different application scenarios; TVM will also be better compatible with EVM and adapt to the Ethereum London upgrade, the new JSON-RPC API will bring developers a better development experience, help developers to join the TRON ecosystem more easily, and promote the prosperity of the TRON ecosystem.</p>"},{"location":"releases/history/#core_9","title":"Core","text":""},{"location":"releases/history/#1-optimize-the-block-broadcasting","title":"1. Optimize the block broadcasting","text":"<p>In the version before GreatVoyage-v4.4.0 (Rousseau), the logic of block processing is: verify block -&gt; process block -&gt; broadcast block. However, due to the long block processing time, there is a delay in block broadcasting. In order to speed up block broadcasting, In GreatVoyage-v4.4.0 (Rousseau) version, the block processing logic is changed to: verify block -&gt; broadcast block -&gt; process block, so that the block can be quickly broadcast to the entire network.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-289.md  Source Code:https://github.com/tronprotocol/java-tron/pull/3986  </p>"},{"location":"releases/history/#2-optimize-the-query-performance-of-dynamic-store","title":"2. Optimize the query performance of <code>dynamic store</code>","text":"<p>During the block processing, The frequency of visits to <code>dynamic store</code> is very high. The GreatVoyage-v4.4.0(Rousseau) version optimizes the query performance of the  <code>dynamic store</code> by loading all the data of  <code>dynamic store</code>  into the first-level cache, the cache hit rate of the <code>dynamic store</code>  is improved and the block processing speed is also improved.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-290.md Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/3993  </p>"},{"location":"releases/history/#3-optimize-the-transaction-broadcasting-interface","title":"3. Optimize the transaction broadcasting interface","text":"<p>The GreatVoyage-v4.4.0 (Rousseau) version optimizes the processing flow of the transaction broadcast interface. The transaction broadcast is changed from asynchronous to synchronous, and the result will be returned after the broadcast is successful, making the return result of the broadcast more accurate.</p> <p>Source code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4000 </p>"},{"location":"releases/history/#4-optimize-the-parameters-of-the-database","title":"4. Optimize the parameters of the database","text":"<p>The GreatVoyage-v4.4.0 (Rousseau) version optimizes the parameters of the database, which improves the read and write performance of the database, thereby improving the efficiency of block processing.</p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4018  https://github.com/tronprotocol/java-tron/pull/3992 </p>"},{"location":"releases/history/#tvm_6","title":"TVM","text":""},{"location":"releases/history/#1-provide-compatibility-with-evm","title":"1. Provide compatibility with EVM","text":"<p>The GreatVoyage-v4.4.0 (Rousseau) version provides compatibility solution for those instructions that are different from EVM, so that the newly deployed contract supports the following features: - The <code>GASPRICE</code> instruction returns the unit price of energy. - The <code>try/catch-statement</code> supports catching all types of TVM exceptions. - Forbid the system contract \u201cTransferContract\u201d to transfer TRX to the smart contract account.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-272.md  Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4032 </p> <p>NOTICE\uff1a By default, this feature is disabled, and the super representative or super partner will initiate a vote request to enable it in the future.</p>"},{"location":"releases/history/#2-adapt-to-ethereum-london-release","title":"2. Adapt to Ethereum London Release","text":"<p>In the GreatVoyage-v4.4.0 (Rousseau) version, TVM is also adapted to the Ethereum London upgrade: introduce the <code>BASEFEE</code> opcode; the deployment of new contracts starting with 0xEF is prohibited.</p> <p>TIP: https://github.com/tronprotocol/tips/blob/master/tip-318.md  Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4032 </p> <p>NOTICE\uff1a By default, this feature is disabled, and the super representative or super partner will initiate a vote request to enable it in the future.</p>"},{"location":"releases/history/#3-in-constant-mode-energy-limit-supports-customization-and-the-default-value-is-increased","title":"3. In constant mode, <code>Energy limit</code> supports customization and the default value is increased","text":"<p>Before the GreatVoyage-v4.4.0 (Rousseau) version, the energy limit in constant mode was a fixed value(<code>3,000,000</code>). The GreatVoyage-v4.4.0 (Rousseau) version changed it to configurable, and increase the default value to <code>100,000,000</code>. after upgraded to the latest version, <code>Energy limit</code> can be configured in startup parameters(<code>--max-energy-limit-for-constant</code>) or in the configuration file(<code>vm.maxEnergyLimitForConstant</code>). </p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4032 </p>"},{"location":"releases/history/#api_8","title":"API","text":""},{"location":"releases/history/#1-support-ethereum-compatible-json-rpc-api","title":"1. Support Ethereum compatible JSON-RPC API","text":"<p>Starting from the GreatVoyage-v4.4.0 (Rousseau) version, the FullNode supports JSON-RPC APIs. For details, please refer to: https://developers.tron.network/reference#json-rpc-api </p> <p>Source Code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4046 </p>"},{"location":"releases/history/#2-fullnode-supports-disabling-apis","title":"2. FullNode supports disabling APIs","text":"<p>In order to make the FullNode customizable, starting from GreatVoyage-v4.4.0 (Rousseau) version, FullNode supports disabling specific APIs through the configuration file.</p> <p>Source code\uff1ahttps://github.com/tronprotocol/java-tron/pull/4045 </p>"},{"location":"releases/history/#3-optimize-the-triggerconstantcontract-api","title":"3. Optimize the <code>TriggerConstantContract</code> API","text":"<p>In GreatVoyage-v4.4.0 (Rousseau), the following optimizations have been introduced to the <code>TriggerConstantContract</code> interface: -  Execute contract creation when <code>ContractAddress</code> is empty -  Remove the check of the incoming parameters <code>callvalue</code> and <code>tokenvalue</code> -  The log list and internal transaction list are added to <code>TransactionExtention</code></p> <p>Source Code\uff1a https://github.com/tronprotocol/java-tron/pull/4032 </p>"},{"location":"releases/history/#changes","title":"Changes","text":""},{"location":"releases/history/#1-upgrade-event-plugin-to-support-bttc-data","title":"1. Upgrade event plugin to support <code>BTTC</code> data","text":"<p>The event plugin has been upgraded in GreatVoyage-v4.4.0 (Rousseau) to support <code>BTTC</code>.</p> <p>Source code: https://github.com/tronprotocol/java-tron/pull/4067  </p>"},{"location":"releases/history/#2-increase-the-upper-limit-of-the-maxfeelimit-network-parameter","title":"2. Increase the upper limit of the <code>MaxFeeLimit</code> network parameter.","text":"<p>In the version before GreatVoyage-v4.4.0 (Rousseau), the value range of <code>MaxFeeLimit</code> is [0,1e10] sun, in GreatVoyage-v4.4.0 (Rousseau)  the value range of <code>MaxFeeLimit</code> is expanded to [0, 1e17] sun.</p> <p>Source Code\uff1a https://github.com/tronprotocol/java-tron/pull/4032 </p> <p>NOTICE\uff1a By default, this feature is disabled, it will be enabled after the London upgrade proposal takes effect.</p>"},{"location":"releases/history/#3-optimize-the-quick-start-script-startsh","title":"3. Optimize the quick start script <code>start.sh</code>","text":"<p>The quick start script tool is also upgraded in the GreatVoyage-v4.4.0 (Rousseau) version, please refer to the latest user guide from: https://github.com/tronprotocol/java-tron/blob/release_v4.4.0/shell.md</p> <p>The world of reality has its limits; the world of imagination is boundless. </p> <p> ---  Rousseau</p>"},{"location":"releases/history/#greatvoyage-430bacon","title":"GreatVoyage-4.3.0(Bacon)","text":"<p>The release of GreatVoyage-v4.3.0 (Bacon) includes several significant optimization enhancements. The configurability of the parameters <code>FREE_NET_LIMIT</code> and <code>TOTAL_NET_LIMIT</code> will aid the TRON community in achieving improved on-chain governance; The addition of new TVM instructions and ABI types facilitates the use of smart contracts; the new cryptography library strengthens the TRON network's security; the optimization of the account data storage and transaction verification procedures increases transaction processing speed and block verification speed, greatly improving the TRON network's performance; node startup speed improvement will benefit customers and help the TRON ecosystem grow even further.</p>"},{"location":"releases/history/#core_10","title":"Core","text":""},{"location":"releases/history/#1-add-a-proposal-to-adjust-the-free-net-limit-in-an-account","title":"1. Add a proposal to adjust the free net limit in an account.","text":"<p>Prior to GreatVoyage-v4.3.0 (Bacon), the account's daily free bandwidth quota was fixed at 5000. The GreatVoyage-v4.3.0 (Bacon) version includes the #61 proposal <code>FREE_NET_LIMIT</code>, which allows for the customization of the free bandwidth quota. Super representatives and super partners may initiate a vote request for Proposal 61, which modifies the <code>FREE_NET_LIMIT</code> variable, which has the value [0, 100000].</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-292.md</li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3917 </li> </ul> <p>NOTICE The account's daily free bandwidth quota  is not changed now. The super representative or super partner will initiate a vote request to change the value in the future.</p>"},{"location":"releases/history/#2-add-a-proposal-to-adjust-the-total-net-limit","title":"2. Add a proposal to adjust the total net limit.","text":"<p>Prior to GreatVoyage-v4.3.0 (Bacon), the total bandwidth obtained by staking TRX throughout the entire network was fixed at 43,200,000,000. The GreatVoyage-v4.3.0 (Bacon) version incorporates proposal #62 <code>TOTAL_NET_LIMIT</code>, which allows for configuring the total bandwidth available by staking TRX over the entire network. Super representatives and super partners may initiate a voting request for Proposal 62, which amends <code>TOTAL_NET_LIMIT</code>. <code>TOTAL_NET_LIMIT</code> has a range of [0, 1000000000000].</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-293.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3917  </li> </ul> <p>NOTICE The total net limit is not changed now. The super representative or super partner will initiate a vote request to change the value in the future.</p>"},{"location":"releases/history/#3-optimize-the-account-data-structure","title":"3. Optimize the Account Data Structure","text":"<p>Account is a database that receives numerous accesses during the node's operation, necessitating frequent deserialization operations on the account data structure. Prior to GreatVoyage-v4.3.0 (Bacon), Account contained not only the account's basic data, but also user TRC-10 asset data. However, for TRX transfers and smart contract-related transactions, only the Account's basic data is used. An excessively large TRC-10 asset list will have a significant impact on the Account data structure's deserialization performance. GreatVoyage-v4.3.0 (Bacon) improves the Account database's storage structure by separating TRC-10 asset data from the Account and storing it independently in the <code>AccountAssetIssue</code>. Reduce the amount of data that is deserialized during Account deserialization and increase the deserialization speed.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-295.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3906 </li> </ul> <p>NOTICE By default, this feature is disabled, and the super representative or super partner will initiate a vote request to enable it in the future.</p>"},{"location":"releases/history/#tvm_7","title":"TVM","text":""},{"location":"releases/history/#1-add-vote-instructions-and-precompile-contracts-in-tvm","title":"1. Add Vote Instructions and Precompile Contracts in TVM","text":"<p>Ordinary accounts can earn block rewards and voting rewards in versions prior to GreatVoyage-v4.3.0 (Bacon) by voting for super representatives or super representative candidates. However, because TVM does not accept voting instructions, TRX assets in smart contract accounts are unable to generate revenue via voting. The GreatVoyage-v4.3.0 (Bacon) version adds voting instructions to TVM: <code>VOTE</code> / <code>WITHDRAWBALANCE</code>, allowing smart contract accounts to vote for super representatives or super representative candidates.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-271.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3921 </li> </ul> <p>NOTICE By default, this feature is disabled, and the super representative or super partner will initiate a vote request to enable it in the future.</p>"},{"location":"releases/history/#2-add-a-new-type-error-in-smart-contract-abi","title":"2. Add a New Type: <code>Error</code> in Smart Contract ABI","text":"<p>GreatVoyage-v4.3.0 (Bacon) provides a new ABI type Error, which is a custom error type that is compatible with Ethereum solidity 0.8.4's new features.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-306.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3921 </li> </ul>"},{"location":"releases/history/#api_9","title":"API","text":""},{"location":"releases/history/#1-add-a-new-field-energy_used-in-transactionextention","title":"1. Add a New Field: <code>energy_used</code> in <code>TransactionExtention</code>","text":"<p>Users cannot forecast the energy usage of smart contract transactions in versions earlier to GreatVoyage-v4.3.0 (Bacon). The version of GreatVoyage-v4.3.0 (Bacon) adds the <code>energy_used</code> field to the <code>TransactionExtension</code>. When the user invokes the contract method via <code>TriggerConstantContract</code>, a sandbox environment based on the most recently synchronized block at the current node is created to supply TVM with this method call. Following the execution, the actual energy consumption figure is written to the <code>energy_used</code> field(this operation will not generate an on-chain transaction, nor will it change the status of the current node).</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3940 </li> </ul>"},{"location":"releases/history/#changes_1","title":"Changes","text":""},{"location":"releases/history/#1-change-the-cryptography-library-to-bouncy-castle","title":"1. Change the Cryptography Library to Bouncy Castle","text":"<p>Since <code>SpongyCastle</code> is no longer maintained, <code>BouncyCastle</code> is utilized as the encryption library starting with GreatVoyage-v4.3.0 (Bacon).</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3919 </li> </ul>"},{"location":"releases/history/#2-modify-the-calculation-of-net_usage-value-in-the-transactioninfo-when-creating-new-accounts","title":"2. Modify the Calculation of <code>net_usage</code> Value in the <code>Transactioninfo</code> when Creating New Accounts","text":"<p>When a new account is created in GreatVoyage-v4.3.0 (Bacon), the method for calculating <code>net_usage</code> is altered.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3917 </li> </ul>"},{"location":"releases/history/#3-optimize-the-block-verification","title":"3. Optimize the Block Verification","text":"<p>When a node checks a block prior to GreatVoyage-v4.3.0 (Bacon), it verifies each transaction included inside it, regardless of whether it has been verified previously. The transaction verification procedure consumes roughly one-third of the total time required to process a block. The GreatVoyage-v4.3.0 (Bacon) release optimizes the block verification logic. If non-<code>AccountUpdateContract</code> transactions in the block have been validated previously (<code>AccountUpdateContract</code> transactions entail account permission changes), they will no longer be verified to expedite block verification.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-276.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3910 </li> </ul>"},{"location":"releases/history/#4-optimize-the-node-startup","title":"4. Optimize the Node Startup","text":"<p>Prior to GreatVoyage-v4.3.0 (Bacon), during node startup, transaction cache and block data from the database are read to complete the RAM transaction cache initialization. The RAM transaction cache initialization process has been streamlined in GreatVoyage-v4.3.0 (Bacon), and some superfluous parsing processes have been deleted. The speed of node startup will be increased following optimization.</p> <ul> <li>TIP: https://github.com/tronprotocol/tips/blob/master/tip-285.md </li> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3907 </li> </ul>"},{"location":"releases/history/#5-optimize-transaction-processing-flow-to-reduce-memory-usage","title":"5. Optimize Transaction Processing Flow to Reduce Memory Usage","text":"<p>The transaction processing flow is streamlined in GreatVoyage-v4.3.0 (Bacon), unneeded objects are released in advance, and memory utilization is optimized.</p> <ul> <li>Source Code: https://github.com/tronprotocol/java-tron/pull/3911 </li> </ul>"},{"location":"releases/history/#6-add-new-plugins-to-optimize-the-performance-of-levedb-startup","title":"6. Add New Plugins to Optimize the Performance of <code>levedb</code> Startup","text":"<p>In the version before GreatVoyage-v4.3.0 (Bacon), with the running of <code>levedb</code>, the manifest file will continue to grow. Excessive manifest file will not only affect the startup speed of the node but also may cause the memory to continue to grow and lead to insufficient memory and the service was terminated abnormally. GreatVoyage-v4.3.0 (Bacon) introduces the <code>leveldb</code> startup optimization plug-in. The plug-in optimizes the file size of the manifest and the startup process of LevelDB, reduces memory usage, and improves node startup speed.</p> <ul> <li>TIP:  https://github.com/tronprotocol/tips/blob/master/tip-298.md </li> <li>Source Code:  https://github.com/tronprotocol/java-tron/pull/3925</li> <li>Plug-in Usage Guide: https://github.com/tronprotocol/documentation-en/blob/master/docs/developers/archive-manifest.md</li> </ul> <p>Knowledge is power. </p> <p> --- Francis Bacon </p>"},{"location":"releases/history/#greatvoyage-4221epictetus","title":"GreatVoyage-4.2.2.1(Epictetus)","text":"<p>We have just released the version of GreatVoyage-v4.2.2.1(Epictetus). The main new features and modifications are as follows:</p>"},{"location":"releases/history/#core-protocol","title":"Core Protocol","text":""},{"location":"releases/history/#1-optimize-the-processing-logic-of-pending-transactions","title":"1. Optimize the processing logic of <code>pending transactions</code>.","text":"<p>In the versions before GreatVoyage-v4.2.2.1(Epictetus), if the node has enabled the event subscription service, there will be a small probability of abnormal node synchronization.</p> <p>The GreatVoyage-v4.2.2.1(Epictetus) version optimizes the processing logic of <code>pending transaction</code>, fixes the synchronization exception, and improves the stability of the event subscription service.</p> <ul> <li>Source code: #3874</li> </ul> <p>The update introduced by the GreatVoyage-v4.2.2.1(Epictetus) version optimizes the processing logic of <code>pending transaction</code>, which will greatly improve the stability of the event subscription service, bring a better experience for TRON users, and further prosper the TRON ecosystem.</p> <p>No great thing is created suddenly. </p> <p> --- Epictetus</p>"},{"location":"releases/history/#greatvoyage-422lucretius","title":"GreatVoyage-4.2.2(Lucretius)","text":"<p>The version of GreatVoyage-v4.2.2 (Lucretius) introduces three important optimizations. The optimization of block processing effectively improves the execution speed of the block, thereby significantly improving the performance of the TRON network. Efficient HTTP/RPC query and excellent TVM performance will bring a better experience to TRON DAPP users and further prosper the TRON ecosystem.</p>"},{"location":"releases/history/#core-protocol_1","title":"Core Protocol","text":""},{"location":"releases/history/#1-block-processing-optimization","title":"1. Block Processing optimization","text":"<p>In the versions before GreatVoyage-v4.2.2 (Lucretius), to obtain the witness list during block processing, multiple database queries and deserialization operations were performed, which took up nearly 1/3 of the block processing time.</p> <p>The GreatVoyage-v4.2.2 (Lucretius) version simplifies the query of witnesses. In the block processing process, the witness list can be obtained by only one query. After testing, this optimization has dramatically improved the block processing performance.</p> <ul> <li>TIP: TIP-269</li> <li>Source code: #3827</li> </ul>"},{"location":"releases/history/#2-data-query-optimization","title":"2. Data Query optimization","text":"<p>In the versions before GreatVoyage-v4.2.2 (Lucretius), multiple HTTP or RPC queries for data on the chain are mutually exclusive. If a query request is being processed, a new query request will keep waiting until the previous request is completed. </p> <p>However, data query methods never use shared data, and no lock operation is required. This optimization removes unnecessary synchronization locks in the query process and improves the performance of internal queries, HTTP and RPC query requests of nodes.</p>"},{"location":"releases/history/#3-smart-contract-abi-storage-optimization","title":"3. Smart Contract ABI Storage optimization","text":"<p>In the version before GreatVoyage-v4.2.2 (Lucretius), the ABI other data of the smart contract are stored together in the contract database, and some high-frequency instructions (SLOAD, SSTORE, Etc.) will read all the data of a smart contract from the contract database. However, the execution of the contract does not use these ABI data, and these frequent readings will impact the execution efficiency of these instructions.</p> <p>In the version of GreatVoyage-v4.2.2 (Lucretius), smart contract ABIs are transferred to a particular ABI database. The ABI data will no longer be read during the execution of the contract, thus significantly improving the performance of TVM.</p> <ul> <li>TIP: TIP-268</li> <li>Source code: #3836</li> </ul>"},{"location":"releases/history/#other-changes_16","title":"Other Changes","text":""},{"location":"releases/history/#1-system-contract-batchvalidatesign-initialization-process-optimization","title":"1. System Contract <code>BatchValidateSign</code> Initialization Process optimization","text":"<ul> <li>Source code: #3836</li> </ul> <p>--- Truths kindle light for truths. </p> <p> --- Lucretius</p>"},{"location":"releases/history/#greatvoyage-420plato","title":"GreatVoyage-4.2.0(Plato)","text":"<p>The GreatVoyage-4.2.0 (Plato) version introduces two important updates. The optimization of the resource model will increase the utilization rate of TRON network resources and make the resource acquisition method more reasonable. The new TVM instructions make the use scenarios of smart contracts more abundant and will further enrich the TRON ecosystem.</p>"},{"location":"releases/history/#core-protocol_2","title":"Core Protocol","text":""},{"location":"releases/history/#1-optimize-the-resource-model","title":"1. Optimize the resource model","text":"<p>Before the GreatVoyage-4.2.0 (Plato) version, while users obtained a large amount of TRON power by staking TRX, they also obtained a large amount of energy and bandwidth. The utilization rate of these energies and bandwidth is extremely low, and most of them are not used at all, which increases the cost of obtaining resources. In order to improve the utilization rate of these resources, the GreatVoyage-4.2.0(Plato) version proposes an optimization of the resource model, where staking TRX can only obtain one of the three resources, namely bandwidth, energy, and TRON power. After optimization, users can obtain the corresponding resources based on their own needs, thereby improving the utilization rate of resources.</p> <ul> <li>TIP\uff1a TIP-207</li> <li>Source Code:  #3726</li> </ul> <p>Notes:   * This feature is disabled by default and can be enabled through the proposal system.   * After the feature is enabled, the user's previously obtained resources remain unchanged. The TRON power obtained before the proposal passage will be cleared when the user triggers an unstake  transaction (unstake bandwidth, energy, or TRON power).</p>"},{"location":"releases/history/#tvm_8","title":"TVM","text":""},{"location":"releases/history/#1add-freezeunfreeze-instructions-in-tvm","title":"1\u3001Add Freeze/Unfreeze instructions in TVM","text":"<p>In the TRON network, one non-contract account can stake TRX to obtain resources such as bandwidth, energy, TRON power, and reasonable use of these resources can bring certain benefits to users. At the same time, although smart contract accounts do have TRX, there is no way to stake these TRX to obtain resources.  In order to solve this inconsistency, the GreatVoyage-4.2.0(Plato) version introduces Freeze/Unfreeze instructions in TVM, so that smart contracts can also support staking TRX to obtain resources.</p> <ul> <li>TIP: TIP-157</li> <li>Source Code\uff1a #3728</li> </ul> <p>Notes:   * This feature is disabled by default and can be enabled through the proposal system.   * The TVM <code>freeze</code> instruction can obtain bandwidth and energy. For TRON POWER, it can be obtained and used after the TVM supports the voting instruction.   * The <code>receiving</code> address/<code>target</code> address used in the Freeze/Unfreeze instructions must be <code>address payable</code> type, and the <code>receiving</code> address/<code>target</code> address cannot be a contract address other than itself.   * The inactive account will be automatically activated if the account is the receiver of TVM <code>Freeze</code> instruction, and 25,000 energy will be deducted as the account activation cost.</p>"},{"location":"releases/history/#other-changes_17","title":"Other Changes","text":""},{"location":"releases/history/#1optimize-the-block-synchronization","title":"1\u3001Optimize the block synchronization.","text":"<ul> <li>Source code\uff1a#3732</li> </ul> <p>The beginning is the most important part of the work. </p> <p> --- Plato</p>"},{"location":"releases/history/#greatvoyage-413thales","title":"GreatVoyage-4.1.3(Thales)","text":"<p>GreatVoyage-4.1.3(Thales)  is released with the following new features and modifications:</p>"},{"location":"releases/history/#core-protocol_3","title":"Core Protocol","text":""},{"location":"releases/history/#1sorting-the-transactions-in-pending-pool-sr-will-prioritize-the-transactions-with-high-packing-fee","title":"1.Sorting the transactions in pending pool,  SR will prioritize the transactions with high packing fee","text":"<p>In GreatVoyage-4.1.2 and earlier versions, SR packaging transactions are carried out in accordance with the time sequence of the arrival of the transaction.This will easily be attacked by low transaction fees.</p> <p>After this optimization, block producers sort the transactions to be packaged according to the cost, and then prioritize the transaction with high cost to prevent low-cost transaction attacks.</p>"},{"location":"releases/history/#api_10","title":"API","text":""},{"location":"releases/history/#1add-new-api-to-support-transaction-query-in-pending-pool","title":"1.Add new API to support transaction query in pending pool.","text":"<p>It is currently impossible to query the intermediate state information of a certain transaction from after it is issued to before it is on the chain.After a transaction is sent, if it is not on the chain, we cannot know whether it is waiting for packaging or has been discarded.</p> <p>In this upgrade, the Fullnode node provides 3 API to obtain detailed information about the pending pool: - /wallet/gettransactionfrompending: Obtain the transaction information from pending pool through the - transaction ID - /wallet/gettransactionlistfrompending: Get all transactions from the pending pool - /wallet/getpendingsize: Get the number of transactions in pending pool</p> <p>The optimization of transaction packaging logic of GreatVoyage-4.1.3(Thales)  will effectively reduce low-cost attacks and greatly improve the security of the TRON public chain.</p>"},{"location":"releases/history/#great-voyage-v412","title":"Great Voyage - v4.1.2","text":"<p>GreatVoyage-version 4.1.2 is released with the following new features and modifications:</p>"},{"location":"releases/history/#i-core-protocol","title":"I. Core Protocol","text":""},{"location":"releases/history/#1reward-srs-with-the-transaction-fees-charged-for-bandwidth-and-energy","title":"1\u3001Reward SRs with the transaction fees charged for bandwidth and energy.","text":"<p>After this feature is turned on, the transaction fee from burning TRX which charged for bandwidth/energy (except OUT_OF_TIME) will be transferred to TRANSACTION_FEE_POOL. At the end of each block, the fee of all transactions in this block is rewarded to the block SR and its voters. At the same time, in \"transactioninfo\", the \"packingFee\" field is added to indicate the available fees to the current SR and SR voters. </p> <ul> <li>TIP: TIP-196</li> <li>Source Code:  #3532</li> </ul>"},{"location":"releases/history/#2support-account-history-balance-query","title":"2\u3001Support account history balance query.","text":"<p>The account historical balance query function can facilitate developers to query the account balance information at a specific block height. Developers can obtain the account historical balance information through the following two APIs.</p> <ul> <li>/wallet/getaccountbalance \uff1aquery account balance at a specific block.</li> <li>/wallet/getblockbalance \uff1a Query the balance-changing operations in a specific block.</li> </ul> <p>Note: 1. This function is disabled by default and can be enabled through the node configuration file. 2. After the function is enabled, users can only query the historical balance after the enabled time. If users need to query the complete historical balance information, they can use the data snapshot which contains the historical balance information to resynchronize the node.</p> <ul> <li>Source Code\uff1a#3538</li> <li>Guide \uff1a https://github.com/tronprotocol/documentation-en/blob/master/docs/api/http.md</li> </ul>"},{"location":"releases/history/#3optimized-the-blackhole-account-to-improve-transaction-execution-speed","title":"3\u3001Optimized the blackhole account to improve transaction execution speed","text":"<p>After the feature is turned on, the transaction fee from burning TRX which charged f for bandwidth and energy will no longer be transferred to the black hole address but will be directly accumulated and recorded in the database.</p> <ul> <li>Source code\uff1a #3617</li> </ul>"},{"location":"releases/history/#ii-tvm","title":"II. TVM","text":""},{"location":"releases/history/#1adopt-to-solidity060","title":"1\u3001Adopt to solidity0.6.0.","text":"<p>After this upgrade, TRON will be fully compatible with the new features introduced by solidity 0.6.0, including the new virtual and override keywords, and supporting try/catch. For details, please refer to the TRON Solidity release note: https://github.com/tronprotocol/solidity/releases/tag/tv_0.6.0 </p> <ul> <li>TIP:  TIP-209</li> <li>Source Code\uff1a #3351</li> </ul>"},{"location":"releases/history/#2make-max_fee_limit-configurable-as-a-chain-property","title":"2\u3001Make MAX_FEE_LIMIT configurable as a chain property.","text":"<p>After the new version, SR and SRP can initiate a voting request to modify MAX_FEE_LIMIT. The range of MAX_FEE_LIMIT is [0,10000000000].</p> <ul> <li>TIP\uff1a TIP-204 </li> <li>Source code\uff1a  #3534</li> </ul>"},{"location":"releases/history/#iii-others-changes","title":"III. Others Changes","text":""},{"location":"releases/history/#1use-the-jitpack-repository-to-provide-dependency-support-and-make-it-easy-for-developers-to-use-java-tron-as-a-dependency-for-their-projects","title":"1\u3001Use the jitpack repository to provide dependency support and make it easy for developers to use java-tron as a dependency for their projects.","text":"<ul> <li>Source code: #3554</li> </ul>"},{"location":"releases/history/#greatvoyage-v411","title":"GreatVoyage-v4.1.1","text":"<p>GreatVoyage-version 4.1.1 is released with the following new features and modifications:</p>"},{"location":"releases/history/#i-core-protocol_1","title":"I. Core Protocol","text":""},{"location":"releases/history/#1-new-consensus-protocol","title":"1. New Consensus Protocol","text":"<p>The new consensus mechanism combines TRON's existing DPoS consensus with the PBFT consensus mechanism. PBFT's three-phase voting mechanism is adopted to confirm whether a block should be solidified. It will take an average of 1-2 slots (a slot equals 3s) from creation to confirmation of a TRON block, much shorter than the previous 19 slots. This signifies a remarkable increase in the block confirmation speed. TIP: TICP-Optimized-PBFT Source code: #3082</p>"},{"location":"releases/history/#2-new-node-type","title":"2. New Node Type","text":"<p>We added another type of node to the existing FullNode: Lite FullNode. Lite FullNode executes the same code with the FullNode. What sets it apart is that its launch is based on the status data snapshot, which contains all the status data and data history of the latest 256 blocks. The status data snapshot can be acquired by executing LiteFullNodeTool.jar (please see: Use the LiteFullNode Tool). - TIP: TIP-128 - Source code: #3031</p>"},{"location":"releases/history/#ii-tvm_1","title":"II. TVM","text":""},{"location":"releases/history/#achieved-compatibility-with-ethereum-istanbul-upgrade","title":"Achieved compatibility with Ethereum Istanbul upgrade","text":"<p>a. Added new instruction <code>CHAINID</code> to fetch the genesis block ID of the current chain, which avoids possible replay attacks of one transaction being repeated on different chains. - TIP: TIP-174 - Source code: #3351</p> <p>b. Added new instruction <code>SELFBALANCE</code> to fetch the balance of the current contract address in the smart contract. For obtaining the balance of any address, please stick with instruction BALANCE.SELFBALANCE is safer to use. Energy consumption of using <code>BALANCE</code> might rise in the future. - TIP: TIP-175 - Source code: #3351</p> <p>c. Reduced Energy consumption of three precompiled contract instructions, namely BN128Addition, BN128Multiplication, and BN128Pairing. BN128Addition: from 500 Energy to 150 Energy BN128Multiplication: from 40000 Energy to 6000 Energy BN128Pairing: from (80000 * pairs + 100000) Energy to (34000 * pairs + 45000) Energy - TIP: TIP-176 - Source code: #3351</p>"},{"location":"releases/history/#iii-mechanism","title":"III. Mechanism","text":"<ol> <li>Added two new system contracts, namely MarketSellAssetContract and MarketCancelOrderContract, for on-chain TRX/TRC10 transactions in decentralized exchanges.</li> <li>TIP: TIP-127</li> <li>Source code: #3302</li> </ol>"},{"location":"releases/history/#iv-other-modifications","title":"IV. Other Modifications","text":"<ol> <li>Added a few node performance indicators.</li> <li> <p>Source code: #3350</p> </li> <li> <p>Added market order detail in the original transactionInfo interface.</p> </li> <li>TIP: TIP-127</li> <li> <p>Source code: #3302</p> </li> <li> <p>Improved the script for docker deployment.</p> </li> <li>Source code: #3330</li> </ol>"},{"location":"releases/history/#greatvoyage-v400","title":"GreatVoyage-v4.0.0","text":"<p>Release 4.0.0 has implemented the shielded TRC-20 contract, which can hide the source address, destination address, and the token amount for TRC-20 transactions and provide users with better privacy.  The shielded TRC-20 contract has three core functions: <code>mint</code>, <code>transfer</code> and <code>burn</code>. <code>mint</code> is used to transform the public TRC-20 token to shielded token; <code>transfer</code> is used for shielded token transactions; <code>burn</code> is used to transform the shielded token back to the public TRC-20 token. To support the shielded TRC-20 contract,  four new zero-knowledge instructions (<code>verifyMintProof</code>, <code>verifyTransferProof</code>, <code>verifyBurnProof</code> and <code>pedersenHash</code>) are add in TVM, which make it convenient to provide privacy for arbitrary TRC-20 contract.</p>"},{"location":"releases/history/#notices","title":"Notices","text":"<p>Forced upgrade</p>"},{"location":"releases/history/#new-features","title":"New features","text":"<ul> <li>Add 4 new instructions (<code>verifyMintProof</code>, <code>verifyTransferProof</code>, <code>verifyBurnProof</code> and <code>pedersenHash</code>) in TVM to support TRC20 shielded transactions based on zk-SNARKs (#3172).</li> <li><code>verifyMintProof</code>: used to validate the zero-knowledge proof for <code>mint</code> function.</li> <li><code>verifyTransferProof</code>: used to validate the zero-knowledge proof for <code>transfer</code> function.</li> <li><code>verifyBurnProof</code>: used to validate  the zero-knowledge proof for <code>burn</code> function.</li> <li><code>pedersenHash</code>: used to compute the Pedersen hash.</li> <li>Update the initial parameters of zk-SNARKs scheme generated by the MPC Torch (#3210).</li> <li>Add the APIs to support shielded TRC-20 contract transaction (#3172).</li> </ul> <p>1.\u00a0Create shielded contract parameters   <pre><code>rpc CreateShieldedContractParameters (PrivateShieldedTRC20Parameters) returns (ShieldedTRC20Parameters) {}\n</code></pre>   2.\u00a0Create shielded contract parameters without ask   <pre><code>rpc CreateShieldedContractParametersWithoutAsk (PrivateShieldedTRC20ParametersWithoutAsk) returns (ShieldedTRC20Parameters) {}\n</code></pre>   3.\u00a0Scan shielded TRC20 notes by ivk   <pre><code>rpc ScanShieldedTRC20NotesByIvk (IvkDecryptTRC20Parameters) returns (DecryptNotesTRC20) {}\n</code></pre>   4.\u00a0Scan shielded TRC20 notes by ovk   <pre><code>rpc ScanShieldedTRC20NotesByOvk (OvkDecryptTRC20Parameters) returns (DecryptNotesTRC20) {}\n</code></pre>   5.\u00a0Check if the shielded TRC20 note is spent   <pre><code>rpc IsShieldedTRC20ContractNoteSpent (NfTRC20Parameters) returns (NullifierResult) {}\n</code></pre>   6.\u00a0Get the trigger input for the shielded TRC20 contract   <pre><code>  rpc GetTriggerInputForShieldedTRC20Contract (ShieldedTRC20TriggerContractParameters) returns (BytesMessage) {}\n</code></pre> - Support the <code>ovk</code> to scan the transparent output of  <code>burn</code> transaction (#3203). - Support the <code>burn</code> transaction with zero or one shielded output (#3224). - Add data field in transaction log trigger class for future memo note (#3200).</p> <p>The following TIPs are implemented in this release: - TIP-135: Shielded TRC-20 contract standards, guarantee the privacy of the shielded transfer of TRC-20 tokens. - TIP-137: Implements three zero-knowledge proof instructions in TVM to support the shielded TRC-20 contract (#3172). - TIP-138: Implements the Pedersen hash computation instruction in TVM to support the shielded TRC-20 contract (#3172).</p>"},{"location":"releases/history/#changes_2","title":"Changes","text":"<ul> <li>Check if null before getInstance when get transaction info from DB to fix exception of <code>getTransactioninfoByBlkNum</code> (#3165).</li> </ul>"},{"location":"releases/history/#odyssey-v37","title":"Odyssey-v3.7","text":"<p>Odyssey-v3.7 is a non-mandatory upgrade, includes the following new features and improvements.</p>"},{"location":"releases/history/#modularization","title":"Modularization","text":"<p>Odyssey-v3.7 has modularized the code organization structure, making it much easier for developers to develop customized module\uff0cseveral mainly modules are listed as follows\uff1a</p>"},{"location":"releases/history/#framework","title":"Framework","text":"<p>As the core module, Framework performs as both a gateway to the blockchain and an adhesive that effectively connects all other modules. In other words, the framework module initializes each module and facilitates communication between modules.</p>"},{"location":"releases/history/#protocol","title":"Protocol","text":"<p>The decentralized TRON protocol can be implemented by any teams without limitation of programming languages. Any clients in accordance with the TRON protocol can communicate with each other. A concise and efficient data transfer protocol is essential to a distributed network, even more for the blockchain. So, the implementation of the protocol is based on the Protocol Buffers, an open-source and excellent software protocol maintained by Google.  The specific business logic of the blockchain defined by the protocol includes: - the data format of message\uff0cincluding block, transaction, proposal, witness, vote, account, exchange and so on. - the communication protocols between blockchain nodes, including the node discovery protocol, the node data synchronization protocol, the node scoring protocol and so on. - the interface protocols that the blockchain provides to the external system or clients</p>"},{"location":"releases/history/#consensus","title":"Consensus","text":"<p>The consensus mechanism is an essential part of the blockchain. The TRON blockchain chooses the DPoS as the core consensus mechanism and it has been running steadily for a long time. But replaceable consensus module is essential if we want to redefine the java-tron as the powerful infrastructure for building application-specific blockchains. The developers of blockchain should determine to choose the consensus mechanism that considered to be most suitable to the specific application scenario. The ultimate goal of the replaceable consensus module is that the consensus mechanism can be determined by configuring some necessary parameters. In addition, the developers can implement a customized consensus module as long as several essential interfaces implemented.</p>"},{"location":"releases/history/#crypto","title":"Crypto","text":"<p>Encryption is also one of the core modules of the blockchain. It is the foundation of the blockchain data security. such as public and private key deduction, transaction verification, zero-knowledge proof, etc. The java-tron abstracts the encryption module and supports the replacement of encryption algorithms. A suitable encryption algorithm can be chosen according to different business needs.</p>"},{"location":"releases/history/#actuator","title":"Actuator","text":"<p>Actuator is the core module used for handling various kinds of transactions. As you know, every transaction in the TRON blockchain contains a contract. On a high level, there are two types of contracts in the TRON blockchain, the system contract and the smart contract. A large number of applications are implemented by the smart contracts and ran in an internal virtual machine of the blockchain. Unfortunately, smart contracts are constrained in terms of their functions and not flexible enough to accommodate the needs of complex applications. Customized actuators offer application developers a brand new way of development. They can choose to implant their application codes into the chain instead of running them on virtual machines.</p>"},{"location":"releases/history/#chainbase","title":"Chainbase","text":"<p>Chainbase is specially designed for data storage in the blockchain. Nodes always consider the longest chain to be the correct one and will keep working on extending it. So switching to the longest chain is a common scenario for the blockchain unless it uses a deterministic consensus algorithm like PBFT. For this reason, supporting data rollback is the most distinctive feature of the chainbase module. Several well-designed abstract interfaces are defined in this module. So, the developers can choose the storage engine freely and then implement corresponding interfaces. The LevelDB and RocksDB are two existing implementation.</p>"},{"location":"releases/history/#new-event-subscription-trigger-for-solidified-block","title":"New event subscription trigger for solidified block","text":"<p>Added a subscription trigger for the updating a solidified block, which triggers the solidified block update event to the message queue, so that users can get the latest solidified block information on time. A solidified block is a block that regarded as can not be revocable. So, when the block becomes a solidified block, it means that the transactions packed in this block are accepted by the blockchain.</p>"},{"location":"releases/history/#two-new-http-apis-added","title":"Two new HTTP APIs added","text":"<p>gettransactioninfobyblocknum</p> <p>This api is both added in the context: /wallet &amp; /walletsolidity. * Description: Query the list of information of transactions in a specific block. * Parameter num: the height of the block. * Return: The list of transaction information.</p> <p>broadcasthex</p> <p>/wallet/broadcasthex * Description: broadcast signed transaction with the format of the hex string * Parameter: signed transaction with the format of the hex string * Return: the result of the broadcast</p>"},{"location":"releases/history/#a-new-rpc-api-added","title":"A new RPC API added","text":"<p>Adding the <code>GetTransactionInfoByBlockNum</code> method both in <code>Wallet</code> <code>WalletSolidity</code> services\uff1a <pre><code>rpc GetTransactionInfoByBlockNum (NumberMessage) returns (TransactionInfoList) {\n}\n</code></pre> a code snippet\uff1a <pre><code>NumberMessage.Builder builder = NumberMessage.newBuilder();\nbuilder.setNum(blockNum);\nTransactionInfoList transactionInfoList = blockingStubFull.getTransactionInfoByBlockNum(builder.build());\n</code></pre></p>"},{"location":"releases/history/#odyssey-v365","title":"Odyssey-v3.6.5","text":"<p>Odyssey v3.6.5 Update includes the following new features and improvements   </p>"},{"location":"releases/history/#1-new-delegation-mechanism","title":"1. New delegation mechanism","text":"<p>The new delegation mechanism enables SRs to set commission rates by themselves, which will serve as a reference for users when they vote for SRs. Meanwhile, traceability of the SR\u2019s commission rate on the chain makes the amount of rewards that users receive through voting more transparent. Moreover, the new delegation mechanism lays a foundation for more complex consensus mechanisms and incentive schemes in the near future. </p>"},{"location":"releases/history/#2-fairer-and-more-efficient-staking-rewards-mechanism","title":"2. Fairer and more efficient staking rewards mechanism","text":"<p>Staking rewards are now distributed in a fully-decentralized way, a step forward from the old partially-decentralized mechanism. With this change, staking rewards are now distributed entirely through the blockchain, ensuring complete supervision from the chain and thus true decentralization. Moreover, the new mechanism cuts unnecessary reward distribution transactions, signaling lower bandwidth consumption and higher efficiency on the TRON network.</p>"},{"location":"releases/history/#3-fairer-incentive-mechanism","title":"3. Fairer incentive mechanism","text":"<p>Block rewards decreased from 32 TRX to 16 TRX, while voting rewards increased from 16 TRX to 160 TRX. The adjustment will boost voter turnout in the community, with more TRX locked up by users in the TRON ecosystem. This move is accompanied by the new staking rewards mechanism to guarantee real staking revenues to users.</p>"},{"location":"releases/history/#4-improvement-and-optimization-of-tvm","title":"4. Improvement and optimization of TVM","text":"<p>(1) Added a new VM instruction ISCONTRACT(0xd4), which has made smart contract development more flexible by allowing developers to identify the type of the target address in VMs when writing contracts.  batchvalidatesign(bytes32 hash, bytes[] memory signatures, address[] memory addresses) </p> <p>(2) Adopted a multi-thread method for VMs to verify signatures, which is faster than ecrecover of Ethereum while cutting Energy consumption by half. Contract address: 0x09. To use it in solidity: batchvalidatesign(bytes32 hash, bytes[] memory signatures, address[] memory addresses)  validatemultisign(address accountAddress, uint256 permissionId, bytes32 content, bytes[] signatures)</p> <p>(3) Added a new pre-compiled contract to boost multi-signature verification in TVM, speeding up the verification process and reducing Energy consumption.</p> <p>(4) Banned transfer TRX to smart contract address by two system contract TransferContract and TransferAssetContract. The transfer would fail if the target address is a smart    address when using TransferContract and TransferAssetContract. This can prevent general users from transferring assets to smart contract address by mistake, avoiding users\u2019 asset loss.</p> <p>(5) Allowed automatic activation of inactive accounts when transferring TRX/ TRC10 tokens to accounts in smart contracts. </p> <p>(6) Added triggerConstantContract feature for SolidityNode and FullNode so as to improve the functionality of node APIs.</p>"},{"location":"releases/history/#5-improvement-of-the-dynamic-adjustment-scheme-of-energy-upper-limit","title":"5. Improvement of the dynamic adjustment scheme of Energy upper limit","text":"<p>The method of calculating Energy consumed per unit of time shifted from only calculating the staked Energy consumed to all Energy consumed. With this change, statistics of Energy consumption will be more accurate and effective, providing reference for adjusting Energy upper limit, saving users\u2019 costs of using TRON blockchain network and improving network efficiency.</p>"},{"location":"releases/signature_verification/","title":"Signature Verification of java-tron Release Package","text":"<p>java-tron integrity verification is to check the reliability and integrity of the obtained java-tron executable file through signature verification. Signature verification needs to know three pieces of information: the executable file to be verified, the signature of the file, and the public key corresponding to the private key that signed the file. Signature verification is to reversely deduce the public key corresponding to the signature based on the content and signature of the executable file, and then compare it with the public key issued by TRON. If they are consistent, it means that the java-tron executable file you get is a complete file released by TRON.</p> <p>The version of java-tron released after January 3, 2023 adopts the GPG method for signature and verification, and the version released before January 3, 2023 used the public-private key of a specified TRON account for signature and verification.</p> <ul> <li>Versions released after January 3, 2023: GPG Signature Verification Process</li> <li>Versions released before January 3, 2023: TRON Address Signature Verification Process</li> </ul>"},{"location":"releases/signature_verification/#gpg-signature-verification-process","title":"GPG signature verification process","text":"<p>The java-tron executable file and its signature file are released together, you can get it at here, please follow the below process to verify the signature of the java-tron which released after January 3, 2023.</p>"},{"location":"releases/signature_verification/#install-gpg","title":"Install GPG","text":"<p>If you have already installed GPG, please skip this step. If not, please refer to the following command to install it on MacOS: <pre><code>$ brew install gpg\n</code></pre> On Debian, Ubuntu and other Linux distributions: <pre><code>$ sudo apt install gpg\n</code></pre></p>"},{"location":"releases/signature_verification/#import-public-key","title":"Import public key","text":"<p>If you have imported the public key before, please skip this step, just import the public key once.</p> <p>Please first obtain the public key Hash and uid of the GPG signature of the java-tron release package from here.</p> <p><pre><code>pub: 1254\u00a0F859\u00a0D2B1\u00a0BD9F\u00a066E7\u00a0107D\u00a0F859\u00a0BCB4\u00a04A28\u00a0290B\nuid: build@tron.network\n</code></pre> Import the public key from the GPG public key server to the local according to the public key Hash, the command is: <pre><code>$ gpg --keyserver hkp://keys.openpgp.org --recv-keys \"1254\u00a0F859\u00a0D2B1\u00a0BD9F\u00a066E7\u00a0107D\u00a0F859\u00a0BCB4\u00a04A28\u00a0290B\"\n</code></pre> If the import was successful, you will see the return result like this: <pre><code>gpg: key 785FB96D2C7C3CA5: public key \u201cbuild_tron &lt;build@tron.network&gt;\u201d imported\ngpg: Total number processed: 1\ngpg:        imported: 1\n</code></pre></p>"},{"location":"releases/signature_verification/#signature-verification","title":"Signature verification","text":"<p>For example, if the executable file of a certain version is <code>FullNode.jar</code> and the signature file is <code>FullNode.jar.sig</code>, the signature verification command is:</p> <p><pre><code>$ gpg --verify FullNode.jar.sig FullNode.jar\n</code></pre> If the signature verification is passed, the following will be returned: <pre><code>gpg: Signature made Fri. 1/ 6 12:21:51 2023 CST\ngpg:        using RSA key 1254F859D2B1BD9F66E7107DF859BCB44A28290B\ngpg: Good signature from \u201cbuild_tron &lt;build@tron.network&gt;\u201d [unknown]\ngpg: WARNING: This key is not certified with a trusted signature!\ngpg:     There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: 07B2 3298 AEA4 E006 BD9A 42DE 785F B96D 2C7C 3CA5\nSubkey fingerprint: 1254 F859 D2B1 BD9F 66E7 107D F859 BCB4 4A28 290B\n</code></pre> If the verification fails, it will display the words <code>gpg: BAD signature from \u201cbuild_tron &lt;build@tron.network&gt;\u201d</code>.</p>"},{"location":"releases/signature_verification/#tron-address-signature-verification-process","title":"TRON address signature verification process","text":"<p>The java-tron version released before January 3, 2023 is signed by the TRON account <code>TKeAcHxgErbVXrG3N3TZiSV6AT566BHTj2</code>. The signing steps are as follows: first generate a sha256 hash value for the executable file of the release package, and then use the private key of the TRON account to sign the sha256 hash value. The sha256 hash value can be viewed in the Signatures of historical versions chapter, or in the https://github.com/tronprotocol/java-tron/releases page; the signature result please check in the Signatures of historical versions chapter.</p> <p>tronweb provides the <code>Trx.verifySignature</code> interface to verify the signature. If the verification is passed, it will return true, otherwise, it will return false. Please follow the below process to verify.</p>"},{"location":"releases/signature_verification/#install-tronweb","title":"Install tronweb","text":"<p>If you have already installed tronweb, please skip this step, if not, please refer to the following command to install.</p> <pre><code>npm install -g tronweb\n</code></pre>"},{"location":"releases/signature_verification/#verify-the-integrity-of-the-release-package","title":"Verify the integrity of the release package","text":"<p>Confirm the integrity of the release package by comparing the Hash value of the executable file and the hash value in the release information. Take Odyssey-3.7 version as an example:</p> <ul> <li>The release package file name: <code>FullNode.jar</code> </li> <li>The SHA256 value of the release package: <code>2fca93b09da4ac62641e03838e77fce99b4711ddb0c09aa91656c80fc9556d2e</code></li> <li>Signature\uff1a  <code>21435e32131feb6d00ba8048df04e112e02569ec851064d8ecad2d4dd5da44b7628ddce16823dadfff6fd683fc58cee74964970621a845ee459e2c96a750de551b</code></li> </ul> <p>Execute the following command for verification under MacOS system: <pre><code>$ sha256sum FullNode.jar  \n</code></pre> Execute the following command for verification under Debian, Ubuntu and other Linux distributions: <pre><code>$ shasum -a 256 FullNode.jar (macOS)\n</code></pre></p>"},{"location":"releases/signature_verification/#signature-verification_1","title":"Signature verification","text":"<p>Execute the following command to verify the signature of the release package: <pre><code># Trx.verifySignature(SHA256, ADDRESS, SIGNATURE));\nnode -e 'console.log(require(\"tronweb\").Trx.verifySignature(\n    \"2fca93b09da4ac62641e03838e77fce99b4711ddb0c09aa91656c80fc9556d2e\",\n    \"TKeAcHxgErbVXrG3N3TZiSV6AT566BHTj2\",\n    \"21435e32131feb6d00ba8048df04e112e02569ec851064d8ecad2d4dd5da44b7628ddce16823dadfff6fd683fc58cee74964970621a845ee459e2c96a750de551b\"\n  ))'\n</code></pre></p>"},{"location":"releases/signature_verification/#signatures-of-historical-versions","title":"Signatures of historical versions","text":"<ul> <li>Odyssey-3.7</li> </ul> <pre><code>FullNode sha256sum: 2fca93b09da4ac62641e03838e77fce99b4711ddb0c09aa91656c80fc9556d2e\nFullNode signature: 21435e32131feb6d00ba8048df04e112e02569ec851064d8ecad2d4dd5da44b7628ddce16823dadfff6fd683fc58cee74964970621a845ee459e2c96a750de551b\nSolidityNode sha256sum: fcdea8b3e511306218ba442fb0828f0413574012d646c39c212a59f6ba5844bc\nSolidityNode signature: 6dcad6e02f17467e5cfebeefa0f9963da08e7da10feebefdec47d689fecc30f104c9b7f5e784b883e7ceb786fe55188356c42c306d727fb7819eed2a71f788361c\n</code></pre> <ul> <li>GreatVoyage-4.0.0</li> </ul> <pre><code>FullNode sha256sum: d3f8f9fde64bdefaadae784d09de97172e5e8a3fe539217e12b89963983a530d\nFullNode signature: e788dbaf2fe35f099f65b2403cfb0d7cbe7f4611f8c5ff8151e4bd84ae468d2e541043c9cde9e74500003027ae9f25cdda81a9bcd60abb45ca7a69f965f4dcc71c\nSolidityNode sha256sum: adddf88423c6c31f1f25ed39b10779c24dd7cdcf37f2325c02b2f2ecfc97e1f6\nSolidityNode signature: e3b9859f178f7851dedb7a0a8deb715e5f1e3af10b1064c36f2727ec2b8825510df4fd7b09d7d049204e5df3e8d5b87778e83a15ca96ce786f7977a6cb48bca91b\n</code></pre> <ul> <li>GreatVoyage-4.1.1</li> </ul> <pre><code>FullNode sha256sum: 30e716b86b879af1e006c2b463903ae3835e239e32e2b01c2a1b903a153897fe\nFullNode signature: 5faee65a448bb9aa77835992ca3d24e50d8a76b7934f80664ad38e83179c8114278fdef4494de7231f8e40de86461676a7aa4a54c795f4c692e91d90e156ec471b\nSolidityNode sha256sum: 10a160181053b421109ecace74df5fc0f8860bc8a70181add65fd9a292c35a44\nSolidityNode signature: 1d1413b13adf7778f9a720294eca066ac728ad636d166505276f5ff1f63973c100c04778f937f240f10107edb7de477604857867fc4dbdb68238169c978fc3da1b\n</code></pre> <ul> <li>GreatVoyage-v4.1.2</li> </ul> <pre><code>FullNode sha256sum: 4ded44b6c1a3dbd25212e14ab413142b5463dcbf30a528f83ded529048542547\nFullNode signature: 57a094c1b8a5ec301ef913eb718de2498b5695eb999530863df05252ba8919ba6866c8490e29d36f7dbf34537c898ece5ef0111efb134419c3a5fd6fc9ec03b81c\nSolidityNode sha256sum: 3db36cadbd1f7641aafc8164983f28df4b7ceff8174e090327ed407012cf12cb\nSolidityNode signature: d07604f6811cbed628dd6e5c07880c2fdd3025848fd5365925531c7748467d5228fea2e18326864acc27f3b51c73b364fa44c450d8ec4b5080a7ddb7566724701c\n</code></pre> <ul> <li>GreatVoyage-v4.1.3(Thales)</li> </ul> <pre><code>FullNode sha256sum: c5fb99ad5b024bb7877118f30fb6065f6e6febd11a3cfa241521cbed73cca181\nFullNode signature: d80ec371e791c4316925d80ff3400cf51b14c8a4d4c696b7817c517eb094823622932b45b9b37f9e9657513c3eddb1134fbbb1ee56727c0957e8a3b40c67409b1c\nSolidityNode sha256sum: 4b941d71b561a8b2e0b97d7498823d900eaf287910eea1eaafc649f5aad14036\nSolidityNode signature: f8a8e8d411b009d02986cad1e19e745f8107384a274f146bcae60c570111b13556ff9ab528eb5d1fb4734bd4ef488ade4038781d06ab6420e35f28be6135fe9b1c\n</code></pre> <ul> <li>GreatVoyage-v4.2.0(Plato)</li> </ul> <pre><code>FullNode sha256sum:\nbbf103432be016b582452137b4862140af15ccf7c5daa9be738450705317fdb8\nFullNode signature:\n326701699a5eb8d497eb454b5b74c1559961417fb6f262b4e6314052d73f5977312e0450937fa485236f51f706b434acf8659ce1325d704097c5748629e736ef1c\nSolidityNode sha256sum:\n1db544cbca9dc814683ccf9bef28f7d6ca4469289052230394aaf4e3bcd08615\nSolidityNode signature:\n47fea27df940db0d2a4c0abf6d06969882c027bc4f17449205a28ae5cd25b8ba5339e21f105fe1c25e799d0f4ffea64a15046b9baf5b54341411b5180da439011b\n</code></pre> <ul> <li>GreatVoyage-v4.2.1(Origen)</li> </ul> <pre><code>FullNode sha256sum:\n9888710c915a4027f1bc3dcb1d5d983e0c00d4c438f6fa307d412f62ff6862ea\nFullNode signature:\n6e7d8ef9d033ebf9213118b7511f4ecc5def97442844fbd34de3ef76dd417a0d45da3e2e70fc213475d7fc0a44df1c54732874d858ec980159c5dbffc975680a1c\nSolidityNode sha256sum:\nc70edffa3022e9c25bf845ee978e3500c3ada89b473d895a715acf1738b83f10\nSolidityNode signature:\n0e366acce33bb7c6b02fa143a57d9380c94d3513a9fba8692efe2862a8f7df93156edbddd075f1844f2f81398b14f2db6a03e21f0f6b8ab25649fae4dc16ae731b\n</code></pre> <ul> <li>GreatVoyage-v4.2.2(Lucretius)</li> </ul> <pre><code>FullNode sha256sum:\n8a7f8143b3351ea6b5d8e3dfc857b09256d363d4907ba3ab0288f67f77c2a58f\nFullNode signature:\n71c6300ace5cbf16d78a32aa4602c3f129cb768e32acffaecd17b4134b5955bf37efda1d27025e894e521184a21174e5eddf4e7d1f86761657827795cbddfcfd1c\nSolidityNode sha256sum:\n2d0d5334a232b7b74df8ed3211d9e0ac957894f81e9172010732f2159da261ad\nSolidityNode signature:\n0696f8cb3c65324c4b04f9ecf89d939bf7e1b955144e3fe75eeca6bd4c639e463afbe24e31ae38a6889d4d0649ae03fafeeb7c337b34a36fbac33962f64651671b\n</code></pre> <ul> <li>GreatVoyage-v4.2.2.1(Epictetus)</li> </ul> <pre><code>FullNode sha256sum:\n8bd040a8db16ccba3e957ed3558b82d145928153a53f9688302849658a72f9bc\nFullNode signature:\n3137a8ba8fa5556e4c4a7597aec8f5f46ebb79a64edcf9e2925d2e3314afde3e0f42fd4080e5e4f4d3d1eff263d30478b0322e6dbcc71c43b534f614004b5c561b\nSolidityNode sha256sum:\nee8abd39732e4901828a61124880f1d2eab62f7f3d97150f1e1921bf7da10e54\nSolidityNode signature:\n092b08184677449dd283a31cc486f994166cd9f5ad312a9c80d3e06689ec540774ac9a1334dffeb6412039ed70ee912ead39c4025dd69b688ea9df4dd831b5771c\n</code></pre> <ul> <li>GreatVoyage-v4.3.0(Bacon)</li> </ul> <pre><code>FullNode sha256sum:\nb5e993800cea5ca040758dd6b3c7438def03cbf1358468beb76ea45399a59298\nFullNode signature:\n8da6ac58129d78d948810e4bc7372dd8aef5232bfbc4c33ad8fb21e88314e3d97dd77509e0f03a98da32679495152ccd4a9d07541589822e5cf5d3d4f61877191b\nSolidityNode sha256sum:\n446a4736901958a450e4e95aaca99a63957163854fb32d25eed84600e6996668\nSolidityNode signature:\nc27ffde8ce88ee14689e15a9d5c3fb2d2a9d180ea43b45046131df8ac5481fae2588621b395ad7031ed49d65ddd020b3ce084537e3f527d8a5a979f8c65265561c\n</code></pre> <ul> <li>GreatVoyage-v4.4.0(Rousseau)</li> </ul> <pre><code>FullNode sha256sum:\nbf7f962846f75139dd89ac6da32074cad33b2e172c0749abbed8773cc1ab1a37\nFullNode signature:\n56ed97f3451e3d731f799bad952750d56aa78a9a91a2688b4d6b956328ede7e01bae78037ad6ef1f9c682b566e954dfb958271f006e5cf0dcace5768d76fda6e1b\nSolidityNode sha256sum:\n9dac37763ddf75c07335ec070f837b63ee46b698066dd25c4756ad40f8750d5f\nSolidityNode signature:\ncc4325c085719e3e5045b5c6c2553d7adc9c735419618f7afad06c3a532da0ed46906ae9b2dadb15d7f94150268d5ecdc7fd2741693991586d50da30a8d917071b\n</code></pre> <ul> <li>GreatVoyage-v4.4.1(Protagoras)</li> </ul> <pre><code>FullNode sha256sum:\n4a32918849dc8a7fedcb637ff4939389363726cb16c6a581e39253260668ee04\nFullNode signature:\nfd747f61705ef045143bd2d55b278ca347904323711e2e86b11cf1dd203f198443ab1a399767a570005bd5b2ea283187ccc41557ffb79c959b018e8d798b96f81c\nSolidityNode sha256sum:\nb6a06d3b19f41591bd8c01f35e78b316ab8e9ad4c0740128fc95ba52d3106f34\nSolidityNode signature:\nd2836bda30fd25c89494ae7a12b5357bc9e725c9e2c655fb0a9158a4bee881693ea869defe650b0b4f190458a5268f1c121e73c8305cc81a408e62fca0d234c51b\n</code></pre> <ul> <li>GreatVoyage-v4.4.2(Augustinus)</li> </ul> <pre><code>FullNode sha256sum:\n70eba12350fa21e1b261927093090e7bdf0765592d19433c594149bd3707ef0a\nFullNode signature:\n14430f463e6fab3dd247aca6267b6aaf2f1869b455d95aee297208bd1561c6c67559d9c535e63e74bbef604141cc4ceec78367a75e6ca4d4ceb6513019329c9b1b\nSolidityNode sha256sum:\nf08438e093cc1091859f0ee9dbc7e79b0d5d9068facd4e6485374baa3acf59d1\nSolidityNode signature:\nf3935dfe4af9601cf102c975ed2eebbd4b42160e8746c0d0b21ffbd2fbd4b6f374257b1bc0e948909a9ef343d2cc70671961c8f7a992b6cd123f9ad3c8c323391c\n</code></pre> <ul> <li>GreatVoyage-v4.4.3(Pythagoras)</li> </ul> <pre><code>FullNode sha256sum:\nc07637a1a4a9a289218554f4714caef90032e267b068411c7dd818d4af45e39f\nFullNode signature:\n2bf8d65adf556fe2c04b739c1f4e6e73058914cf642a7806ff85e57be2ff122e35cbf3d67b0bc8bad4fb827198ffd8e06f60111a167ecb0b3db0d8e571b8c67b1c\nSolidityNode sha256sum:\n64f4614160b9330d0a9e984686b66fa16e9aecf7ae16e32b8cc7c32f52694eef\nSolidityNode signature:\ndc0f910555a23667d682a6775588de90592ede44f76a32b12ea8f89fa7dcc937274cc3a44b20da49726323cc9f476d42caa318c338858474f02bf98cc398bca81c\n</code></pre> <ul> <li>GreatVoyage-v4.4.4(Plotinus)</li> </ul> <pre><code>FullNode sha256sum:\n0264d382489dae5bf1d340030c1892b0a7aeb9364cb9380c034e159c9eb9a269\nFullNode signature:\n70cdece8c3510ce4d7d84d5d2c8b53895397c0134d73d681b6b41d4de80d74ce2c2760fdf080ff0ce8c0989246377fca529cb1a2e85e1936755abef4be64f0971b\nSolidityNode sha256sum:\nb58e7b8b0f97eb2a7a0ce5c5aeb2ce070192ca82c96adc8568aabe4f3407d873\nSolidityNode signature:\n26da2e507bbd7e82e0170039cc1c0e42332fb2dfc755aeb385240f0a93125b6c0f1e943ccf1a4e9bfec7fdd4d8a26375a38e030e0b8b69af3e2c181bf08444111b\n</code></pre> <ul> <li>GreatVoyage-v4.4.5(Cicero)</li> </ul> <pre><code>FullNode sha256sum:\n8115e887e5af5768e8ab967f8e7bc024af94bda31be7f3dbc30934b42489d988\nFullNode signature:\n1a02f26eb6065efe5697123528f32ea352d813f9e5acf5936407ad8899c4019539e31b257cafe34b9f8045602f5a4f381b3dd8252a30bb9daf52aeeb078b54711b\nSolidityNode sha256sum:\n95884a07dcbb1531ec7ae20b7162cab3bb9c4bd2e300447c01c4772e02b24a20\nSolidityNode signature:\n8adab9501bbb2a3d9f3055c91e819f86081df9b92228a86afb7f0a27165a42690dbeb50f0f1fd1f7180b51809a291c5ff3860e49f888cf0ba87b401d3dda6e271c\n</code></pre> <ul> <li>GreatVoyage-v4.4.6(David)</li> </ul> <pre><code>FullNode sha256sum:\neaf213f6e6cd9913f9f27bf72a42209c1a0f0fce9841c1d6bd680d879d7d6f85\nFullNode signature:\n064abe833436b3a2e9b66406abf81d12a20f9d28ef669abe7c87c0d750e58cf10c1e65de6fbd0fc368022f93e4c330b42ea9775ead91962480436985c90ad3b11c\nSolidityNode sha256sum:\nc3e9ccc1a4d2aac4c081ae01db86a0901b6f3506e3f8a953315e47ae274a98c1\nSolidityNode signature:\na03d5d6f0e6c6b869f2e545d8c3ff8a4fed569508e9abe4219271d8bf25dfb015e242add8fd2ab6b8b412dd6b393639517957877e8eb7c07ff43a1351a88d62f1b\n</code></pre> <ul> <li>GreatVoyage-v4.5.1(Tertullian)</li> </ul> <pre><code>FullNode sha256sum:\ndb3c75d7854dcf241558c2942b9a582f478c00a88b6f7a7e5ff8a653a8d4c59a\nFullNode signature:\n61ba205f28c3bc7fa228c27e4e3b4d460ef4fad75ca1d38d82540d45eea2d3d720196b607cd45c560db7a749d05bfe8089c61fba5843e98d61fec90f1591f2861b\nSolidityNode sha256sum:\n537a81bd781d416229de5e0875247160f2569c378c8eed703203d0acca5be5f1\nSolidityNode signature:\na736f9de5425562a2af188c547245f9b4da6d793728bc767242e3df75fa104f61ce978b62fc5cea7f6008bdb51faa9510ff5633702cdb1ddca29cb06a18920d21c\n</code></pre> <ul> <li>GreatVoyage-v4.5.2 (Aurelius)</li> </ul> <pre><code>FullNode sha256sum:\n60e959ccde3ff90c10b503bb25edf37684845e358df2ad64b2b330712b30c177\nFullNode signature:\nf2f4b6050e639047857c5b5331eb006dcc9c1e0427bac4ae3d934f7436080785472ead691aa16e6a5aed3c2932fb279ce8ab3580449071b878e0d31fdf01f0371c\nSolidityNode sha256sum:\n4783b8abef12a6c7b8319f3e8960c1d3126edcc521ac1fc3429fe2870cab91b0\nSolidityNode signature:\nafb5db2467ce9f5445679df53e2fecfaed3c4a2d0ca2ba88b65e621aa2d37a9e6aab06b30052a9381087d0164cb5c347d710b2b1c59e6f7c7107deacfd1cfc961b\n</code></pre> <ul> <li>GreatVoyage-v4.6.0 (Socrates)</li> </ul> <pre><code>FullNode sha256sum:\n598589d428085e25c838552970844b0ba00248ad92873bd2ad25b35f37db7a5b\nFullNode signature:\nd3bcfa1bea64b7e58cb94603563cb0c5e47bc20316f61b0dfc966fb64ae846f21b8f917a63328416993f524f4de55ddf5083f163b1fe1b811a9a6f4532725c8e1c\nSolidityNode sha256sum:\nee37a425a84677063b6ea44ed073b8260e336586a61debc10ce0b1544bf7db6a\nSolidityNode signature:\n332c273ef1cdae8dc39c76a83b38750a74b3dd1b915e49698e4ae6870cfed49a1449e8d8db995c7a6be2295e2603efedb0f3e8e906ac7681583c5023b28a521d1b\n</code></pre>"},{"location":"releases/upgrade-instruction/","title":"New Version Deployment Manual of java-tron","text":"<p>For the mandatory upgrade versions, please strictly follow this guide to deploy the new version. For the non-mandatory upgrade ones, you can decide whether to deploy it according to your needs. </p> <p>Please directly refer to java-tron New version deployment Process to upgrade your node. If you have deployed 'Active and Backup nodes', please follow the process of Active and Backup Nodes Upgrade Guide. </p>"},{"location":"releases/upgrade-instruction/#new-version-deployment-process","title":"New version deployment Process","text":"<p>Please follow the below steps to upgrade your FullNode, FullNode that produces blocks to the latest version.</p>"},{"location":"releases/upgrade-instruction/#1-prepare-the-executable-file-of-the-new-version","title":"1. Prepare the executable file of the new version","text":"<p>You can directly download the java-tron executable file, or download the code of the latest version and compile it to get the executable file of the new version. Please download the latest version of the code or jar file to a file directory other than the java-tron running directory:</p> <ul> <li> <p>Way 1: Download the published executable file</p> <p>Directly download the latest version of the executable file FullNode.jar from the release page https://github.com/tronprotocol/java-tron/releases.</p> <p>Before using it, please verify the file signature first to ensure the consistency and integrity of the jar file. For the verification steps, please refer to java-tron Consistency Verification.</p> </li> <li> <p>Way 2: Compile the source code</p> <p>Download the source code and switch to the branch of the new version. <pre><code>$ git clone https://github.com/tronprotocol/java-tron.git\n$ git checkout -b relase_vx.x.x\n</code></pre></p> <p>Compile the project: In the code directory of the new version, execute the following command to compile the project, and the compiled executable file will be generated in the <code>build/libs</code> directory. <pre><code>$ ./gradlew clean build -x test\n</code></pre></p> </li> </ul>"},{"location":"releases/upgrade-instruction/#2-shut-down-the-java-tron-process","title":"2. Shut down the java-tron process","text":"<p>Shut down the node process. Note: If a java-tron node has not been deployed on this machine before, please skip to step 5.</p> <ul> <li> <p>First, get the process ID of the java-tron node through the following command     <pre><code>$ ps -ef | grep java\n</code></pre></p> </li> <li> <p>Shut down the node process     <pre><code>$ kill -15 the process id\n</code></pre></p> </li> </ul>"},{"location":"releases/upgrade-instruction/#3-backup","title":"3. Backup","text":"<p>Please back up the executable file, database, and configuration file before the upgrade in sequence. The backup data is used to restore to the old version when a problem is encountered that leads to fail deploying during the upgrade.</p> <ul> <li>Backup the current executable jar file     <pre><code>$ mv $JAVA_TRON.jar $JAVA_TRON.jar.`date \"+%Y%m%d%H%M%S\"`\n</code></pre></li> <li>Backup the current database <code>output-directory</code> <pre><code>$ tar cvzf output-directory.`date \"+%Y%m%d%H%M%S\"`.etgz output-directory\n</code></pre></li> <li>Backup the current configuration file     <pre><code>$ mv $config.conf $config.conf.`date \"+%Y%m%d%H%M%S\"`\n</code></pre></li> </ul>"},{"location":"releases/upgrade-instruction/#4-replace-old-version-files","title":"4. Replace old version files","text":"<p>After preparing the executable file of the new version and backing up the original node data, please follow the steps below to replace the old files:</p> <ol> <li>Copy the newest jar package obtained in the previous step to the java-tron working directory to replace the old executable file.</li> <li>Replace the old configuration file with the latest configuration file. If you need to modify the configuration, such as adding a keystore file, private key, etc, please modify it yourself.</li> </ol> <p>Note: For the database file, you can use the original database file in the java-tron working directory, or you can choose to use database backup snapshot.</p>"},{"location":"releases/upgrade-instruction/#5-start-the-nodes","title":"5. Start the nodes","text":"<p>The startup commands of FullNode which produces blocks and ordinary FullNode are different, please choose the startup command according to the actual situation:</p> <ul> <li> <p>For the super representative's FullNode, the startup command is:     <pre><code>nohup java -Xmx24g -XX:+UseConcMarkSweepGC  -jar FullNode.jar  -p  private key --witness -c main_net_config.conf &lt;/dev/null &amp;&gt;/dev/null &amp;\n</code></pre>     Note: It is not necessary to use the above command parameter to set the private key. If you use the keystore file or configure the private key in the configuration file, please set it up your way.</p> </li> <li> <p>For a FullNode, the startup command is:     <pre><code>nohup java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar -c   main_net_config.conf &lt;/dev/null &amp;&gt;/dev/null &amp;\n</code></pre></p> </li> </ul>"},{"location":"releases/upgrade-instruction/#6-wait-for-syncing-completion","title":"6. Wait for syncing completion","text":"<p>After the node is successfully started, please wait patiently for the node block synchronization to complete.</p>"},{"location":"releases/upgrade-instruction/#7-upgrade-completed","title":"7. Upgrade completed","text":"<p>After the node is synchronized to the latest block of the network, it means that the deployment of the new version is completed.</p> <p>If you encounter any problems during the upgrade leading to fail deploying the new version, please use the data backed up in the third step to restore to the old version, and give your feedback in GitHub or the community in time to help you complete the deployment of the new version as soon as possible.</p>"},{"location":"releases/upgrade-instruction/#active-and-backup-nodes-upgrade-guide","title":"Active and Backup Nodes Upgrade Guide","text":"<p>To upgrade the active and backup nodes, please follow the steps below:</p> <ol> <li> <p>Upgrade the backup node</p> <p>Upgrade the backup node according to the java-tron new version deployment Process.</p> </li> <li> <p>Shut down the master node</p> <p>After the backup node is successfully upgraded to the new version, please wait for the completion of synchronization of the backup node before shutting down the master node. At this time, the backup node will automatically take over from the master node and become the active node.</p> </li> <li> <p>Upgrade the master node</p> <p>If the backup node works normally, follow java-tron New Version Deployment Process to upgrade the master node. Otherwise, shut down the backup node and start the master node. If an error occurs during the upgrade, please contact TRON technical support team and send the node\u2019s log for root cause analysis.</p> </li> <li> <p>Shut down the backup node</p> <p>After the master node is upgraded and fully synchronized, shut down the backup node. After the backup node shuts down, the master node will take over as the active node again.</p> </li> <li> <p>Start the backup node</p> </li> </ol>"},{"location":"using_javatron/backup_restore/","title":"Data Backup &amp; Restore","text":"<p>Everything <code>java-tron</code> persists gets written inside its data directory. The default data directory is: <code>/output-directory/</code>. If you need to specify other directories, you can add <code>-d</code> or <code>--output-directory</code> parameter to the java-tron node startup command to specify the data storage location.</p> <pre><code>$ java -jar fullnode.jar -d ./outputdir\n</code></pre>"},{"location":"using_javatron/backup_restore/#data-backup","title":"Data Backup","text":"<p>Please shut down the node process before backing up the node data, for details, please refer to the following steps:</p> <p>First, use the command <code>$ ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'</code> to get the process id of java-tron, and then use the command <code>kill -15 process id</code> to kill the process. Or use a stop script like this:</p> <pre><code>#!/bin/bash\nwhile true; do\n  pid=`ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'`\n  if [ -n \"$pid\" ]; then\n    kill -15 $pid\n    echo \"The java-tron process is exiting, it may take some time, forcing the exit may cause damage to the database, please wait patiently...\"\n    sleep 1\n  else\n    echo \"java-tron killed successfully!\"\n    break\n  fi\ndone\n</code></pre> <p>Then, backup the data by the following command.</p> <pre><code>$ tar cvzf output-directory.`date \"+%Y%m%d%H%M%S\"`.etgz output-directory\n</code></pre>"},{"location":"using_javatron/backup_restore/#data-restore","title":"Data Restore","text":"<p>When restoring the data, just copy the corresponding backup data to the node directory. Take the database backup file name <code>output-directory.20220628152402.etgz</code> as an example, the command to restore the database file is:</p> <pre><code>$ tar xzvf output-directory.20220628152402.etgz\n</code></pre>"},{"location":"using_javatron/backup_restore/#public-backup-data","title":"Public Backup Data","text":"<p>For the TRON mainnet and Nile testnet, since the amount of data to be synchronized is large after the new node is started, it takes a long time to synchronize the data. In order to facilitate rapid node deployment for developers, the community provides data snapshots on a regular basis. A data snapshot is a compressed file of the database backup of a TRON network node at a certain time. Developers can download and use the data snapshot to speed up the node synchronization process.</p>"},{"location":"using_javatron/backup_restore/#main-net-data-snapshot","title":"Main Net Data Snapshot","text":""},{"location":"using_javatron/backup_restore/#fullnode-data-snapshot","title":"FullNode Data Snapshot","text":"<p>The following table shows the download address of Fullnode data snapshots. Please select a suitable data snapshot according to the location and node database type, and whether you need to query historical internal transactions.</p> Fullnode Data Source Download site Description Official data source (North America: Virginia) http://34.86.86.229/ LevelDB, exclude internal transactions Official data source (Singapore) http://34.143.247.77/ LevelDB, exclude internal transactions Official data source (North America: America) http://35.197.17.205/ RocksDB, exclude internal transactions Official data source (Singapore) http://35.247.128.170/ LevelDB, include internal transactions Official data source ((North America: Virginia)) http://34.48.6.163/ LevelDB, exclude internal transactions, include account history TRX balance <p>Note\uff1aThe data of LevelDB and RocksDB are not allowed to be mixed. The database can be specified in the config file of the full node, set db.engine to LEVELDB or ROCKSDB. </p>"},{"location":"using_javatron/backup_restore/#lite-fullnode-data-snapshot","title":"Lite FullNode Data Snapshot","text":"<p>The TRON Public Chain has supported the type of the Lite FullNode since the version of GreatVoyage-v4.1.0 release. All the data required by the Lite FullNode for running is whole of the status data and a little essential block data, so, it is much more lightweight (smaller database and faster startup) than the normal FullNode. TRON officially offers database snapshots of the Lite FullNode.</p> Lite Fullnode Data Source Download site Description Official data source (Singapore) http://34.143.247.77/ LevelDB <p>Tips: You can split the data from the whole data with the help of the Lite FullNode Data Pruning Tool.</p>"},{"location":"using_javatron/backup_restore/#use-the-data-snapshot","title":"Use the Data Snapshot","text":"<p>The steps for using data snapshots are as follows:</p> <ol> <li>Download the corresponding compressed backup database according to your needs.</li> <li>Decompress the compressed file of the backup database to the output-directory directory or to the corresponding directory according to your needs.</li> <li>Startup the node. The node reads the output-directory directory by default. If you need to specify another directory\uff0cplease add the <code>-d directory</code> parameter when the node starts.</li> </ol>"},{"location":"using_javatron/backup_restore/#nile-testnet-data-snapshot","title":"Nile TestNet Data Snapshot","text":"<p>For detailed information about the Nile TestNet data snapshot, please refer to the official website, for both FullNode and Lite FullNode. The usage method is the same as that of the Main Net.</p>"},{"location":"using_javatron/connecting_to_tron/","title":"Connect to TRON network","text":"<p>The TRON network is mainly divided into the main network, the Shasta test network, the Nile test network and the private network. Therefore, for the java-tron client software, it can be connected to any TRON network by modifying the configuration items in the configuration file. At present, the Shasta testnet does not support adding a new node, but the Nile testnet supports it.</p> <p>You need to set the following configuration items to connect java-tron to one of the TRON networks:</p> <ul> <li><code>node.p2p.version</code> : It is used to set the P2P network id. Only nodes with the same network id can shake hands successfully.<ul> <li>TRON mainnet: <code>node.p2p.version=11111</code></li> <li>Nile testnet: <code>node.p2p.version = 201910292</code></li> <li>Private network\uff1aset to other values</li> </ul> </li> <li><code>seed.node</code>: set seed node</li> <li><code>genesis.block</code>: Genesis block settings. To join a network, please ensure that the settings of the genesis block are the same as those of other nodes in the network, otherwise you cannot join the network.</li> </ul>"},{"location":"using_javatron/connecting_to_tron/#find-peers","title":"Find peers","text":"<p>java-tron continuously attempts to connect to other nodes on the network until it has enough peers, at the same time, it will also accept connections from other nodes. java-tron finds peers using the discovery protocol. In the discovery protocol, nodes exchange connectivity details and then establish sessions and exchange TRON data. </p> <p>If you want java-tron node to do node discovery, you need to enable the node discovery service in the node configuration file first:</p> <p><pre><code>node.discovery = {\n  enable = true\n  ...\n}\n</code></pre> Then, for the new node that joins the TRON network, you can configure the <code>seed node</code> to make it easier for the current node to connect to the peer node, and then obtain the address information of other nodes through the peer node. Generally, the seed nodes are set as stable online fullnodes. For the TRON main network, community public nodes can be used as seed nodes, for example:</p> <pre><code>seed.node = {\n  # List of the seed nodes\n  # Seed nodes are stable full nodes\n\n  ip.list = [\n    \"3.225.171.164:18888\",\n    \"52.53.189.99:18888\",\n    \"18.196.99.16:18888\",\n    \"34.253.187.192:18888\",\n    \"18.133.82.227:18888\",\n    \"35.180.51.163:18888\",\n    \"54.252.224.209:18888\",\n    \"18.231.27.82:18888\",\n    \"52.15.93.92:18888\",\n    \"34.220.77.106:18888\",\n    \"15.207.144.3:18888\",\n    \"13.124.62.58:18888\",    \n    \"54.151.226.240:18888\",\n    \"35.174.93.198:18888\",\n    \"18.210.241.149:18888\",\n    \"54.177.115.127:18888\",\n    \"54.254.131.82:18888\",\n    \"18.167.171.167:18888\",\n    \"54.167.11.177:18888\",\n    \"35.74.7.196:18888\",\n    \"52.196.244.176:18888\",\n    \"54.248.129.19:18888\",\n    \"43.198.142.160:18888\",\n    \"3.0.214.7:18888\",\n    \"54.153.59.116:18888\",\n    \"54.153.94.160:18888\",\n    \"54.82.161.39:18888\",\n    \"54.179.207.68:18888\",\n    \"18.142.82.44:18888\",\n    \"18.163.230.203:18888\"\n  ]\n}\n</code></pre> <p>There are scenarios where disabling the discovery process is useful, for example for running a local test node or an experimental test network with known, fixed nodes. This can be configured by <code>node.discovery.enable = false</code> to close the node discovery process.</p>"},{"location":"using_javatron/connecting_to_tron/#peers-limit","title":"Peers limit","text":"<p><code>node.maxActiveNodes</code> indicates the maximum number of connections between the node and other nodes, the default value is 30. Setting a larger value can enable nodes to establish more connections, join the network more efficiently, and broadcast more efficiently. However, the bandwidth required to maintain the connection is also higher and the performance consumption is higher. Therefore, please set it according to the actual situation.</p> <pre><code>node {\n    maxActiveNodes = 30\n}\n</code></pre>"},{"location":"using_javatron/connecting_to_tron/#active-and-passive-connections","title":"Active and passive connections","text":"<p>java-tron supports setting its actively connected nodes <code>node.active</code> as well as passively connected nodes <code>node.passive</code>. Configuring <code>node.active</code> and <code>node.passive</code> can greatly help improve the stability of the network connection of the node.</p> <p>When java-tron starts, it will actively establish a connection with the peer node in <code>node.active</code>.</p> <pre><code>node {\n  active = [\n    # Active establish connection in any case\n    # Sample entries:\n    # \"ip:port\",\n    # \"ip:port\"\n  ]\n }\n</code></pre> <p>When a node in <code>node.passive</code> actively establishes a connection with the current node, the current node will accept it unconditionally.</p> <pre><code>node {\n  passive = [\n    # Passive accept connection in any case\n    # Sample entries:\n    # \"ip:port\",\n    # \"ip:port\"\n  ]\n }\n</code></pre>"},{"location":"using_javatron/connecting_to_tron/#log-and-network-connection-verification","title":"Log and network connection verification","text":"<p>The java-tron node log is <code>/logs/tron.log</code> in the java-tron installation directory. Under the java-tron installation directory, you can use the following commands to view the latest log of the node and check the block synchronization status of the node:</p> <pre><code>$ tail -f /logs/tron.log/\n</code></pre> <p>You will see the below block synchronization logs if java-tron is running as expected. </p> <p><pre><code>15:41:48.033 INFO  [nioEventLoopGroup-6-2] [DB](Manager.java:1208) pushBlock block number:76, cost/txs:13/0 false\n15:41:48.033 INFO  [nioEventLoopGroup-6-2] [net](TronNetDelegate.java:255) Success process block Num:76,ID:000000000000004c9e3899ee9952a7f0d9e4f692c7070a48390e6fea8099432f.\n</code></pre> For the super representative's fullnode, you will see the following producing blocks log:</p> <p><pre><code>02:31:33.008 INFO  [DPosMiner] [DB](Manager.java:1383) Generate block 79336 begin\n02:31:33.059 INFO  [DPosMiner] [DB](SnapshotManager.java:315) flush cost:51, create checkpoint cost:49, refresh cost:2\n02:31:33.060 INFO  [DPosMiner] [DB](Manager.java:1492) Generate block 79336 success, trxs:0, pendingCount: 0, rePushCount: 0, postponedCount: 0\n</code></pre> If no error messages are reported in the node logs, means everything is fine. You can also send an http request to check whether the node has been started, and to view the status of the node: including the node configuration information, the information about the machine where the node is located, the connection status of the node peers, etc.</p> <pre><code>$ curl http://127.0.0.1:16887/wallet/getnodeinfo\n</code></pre> <p>Returns\uff1a</p> <p><pre><code>{\n    \"activeConnectCount\": 3,\n    \"beginSyncNum\": 42518346,\n    \"block\": \"Num:42518365,ID:000000000288c75d1967232f1efe606ff90b9dd76660d7de8cc091849be6bf10\",\n    \"cheatWitnessInfoMap\": {\n        ...\n    },\n    \"configNodeInfo\": {\n        ...\n        \"codeVersion\": \"4.5.1\",\n        \"dbVersion\": 2,\n        \"discoverEnable\": true,\n        \"listenPort\": 18888,\n        ...\n    },\n    \"currentConnectCount\": 18,\n    \"machineInfo\": {\n        ...\n    },\n    \"passiveConnectCount\": 15,\n    \"peerList\": [\n        ...\n    ],\n    \"solidityBlock\": \"Num:42518347,ID:000000000288c74b723398aef104c585bad1c7cbade7793c5551466bd916feee\",\n    \"totalFlow\": 8735314\n}\n</code></pre> In order for users to interact with the TRON network, the java-tron node must be running and in a normal state of synchronization. Whether the node is synchronized with other nodes in the network, you can query the current block height in Tronscan and compare it with the result of <code>/wallet/getnowblock</code> queried from the local java-tron node. If they are equal, it means that the synchronization status of the local node is normal.</p>"},{"location":"using_javatron/connecting_to_tron/#connection-problems","title":"Connection problems","text":"<p>There are occasions when java-tron simply fails to connect to peers. The common reasons for this are:</p> <ul> <li>Local time might be incorrect. An accurate clock is required to participate in the TRON network. The local clock can be resynchronized using commands such as <code>sudo ntpdate -s time.nist.gov</code>.</li> <li>Some firewall configurations can prohibit UDP traffic. But the node discovery service is based on the UDP protocol, so you can make it possible to let the node connect to the network by configuring <code>node.active</code> in the case of node discovery invalid.</li> <li>By configuring <code>node.passive</code> to accept active connections from trusted nodes.</li> <li>The Shasta testnet does not currently support nodes joining the network. If you need to run nodes to join the public testnet, you can choose the Nile testnet.</li> </ul>"},{"location":"using_javatron/connecting_to_tron/#connect-to-private-network","title":"Connect to private network","text":"<p>It is often useful for developers to connect to private test networks rather than public testnets or TRON mainnet. Because the private chain not only has no requirements for machine configuration, but also in the sandbox environment of the private chain network, it is easier to test various functions, and it gives freedom to break things without real-world consequences. </p> <p>The private chain network needs to configure the configuration item <code>node.p2p.version</code> in the private chain configuration file to a value which is not used by any other existing public network (TRON mainnet, testnet). For detailed instructions on private chain construction, please refer to Private Chain Network.</p>"},{"location":"using_javatron/installing_javatron/","title":"Deploy a java-tron Node","text":"<p>java-tron nodes support to be deployed on <code>Linux</code> or <code>MacOS</code> operating systems, and rely on <code>Oracle JDK 1.8</code>, other versions of JDK are not supported.</p> <p>The minimum hardware configuration required to run a java-tron node is <code>8-core CPU</code>, <code>16G memory</code>, <code>2T SDD</code>, the recommended configuration is: <code>16-core CPU</code>, <code>32G memory</code>, <code>2.5T+ SDD</code>. The fullnode running by super representative to produce block recommends <code>32-core CPU</code> and <code>64G memory</code>.</p>"},{"location":"using_javatron/installing_javatron/#compile-the-source-code","title":"Compile the Source Code","text":"<p>First, clone the java-tron repository to the local with the following git command, and switch to the <code>master</code> branch. Before executing the command, make sure you have installed the <code>git</code> tool.</p> <pre><code>$ git clone https://github.com/tronprotocol/java-tron.git\n$ git checkout -t origin/master\n</code></pre> <p>Then, compile the java-tron source code by executing the following command. The parameter <code>-x test</code> means to skip the execution of the test case. You can also remove this parameter to execute the test code during the compilation process, which will make the compilation time longer. After the compilation is complete, FullNode.jar will be generated in the <code>java-tron/build/libs/</code> directory.</p> <pre><code>$ cd java-tron\n$ ./gradlew clean build -x test\n</code></pre>"},{"location":"using_javatron/installing_javatron/#startup-a-java-tron-node","title":"Startup a java-tron Node","text":"<p>You can choose different configuration files to connect java-tron nodes to different networks. The mainnet configuration file is: main_net_config.conf, other network configuration files can be found here.</p>"},{"location":"using_javatron/installing_javatron/#startup-a-fullnode","title":"Startup a fullnode","text":"<p>Fullnode has full historical data, it is the entry point into the TRON network , it provides HTTP API and gRPC API for external query. You can interact with the TRON network through fullnode\uff1atransfer assets, deploy contracts, interact with contracts and so on. The mainnet fullnode startup command is as follows, and the configuration file of the fullnode is specified by the <code>-c</code> parameter: </p> <pre><code>$  java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar -c main_net_config.conf\n</code></pre> <ul> <li>-XX:+UseConcMarkSweepGC  \uff1aSpecifies parallel garbage collection. To be placed before the -jar parameter, not at the end. </li> <li>-Xmx  \uff1aThe maximum value of the JVM heap, which can be set to 80% of the physical memory.</li> </ul>"},{"location":"using_javatron/installing_javatron/#startup-a-fullnode-that-produces-blocks","title":"Startup a fullnode that produces blocks","text":"<p>Adding the <code>--witness</code> parameter to the startup command, fullnode will run as a node which produces blocks. In addition to supporting all the functions of fullnode, the block-producing fullnode also supports block production and transaction packaging. Please make sure you have a super representative account and get the votes of others. If the votes ranks in the top 27, you need to start a full node that produces blocks to participate in block production.</p> <p>Fill in the private key of the super representative address into the <code>localwitness</code> list in the main_net_config.conf, below is an example. But if you don't want to use this way of specifying the private key in plain text, you can use the keystore + password method, please refer to Others chapter.</p> <pre><code>localwitness = [\n    650950B193DDDDB35B6E48912DD28F7AB0E7140C1BFDEFD493348F02295BD812\n]\n</code></pre> <p>then run the following command to start the node:</p> <pre><code>$ java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar --witness -c main_net_config.conf\n</code></pre> <p>Note: For the mainnet and nile testnet, since the amount of data to be synchronized is large after the new node is started, it will take a long time to synchronize the data. You can use Data Snapshots to speed up node synchronization. First download the latest data snapshot and extract it to the <code>output-directory</code> directory of the TRON project, and then start the node, so that the node will synchronize on the basis of the data snapshot.</p>"},{"location":"using_javatron/installing_javatron/#others","title":"Others","text":""},{"location":"using_javatron/installing_javatron/#how-to-use-keystore-password-to-specify-the-privatekey-of-witness-account","title":"How to use <code>keystore + password</code> to specify the privatekey of witness account","text":"<ol> <li>You should not use the nohup command because the interaction is required when running the node. It is recommended to use session keeping tools such as screen, tmux, etc.</li> <li>Comment the <code>localwitness</code> item in main_net_config.conf and uncomment the <code>localwitnesskeystore</code> item. Fill in the path of the Keystore file. Note that the Keystore file needs to be placed in the current directory where the startup command is executed or its subdirectory. If the current directory is \"A\", the directory of the Keystore file is \"A/B/localwitnesskeystore.json\", it needs to be configured as:     <pre><code>localwitnesskeystore = [\n      \"B/localwitnesskeystore.json\"\n]\n</code></pre> Note: For <code>keystore + password</code> generation, you can use the register wallet command of the wallet-cli.</li> <li>Startup the fullnode which produces blocks     <pre><code>    $ java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar --witness -c main_net_config.conf\n</code></pre></li> <li>Enter the password correctly to finish the node startup.</li> </ol>"},{"location":"using_javatron/installing_javatron/#optimize-memory-allocation-with-tcmalloc","title":"Optimize Memory Allocation with tcmalloc","text":"<p>Memory allocation of java-tron can be optimized with tcmalloc. The method is as follows:</p> <p>First install tcmalloc, then add the following two lines to the startup script, the path of tcmalloc is slightly different for different Linux distributions.</p> <pre><code>#!/bin/bash\n\nexport LD_PRELOAD=\"/usr/lib/libtcmalloc.so.4\"\nexport TCMALLOC_RELEASE_RATE=10\n\n# original start command\njava -jar .....\n</code></pre> <p>Instructions for each Linux distributions are as belows:</p> <ul> <li> <p>Ubuntu 20.04 LTS / Ubuntu 18.04 LTS / Debian stable     Install</p> <pre><code>$ sudo apt install libgoogle-perftools4\n</code></pre> <p>In the startup script add the following:</p> <pre><code>export LD_PRELOAD=\"/usr/lib/x86_64-linux-gnu/libtcmalloc.so.4\"\nexport TCMALLOC_RELEASE_RATE=10\n</code></pre> </li> <li> <p>Ubuntu 16.04 LTS     Same install command as above. In the startup script add the following:</p> <pre><code>export LD_PRELOAD=\"/usr/lib/libtcmalloc.so.4\"\nexport TCMALLOC_RELEASE_RATE=10\n</code></pre> </li> <li> <p>CentOS 7   Install     <pre><code>$ sudo yum install gperftools-libs\n</code></pre>     In the startup script add the following:     <pre><code>export LD_PRELOAD=\"/usr/lib64/libtcmalloc.so.4\"\nexport TCMALLOC_RELEASE_RATE=10\n</code></pre></p> </li> </ul>"},{"location":"using_javatron/litefullnode/","title":"Lite FullNode","text":"<p>Lite FullNode runs the same code with FullNode, the difference is that Lite FullNode only starts based on state data snapshot, which only contains all account state data and historical data of the latest 65536 blocks. The state data snapshot is small, only about 3% of the FullNode data. Therefore, Lite Fullnode has the advantages of occupying less disk space and starting up fast, but it does not provide historical block and transaction data query by default, and only provides part of HTTP API and GRPC API of FullNode. For APIs that are not supported by Lite Fullnode, please refer to HTTP, GRPC. But these APIs can be opened by configuring <code>openHistoryQueryWhenLiteFN = true</code> in the configuration file, because after the Lite Fullnode startup, the saved data by the Lite Fullnode is exactly the same as that of the FullNode, so after this configuration item is turned on, the Lite Fullnode supports querying the block data synchronized after the node startup, but still does not support querying the block data before the node startup.</p> <p>Therefore, if developers only need to use node for block synchronization, processing and broadcasting transactions, or only query the blocks and transactions synchronized after the node starts up, then Lite Fullnoe will be a better choice.</p>"},{"location":"using_javatron/litefullnode/#lite-fullnode-deployment","title":"Lite FullNode Deployment","text":"<p>The deployment steps and startup command of a Lite fullnode are the same as fullnode's, please refer to Deployment Instructions to deploy a Lite Fullnode. The only difference is the database. You need to obtain the Lite Fullnode database. You can download the Lite Fullnode data snapshot from the public backup data and use it directly; or use the Lite Fullnode data pruning tool to convert the Fullnode database to Lite Fullnode database.</p>"},{"location":"using_javatron/litefullnode/#lite-fullnode-maintenance","title":"Lite FullNode Maintenance","text":"<p>Since the Lite Fullnode will save the same data as the FullNode's after startup, although the data volume of the Lite Fullnode is very small at startup, the data expansion rate in the later period is the same as that of the FullNode, so it may be necessary to periodically cut the data. Pruning Lite Fullnode data is also to use Lite Fullnode data pruning tool to split Lite Fullnode data into snapshot dataset, that is, to obtain the pruned Lite Fullnode data.</p>"},{"location":"using_javatron/metrics/","title":"java-tron Node Metrics Monitoring","text":"<p>Starting from the GreatVoyage-4.5.1 (Tertullian) version, the node provides a series of interfaces compatible with the prometheus protocol, so that the node deployer can monitor the health status of the node more conveniently. If you want to monitor various indicators of the node, you first need to deploy a prometheus service to communicate with the java-tron node, and obtain the indicator data of the node through the node interface. Then you need to deploy a visualization tool, such as Grafana, to display the node data obtained by prometheus in the form of a graphical interface. The following will introduce the deployment process of the java-tron node monitoring system in detail.</p>"},{"location":"using_javatron/metrics/#configure-java-tron","title":"Configure java-tron","text":"<p>To use the Prometheus tool to monitor the java-tron node, you first need to enable prometheus metric monitoring in the node configuration file and set the http port:</p> <pre><code>node {\n  ... ...\n  p2p {\n    version = 11111 # 11111: mainnet; 20180622: testnet\n  }\n ####### add for prometheus start.\n metrics{\n  prometheus{\n  enable=true \n  port=\"9527\"\n  }\n }\n ####### add for prometheus end.\n}\n</code></pre>"},{"location":"using_javatron/metrics/#start-java-tron-node","title":"Start java-tron node","text":"<p>Start java-tron node using below command\uff1a</p> <pre><code>$  java -Xmx24g -XX:+UseConcMarkSweepGC -jar FullNode.jar -c main_net_config.conf\n</code></pre>"},{"location":"using_javatron/metrics/#deploy-prometheus-service","title":"Deploy prometheus service","text":"<p>prometheus officially provides precompiled binaries and docker images, you can download them directly from the official website or pull the docker images on dockerhub. For more detailed installation and configuration instructions, Please refer to the prometheus documentation. As a simple deployment instruction, this article will adopt the docker image deployment:</p> <ol> <li> <p>After installing docker, enter the following command to pull the prometheus image:</p> <pre><code>$ docker pull prom/prometheus\n</code></pre> </li> <li> <p>Download the prometheus configuration file</p> <p>The following is a prometheus configuration file template <code>prometheus.yaml</code>: <pre><code>global:\n  scrape_interval: 30s\n  scrape_timeout: 10s\n  evaluation_interval: 30s\nscrape_configs:\n- job_name: java-tron\n  honor_timestamps: true\n  scrape_interval: 3s\n  scrape_timeout: 2s\n  metrics_path: /metrics\n  scheme: http\n  follow_redirects: true\n  static_configs:\n  - targets:\n    - 127.0.0.1:9527\n    labels:\n      group: group-xxx\n      instance: xxx-01\n  - targets:\n    - 172.0.0.2:9527\n    labels:\n      group: group-xxx\n      instance: xxx-02\n</code></pre> You can download and use this template and modify the configuration items <code>targets</code>, it is used to configure the ip and prometheus port of the java-tron node. If you deploy multiple java-tron nodes, you can configure multiple <code>targets</code> to monitor multiple nodes.</p> </li> <li> <p>Start a Prometheus container</p> <p>Start a Prometheus container with the following command and specify to use the user-defined configuration file in the previous step:<code>/Users/test/deploy/prometheus/prometheus.yaml</code> </p> <pre><code>$ docker run --name prometheus \\\n    -d -p :9090:9090 \\\n    -v  /Users/test/deploy/prometheus/prometheus.yaml:/etc/prometheus/prometheus.yml \\\n    prom/prometheus:latest\n</code></pre> <p>After the container starts, you can view the running status of the prometheus service through <code>http://localhost:9090/</code>.</p> <p>Click \"Status\" -&gt; \"Configuration\" to check whether the configuration file used by the container is correct:</p> <p></p> <p>Click \"Status\" -&gt; \"Targets\" to view the status of each monitored java-tron node:</p> <p></p> <p>In this example, the status of the first endpoint is <code>UP</code>, which means that Prometheus can fetch the data of this node normally. The second endpoint, whose status is <code>DOWN</code>, indicates an exception. For details, please refer to the description in \"Error\".</p> <p>When the status of the monitored java-tron nodes is normal, you can monitor the indicator data through visualization tools such as Grafana or Promdash, etc. This article will use grafana to display the data:</p> </li> </ol>"},{"location":"using_javatron/metrics/#deploy-grafana","title":"Deploy Grafana","text":"<p>The deployment process of the Grafana visualization tool is as follows:</p> <ol> <li> <p>Install Grafana     Please refer to the official documentation to install Grafana. This article will adopt the docker image deployment, and the pulled image version is the open source version:</p> <pre><code>$ docker pull grafana/grafana-oss\n</code></pre> </li> <li> <p>Start Grafana</p> <p>You can use the below command to start Grafana: <pre><code>$ docker run -d --name=grafana -p 3000:3000 grafana/grafana-oss\n</code></pre></p> </li> <li> <p>Log in to the Grafana web UI</p> <p>After startup, you can login the Grafana web UI through <code>http://localhost:3000/</code>. The initial user name and password are both <code>admin</code>. After login, change the password according to the prompts, and then you can enter the main interface. Click the settings icon on the left side of the main page and select \"Data Sources\" to configure Grafana's data sources:</p> <p></p> <p>Enter the ip and port of the prometheus service in <code>URL</code>:</p> <p></p> <p>Then click the \"Save &amp; test\" button at the bottom of the page to save the settings. After clicking save, Grafana will detect the connection with the data source, and if the connection is successful, you will find the words <code>Data source is working</code>.</p> </li> <li> <p>Import Dashboard</p> <p>Grafana's dashboard needs to be configured. For the convenience of java-tron node deployers, the TRON community provides a comprehensive dashboard configuration file java-tron-template_rev1.json, which you can download directly and then import into Grafana.</p> <p>Click the Dashboards icon on the left, then select \"+Import\", then click \"Upload JSON file\" to import the downloaded dashboard configuration file:</p> <p></p> <p>Then you can see the following types of monitoring metrics on the dashboard, and monitor the running status of the nodes in real time:</p> <p></p> </li> </ol>"},{"location":"using_javatron/private_network/","title":"Private Network","text":"<p>To build a private chain, it is necessary to deploy at least one fullnode running by SR to produces blocks, and any number of fullnodes to synchronize blocks and broadcast transactions. Only one SR node and one fullnode are set up in this example. Before the deployment, please install the <code>Oracle JDK 1.8</code> first, and then you need to prepare at least two TRON network address and save the address and private key. You can use wallet-cli or Tronlink to create address.</p>"},{"location":"using_javatron/private_network/#deployment-guide","title":"Deployment Guide","text":"<p>The process of building a node on private chain is the same as that on mainnet. The difference is the content of the node configuration file. The most important step to build a private chain is to modify the configuration items in the configuration file, so that the nodes can form a private network for node discovery, block synchronization and broadcast transactions.</p> <ol> <li> <p>Create deployment directory</p> <p>Create deployment directory, it is recommended to put the two fullnodes in different directories.   <pre><code>$ mkdir SR\n$ mkdir FullNode\n</code></pre></p> </li> <li> <p>Obtain FullNode.jar</p> <p>Obtain FullNode.jar, then put it into the SR and FullNode directories respectively.  <pre><code>$ cp FullNode.jar ./SR\n$ cp FullNode.jar ./FullNode\n</code></pre></p> </li> <li> <p>Obtain the node's config file private_net_config.conf</p> <p>Obtain the node's config file private_net_config.conf, then put it into the SR and FullNode directories respectively, and modify the file names respectively to supernode.conf, fullnode.conf.   <pre><code>$ cp private_net_config.conf ./SR/supernode.conf\n$ cp private_net_config.conf ./FullNode/fullnode.conf\n</code></pre></p> </li> <li> <p>Modify the configuration file of each node</p> <p>Please modify each configuration item of the node in turn according to the instructions in the following table:</p> Config Item SR Fullnode FullNode Description localwitness The private key of witness address Please do not fill in data Generating blocks requires signing with a private key genesis.block.witnesses Witness address The same as SR node's Genesis block related configuration genesis.block.Assets Preset TRX for specific accounts. Add the pre-prepared address to the end and specify its TRX balance as needed The same as SR node's Genesis block related configuration p2p.version any positive integer except for 11111 the same as SR node's Only nodes of the same p2p version can shake hands successfully seed.node Please do not fill in data Change the seed.node ip.list in the configuration file to the IP address and the port (<code>listen.port</code>) of the SR Enables fullnode to establish connection with SR node and synchronize data needSyncCheck false true Set the first SR\u2019s needSyncCheck to false, other SRs true node.discovery.enable true true If it is false, the current node will not be discovered by other nodes block.proposalExpireTime 600000 The same as SR node's The default proposal effective time is 3 days: 259200000 (ms), if you want to quickly pass the proposal, you can set this item to a smaller value, such as 10 minutes, that is, 600000ms block.maintenanceTimeInterval 300000 The same as SR node's The default maintenance time interval is 6 hours: 21600000 (ms), if you want to pass the proposal quickly, you can set this item to a smaller value, such as five minutes, that is, 300000ms. committee.allowSameTokenName 1 1 Allow same token name committee.allowTvmTransferTrc10 1 1 Allow tvm transfer TRC10 </li> <li> <p>Modify the port in the configuration file, and configure the SR and FullNode with different port numbers. Note, this step is only required if SR and FullNode are running on the same machine, otherwise, this step can be skipped.</p> <ul> <li><code>listen.port</code> \uff1a p2p listen port</li> <li><code>http</code> port\uff1a Http listen port</li> <li><code>rpc</code> port\uff1a rpc listen port</li> </ul> </li> <li> <p>Startup the node</p> <p>The fullnode that produces blocks has the different startup command with the fullnodes that do not produce blocks:</p> <ul> <li>Fullnode that produces blocks   <pre><code>$ java -Xmx6g -XX:+HeapDumpOnOutOfMemoryError -jar FullNode.jar  --witness  -c supernode.conf\n</code></pre></li> <li>Fullnode   <pre><code>$ java -Xmx6g -XX:+HeapDumpOnOutOfMemoryError -jar FullNode.jar  -c fullnode.conf\n</code></pre></li> </ul> </li> <li> <p>Modify the dynamic parameters of the private chain</p> <p>Dynamic parameters can be obtained by getchainparameters. The main network's current dynamic parameters and committee proposals related to them can be seen here, dynamic parameters are called network parameters here.</p> <p>If you want all the dynamic parameters of your private network to be the same with the main network, maybe dbfork which could capture the latest status of Mainnet is what you are interested in.</p> <p>If you want to modify part of dynamic parameters, there are two ways to choose from:</p> <ul> <li> <p>Configure File   Some dynamic parameters can be directly set through configure file. These dynamic parameters can be seen here.   Below is an example of modifying dynamic parameters through configure file.   <pre><code>committee = {\n  allowCreationOfContracts = 1\n  allowAdaptiveEnergy = 0\n  allowMultiSign = 1\n  allowDelegateResource = 1\n  allowSameTokenName = 0\n  allowTvmTransferTrc10 = 1\n}\n</code></pre></p> </li> <li> <p>Proposal   Any witness(SR, SR partner, SR candidate) is entitled to create a proposal, SRs also have the right to vote for the proposal. A witness uses proposalcreate to create a proposal, and then SRs use proposalapprove to approve the proposal(Proposals only support voting for yes, super representatives do not vote means they do not agree with the proposal). Below is an code example of modifying two dynamic parameters through a committee proposal. In proposalcreate, dynamic parameters are represented by numbers, the mapping between number and string name of dynamic parameters can be seen here.   <pre><code>var TronWeb = require('tronweb');\nvar tronWeb = new TronWeb({\n    fullHost: 'http://localhost:16887',\n    privateKey: 'c741f5c0224020d7ccaf4617a33cc099ac13240f150cf35f496db5bfc7d220dc'\n})\n\nvar parametersForProposal1 = [{\"key\":9,\"value\":1},{\"key\":10,\"value\":1}];\n\nasync function modifyChainParameters(parameters,proposalID){\n\n    parameters.sort((a, b) =&gt; {\n            return a.key.toString() &gt; b.key.toString() ? 1 : a.key.toString() === b.key.toString() ? 0 : -1;\n        })\n    var unsignedProposal1Txn = await tronWeb.transactionBuilder.createProposal(parameters,\"41D0B69631440F0A494BB51F7EEE68FF5C593C00F0\")\n    var signedProposal1Txn = await tronWeb.trx.sign(unsignedProposal1Txn);\n    var receipt1 = await tronWeb.trx.sendRawTransaction(signedProposal1Txn);\n\n    setTimeout(async function() {\n        console.log(receipt1)\n        console.log(\"Vote proposal 1 !\")\n        var unsignedVoteP1Txn = await tronWeb.transactionBuilder.voteProposal(proposalID, true, tronWeb.defaultAddress.hex)\n        var signedVoteP1Txn = await tronWeb.trx.sign(unsignedVoteP1Txn);\n        var rtn1 = await tronWeb.trx.sendRawTransaction(signedVoteP1Txn);\n    }, 1000)\n\n}\n\nmodifyChainParameters(parametersForProposal1, 1)\n</code></pre>   After creating the proposal through the above code, you can check whether the proposal has been approved through listproposals interface. If the \"state\" in the return value of the interface is \"APPROVED\" When expiration time of the proposal has passed, it means that the proposal has been approved.   It should be noted that dynamic parameters with interdependent relationships cannot be included in one proposal, the correct approach is to separate them into different proposals and pay attention to order of them.</p> </li> </ul> </li> </ol>"},{"location":"using_javatron/toolkit/","title":"java-tron Node Maintenance Tool - Toolkit","text":"<p>The Toolkit integrates a series of tools of java-tron, and more functions will be added into it in the future for the convenience of developers. Currently Toolkit includes the following functions:</p> <ul> <li>Database Partition Tool</li> <li>Lite Fullnode Data Pruning</li> <li>Data Copy</li> <li>Data Conversion</li> <li>LevelDB Startup Optimization</li> </ul> <p>The following describes the acquisition and use of the Toolkit toolbox in detail.</p>"},{"location":"using_javatron/toolkit/#obtain-toolkitjar","title":"Obtain Toolkit.jar","text":"<p><code>Toolkit.jar</code> can be obtained from the released version directly or by compiling the java-tron source code.</p> <p>Compile the source code:</p> <ol> <li>Obtain java-tron source code    <pre><code>$ git clone https://github.com/tronprotocol/java-tron.git\n$ git checkout -t origin/master\n</code></pre></li> <li>Compile</li> </ol> <p><pre><code>$ cd java-tron\n$ ./gradlew clean build -x test\n</code></pre>     You will find the <code>Toolkit.jar</code> under <code>./java-tron/build/libs/</code> folder if build is successful.</p>"},{"location":"using_javatron/toolkit/#database-partition-tool","title":"Database Partition Tool","text":"<p>As the data on the chain continues to grow, the pressure on data storage will increase. At present, the FullNode data of the TRON public chain has reached 1T, and the daily data growth is about 1.2G. According to the current data growth rate, the annual growth rate is about 450G. A single disk capacity may be insufficient and need to be replaced by a larger disk. To this end the Toolkit toolbox introduces the database storage partitioning tool. The tool can migrate some databases to other storage disks. When the user encounters insufficient disk space, he only needs to add another disk according to the capacity requirement and does not need to replace the original disk.</p>"},{"location":"using_javatron/toolkit/#commands-and-parameters","title":"Commands and parameters","text":"<p>To use the data partition function provided by Toolkit through the <code>db mv</code> command:</p> <pre><code># full command\njava -jar Toolkit.jar db mv [-h] [-c=&lt;config&gt;] [-d=&lt;database&gt;]\n# examples\njava -jar Toolkit.jar db mv -c main_net_config.conf -d /data/tron/output-directory\n</code></pre> <p>Optional command parameters are as follows:</p> <ul> <li><code>-c | --config</code>: [ string ] This option is used to specify the FullNode configuration file. If not specified, the default value will be config.conf.</li> <li><code>-d | --database-directory</code>: [ string ] This option is used to specify the FullNode database directory. If not specified, the default value will be output-directory.</li> <li><code>-h | --help</code>: [ bool ] This option is used to view help description, default value: false.</li> </ul>"},{"location":"using_javatron/toolkit/#usage-instructions","title":"Usage Instructions","text":"<p>Follow the following steps to use the database partition tool:</p> <ol> <li>Stop FullNode service</li> <li>Configure for database storage migration</li> <li>Perform database migration</li> <li>Restart FullNode service</li> </ol>"},{"location":"using_javatron/toolkit/#stop-fullnode-service","title":"Stop FullNode Service","text":"<p>Use the command kill -15 pid to close FullNode.jar, below is the FullNode process pid lookup command:</p> <pre><code>$ ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'`\n</code></pre>"},{"location":"using_javatron/toolkit/#configure-for-database-storage-migration","title":"Configure For Database Storage Migration","text":"<p>The configuration of database migration is in the storage.properties field in the java-tron node configuration file. The following is an example of migrating only the <code>block</code> and <code>trans</code> databases to illustrate how to migrate some databases to other storage disks:</p> <p><pre><code>storage {\n ......\n  properties = [\n    {\n     name = \"block\",\n     path = \"/data1/tron\",\n\n    },\n    {\n     name = \"trans\",\n     path = \"/data1/tron\",\n   }\n  ]\n ......\n}\n</code></pre> <code>name</code> is the database name which you want to migrate, and <code>path</code> is the destination directory for database migration. The tool will migrate the database specified by <code>name</code> to the directory specified by <code>path</code>, and then create a soft link under the original path pointing to <code>path</code> directory. After <code>FullNode</code> starts, it will find the <code>path</code> directory according to the soft link.</p>"},{"location":"using_javatron/toolkit/#perform-database-migration","title":"Perform Database Migration","text":"<p>When executed, the current migration progress will be shown.</p> <pre><code>$ java -jar Toolkit.jar db mv -c main_net_config.conf -d /data/tron/output-directory\n</code></pre>"},{"location":"using_javatron/toolkit/#restart-fullnode-service","title":"Restart FullNode Service","text":"<p>After the migration is complete, restart the java-tron node. <pre><code># FullNode\n$ nohup java -Xms9G -Xmx9G -XX:ReservedCodeCacheSize=256m \\\n                -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=512m \\\n                -XX:MaxDirectMemorySize=1G -XX:+PrintGCDetails \\\n                -XX:+PrintGCDateStamps  -Xloggc:gc.log \\\n                -XX:+UseConcMarkSweepGC -XX:NewRatio=2 \\\n                -XX:+CMSScavengeBeforeRemark -XX:+ParallelRefProcEnabled \\\n                -XX:+HeapDumpOnOutOfMemoryError \\\n                -XX:+UseCMSInitiatingOccupancyOnly  -XX:CMSInitiatingOccupancyFraction=70 \\\n                -jar FullNode.jar -c main_net_config.conf &gt;&gt; start.log 2&gt;&amp;1 &amp;\n\n# Super representative's FullNode\n$ nohup java -Xms9G -Xmx9G -XX:ReservedCodeCacheSize=256m \\\n               -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=512m \\\n               -XX:MaxDirectMemorySize=1G -XX:+PrintGCDetails \\\n               -XX:+PrintGCDateStamps  -Xloggc:gc.log \\\n               -XX:+UseConcMarkSweepGC -XX:NewRatio=2 \\\n               -XX:+CMSScavengeBeforeRemark -XX:+ParallelRefProcEnabled \\\n               -XX:+HeapDumpOnOutOfMemoryError \\\n               -XX:+UseCMSInitiatingOccupancyOnly  -XX:CMSInitiatingOccupancyFraction=70 \\\n               -jar FullNode.jar --witness -c main_net_config.conf &gt;&gt; start.log 2&gt;&amp;1 &amp;\n</code></pre></p>"},{"location":"using_javatron/toolkit/#lite-fullnode-data-pruning","title":"Lite Fullnode Data Pruning","text":"<p>Toolkit provides data pruning tool, which is mainly used for generating or pruning Lite Fullnode data.</p> <p>The data pruning tool can divide the complete FullNode data into a snapshot dataset (Snapshot dataset) or a historical dataset (History dataset) according to the current <code>latest_block_number</code>, the snapshot dataset is used to start the Lite Fullnode (That is the Lite fullnode database), and the historical dataset is used for historical data query. Lite Fullnode started with a snapshot data set do not support querying historical data prior to the latest block height at the time of pruning. The data pruning tool also provides the function of merging historical data set with snapshot data set. The usage scenarios are as follows:</p> <ul> <li> <p>Convert FullNode data into Lite Fullnode data</p> <p>The Lite Fullnode starts only based on the snapshot data set, use the data pruning tool to convert the full node data into the snapshot data set, and that will get the Lite Fullnode data</p> </li> <li> <p>Prune Lite Fullnode data regularly</p> <p>Since the Lite Fullnode saves the same data as the FullNode after startup, although the data volume of the Lite Fullnode is very small at startup, the data expansion rate in the later period is the same as that of the FullNode, so it may be necessary to periodically prune the data. Clipping the Lite Fullnode data is also to use this tool to cut the Lite Fullnode data into snapshot data set, that is, to obtain the Pruned Lite Fullnode data</p> </li> <li> <p>Convert Lite Fullnode data back to FullNode data</p> <p>Since Lite Fullnode does not support historical data query, if you want to support it, you need to change Lite Fullnode data into FullNode data, then the node will change from Lite Fullnode to FullNode. You can directly download the snapshot of the FullNode database, or you can use the data pruning tool: first, convert the FullNode data into historical data set, and then merge the historical data set and the snapshot data set of the Lite Fullnode to obtain the FullNode data.</p> </li> </ul> <p>Note: Before using this tool for any operation, you need to stop the currently running node first.</p>"},{"location":"using_javatron/toolkit/#command-and-parameters","title":"Command and parameters","text":"<p>To use the data pruning tool provided by Toolkit through the <code>db lite</code> command:</p> <pre><code># full command\n  java -jar Toolkit.jar db lite [-h] -ds=&lt;datasetPath&gt; -fn=&lt;fnDataPath&gt; [-o=&lt;operate&gt;] [-t=&lt;type&gt;]\n# examples\n  #split and get a snapshot dataset\n  java -jar Toolkit.jar db lite -o split -t snapshot --fn-data-path output-directory/database --dataset-path /tmp\n  #split and get a history dataset\n  java -jar Toolkit.jar db lite -o split -t history --fn-data-path output-directory/database --dataset-path /tmp\n  #merge history dataset and snapshot dataset\n  java -jar Toolkit.jar db lite -o merge --fn-data-path /tmp/snapshot --dataset-path /tmp/history\n</code></pre> <p>Optional command parameters are as follows:</p> <ul> <li><code>--operation | -o</code>: [ split | merge ], this parameter specifies the operation as either to split or to merge, default is split.</li> <li><code>--type | -t</code>: [ snapshot | history ], this parameter is used only when the operation is <code>split</code>. <code>snapshot</code> means clip to Snapshot Dataset and <code>history</code> means clip to History Dataset. Default is <code>snapshot</code>.</li> <li><code>--fn-data-path | -fn</code>: The database path to be split or merged. When the operation type is <code>split</code>, <code>fn-data-path</code> is used to indicate the directory of the data to be pruned; when the operation type is <code>merge</code>, <code>fn-data-path</code> indicates the database directory of the Lite Fullnode or the directory of the snapshot dataset.</li> <li><code>--dataset-path | -ds</code>: When operation is <code>split</code>, dataset-path is the path that store the snapshot or history, when operation is <code>merge</code>, dataset-path is the history data path.</li> </ul>"},{"location":"using_javatron/toolkit/#usage-instructions_1","title":"Usage Instructions","text":"<p>The node database is stored in the <code>output-directory/database</code> directory by default. The examples in this chapter will be explained with the default database directory.</p> <p>The following three examples illustrate how to use the data pruning tool:</p> <ul> <li> <p>Split and get a <code>Snapshot Dataset</code></p> <p>This function can split FullNode data into Lite Fullnode data, and can also be used to regularly trim Lite Fullnode data. The steps are as follows:</p> <p>First, stop the FullNode and execute:</p> <pre><code># just for simplify, save the snapshot into /tmp directory\njava -jar Toolkit.jar db lite -o split -t snapshot --fn-data-path output-directory/database --dataset-path /tmp\n</code></pre> <ul> <li>--fn-data-path\uff1a The data directory to be trimmed, that is, the node data directory</li> <li>--dataset-path\uff1a The directory where the output snapshot dataset is stored</li> </ul> <p>After the command is executed, a <code>snapshot</code> directory will be generated in <code>/tmp</code>, the data in this directory is the Lite Fullnode data, then rename the directory from <code>snapshot</code> to <code>database</code> (the default value of the storage.db.directory is <code>database</code>, make sure rename the snapshot directory to the specified value) and copy the <code>database</code> directory  to the Lite Fullnode database directory to finish the splitting. Finally start the Lite Fullnode. </p> </li> <li> <p>Split and get a <code>History Dataset</code></p> <p>The command to split the historical data set is as follows:</p> <pre><code># just for simplify, save the history into `/tmp` directory,\njava -jar Toolkit.jar db lite -o split -t history --fn-data-path output-directory/database --dataset-path /tmp\n</code></pre> <ul> <li>--fn-data-path\uff1a FullNode data directory</li> <li>--dataset-path\uff1a The directory where the output historical dataset is stored</li> </ul> <p>After the command is executed, the <code>history</code> directory will be generated under the <code>/tmp</code> directory, and the data in it is the historical dataset.</p> </li> <li> <p>Merge <code>History Dataset</code> and <code>Snapshot Dataset</code></p> <p>Both <code>History Dataset</code> and <code>Snapshot Dataset</code> have an <code>info.properties</code> file to identify the block height when they are split. Make sure that the <code>split_block_num</code> in <code>History Dataset</code> is not less than the corresponding value in the <code>Snapshot Dataset</code>. After the historical dataset is merged with the snapshot dataset through the merge operation, the Lite Fullnode will become a real FullNode.</p> <p>The command to merge the historical dataset and the snapshot dataset is as follows:</p> <pre><code># just for simplify, assume `History dataset` is locate in /tmp\njava -jar Toolkit.jar db lite -o merge --fn-data-path /tmp/snapshot --dataset-path /tmp/history\n</code></pre> <ul> <li>--fn-data-path\uff1a snapshot dataset directory</li> <li>--dataset-path\uff1a history dataset directory</li> </ul> <p>After the command is executed, the merged data will overwrite the directory where the snapshot data set is located, that is, the directory specified by <code>--fn-data-path</code>, copy the merged data to the node database directory, and the Lite Fullnode becomes a FullNode.</p> </li> </ul>"},{"location":"using_javatron/toolkit/#data-copy","title":"Data Copy","text":"<p>The node database is large, and the database copy operation is time-consuming. The Toolkit provides a fast database copy function, which can quickly copy the LevelDB or RocksDB database in the same file system by creating a hard link.</p>"},{"location":"using_javatron/toolkit/#command-and-parameters_1","title":"Command and parameters","text":"<p>To use the data copy function provided by Toolkit through <code>db copy</code> :</p> <pre><code># full command\n  java -jar Toolkit.jar db cp [-h] &lt;src&gt; &lt;dest&gt;\n# examples\n  java -jar Toolkit.jar db cp  output-directory/database /tmp/database\n</code></pre> <p>Optional command parameters are as follows:</p> <ul> <li><code>&lt;src&gt;</code>: Source path for database. Default: output-directory/database</li> <li><code>&lt;dest&gt;</code>: Output path for database. Default: output-directory-cp/database</li> <li><code>-h | --help</code>\uff1a[ bool ] provide the help info. Default: false</li> </ul> <p>Note: Before using this tool for any operation, you need to stop the currently running node first.</p>"},{"location":"using_javatron/toolkit/#data-conversion","title":"Data Conversion","text":"<p>Toolkit supports database data conversion function, which can convert LevelDB data into RocksDB data.</p>"},{"location":"using_javatron/toolkit/#command-and-parameters_2","title":"Command and parameters","text":"<p>To use the data conversion function provided by Toolkit through <code>db convert</code> command:</p> <pre><code># full command\n  java -jar Toolkit.jar db convert [-h] [--safe] &lt;src&gt; &lt;dest&gt;\n# examples\n  java -jar Toolkit.jar db convert  output-directory/database /tmp/database\n</code></pre> <p>Optional command parameters are as follows:</p> <ul> <li><code>&lt;src&gt;</code>:  Input path for leveldb, default: output-directory/database.</li> <li><code>&lt;dest&gt;</code>: Output path for rocksdb, default: output-directory-dst/database.</li> <li><code>--safe</code>\uff1aIn safe mode, read data from leveldb then put into rocksdb, it's a very time-consuming procedure. If not, just change engine.properties from leveldb to rocksdb, rocksdb is compatible with leveldb for the current version. This may not be the case in the future, default: false.</li> <li><code>-h | --help</code>\uff1a[ bool ]  Provide the help info, default: false\u3002</li> </ul> <p>Note: Before using this tool for any operation, you need to stop the currently running node first.</p>"},{"location":"using_javatron/toolkit/#leveldb-startup-optimization","title":"LevelDB Startup Optimization","text":"<p>with the running of levedb, the manifest file will continue to grow. Excessive manifest file will not only affect the startup speed of the node, moreover, there may be an issue that the service is terminated abnormally due to the continuous growth of memory. To solve this issue, toolkit provides the leveldb startup optimization tool. The tool optimizes the file size of the manifest and the startup process of LevelDB, reduces memory usage, and improves node startup speed.</p>"},{"location":"using_javatron/toolkit/#command-and-parameters_3","title":"Command and parameters","text":"<p>To use the LevelDB startup optimization function provided by Toolkit through <code>db archive</code> command:</p> <pre><code># full command\n   java -jar Toolkit.jar db archive [-h] [-b=&lt;maxBatchSize&gt;] [-d=&lt;databaseDirectory&gt;] [-m=&lt;maxManifestSize&gt;]\n# examples\n   #1. use default settings\n   java -jar Toolkit.jar db archive \n   #2. specify the database directory as /tmp/db/database\n   java -jar Toolkit.jar db archive -d /tmp/db/database \n   #3. specify the batch size to 64000 when optimizing manifest\n   java -jar Toolkit.jar db archive -b 64000\n   #4. specify optimization only when Manifest exceeds 128M\n   java -jar Toolkit.jar db archive -m 128 \n</code></pre> <p>Optional command parameters are as follows:</p> <ul> <li><code>-b | --batch-size</code>: Specify the batch manifest size, default: 80000.</li> <li><code>-d | --database-directory</code>: Specify the database directory to be processed, default: output-directory/database.</li> <li><code>-m | --manifest-size</code>: Specify the minimum required manifest file size, unit: M, default: 0.</li> <li><code>-h | --help</code>\uff1a[ bool ]  Provide the help info, default: false.</li> </ul> <p>Note: Before using this tool for any operation, you need to stop the currently running node first. Usage instructions, please refer to Leveldb Startup Optimization Plugins.</p>"}]}