<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tronprotocol.github.io/documentation-en/using_javatron/connecting_to_tron/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Network Configuration - java-tron</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Network Configuration";
        var mkdocs_page_input_path = "using_javatron/connecting_to_tron.md";
        var mkdocs_page_url = "/documentation-en/using_javatron/connecting_to_tron/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> java-tron
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started_with_javatron/">Getting Started with java-tron</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using java-tron</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../installing_javatron/">Deploying java-tron</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../backup_restore/">Backup & Restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/litefullnode/">Lite FullNode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../private_network/">Private Network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/event/">Event Subscription</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/database/">Database Configuration</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Network Configuration</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../metrics/">Node Monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../toolkit/">Node Maintenance Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/http/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/rpc/">gRPC API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Protocol</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../introduction/dpos/">DPoS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/sr/">Super Representative</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/account/">Account Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/resource/">Resource Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/contract/">Smart Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/system-contracts/">System Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/dex/">Decentralized Exchange</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/multi-signatures/">Account Permission Management</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For Java-tron Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/java-tron/">Developer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/tips/">TIPs Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/issue-workflow/">Issue Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/governance/">Governance Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/run-in-idea/">Configure the IDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/demo/">Development Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/code-structure/">Core Modules</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For DAPP developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/compiler/">Dapp Development Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Wallet-cli</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli/">What is Wallet-CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli-command/">Wallet Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Releases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/upgrade-instruction/">Deployment Manual for the New Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/signature_verification/">Integrity Check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/history/">History</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">java-tron</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Using java-tron &raquo;</li><li>Network Configuration</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/tronprotocol/documentation-en/edit/master/docs/using_javatron/connecting_to_tron.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="connecting-to-the-tron-network">Connecting to the TRON network<a class="headerlink" href="#connecting-to-the-tron-network" title="Permanent link">&para;</a></h1>
<p>The TRON network is mainly divided into the main network, the Shasta test network, the Nile test network and the private network. Therefore, for the java-tron client software, it can be connected to any TRON network by modifying the configuration items in the configuration file. At present, the Shasta testnet does not support adding a new node, but the Nile testnet supports it.</p>
<p>You need to set the following configuration items to connect java-tron to one of the TRON networks:</p>
<ul>
<li><code>node.p2p.version</code> : It is used to set the P2P network id. Only nodes with the same network id can shake hands successfully.<ul>
<li>TRON mainnet: <code>node.p2p.version=11111</code></li>
<li>Nile testnet: <code>node.p2p.version = 201910292</code></li>
<li>Private network：set to other values</li>
</ul>
</li>
<li><code>seed.node</code>: set seed node</li>
<li><code>genesis.block</code>: Genesis block settings. To join a network, please ensure that the settings of the genesis block are the same as those of other nodes in the network, otherwise you cannot join the network.</li>
</ul>
<h1 id="finding-peers">Finding peers<a class="headerlink" href="#finding-peers" title="Permanent link">&para;</a></h1>
<p>java-tron continuously attempts to connect to other nodes on the network until it has enough peers, at the same time, it will also accept connections from other nodes. java-tron finds peers using the discovery protocol. In the discovery protocol, nodes exchange connectivity details and then establish sessions and exchange TRON data. </p>
<p>If you want java-tron node to do node discovery, you need to enable the node discovery service in the node configuration file first:</p>
<p><div class="highlight"><pre><span></span><code>node.discovery = {
  enable = true
  ...
}
</code></pre></div>
Then, for the new node that joins the TRON network, you can configure the <code>seed node</code> to make it easier for the current node to connect to the peer node, and then obtain the address information of other nodes through the peer node. Generally, the seed nodes are set as stable online fullnodes. For the TRON main network, community public nodes can be used as seed nodes, for example:</p>
<div class="highlight"><pre><span></span><code>seed.node = {
  # List of the seed nodes
  # Seed nodes are stable full nodes

  ip.list = [
    &quot;3.225.171.164:18888&quot;,
    &quot;52.53.189.99:18888&quot;,
    &quot;18.196.99.16:18888&quot;,
    &quot;34.253.187.192:18888&quot;,
    &quot;18.133.82.227:18888&quot;,
    &quot;35.180.51.163:18888&quot;,
    &quot;54.252.224.209:18888&quot;,
    &quot;18.231.27.82:18888&quot;,
    &quot;52.15.93.92:18888&quot;,
    &quot;34.220.77.106:18888&quot;,
    &quot;15.207.144.3:18888&quot;,
    &quot;13.124.62.58:18888&quot;,    
    &quot;54.151.226.240:18888&quot;,
    &quot;35.174.93.198:18888&quot;,
    &quot;18.210.241.149:18888&quot;,
    &quot;54.177.115.127:18888&quot;,
    &quot;54.254.131.82:18888&quot;,
    &quot;18.167.171.167:18888&quot;,
    &quot;54.167.11.177:18888&quot;,
    &quot;35.74.7.196:18888&quot;,
    &quot;52.196.244.176:18888&quot;,
    &quot;54.248.129.19:18888&quot;,
    &quot;43.198.142.160:18888&quot;,
    &quot;3.0.214.7:18888&quot;,
    &quot;54.153.59.116:18888&quot;,
    &quot;54.153.94.160:18888&quot;,
    &quot;54.82.161.39:18888&quot;,
    &quot;54.179.207.68:18888&quot;,
    &quot;18.142.82.44:18888&quot;,
    &quot;18.163.230.203:18888&quot;
  ]
}
</code></pre></div>
<p>There are scenarios where disabling the discovery process is useful, for example for running a local test node or an experimental test network with known, fixed nodes. This can be configured by <code>node.discovery.enable = false</code> to close the node discovery process.</p>
<h1 id="connectivity-problems">Connectivity problems<a class="headerlink" href="#connectivity-problems" title="Permanent link">&para;</a></h1>
<p>There are occasions when java-tron simply fails to connect to peers. The common reasons for this are:</p>
<ul>
<li>Local time might be incorrect. An accurate clock is required to participate in the TRON network. The local clock can be resynchronized using commands such as <code>sudo ntpdate -s time.nist.gov</code>.</li>
<li>Some firewall configurations can prohibit UDP traffic. But the node discovery service is based on the UDP protocol, so you can make it possible to let the node connect to the network by configuring <a href="#active-and-passive-connections"><code>node.active</code></a> in the case of node discovery invalid.</li>
<li>By configuring <a href="#active-and-passive-connections"><code>node.passive</code></a> to accept active connections from trusted nodes.</li>
<li>The Shasta testnet does not currently support nodes joining the network. If you need to run nodes to join the public testnet, you can choose the Nile testnet.</li>
</ul>
<h1 id="log-and-network-connection-verification">Log and network connection verification<a class="headerlink" href="#log-and-network-connection-verification" title="Permanent link">&para;</a></h1>
<p>The java-tron node log is <code>/logs/tron.log</code> in the java-tron installation directory. Under the java-tron installation directory, you can use the following commands to view the latest log of the node and check the block synchronization status of the node:</p>
<div class="highlight"><pre><span></span><code>$ tail -f /logs/tron.log/
</code></pre></div>
<p>You will see the below block synchronization logs if java-tron is running as expected. </p>
<p><div class="highlight"><pre><span></span><code>15:41:48.033 INFO  [nioEventLoopGroup-6-2] [DB](Manager.java:1208) pushBlock block number:76, cost/txs:13/0 false
15:41:48.033 INFO  [nioEventLoopGroup-6-2] [net](TronNetDelegate.java:255) Success process block Num:76,ID:000000000000004c9e3899ee9952a7f0d9e4f692c7070a48390e6fea8099432f.
</code></pre></div>
For the super representative's fullnode, you will see the following producing blocks log:</p>
<p><div class="highlight"><pre><span></span><code>02:31:33.008 INFO  [DPosMiner] [DB](Manager.java:1383) Generate block 79336 begin
02:31:33.059 INFO  [DPosMiner] [DB](SnapshotManager.java:315) flush cost:51, create checkpoint cost:49, refresh cost:2
02:31:33.060 INFO  [DPosMiner] [DB](Manager.java:1492) Generate block 79336 success, trxs:0, pendingCount: 0, rePushCount: 0, postponedCount: 0
</code></pre></div>
If no error messages are reported in the node logs, means everything is fine. You can also send an http request to check whether the node has been started, and to view the status of the node: including the node configuration information, the information about the machine where the node is located, the connection status of the node peers, etc.</p>
<div class="highlight"><pre><span></span><code>$ curl http://127.0.0.1:16887/wallet/getnodeinfo
</code></pre></div>
<p>Returns：</p>
<p><div class="highlight"><pre><span></span><code>{
    &quot;activeConnectCount&quot;: 3,
    &quot;beginSyncNum&quot;: 42518346,
    &quot;block&quot;: &quot;Num:42518365,ID:000000000288c75d1967232f1efe606ff90b9dd76660d7de8cc091849be6bf10&quot;,
    &quot;cheatWitnessInfoMap&quot;: {
        ...
    },
    &quot;configNodeInfo&quot;: {
        ...
        &quot;codeVersion&quot;: &quot;4.5.1&quot;,
        &quot;dbVersion&quot;: 2,
        &quot;discoverEnable&quot;: true,
        &quot;listenPort&quot;: 18888,
        ...
    },
    &quot;currentConnectCount&quot;: 18,
    &quot;machineInfo&quot;: {
        ...
    },
    &quot;passiveConnectCount&quot;: 15,
    &quot;peerList&quot;: [
        ...
    ],
    &quot;solidityBlock&quot;: &quot;Num:42518347,ID:000000000288c74b723398aef104c585bad1c7cbade7793c5551466bd916feee&quot;,
    &quot;totalFlow&quot;: 8735314
}
</code></pre></div>
In order for users to interact with the TRON network, the java-tron node must be running and in a normal state of synchronization. Whether the node is synchronized with other nodes in the network, you can query the current block height in Tronscan and compare it with the result of <code>/wallet/getnowblock</code> queried from the local java-tron node. If they are equal, it means that the synchronization status of the local node is normal.</p>
<h1 id="private-network">Private network<a class="headerlink" href="#private-network" title="Permanent link">&para;</a></h1>
<p>It is often useful for developers to connect to private test networks rather than public testnets or TRON mainnet. Because the private chain not only has no requirements for machine configuration, but also in the sandbox environment of the private chain network, it is easier to test various functions, and it gives freedom to break things without real-world consequences. </p>
<p>The private chain network needs to configure the configuration item <code>node.p2p.version</code> in the <a href="https://github.com/tronprotocol/tron-deployment/blob/master/private_net_config.conf">private chain configuration file</a> to a value which is not used by any other existing public network (TRON mainnet, testnet). For detailed instructions on private chain construction, please refer to <a href="../private_network/">Private Chain Network</a>.</p>
<h1 id="active-and-passive-connections">Active and passive connections<a class="headerlink" href="#active-and-passive-connections" title="Permanent link">&para;</a></h1>
<p>java-tron supports setting its actively connected nodes <code>node.active</code> as well as passively connected nodes <code>node.passive</code>. Configuring <code>node.active</code> and <code>node.passive</code> can greatly help improve the stability of the network connection of the node.</p>
<p>When java-tron starts, it will actively establish a connection with the peer node in <code>node.active</code>.</p>
<div class="highlight"><pre><span></span><code>node {
  active = [
    # Active establish connection in any case
    # Sample entries:
    # &quot;ip:port&quot;,
    # &quot;ip:port&quot;
  ]
 }
</code></pre></div>
<p>When a node in <code>node.passive</code> actively establishes a connection with the current node, the current node will accept it unconditionally.</p>
<div class="highlight"><pre><span></span><code>node {
  passive = [
    # Passive accept connection in any case
    # Sample entries:
    # &quot;ip:port&quot;,
    # &quot;ip:port&quot;
  ]
 }
</code></pre></div>
<h1 id="peer-limit">Peer limit<a class="headerlink" href="#peer-limit" title="Permanent link">&para;</a></h1>
<p><code>node.maxActiveNodes</code> indicates the maximum number of connections between the node and other nodes, the default value is 30. Setting a larger value can enable nodes to establish more connections, join the network more efficiently, and broadcast more efficiently. However, the bandwidth required to maintain the connection is also higher and the performance consumption is higher. Therefore, please set it according to the actual situation.</p>
<div class="highlight"><pre><span></span><code>node {
    maxActiveNodes = 30
}
</code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../architecture/database/" class="btn btn-neutral float-left" title="Database Configuration"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../metrics/" class="btn btn-neutral float-right" title="Node Monitoring">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tronprotocol/documentation-en" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../architecture/database/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../metrics/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
