<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tronprotocol.github.io/documentation-en/using_javatron/backup_restore/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Backup & Restore - java-tron</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Backup \u0026 Restore";
        var mkdocs_page_input_path = "using_javatron/backup_restore.md";
        var mkdocs_page_url = "/documentation-en/using_javatron/backup_restore/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> java-tron
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started_with_javatron/">Getting Started with java-tron</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using java-tron</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../installing_javatron/">Deploying java-tron</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Backup & Restore</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/litefullnode/">Lite FullNode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../private_network/">Private Network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/event/">Event Subscription</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/database/">Database Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../connecting_to_tron/">Network Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../metrics/">Node Monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../toolkit/">Node Maintenance Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/http/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/rpc/">gRPC API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Protocol</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../introduction/dpos/">DPoS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/sr/">Super Representative</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/account/">Account Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/resource/">Resource Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/contract/">Smart Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/system-contracts/">System Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/dex/">Decentralized Exchange</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mechanism-algorithm/multi-signatures/">Account Permission Management</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For Java-tron Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/java-tron/">Developer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/tips/">TIPs Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/issue-workflow/">Issue Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/governance/">Governance Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/run-in-idea/">Configure the IDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/demo/">Development Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/code-structure/">Core Modules</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For DAPP developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/compiler/">Dapp Development Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Wallet-cli</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli/">What is Wallet-CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli-command/">Wallet Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Releases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/upgrade-instruction/">Deployment Manual for the New Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/signature_verification/">Integrity Check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/history/">History</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">java-tron</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Using java-tron &raquo;</li><li>Backup & Restore</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/tronprotocol/documentation-en/edit/master/docs/using_javatron/backup_restore.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="data-backup-restore">Data Backup &amp; Restore<a class="headerlink" href="#data-backup-restore" title="Permanent link">&para;</a></h1>
<p>Everything <code>java-tron</code> persists gets written inside its data directory. The default data directory is: <code>/output-directory/</code>. If you need to specify other directories, you can add <code>-d</code> or <code>--output-directory</code> parameter to the java-tron node startup command to specify the data storage location.</p>
<div class="highlight"><pre><span></span><code>$ java -jar fullnode.jar -d ./outputdir
</code></pre></div>
<h1 id="data-backup">Data Backup<a class="headerlink" href="#data-backup" title="Permanent link">&para;</a></h1>
<p>Please shut down the node process before backing up the node data, for details, please refer to the following steps:</p>
<p>First, use the command <code>$ ps -ef |grep FullNode.jar |grep -v grep |awk '{print $2}'</code> to get the process id of java-tron, and then use the command <code>kill -15 process id</code> to kill the process. Or use a stop script like this:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash
while true; do
  pid=`ps -ef |grep FullNode.jar |grep -v grep |awk &#39;{print $2}&#39;`
  if [ -n &quot;$pid&quot; ]; then
    kill -15 $pid
    echo &quot;The java-tron process is exiting, it may take some time, forcing the exit may cause damage to the database, please wait patiently...&quot;
    sleep 1
  else
    echo &quot;java-tron killed successfully!&quot;
    break
  fi
done
</code></pre></div>
<p>Then, backup the data by the following command.</p>
<div class="highlight"><pre><span></span><code>$ tar cvzf output-directory.`date &quot;+%Y%m%d%H%M%S&quot;`.etgz output-directory
</code></pre></div>
<h1 id="data-restore">Data Restore<a class="headerlink" href="#data-restore" title="Permanent link">&para;</a></h1>
<p>When restoring the data, just copy the corresponding backup data to the node directory. Take the database backup file name <code>output-directory.20220628152402.etgz</code> as an example, the command to restore the database file is:</p>
<div class="highlight"><pre><span></span><code>$ tar xzvf output-directory.20220628152402.etgz
</code></pre></div>
<h1 id="public-backup-data">Public Backup Data<a class="headerlink" href="#public-backup-data" title="Permanent link">&para;</a></h1>
<p>For the TRON mainnet and Nile testnet, since the amount of data to be synchronized is large after the new node is started, it takes a long time to synchronize the data. In order to facilitate rapid node deployment for developers, the community provides data snapshots on a regular basis. A data snapshot is a compressed file of the database backup of a TRON network node at a certain time. Developers can download and use the data snapshot to speed up the node synchronization process.</p>
<h3 id="fullnode-data-snapshot">FullNode Data Snapshot<a class="headerlink" href="#fullnode-data-snapshot" title="Permanent link">&para;</a></h3>
<p>The following table shows the download address of Fullnode data snapshots. Please select a suitable data snapshot according to the location and node database type, and whether you need to query historical internal transactions.</p>
<table>
<thead>
<tr>
<th>Fullnode Data Source</th>
<th>Download site</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Official data source (North America: Virginia)</td>
<td>http://34.86.86.229/</td>
<td>LevelDB, exclude internal transactions (About 1821G on 6 Aug. 2024)</td>
</tr>
<tr>
<td>Official data source (Singapore)</td>
<td>http://34.143.247.77/</td>
<td>LevelDB, exclude internal transactions (About 1819G on 5 Aug. 2024)</td>
</tr>
<tr>
<td>Official data source (North America: America)</td>
<td>http://35.197.17.205/</td>
<td>RocksDB, exclude internal transactions (About 1799G on 6 Aug. 2024)</td>
</tr>
<tr>
<td>Official data source (Singapore)</td>
<td>http://35.247.128.170/</td>
<td>LevelDB, include internal transactions (About 2000G on 6 Aug. 2024)</td>
</tr>
<tr>
<td>Official data source ((North America: Virginia))</td>
<td>http://34.48.6.163/</td>
<td>LevelDB, exclude internal transactions, include account history TRX balance (About 2288G on 6 Aug. 2024)</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>：The data of LevelDB and RocksDB are not allowed to be mixed. The database can be specified in the config file of the full node, set db.engine to LEVELDB or ROCKSDB. </p>
<h3 id="lite-fullnode-data-snapshot">Lite FullNode Data Snapshot<a class="headerlink" href="#lite-fullnode-data-snapshot" title="Permanent link">&para;</a></h3>
<p>The TRON Public Chain has supported the type of the Lite FullNode since the version of GreatVoyage-v4.1.0 release. All the data required by the Lite FullNode for running is whole of the status data and a little essential block data, so, it is much more lightweight (smaller database and faster startup) than the normal FullNode. TRON officially offers database snapshots of the Lite FullNode.</p>
<table>
<thead>
<tr>
<th>Lite Fullnode Data Source</th>
<th>Download site</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Official data source (North America: Virginia)</td>
<td>http://34.143.247.77/</td>
<td>LevelDB, About 41G on 5 Aug. 2024</td>
</tr>
</tbody>
</table>
<p><strong>Tips</strong>: You can split the data from the whole data with the help of the <a href="../../using_javatron/toolkit/#lite-fullnode-data-pruning">Lite FullNode Data Pruning Tool</a>.</p>
<h3 id="use-the-data-snapshot">Use the data snapshot<a class="headerlink" href="#use-the-data-snapshot" title="Permanent link">&para;</a></h3>
<p>The steps for using data snapshots are as follows:</p>
<ol>
<li>Download the corresponding compressed backup database according to your needs.</li>
<li>Decompress the compressed file of the backup database to the output-directory directory or to the corresponding directory according to your needs.</li>
<li>Startup the node. The node reads the output-directory directory by default. If you need to specify another directory，please add the <code>-d directory</code> parameter when the node starts.</li>
</ol>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../installing_javatron/" class="btn btn-neutral float-left" title="Deploying java-tron"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../developers/litefullnode/" class="btn btn-neutral float-right" title="Lite FullNode">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tronprotocol/documentation-en" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../installing_javatron/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../developers/litefullnode/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
