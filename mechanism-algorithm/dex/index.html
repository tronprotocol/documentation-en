<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://tronprotocol.github.io/documentation-en/mechanism-algorithm/dex/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Decentralized Exchange - java-tron</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Decentralized Exchange";
        var mkdocs_page_input_path = "mechanism-algorithm/dex.md";
        var mkdocs_page_url = "/documentation-en/mechanism-algorithm/dex/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> java-tron
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Getting Started</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started_with_javatron/">Getting Started with java-tron</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Using java-tron</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/installing_javatron/">Deploying java-tron</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/backup_restore/">Backup & Restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/litefullnode/">Lite FullNode</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/private_network/">Private Network</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/event/">Event Subscription</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../architecture/database/">Database Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/connecting_to_tron/">Network Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/metrics/">Node Monitoring</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../using_javatron/toolkit/">Node Maintenance Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/http/">HTTP API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../api/rpc/">gRPC API</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Core Protocol</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../../introduction/dpos/">DPoS</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sr/">Super Representative</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../account/">Account Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../resource/">Resource Model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/contract/">Smart Contract</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../system-contracts/">System Contract</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Decentralized Exchange</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#what-is-an-exchange-pair">What is an Exchange Pair</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exchange-pair-creation">Exchange Pair Creation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exchange-pair-transaction">Exchange Pair Transaction</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exchange-pair-injection">Exchange Pair Injection</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#exchange-pair-withdrawal">Exchange Pair Withdrawal</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#query">Query</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#transaction-query">Transaction Query</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#price-calculation">Price Calculation</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#calculate-the-amount-of-token-you-can-get">Calculate the Amount of Token You Can Get</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../multi-signatures/">Account Permission Management</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For Java-tron Developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/java-tron/">Developer Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/tips/">TIPs Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/issue-workflow/">Issue Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/governance/">Governance Workflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/run-in-idea/">Configure the IDE</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/demo/">Development Example</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../developers/code-structure/">Core Modules</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">For DAPP developers</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../contracts/compiler/">Dapp Development Tool</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Wallet-cli</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli/">What is Wallet-CLI</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../clients/wallet-cli-command/">Wallet Commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Releases</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/upgrade-instruction/">Deployment Manual for the New Version</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/signature_verification/">Integrity Check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../releases/history/">History</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">java-tron</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Core Protocol &raquo;</li><li>Decentralized Exchange</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/tronprotocol/documentation-en/edit/master/docs/mechanism-algorithm/dex.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="decentralized-exchangedex">Decentralized Exchange(DEX)<a class="headerlink" href="#decentralized-exchangedex" title="Permanent link">&para;</a></h1>
<p>TRON network supports decentralized exchange(DEX) using Bancor protocol. DEX is composed of many exchange pairs. You can find the api below in <a href="../../api/http">HTTP API</a>.</p>
<h2 id="what-is-an-exchange-pair">What is an Exchange Pair<a class="headerlink" href="#what-is-an-exchange-pair" title="Permanent link">&para;</a></h2>
<p>The term of 'Exchange Pair' describes a trade between one token with another, like A/B, A/TRX.</p>
<h2 id="exchange-pair-creation">Exchange Pair Creation<a class="headerlink" href="#exchange-pair-creation" title="Permanent link">&para;</a></h2>
<p>Any account can create an exchange pair, it burns 1024 TRX.</p>
<p>Please refer to 'wallet/exchangecreate'.</p>
<h2 id="exchange-pair-transaction">Exchange Pair Transaction<a class="headerlink" href="#exchange-pair-transaction" title="Permanent link">&para;</a></h2>
<p>Any account can trade in the DEX. The trade follows Bancor protocol.</p>
<p>Please refer to 'wallet/exchangetransaction'.</p>
<h2 id="exchange-pair-injection">Exchange Pair Injection<a class="headerlink" href="#exchange-pair-injection" title="Permanent link">&para;</a></h2>
<p>The exchange pair creator can inject more tokens into the exchange pair. Injection can decrease the range of ratio fluctuation. If one token is injected, the other one will be injected automatically to keep the current ratio of the two tokens unchanged.</p>
<p>Please refer to 'wallet/exchangeinject'.</p>
<h2 id="exchange-pair-withdrawal">Exchange Pair Withdrawal<a class="headerlink" href="#exchange-pair-withdrawal" title="Permanent link">&para;</a></h2>
<p>The exchange pair creator can withdraw tokens from the exchange pair. Withdrawal can increase the range of ratio fluctuation. If one token is withdrawn, the other one will be withdrawn automatically to keep the current ratio of the two tokens unchanged.</p>
<p>Please refer to 'wallet/exchangewithdraw'.</p>
<h2 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h2>
<h3 id="transaction-query">Transaction Query<a class="headerlink" href="#transaction-query" title="Permanent link">&para;</a></h3>
<p><code>ListExchanges</code>: Query the list of all the exchange pairs.</p>
<p><code>GetPaginatedExchangeList</code>: Query the list of all the exchange pairs by pagination.</p>
<p><code>GetExchangeById</code>: Query an exchange pair by exchange pair id.</p>
<h3 id="price-calculation">Price Calculation<a class="headerlink" href="#price-calculation" title="Permanent link">&para;</a></h3>
<p>The token price is determined by the ratio of the balance of the two tokens.</p>
<h3 id="calculate-the-amount-of-token-you-can-get">Calculate the Amount of Token You Can Get<a class="headerlink" href="#calculate-the-amount-of-token-you-can-get" title="Permanent link">&para;</a></h3>
<p><code>sellTokenQuant</code> is the amount of the <code>first_token</code> you want to sell.</p>
<p><code>buyTokenQuant</code> is the amount of <code>second_token</code> you can get.</p>
<div class="highlight"><pre><span></span><code><span class="n">supply</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mo">000</span><span class="p">,</span><span class="mo">000</span><span class="p">,</span><span class="mo">000</span><span class="p">,</span><span class="mo">000</span><span class="p">,</span><span class="mo">000</span><span class="p">,</span><span class="mo">000L</span>

<span class="n">supplyQuant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">supply</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="na">pow</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="n">sellTokenQuant</span><span class="o">/</span><span class="p">(</span><span class="n">firstTokenBalance</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sellTokenQuant</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0005</span><span class="p">))</span>

<span class="n">buyTokenQuant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">balance</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">Math</span><span class="p">.</span><span class="na">pow</span><span class="p">(</span><span class="mf">1.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="w"> </span><span class="n">supplyQuant</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">supply</span><span class="p">,</span><span class="w"> </span><span class="mf">2000.0</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
</code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../system-contracts/" class="btn btn-neutral float-left" title="System Contract"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../multi-signatures/" class="btn btn-neutral float-right" title="Account Permission Management">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/tronprotocol/documentation-en" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../system-contracts/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../multi-signatures/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
